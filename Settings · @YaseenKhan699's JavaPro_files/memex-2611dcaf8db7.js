"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["memex","ui_packages_chart-card_ChartCard_tsx"],{12104:(e,t,r)=>{let a,n,i,l,s;var o,d,u,c,m,p,f,h,g,y,x,b,v,w,j,C,I,S,k,T,N,_,R,P,D,E,A,M,L,F,Z,O=r(48055),V=r(82914),B=r(27876);r(11334);var $=r(8386),z=r(27233),W=r(30202),G=r(34576),U=r(52116),H=r(58081),q=r.t(H,2),K=r(89250),Q=r(79655),X=r(12599),Y=r(71893),J=r(38776);function ee(e,t){return Array.from((function e(t,r,a=[]){let n="string"==typeof r?[r]:r,i=function(t,r,a=[]){let n="string"==typeof r?[r]:r,i=function t(r,a,n=[]){if(0===a.length)return r;let i=a[0];return((0,J.Z)(null!=i,"Path must have at least one item"),1===a.length)?r.values.get(i)??null:t(e(r,i,n),a.slice(1),[...n,i])}(t,n);if(!i)return null;if(!ei(i))throw Error(`Command at path where command tree expected: ${[...a,...n].join(",")}`);return i}(t,n,a);if(!i)throw Error(`Command tree does not exist at path: ${[...a,...n].join(",")}`);return i})(e,t).values.entries())}function et(e,t=[]){return{description:e,values:t.reduce((e,t)=>(el(t)?e.set(t[0],et(t[1],t[2])):e.set(t[0],er(t[1],t[2],t[3])),e),new Map)}}function er(e,t,r){return{description:e,type:t,effect:r}}function ea(e,t){if(!el(t)){let r=er(t[1],t[2],t[3]);return es(e,t[0],r)}let[r,a,n]=t;return es(e,r,et(a,n))}function en(e,[t]){return function(e,t){let r=new Map(e.values);return r.delete(t),{...e,values:r}}(e,t)}function ei(e){return"values"in e}function el(e){return Array.isArray(e[2])}function es(e,t,r){let a=new Map(e.values);return a.set(t,r),{...e,values:a}}let eo=(0,H.createContext)(null);try{eo.displayName||(eo.displayName="StatelessContext")}catch{}var ed=r(10412);function eu(e,t){let r=ec(e[0]),a=ec(t[0]);return r&&a?Number(e[0])-Number(t[0]):r&&!a?1:!r&&a?-1:e[0].localeCompare(t[0])}function ec(e){return/^\d+$/.test(e)}let MemexCommandItem=class MemexCommandItem extends ed.ck{activate(e){ei(this.memexItem)?e.pushPage(this.staticItemsPage()):(this.memexItem.effect(),e.dismiss())}copy(e){}select(e){ei(this.memexItem)?e.pushPage(this.staticItemsPage()):e.autocomplete(this)}get path(){}buildCommandItems(){if(ei(this.memexItem))for(let[e,t]of ee(this.memexItem,[]).sort(eu))this.commandItems.push(new MemexCommandItem(t.description,e,t))}staticItemsPage(){return new ed.Z4(this.title,`memex-items-page-${this.memexKey}`,this.commandItems)}constructor(e,t,r){super({title:e,priority:1,group:"commands",hint:"Run command"}),this.commandItems=[],this.memexKey=t,this.memexItem=r,this.buildCommandItems()}};let MemexProvider=class MemexProvider extends ed.BX{clearCache(){}enabledFor(e){let t=">"===e.mode||""===e.mode,r="memex_project"===e.scope.type;return t&&r}async fetch(e,t){let r=[...this.commandItems];if(0!==e.text.trim().length){let t=[];for(let[e,r]of function* e(t,r=[]){for(let[a,n]of t.values.entries())r=[...r,a],yield[r,n],ei(n)&&(yield*e(n,r)),r=r.slice(0,-1)}(this.commandTree))ei(r)||t.push([e,r]);for(let[e,a]of t)r.push(new MemexCommandItem(a.description,e.join("-"),a));r=this.fuzzyFilter(r,e)}return{results:r}}buildCommandItems(){for(let[e,t]of ee(this.commandTree,[]).sort(eu))this.commandItems.push(new MemexCommandItem(t.description,e,t));for(let[e,t]of this.commandItems.entries())t.priority=this.commandItems.length-e}constructor(e){super(),this.id="memex-provider",this.hasCommands=!0,this.debounce=0,this.commandItems=[],this.commandTree=e,this.buildCommandItems()}};let em=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(et("root")),[a,n]=(0,H.useState)([]),[i,l]=(0,H.useState)([]);(0,H.useEffect)(()=>{if(0===i.length&&0===a.length)return;let e=t;e=a.reduce(en,e),r(e=i.reduce(ea,e));let s=i.length,o=a.length;l(e=>e.slice(s)),n(e=>e.slice(o))},[a,i,t]);let s=(0,H.useMemo)(()=>({registerCommands:e=>{l(t=>[...t,e])},deregisterCommands:e=>{n(t=>[...t,e])}}),[]);return(0,H.useEffect)(()=>{function e(){window.commandPalette?.registerProvider("memex-provider",new MemexProvider(t))}return window.commandPalette?e():document.addEventListener("command-palette-ready",e),()=>{document.removeEventListener("command-palette-ready",e)}},[t]),(0,O.jsx)(eo.Provider,{value:s,children:e})});try{em.displayName||(em.displayName="CommandProvider")}catch{}function ep(e,t){let r=(0,H.useContext)(eo);if(!r)throw Error("useCommands must be used within a <CommandProvider>");let{registerCommands:a,deregisterCommands:n}=r,i=(0,H.useMemo)(e,t);(0,H.useEffect)(()=>{if(i)return a(i),()=>n(i)},[i,n,a])}var ef=r(95346),eh=r(79600);let eg=()=>`${window.location.origin}/404`;function ey(){return(0,H.useEffect)(()=>{window.location.href=eg()},[]),null}let{baseRoute:ex}={baseRoute:function e(t){let r=`${t}`,a=`${t}/*`,n=`${r}/*`;return{path:t,pathWithChildPaths:a,fullPath:r,fullPathWithChildPaths:n,generatePath:e=>(0,X.Gn)(t,e),generateFullPath:e=>(0,X.Gn)(r,e),matchPath:e=>(0,X.LX)(t,e),matchFullPath:e=>(0,X.LX)(r,e),matchPathOrChildPaths:e=>(0,X.LX)(a,e),matchFullPathOrChildPaths:e=>(0,X.LX)(n,e),childRoute:r=>e(`${t}${r}`)}}("")},eb=ex.childRoute("/:ownerType/:ownerIdentifier/projects/:projectNumber"),ev=eb.childRoute("/views/:viewNumber"),ew=eb.childRoute("/workflows"),ej=ew.childRoute("/:workflowClientId"),eC=eb.childRoute("/settings"),eI=eC.childRoute("/fields/:fieldId"),eS=eC.childRoute("/access"),ek=eb.childRoute("/insights"),eT=ek.childRoute("/:insightNumber"),eN=eb.childRoute("/archive"),e_={PROJECT_ROUTE:eb,PROJECT_VIEW_ROUTE:ev,PROJECT_WORKFLOWS_ROUTE:ew,PROJECT_WORKFLOW_CLIENT_ID_ROUTE:ej,PROJECT_SETTINGS_ROUTE:eC,PROJECT_SETTINGS_FIELD_ROUTE:eI,PROJECT_INSIGHTS_ROUTE:ek,PROJECT_INSIGHTS_NUMBER_ROUTE:eT,PROJECT_SETTINGS_ACCESS_ROUTE:eS,PROJECT_ARCHIVE_ROUTE:eN},eR=e=>Object.values(e_).find(t=>t.matchPath(e))??null;try{eg.displayName||(eg.displayName="ORIGIN_404")}catch{}try{ey.displayName||(ey.displayName="Origin404Redirect")}catch{}try{eb.displayName||(eb.displayName="PROJECT_ROUTE")}catch{}try{ev.displayName||(ev.displayName="PROJECT_VIEW_ROUTE")}catch{}try{ew.displayName||(ew.displayName="PROJECT_WORKFLOWS_ROUTE")}catch{}try{ej.displayName||(ej.displayName="PROJECT_WORKFLOW_CLIENT_ID_ROUTE")}catch{}try{eC.displayName||(eC.displayName="PROJECT_SETTINGS_ROUTE")}catch{}try{eI.displayName||(eI.displayName="PROJECT_SETTINGS_FIELD_ROUTE")}catch{}try{eS.displayName||(eS.displayName="PROJECT_SETTINGS_ACCESS_ROUTE")}catch{}try{ek.displayName||(ek.displayName="PROJECT_INSIGHTS_ROUTE")}catch{}try{eT.displayName||(eT.displayName="PROJECT_INSIGHTS_NUMBER_ROUTE")}catch{}try{eN.displayName||(eN.displayName="PROJECT_ARCHIVE_ROUTE")}catch{}function eP(e){let t=document.getElementById(e);if(t&&t.textContent)try{return JSON.parse(t.textContent)}catch{return}}var eD=r(21795),eE=r(82497);let eA={Assignees:"assignees",Labels:"labels",LinkedPullRequests:"linkedPullRequests",Milestone:"milestone",ParentIssue:"parentIssue",Repository:"repository",Reviewers:"reviewers",SubIssuesProgress:"subIssuesProgress",Title:"title",Tracks:"tracks",TrackedBy:"trackedBy",Text:"text",Number:"number",Date:"date",SingleSelect:"singleSelect",Iteration:"iteration",IssueType:"issueType"},eM={Assignees:"Assignees",Labels:"Labels",LinkedPullRequests:"Linked pull requests",Milestone:"Milestone",ParentIssue:"Parent issue",Repository:"Repository",Reviewers:"Reviewers",Status:"Status",SubIssuesProgress:"Sub-issues progress",Title:"Title",Tracks:"Tracks",TrackedBy:"Tracked by",IssueType:"Type"},eL={DraftIssue:"DraftIssue",Issue:"Issue",PullRequest:"PullRequest",RedactedItem:"RedactedItem"};var eF=r(85529),eZ=r(98833),eO=r(42483),eV=r(15173),eB=r(97011);let e$={success:"success",default:"default",warning:"warning",error:"error"},ez=Y.ZP.button.withConfig({displayName:"toast__StyledButton",componentId:"sc-b54165b5-0"})(["padding:var(--base-size-8);margin:var(--base-size-8) 10px var(--base-size-8) 0px;border-radius:3px;color:",";border:0;background:transparent;outline:none;cursor:pointer;&:focus{box-shadow:0 0 0 2px ",";}"],(0,U.U2)("colors.fg.onEmphasis"),(0,U.U2)("colors.accent.fg")),eW=e=>(0,O.jsx)(ez,{"aria-label":"Close",...e,children:(0,O.jsx)(eZ.Z,{icon:eF.XIcon})}),eG={[e$.default]:"accent.emphasis",[e$.success]:"success.emphasis",[e$.warning]:"attention.emphasis",[e$.error]:"danger.emphasis"},eU=(0,O.jsx)(eZ.Z,{icon:eF.InfoIcon,sx:{color:"fg.onEmphasis"}}),eH=(0,O.jsx)(eZ.Z,{icon:eF.CheckCircleIcon,sx:{color:"fg.onEmphasis"}}),eq=(0,O.jsx)(eZ.Z,{icon:eF.AlertIcon,sx:{color:"fg.onEmphasis"}}),eK=(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,sx:{color:"fg.onEmphasis"}}),eQ={[e$.default]:eU,[e$.success]:eH,[e$.warning]:eq,[e$.error]:eK},eX=(0,Y.F4)(["from{transform:translateX(-400px);}to{transform:translateX(0);}"]),eY=(0,Y.F4)(["from{transform:translateX(0);}to{transform:translateX(-460px);}"]),eJ=(0,Y.ZP)(eO.Z).withConfig({displayName:"toast__IconContainer",componentId:"sc-b54165b5-1"})(["flex-shrink:0;padding:",";"],(0,U.U2)("space.3")),e0=Y.ZP.div.withConfig({displayName:"toast__StyledToast",componentId:"sc-b54165b5-2"})(["position:fixed;display:flex;gap:",";box-shadow:",";background-color:",";border-radius:",";align-items:stretch;box-sizing:border-box;overflow:hidden;max-width:400px;bottom:66px;left:var(--base-size-12);z-index:99;animation:"," ","ms cubic-bezier(0.25,1,0.5,1);&.toast-leave{animation:"," ","ms cubic-bezier(0.5,0,0.75,0) forwards;}"],(0,U.U2)("space.2"),(0,U.U2)("shadows.shadow.large"),(0,U.U2)("colors.neutral.emphasisPlus"),(0,U.U2)("radii.2"),eX,300,eY,300),e1=Y.ZP.button.withConfig({displayName:"toast__ToastAction",componentId:"sc-b54165b5-3"})(["background-color:transparent;border:0;font-weight:",";margin-left:",";margin-top:",";margin-bottom:",";color:",";font-size:",";font-family:inherit;outline:none;padding:0;white-space:nowrap;&:hover{text-decoration:underline;}&:focus{border-color:transparent;box-shadow:0 0 0 3px ",";}",""],(0,U.U2)("fontWeights.bold"),(0,U.U2)("space.2"),(0,U.U2)("space.3"),(0,U.U2)("space.3"),(0,U.U2)("colors.fg.onEmphasis"),(0,U.U2)("fontSizes.1"),(0,U.U2)("colors.border.default"),eV.Z),e2=e=>{let{toast:t,startRemovingToast:r}=e,a=(0,H.useRef)(null);(0,H.useEffect)(()=>{let e=e=>{a.current&&e.ctrlKey&&"t"===e.key&&(a.current.focus(),t.timeout?.cancel())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]);let n=t.icon?(0,O.jsx)(eZ.Z,{icon:t.icon,sx:{color:"fg.onEmphasis",m:"auto"}}):eQ[t.type],i=(0,H.useCallback)(()=>{t.action?.handleClick(),r(t.id)},[t,r]);return(0,O.jsxs)(e0,{role:"status",className:t.className,...(0,ef.f)("toast"),children:[(0,O.jsx)(eJ,{sx:{bg:eG[t.type],display:"flex",alignItems:"center"},children:n}),(0,O.jsx)(eB.Z,{sx:{fontSize:1,mx:2,my:3,color:"fg.onEmphasis"},children:t.message}),t.action&&(0,O.jsx)(e1,{ref:a,onClick:i,...(0,ef.f)("toast-action"),children:t.action.text}),(0,O.jsx)(eW,{onClick:()=>r(t.id)})]})};try{eW.displayName||(eW.displayName="ToastCloseButton")}catch{}try{eJ.displayName||(eJ.displayName="IconContainer")}catch{}try{e2.displayName||(e2.displayName="Toast")}catch{}var e5=r(8504);let e3=(e,t)=>{let r=e4(e);return(0,H.useMemo)(()=>r(t),[r,t])},e4=e=>{let t=(0,H.useRef)([]);(0,H.useEffect)(()=>()=>{for(let e of t.current)e.cancel()},[]);let r=(0,e5.Z)(e);return(0,H.useCallback)(e=>(...a)=>{let n=setTimeout(()=>r.current(...a),e),i={cancel:()=>clearTimeout(n)};return t.current.push(i),i},[r])},e8=({autoDismiss:e=!0,timeout:t=15e3}={})=>{let[r,a]=(0,H.useState)([]),n=(0,H.useRef)(0),i=()=>n.current++,l=(0,H.useCallback)(e=>r.find(t=>t.id===e),[r]),s=e3(a,300),o=(0,H.useCallback)(e=>{let t=l(e);t&&(t.timeout?.cancel(),a(e=>e.filter(e=>e.id!==t.id)),t.onDismiss&&t.onDismiss())},[l,a]),d=e3(o,300),u=(0,H.useCallback)(e=>{a(t=>t.map(t=>t.id===e?{...t,className:"toast-leave"}:t)),d(e)},[d,a]),c=e3(u,t);return{addToast:(0,H.useCallback)(t=>{let n;let l=i();e&&!t.keepAlive&&(n=c(l));let o={id:l,timeout:n,...t},d=r[0];return d?(u(d.id),s([o])):a([o]),l},[e,c,s,u,r]),toasts:r,removeToast:o,startRemovingToast:u}},e6=(0,H.createContext)(null),e7=(0,H.memo)(function(e){let{autoDismiss:t,timeout:r,children:a}=e,{addToast:n,removeToast:i,toasts:l,...s}=e8({autoDismiss:t,timeout:r}),o=(0,H.useMemo)(()=>({addToast:n,removeToast:i}),[n,i]);return(0,O.jsxs)(e6.Provider,{value:o,children:[a,l&&l.map(e=>(0,O.jsx)(e2,{toast:e,removeToast:i,...s},e.id))]})});try{e6.displayName||(e6.displayName="ToastContext")}catch{}try{e7.displayName||(e7.displayName="ToastContainer")}catch{}function e9(){let e=(0,H.useContext)(e6);if(!e)throw Error("useToasts must be used within a ToastContext.Provider");return e}var te=r(51505),tt=r(70296),tr=r(1349),ta=r(87509),tn=r(37557),ti=r(42700),tl=r(27856),ts=r.n(tl);let to="@today",td=/^([1-9][0-9]*)days?$/,tu=/^<@today-([1-9][0-9]*)(d|w|m)$/,tc=/^\s+/,tm=/^,/,tp=/^>/,tf=/^</,th=/^>=/,tg=/^<=/,ty=/^\.\./,tx=/^-/,tb=/^\+/,tv=/^:/,tw=/^'/,tj=/^[^']*/,tC=/^"/,tI=/^[^"]*/,tS=/^-?[A-Za-z0-9_][A-Za-z0-9_-]*/,tk=/^([A-Za-z0-9_=!@#$%^*]+)([A-Za-z0-9_\-=!@#$%^*+]*)/,tT=/^@(today|next|previous|current)/,tN=/^(0|[1-9][0-9]*)/,t_=/^[^ ]+/,tR=(e,t,r,a)=>{let n=a>0?r.substring(a):r,i=n.match(e);if(null===i)throw Error(`Tried to emit a '${t}' token, but the pattern (${e.toString()}) did not match. Did you check if the pattern has a token before trying to emit it?

Text: ${n}`);let l={start:a,end:i[0].length-1+a},s={kind:t,text:i[0],location:l};return{token:s,remainder:n.replace(e,""),length:s.text.length}};function tP(e){let t=[],r=0,a=e=>{"location"in e?(t.push(e),r=e.location.end+1):(t.push({...e,location:{start:r,end:r+e.text.length-1}}),r+=e.text.length)},n=(t,n)=>{let{token:i}=tR(t,n,e,r);return a(i),i},i=(t,a)=>t.test(a??e.substring(r));for(;r<e.length;)if(i(tc))n(tc,"source.whitespace");else if(i(tx))n(tx,"keyword.operator.minus");else if(i(tS)){let{token:t,remainder:l}=tR(tS,"unknown",e,r);if(i(tv,l)?a({...t,kind:"variable"}):a({...t,kind:"string"}),i(tv))for(n(tv,"keyword.operator.separator"),i(th)?n(th,"keyword.operator.comparison"):i(tp)?n(tp,"keyword.operator.comparison"):i(tg)?n(tg,"keyword.operator.comparison"):i(tf)&&n(tf,"keyword.operator.comparison");(i(tk)||i(tT))&&!i(tc);){if(i(tT)){let t=n(tT,"string");if(i(tb))n(tb,"keyword.operator.plus"),i(tN)&&n(tN,"string");else if(i(tx))n(tx,"keyword.operator.minus"),i(tN)&&n(tN,"string");else if(i(tk)){let{token:a}=tR(tk,"string",e,r);t.location.end+=a.text.length,t.text+=a.text,r+=a.text.length}}else i(tk)&&n(tk,"string");i(ty)?n(ty,"keyword.operator.range"):i(tm)&&n(tm,"punctuation.separator")}}else if(i(tw)||i(tC)){let[t,a]=i(tw)?[tw,tj]:[tC,tI];for(n(t,"punctuation.definition.string.begin");!i(t)&&r<e.length;)i(a)&&n(a,"string");i(t)&&n(t,"punctuation.definition.string.end")}else if(i(tv))n(tv,"keyword.operator.separator");else if(i(tm))n(tm,"punctuation.separator");else if(i(ty))n(ty,"keyword.operator.range");else if(i(tb))n(tb,"keyword.operator.plus");else if(i(tT)){let t=n(tT,"string");if(i(tb))n(tb,"keyword.operator.plus"),i(tN)&&n(tN,"string");else if(i(tx))n(tx,"keyword.operator.minus"),i(tN)&&n(tN,"string");else if(i(tk)){let{token:a}=tR(tk,"string",e,r);t.location.end+=a.text.length,t.text+=a.text,r+=a.text.length}}else i(tk)?n(tk,"string"):i(t_)&&n(t_,"unknown");return t}let tD=(e,t)=>e.filter(e=>e.location.end<=t),tE=(e,t)=>e.filter(e=>e.location.start>=t),tA=(e,t)=>{let{kind:r,start:a,end:n}=t,i="number"==typeof a?tD(e,a):tD(e,a.location.start),l=Array.isArray(r)?r:[r];for(let e=i.length-1;e>=0;e--){let t=i[e];if((0,J.Z)(null!=t,"Token must exist"),l.some(e=>t.kind.startsWith(e)))return t;if(n){if("number"==typeof n){if(t.location.end>=n)break}else if(Array.isArray(n)||"string"==typeof n){if((Array.isArray(n)?n:[n]).includes(t.kind))break}else if(t.location.end>=n.location.start)break}}return null},tM=(e,t)=>{let{kind:r,start:a,end:n}=t,i="number"==typeof a?tE(e,a):tE(e,a.location.start),l=Array.isArray(r)?r:[r];for(let e of i){if(l.some(t=>e.kind.startsWith(t)))return e;if(n){if("number"==typeof n){if(e.location.start>=n)break}else if(Array.isArray(n)||"string"==typeof n){if((Array.isArray(n)?n:[n]).includes(e.kind))break}else if(e.location.start>=n.location.start)break}}return null};function tL(e,t){let{kinds:r,start:a=0}=t,n=[],i="number"==typeof a?a:a.location.end;for(let t of r){let r=n[n.length-1],a=tE(e,r?r.location.end+1:i)[0];if(!a?.kind.startsWith(t))return null;n.push(a)}return n}function tF(e){return"object"==typeof e&&!!e&&"status"in e&&"message"in e&&"string"==typeof e.message}function tZ(e){if(e)switch(e){case eM.Assignees:case eM.Labels:case eM.LinkedPullRequests:case eM.Milestone:case eM.Repository:case eM.Reviewers:case eM.Tracks:case eM.TrackedBy:case eM.Title:case eM.Status:case eM.IssueType:case eM.ParentIssue:case eM.SubIssuesProgress:return e;default:{let t=parseInt(e,10);if(isNaN(t))return;return t}}}function tO(e){return Number(e.replace(/,/g,""))}function tV(e,t="yyyy-MM-dd"){let r=tP(e),a=tM(r,{kind:"string",start:0});if(!a)return null;if(a.text===to){let e=(0,tr.I)(),t=tL(r,{kinds:["keyword.operator","string"],start:a});if(!t&&r.length>1)return null;if(t){let[r,a]=t;(0,J.Z)(null!=a,"offset tokens must define offsetValue"),(0,J.Z)(null!=r,"offset tokens must define offsetOperator");let n=tO(a.text)*("+"===r.text?1:-1);return isNaN(n)?null:(0,ta.E)(e,n)}return e}let n=(0,tn.Qc)(a.text,t,new Date);return(0,ti.J)(n)?n:null}function tB(e){if("object"!=typeof e||!e)return null;if("raw"in e&&"string"==typeof e.raw&&"html"in e&&"string"==typeof e.html){let{raw:t,html:r}=e;return{raw:t,html:r}}return null}function t$(e){return"object"==typeof e&&e&&"value"in e&&"number"==typeof e.value?{value:e.value}:null}function tz(e){return"object"==typeof e&&e&&"id"in e&&"string"==typeof e.id?{id:e.id}:null}function tW(e){return"number"==typeof e}let tG=/(\d{4}-[01]\d-[0-3]\d)/;function tU(e){return"object"==typeof e&&e?tq(e):null}function tH(e){let t=tU(e);if(t&&t.value)return tX(t.value,{timeZone:"UTC"})}function tq(e){if("object"==typeof e.value)return e;let t=tK(e.value);return t?{value:t}:null}function tK(e){return(e=e.slice(0,10)).match(tG)?new Date(`${e}T00:00:00Z`):null}let tQ={year:"numeric",month:"short",day:"numeric",timeZone:"UTC"};function tX(e,t={}){return e.toLocaleDateString("en-us",{...tQ,...t})}function tY(e){return e.toISOString().slice(0,10)}function tJ(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.raw}function t0(e){if(!e)return"";let{title:t}=e.value;return"string"==typeof t?t:t.html}function t1(e){return e&&(e.contentType===eL.Issue||e.contentType===eL.PullRequest)?e.value.number:void 0}function t2(e){if(!e)return;if(e?.percent)return e.percent/100;let{total:t,completed:r}=e;if(0!==t)return r/t}function t5(e){if(e?.percent!==void 0)return e.percent;let t=t2(e);return t?Math.round(100*t):0}function t3(e){return e?(0,tl.sanitize)(e,{ALLOWED_TAGS:[]}):e}function t4(e){return"object"==typeof e&&"raw"in e}function t8(e){return"object"==typeof e&&"value"in e&&"number"==typeof e.value}function t6(e){return"object"==typeof e&&"value"in e&&"string"==typeof e.value}function t7(e){return"object"==typeof e&&"id"in e}function t9(e){return e.toLowerCase().replace(/^(.)/,e=>e.toUpperCase())}function re(e,t="and"){if(e.length<=2)return e.join(` ${t} `);{let r=e.pop();return e.push(`${t} ${r}`),e.join(", ")}}function rt(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let a of r)if(!Object.prototype.hasOwnProperty.call(t,a)||e[a]!==t[a])return!1;return!0}let rr="single-select-option",ra=e=>!!e&&!!e.match(rr),rn=(e,t,r)=>{if("GRAY"===t.color&&r.some(e=>"GRAY"!==e.color)){let e=tt.Yf.slice(1),r=e[Math.floor(Math.random()*e.length)]||"PURPLE";t={...t,color:r}}return{...t,id:`${rr}-${e}`}},ri=e=>tY(new Date)===e;function rl(e){return!!e}function rs(e){return e.filter(rl)}function ro(e){return void 0!==e}let rd=RegExp('<img.+class=".*\\bemoji\\b.*".+title="(?<emoji>:[^:]+:)".+>\\s+(?<text>.*)|<g-emoji.+>(?<gemoji>.+)<\\/g-emoji>\\s+(?<gtext>.+)',"i"),ru=e=>{let t=e.match(rd),{emoji:r,text:a,gemoji:n,gtext:i}=t?.groups??{};return r&&a?`${r} ${a}`:n&&i?`${n} ${i}`:e};function rc(e){return(0,te.eE)()?e.metaKey:e.ctrlKey}function rm(e,t){let r=-1;for(;!0===e.test(t);)r=e.lastIndex;return r}function rp(e,t){let r,a;for(;null!==(r=e.exec(t));)a=r;return a}let rf=e=>{e.preventDefault()};function rh(e,t){return void 0!==e.position||void 0!==t.position?(e.position??-1)-(t.position??-1):e.databaseId-t.databaseId}function rg(e,t,r){return[t>0?r[t-1]:void 0,e,t<r.length-1?r[t+1]:void 0]}function ry(e,t){let{x:r,y:a}=t,{left:n,top:i,right:l,bottom:s}=e.getBoundingClientRect();return r>=n&&r<=l&&a>=i&&a<=s}var rx=r(63595);let rb=(e,t="EEE, MMM d")=>{let r=e.toISOString().slice(0,-1),a=(0,rx.D)(r);return(0,eE.WU)(a,t)},rv=e=>{let t=new Date(new Date(e).setHours(0,0,0,0));return new Date(t.getTime()-6e4*t.getTimezoneOffset())},rw=(e,t,r="EEE, MMM d")=>{let a=e.getUTCFullYear()!==t.getUTCFullYear(),n=rb(e,r),i=rb(t,a?`${r} yyyy`:r);return n===i?n:`${n} - ${i}`};function rj([e,t]){return e?t?e<=t?[e,t]:[t,e]:[e,e]:[t,t]}let rC=(e,t,r)=>1===e?t:r,rI={betaSignupSuccessMessage:"This project has been added to the waitlist. Thank you for your interest!",betaOptoutInformation:"If the project exceeds 1200 items and is opted out, only the initial 1200 items will be visible. To restore usability, archive items to stay below the 1200 limit.",betaOptoutConfirmation:{title:"Opt out of unlimited project items?",content:"Are you sure you want to opt out of unlimited project items? This cannot be undone.",cancelButtonContent:"Cancel",confirmButtonContent:"Opt out"},betaOptoutSuccessMessage:"You have successfully opted out of the beta program. Note that it may take up to 1 minute for the changes to take effect.",betaOptoutFailureMessage:"Failed to opt out of the beta program. Please try again or contact support if you continue to have problems.",addColumnNameValue:e=>`Add ${e.toLowerCase()}\u{2026}`,addItem:"Add item",archiveGroupItemsConfirmationMessage:e=>`Are you sure you want to archive ${rC(e,"this item",`${e} items`)}?`,deleteGroupItemsConfirmationMessage:e=>`Are you sure you want to delete ${rC(e,"this item",`${e} items`)} from the project?`,archiveGroupItemsConfirmationTitle:"Archive all items?",deleteGroupItemsConfirmationTitle:"Delete all items?",cannotAddItemsWhenGroupByMilestone:"Cannot add items when grouped by milestone",cannotAddItemsWhenGroupByRepository:"Cannot add items when grouped by repository",cannotAddItemsWhenGroupByIssueType:"Cannot add items when grouped by type",cannotAddType:"Cannot add type",cannotEditTitle:"Update permissions",cannotEditItemContent:"You can't edit this item because it belongs to a repository that you don't have write-access to.",confirmDialog:"Got it!",iterationLabel:{current:"Current",planned:"Planned",completed:"Completed",break:"Break"},cannotReorderForSortMessage:"Cannot reorder items between sorted values",cannotReorderForSortAction:"Remove sorting",changesSaved:"Changes saved",columnLimitExceeded:"Column limit is too large, must be less than 1,000,000.",createNewItemOrAddExistingIssueAriaLabel:"Create new item or add existing item",dateEditor:"Date editor",defaultArchiveConfirmationMessage:(e,t)=>`Are you sure you want to archive ${e?`these ${t} items`:"this item"}?`,defaultArchiveConfirmationTitle:e=>`Archive item${e?"s":""}?`,deleteFieldDialogTitle:"Delete field?",deleteField:e=>`This will delete the field \u{201C}${e}\u{201D}`,draftConvertPromptDescription:"Convert to issue to edit this cell",draftConvertPromptTitle:"Convert to issue",duplicateView:({isDirty:e})=>e?"Save changes to new view":"Duplicate view",edit:"Edit",editTitle:"Edit title",emptyColumnNameValue:{number:"Enter a number\u2026",text:"Enter text\u2026",date:"Enter a date\u2026",iteration:"Choose an iteration\u2026",singleSelect:"Choose an option\u2026",linkedPullRequest:"No linked pull requests"},excludeSuggestion:"Exclude",fieldMustBeAnInteger:"This field must be an integer",fieldMustBePositiveOrZero:"This field must be positive or 0.",filterByKeyboardOrByField:"Filter by keyword or by field",genericErrorMessage:"Sorry, something went wrong",genericFormErrorMessage:"This form has errors",groupHeaderMenu:(e,t)=>`Actions for ${t?"column":"group"}: ${e}`,invalidFieldValues:({name:e,value:t,fields:r})=>`Invalid \`${e}\`: ${t}. ${r} are acceptable values for \`${e}\``,issue:"issue",sidePanelRegionNameLabel:"Side panel",sidePanelProjectInfoLabel:"Project information",sidePanelBulkAddLabel:"Add items to project",sidePanelItemNotSupported:"Pull requests are not currently supported in the side panel.",sidePanelItemNotFound:"The item is not in the project, or you don't have access to view it.",sidePanelCloseConfirmation:{title:"Discard changes?",content:"You have unsaved changes. Are you sure you want to discard them?",cancelButtonContent:"Keep editing",confirmButtonContent:"Close and discard"},sidePanelPinLabel:"Pin side panel",sidePanelUnpinLabel:"Unpin side panel",sidePanelToolbarLabel:"Side panel controls",issueButtonLabel:{closeIssue:"Close issue",reopenIssue:"Reopen",closeWithComment:"Close with comment",reopenWithComment:"Reopen and comment",reopenIssueLong:"Reopen issue",closeAsCompleted:"Close as completed",closeAsCompletedDescription:"Done, closed, fixed, resolved",closeAsNotPlanned:"Close as not planned",closeAsNotPlannedDescription:"Won\u2019t fix, can\u2019t repro, duplicate, stale"},issueSideButtonMoreOptionsLabel:"More options",iterationCustomModelError:"Iteration editor requires a custom model",iterationDurationQtyLow:e=>`Iteration length must be ${e} or more`,iterationDurationQtyHigh:e=>`Iteration length must be ${e} or less`,iterationDurationLabel:"Duration",iterationNotFound:"Iteration not found",iterationStartDateLabel:"Starts on",jumpToBottom:"Jump to bottom",joinBeta:"Join beta",joinWaitlist:"Join waitlist",killSwitchEnabledToastMessage:"Unlimited items beta temporarily disabled for server maintenance. Please refresh the page.",killSwitchEnabledBanner:"Note: The unlimited project items beta is temporarily disabled for server maintenance. Rest assured, no data will be lost during this time. Please refresh your browser after a few minutes to regain full functionality.",mwlReEnabledBanner:"The unlimited project items beta has been re-enabled. Please refresh the page.",killSwitchDisabledToastMessage:"Unlimited items beta has been re-enabled. Please refresh the page.",newField:"New Field",newItemAddedToBottomOfColumn:"The new item has been added to the bottom of the column.",newItemAddedToBottomOfRoadmap:"The new item has been added to the bottom of the roadmap.",newItemAddedToBottomOfTable:"The new item has been added to the bottom of the table.",newItemFilterWarning:"The new item is hidden by this view's filters.",viewItem:"Open item",newItemFindIssuePlaceholder:e=>e?"Search issues and pull requests, create a new issue, or add multiple items":"Search issues and pull requests, or add multiple items",newItemPlaceholder:"Start typing to create a draft, or type # to select a repository",newItemPlaceholderAriaLabel:"Start typing to create a draft, or type hashtag to select a repository",newIterationField:e=>`Iteration${e}`,newOptionsCount:"New options count",noPermissionEmptyColumnValue:e=>`No ${e}`,noDescriptionProvided:"No description provided",noProjectLimitWaitlistBanner:"This project is nearing the 1,200 item limit. Join the waitlist for the beta to unlock unlimited items for this project.",noProjectLimitWaitlistStaffshipBanner:"Would you like to join the beta for unlimited items for this project?",noneYet:"None yet",hasSuggestion:"Has",noSuggestion:"No",numberEditor:"Number editor",projectNameRequired:"Project name is required.",projectSettingsSaved:"Project settings saved successfully",pullRequest:"pull request",repoArchivedErrorMessage:"You can't edit this field because this repository is archived",repoIsEmpty:"This repository is either empty or all items were already added to this project.",repoPickerFilterPlaceholder:"Search repositories",requiredFieldErrorMessage:"Field name is required.",requiresCustomColumn:"requires a custom column",reviewersCount:e=>`${e} reviewer${e>1?"s":""}`,progressCount:({percent:e,total:t})=>`${e}% of ${t}`,progressPercentCount:e=>`${e}% completed`,noItemsInSearchResult:"We couldn't find any items matching that search query.",singleSelectCustomModelError:"Single select editor requires a custom model",singleSelectOptionLimitWarning:e=>`Maximum of ${e} options reached`,clearFilter:"Clear filter",discardChanges:"Discard",saveChanges:"Save",cancelChanges:"Cancel",saveToNewChart:"Save to new chart",selectRepo:"Select repository",set:"Set",reset:"Reset",selectionMaximumExceeded:e=>`More than ${e} cells are selected. Deselect some cells to perform bulk edits.`,sortBy:"Sort by",statusFieldEmptyError:"Error: At least one valid option is required for the status field",sortDatesAscending:"Ascending order: oldest...newest",sortDatesDescending:"Descending order: newest...oldest",sortNumbersAscending:"Ascending order: 123...",sortNumbersDescending:"Descending order: ...321",sortSingleSelectAscending:"Ascending order: first...last",sortSingleSelectDescending:"Descending order: last...first",sortStringsAscending:"Ascending order: A...Z",sortStringsDescending:"Descending order: Z...A",tableHeaderContextMenu:{selectColumn:"Select column",sortAscending:"Sort ascending",sortAscendingActive:"Sorted ascending",sortDescending:"Sort descending",sortDescendingActive:"Sorted descending",filterValues:"Filter by values\u2026",filterByType:"Filter by type or state\u2026",groupByValues:"Group by values",groupByActive:"Grouped by field",sliceByValues:"Slice by values",hideField:"Hide field",fieldSettings:"Field settings\u2026"},textEditor:"Text editor",titleCannotBeBlank:"Title cannot be blank",titleContainsReservedColonCharacter:"Field name can't contain colons",titleHasAlreadyBeenTaken:"This field name has already been taken",titleIsReserved:"This field name is a reserved word",unableToAssignUsersToConvertedIssue:e=>`Unable to assign the following users to the converted issue: ${e.join(", ")}`,unableToPasteLabelsBetweensRepos:"Labels can only be copied within the same repository",unableToPasteAssigneesBetweensRepos:"Assignees can only be copied within the same repository",unableToPasteMilestonesBetweensRepos:"Milestones can only be copied within the same repository",unableToPasteLabelsOnDraftIssue:"Labels cannot be applied to draft issues",unableToPasteMilestonesOnDraftIssue:"Milestones cannot be applied to draft issues",unableToPasteIssueTypesOnDraftIssue:"Issue types cannot be applied to draft issues",unableToPasteIssueTypesOnPullRequest:"Issue types cannot be applied to pull requests",unableToPasteParentIssueOnDraftIssue:"Parent issues cannot be applied to draft issues",unableToPasteParentIssueOnPullRequest:"Parent issues cannot be applied to pull requests",unableToPasteMismatchedDataTypes:"Cannot paste data of different types",updateColumnOptionsFailed:"Column options failed to update.",forbiddenErrorMessage:"You don't have permission to edit this field.",undefined:"undefined",unsortBy:"Unsort by",untitledProject:"Untitled project",untitledUserProject:e=>`@${e}'s untitled project`,viewNameRequired:"View name cannot be empty",removeTitle:"Remove",resultCount:e=>`${e} result${1===e?"":"s"}.`,itemType:e=>{switch(e){case eL.Issue:return"Issue";case eL.PullRequest:return"Pull request";case eL.DraftIssue:return"Draft issue";case eL.RedactedItem:return"Unknown item"}},dismissNoticeError:"Could not dismiss notice. Please try again."},rS={updateItem:"update item",updateItems:"update items",delete:"delete",paste:"paste",fillCells:"fill cells",archive:e=>rC(e,"archive item","archive items"),moveItem:"move item"},rk={item:(e,t)=>`${t} \xb7 ${e}`,view:(e,t)=>t?`${t} \xb7 ${e}`:e,archive:e=>`Archive \xb7 ${e}`,settings:(e,t)=>t?`${t} \xb7 Settings \xb7 ${e}`:`Settings \xb7 ${e}`,workflows:e=>`Workflows \xb7 ${e}`,insights:e=>`Insights \xb7 ${e}`},rT={insightsButton:"Insights",projectDetailsButton:"Project details",viewMoreOptions:"View more options"},rN={closed:"Closed",noDueDate:"No due date",addedUnsupportedItemToast:"Drafts can\u2019t be added with a milestone. Item was added to No milestone group",pastDueBy:e=>`Past due by ${(0,eD.Q)(e)}`,dueOn:e=>`Due by ${(0,eE.WU)(e,"MMMM d, yyyy")}`},r_={invalidFilterQuotes:"Invalid filter: Unmatched quotation mark",updatedValueErrorMessage:"Supported format is <@today-X, where X is a number and unit. Unit can be one of d,w or m ex: 7d",lastUpdatedValueErrorMessage:"Supported format is XXdays (except 0days)",unknownFieldFilter:e=>`Invalid filter: Unknown field name "${e}"`,noIterationMatch:(e,t)=>`Invalid value: "${e}" doesn't match any iterations in the "${t}" field`,noOptionsMatch:(e,t)=>`Invalid value: "${e}" doesn't match options for the "${t}" field`,invalidNumberValue:e=>`Invalid value: "${e}" is not a number`,invalidDateValue:e=>`Invalid value: "${e}" is not a valid date (must be formatted YYYY-MM-DD)'`,invalidQualifier:(e,t)=>`Invalid value: "${e.join(", ")}" does not match the supported values "${re(Object.values(t),"or")}"`},rR=e=>e===eA.SingleSelect?["option","options"]:e===eA.Iteration?["iteration","iterations"]:["value","values"],rP={deleteProjectWarning:"Unexpected bad things will happen if you don\u2019t read this!",deleteProjectTitle:"Are you absolutely sure?",deleteProjectConfirmation:"I understand the consequences, delete this project",deleteProjectInputLabel:"Type in the name of the project to confirm that you want to delete this project.",noIterationsTitle:"You're out of iterations.",noIterationsDescription:'Create an iteration using the "+ Add iteration" button above.',noCompletedIterationsTitle:"No completed iterations.",noCompletedIterationsDescription:"Iterations will automatically move here over time.",organizationOwnedProjectVisibilityRestriction:"Only organization owners can change project visibility.",projectIsPublic:"This project is currently public.",projectIsPrivate:"This project is currently private.",projectIsInternal:"This project is currently internal to your enterprise.",unselectCollaborator:e=>`Unselect ${e}`,selectCollaborator:e=>`Select ${e}`,userOwnedProjectVisibilityRestriction:"Only admins can change project visibility.",willPushActiveIterations:e=>`${e} active ${1===e?"iteration":"iterations"} will also be pushed forward.`,deleteValuesTitle:(e,t)=>`Delete ${rC(t,rR(e)[0],`${t} ${rR(e)[1]}`)}?`,deleteValuesIntro:(e,t,r)=>`This will permanently delete ${rC(r,`this ${rR(e)[0]}`,`these ${rR(e)[1]}`)} from the "${t}" field.`,deleteValuesAffectedItemsWarning:(e,t,r)=>`The ${rC(t,...rR(e))} will be permanently deleted from ${r} ${rC(r,"item","items")} in this project.`,deleteIterationValuesIntro:(e,t)=>`This will permanently delete ${rC(t,"this iteration value","these iteration values")} from the "${e}" field.`,deleteIterationValuesAffectedItemsWarning:(e,t)=>`${rC(e,"This iteration value","These iteration values")} will be removed from ${t} ${rC(t,"item","items")} in this project.`,cannotBeUndone:"This cannot be undone."},rD={Repository:{Alerts:{NeedsConversion:{title:rI.draftConvertPromptTitle,content:"Convert this draft to an issue to add it to this repository",confirmButtonContent:rI.confirmDialog},CannotTransferPulls:{title:"Unable to transfer pull request",content:"Pull requests cannot be moved between repositories.",confirmButtonContent:rI.confirmDialog},IssueNeedsTransfer:{title:"Transfer issue",confirmButtonContent:rI.confirmDialog}}},Milestone:{Alerts:{NeedsConversion:{title:rI.draftConvertPromptTitle,content:"Drafts can\u2019t be added to milestones. Convert this draft to an issue to add it to a milestone.",confirmButtonContent:rI.confirmDialog},NeedsTransfer:{title:"New milestone required",confirmButtonContent:rI.confirmDialog}}},IssueType:{Alerts:{NeedsConversion:{title:rI.cannotAddType,content:"Convert this draft to an issue to add an issue type.",confirmButtonContent:rI.confirmDialog},CannotAssignPulls:{title:rI.cannotAddType,content:"Pull requests cannot have an issue type.",confirmButtonContent:rI.confirmDialog},NoTypesForRepo:{title:rI.cannotAddType,content:"Issue types are excluded from this repository.",confirmButtonContent:rI.confirmDialog},NeedsTransfer:{title:rI.cannotAddType,confirmButtonContent:rI.confirmDialog}}}},rE={editWorkflow:"Edit",saveWorkflow:"Save and turn on workflow",discardWorkflow:"Discard",deleteWorkflow:"Delete",readOnlyLabel:"Viewing mode. Click edit to make changes to this workflow.",duplicateWorkflowName:"A workflow with this name already exists",emptyFilterDefault:"Filter cannot be empty",emptyFilterAutoAdd:"An empty filter will match all newly created and updated Issues and Pull Requests",emptyWorkflowName:"Workflow name cannot be empty",invalidActionField:"A valid field is required",invalidActionFieldValue:"A valid value is required",invalidNoAction:"An action is required",invalidNoContentType:"A type is required",invalidNoQuery:"A query is required",invalidNoQueryOrFieldId:"A query or a field id is required",invalidNoRepository:"A repository is required",invalidNoValue:"A value is required",workflowNameTooLong:"Workflow name cannot be longer than 250 characters",invalidQuery:"Filter contains invalid syntax",addItemBlockLabel:"Add the item to the project",addSubIssuesBlockLabel:"Add sub-issues to the project",closeItemBlockLabel:"Close the issue",getItemsBlockLabel:"When the filter matches a new or updated item",getSubIssuesBlockLabel:"When an item in the project has sub-issues",itemAddedToProjectLabel:"When an item is added to the project",itemReopenedLabel:"When an item is reopened",itemClosedLabel:"When an item is closed",codeChangesRequestedLabel:"When a pull request has a review requesting changes",codeReviewApprovedLabel:"When a pull request is approved",pullRequestMergedLabel:"When a pull request is merged",autoArchiveItemsLabel:"Filter items",projectItemColumnUpdateLabel:"When the status is updated",setValueLabel:"Set value",selectContentType:"Select a content type",archiveItemLabel:"Archive item",autoAddManualTip:"Going forward, all new or updated items that match your filter will be auto added. You can also manually add items that currently match your filter",manualRunConfirmationButton:e=>"update"===e?"Update workflow":"disable"===e?"Disable workflow?":"Save and enable",manualRunConfirmationMessage:(e,t)=>"disable"===e?"You have to disable this workflow to be able to edit this field.":`${"update"===e?"Updating":"Enabling"} this workflow will archive <strong>${t}</strong> item${t&&t>1?"s":""} that currently meet the filter conditions.
      <br><br>As future items match filter conditions, they will be automatically archived.`,manualRunConfirmationTitle:e=>"update"===e?"Update workflow?":"disable"===e?"Disable workflow?":"Enable workflow?",deleteValuesAffectedWorkflowsWarning:(e,t,r)=>`${rC(t,`This ${rR(e)[0]} is`,`These ${rR(e)[1]} are`)} used in ${r} ${1===r?"workflow":"workflows"}. Deleting ${rC(t,"it","them")} will disable the ${rC(r,"workflow","workflows")} and invalidate any actions referencing ${rC(t,"it","them")}.`,deleteWorkflowError:"Could not delete workflow, please try again",deleteWorkflowSuccess:"Workflow deleted",deleteWorkflowCallToAction:"Delete workflow",deleteWorkflowConfirmationTitle:"Delete workflow",deleteWorkflowConfirmationContent:"Are you sure you want to delete this workflow? This action cannot be undone.",deleteWorkflowConfirmationButton:"Delete"},rA={defaultWorkflowName:"New auto-add workflow",duplicateWorkflowLabel:"Duplicate workflow",workflowNameInputLabel:"Workflow name",duplicateButton:"Duplicate",userAddedWorkflowLimitReached:"Maximum number of auto-add workflows reached. Delete a workflow or upgrade your plan to continue.",newWorkflowName:e=>`Duplicate of ${e}`},rM={privacySettingsAdmin:"Everyone in the organization is an admin of this project.",collaboratorDropDownAdmin:"Can see, make changes to, and add new collaborators to this project.",collaboratorDropDownWrite:"Can see and make changes to this project.",collaboratorDropDownRead:"Can see this project.",collaboratorDropDownNone:"Organization members will only be able to see this project if it\u2019s public. To give an organization member additional access, they can be added as part of a team or as a collaborator.",addCollaboratorPlaceholderUserProject:"Search by username",addCollaboratorPlaceholderOrgProject:"Search by username or team",collaboratorFilterPlaceholderUserProject:"Find a collaborator",collaboratorFilterPlaceholderOrgProject:"Find a collaborator or a team"},rL={saveButton:"Save",cancelButton:"Cancel",shortDescriptionTitle:"Short description",shortDescriptionPlaceholder:"A short description about this project.",readmeTitle:"README",readmePlaceholder:"Let everyone know what this project is about, how to use it and link to important resources.",errorMessage:"An error occurred while saving."},rF={instructions:e=>`Moving ${e}`,firstItemInList:"First item in list.",lastItemInList:"Last item in list.",moveUp:"Move item up in one increment",moveDown:"Move item down in one increment",cancelDrag:"Cancel drag mode",endDrag:"Place item",movedBetween:(e,t)=>`Moved between ${e} and ${t}.`,successfulMove:(e,t,r)=>`Successfully moved ${e} between ${t} and ${r}.`,successfulMoveTop:e=>`Successfully moved ${e} to the first position in list`,successfulMoveBottom:e=>`Successfully moved ${e} to the last position in list`},rZ={defaultLeanBurnupChartName:"Burn up",defaultLeanBurnupChartDescription:"The Burn up chart shows the progress of your project items over time, showing how much work has been completed and how much is left to do. Use this chart to view progress, spot trends, and identify bottlenecks to help move the project forward.",defaultStatusChartName:"Status chart",defaultStatusChartDescription:"This chart shows the current status for the total number of items in your project.",invalidFieldLabel:"Missing field",invalidFieldErrorMessage:"The selected field no longer exists",operationLabel:{count:"Count of",sum:"Sum of",avg:"Average of",min:"Minimum of",max:"Maximum of"},sideNavNewChartButton:"New chart",sideNavDefaultCharts:"Default charts",sideNavCustomCharts:"Custom charts",upsellDialogTitle:"Get unlimited charts",upsellDialogSubtitle:"Upgrade your plan to get:",upsellDialogBullet1:"Unlimited custom charts for private projects",upsellDialogBullet2:"Historical insights (Team or Enterprise plans only)",upsellDialogBullet3:"All the additional perks of a premium GitHub plan",upsellDialogCancelButton:"Cancel",upsellDialogUpgradePlanButton:"Upgrade plan",planUpgradeText:e=>`Private projects are limited to ${e} custom charts.  Make your project public or upgrade your plan to add more charts.`,periodNavigationLinkAnnouncement:e=>`Displaying results for ${e}`},rO={dragSashAriaLabel:"Drag to resize the table column",noDateFieldsConfiguredTooltip:"Create a date or iteration field to specify dates",noIterationConfiguredTooltip:e=>`Create an iteration containing ${e} to add items here`,iterationSuffix:e=>"start"===e?"start":"end",startDate:"Start date",endDate:"Target date",noStartDate:"No start date",noEndDate:"No target date",noDateSet:"No date set",gettingStarted:{popoverTitle:"Welcome to Roadmap!",popoverDismissButton:"Got it!",projectNeedsField:"Your project needs at least one date or iteration field to get started.",fieldsSelectedByDefault:e=>`We've selected an existing ${e} field in your project to get started. You can change the fields used here.`},toolbarDateFields:"Date fields",toolbarDateFieldsAriaLabel:"Select date fields",toolbarToday:"Today",toolbarZoomAriaLabel:e=>`Zoom level: ${e}.`,zoomMenuDialogAriaLabel:e=>`Select zoom level. The current zoom level is ${e}.`,zoomLevel:"Zoom level",zoomLevelOptions:{month:"Month",quarter:"Quarter",year:"Year"},scrollToDateText:e=>`Scroll to: ${rb(e)}`,scrollToPreviousPage:"Scroll to previous date range",scrollToNextPage:"Scroll to next date range"},rV={statuses:{pending:"Starting migration\u2026",in_progress_project_details:"Setting up the project\u2026",in_progress_status_fields:"Creating project columns\u2026",in_progress_default_view:"Creating an initial view\u2026",in_progress_permissions:"Migrating permissions\u2026",in_progress_items:"Migrating issues, pull requests, and drafts\u2026",in_progress_workflows:"Migrating workflows\u2026",error:"Your project could not be migrated."},yourClassicProject:"Your classic project",completedAndClosed1:"has been closed and is read-only.",completedAndClosed2:"Users visiting the classic project will be linked to this one.",completedAndStillOpen:"is still open, but future changes won't be synchronized.",migrationCompleteMessage:"Migration complete",somethingWentWrongMessage:"Something went wrong"},rB={tasks:(e,t)=>{let r=`task${t>1?"s":""}`;return e?t===e?`${e} ${r} done`:`${e} of ${t} ${r}`:`${t} ${r}`}},r$={trackedBy:"Tracked by",noTrackedBy:"No Tracked by",trackingIssues:"tracking issues",addedUnsupportedItemToast:"PRs and Drafts can\u2019t be added to a tracking issue. Item was added to No Tracked by group",addAllItemsText:e=>`Add all ${e} items`,itemsNotInProjectText:e=>`${e} ${e>1?"items":"item"} not in this project`,moveMultipleTrackedByNoTrackedWarning:{title:"Are you sure?",content:"Moving this issue to No tracked by will remove it from multiple task lists. This cannot be undone.",confirmButtonContent:"Move",confirmButtonType:"danger"},Toasts:{DraftAndPullsNotSupported:{type:e$.error,message:"PRs and draft issues are not supported by tracked-by"}}},rz={addedUnsupportedItemToast:"PRs and Drafts can\u2019t be added as sub-issues. Item was added to No Parent issue group",toasts:{draftAndPullsNotSupported:{type:e$.error,message:"PRs and draft issues are not supported by sub-issues"}}},rW={migratingTitle:e=>`Migrating ${e}`},rG={refreshPageMessage:e=>`The update did not complete. ${e>0?`${e} items did not update. `:""}Please refresh the page.`,successMessage:"The update you requested is complete."},rU={failureMessage:"An error occurred while copying draft issues.",successMessage:"Draft issues copied successfully.",copyingDraftsMessage:"Copying draft issues to your new project. This may take a minute to complete."},rH={allSelectedMatchingItems:e=>`All ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching query selected`,selectAllMatchingItems:e=>`Select all ${e.value.toLocaleString()}${e.isApproximate?"+":""} items matching this query`,selectedItems:e=>`${e.toLocaleString()} ${rC(e,"item","items")} selected`,itemCount:(e,t,r)=>`${e.toLocaleString()}-${t.toLocaleString()} of ${r.value.toLocaleString()}${r.isApproximate?"+":""} ${rC(r.value,"item","items")}`,noArchivedItems:"No archived items",deleteAllMatchingItemsConfirmation:"Are you sure you want to delete all items matching this query?",noLimitsBannerMessage:"This project is enrolled in the unlimited archive items beta with limited filtering at this time.",noLimitsBannerFeedback:" For feedback, please visit",noLimitsBannerFeedbackLinkText:" this discussion"},rq={openInNewTab:"Open in new tab",copyLinkInProject:"Copy link in project",archiveInProject:"Archive in project",deleteFromProject:"Delete from project"},rK={title:"Status updates",nullStateTitle:"Add a project status update",description:"Status updates are brief reports tracking your project's health and progress. Begin by adding an update.",learnMoreLinkText:"Learn more",addUpdateButtonText:"Add update",saveUpdateButtonText:"Save update",cancelUpdateButtonText:"Cancel",addUpdateTitle:"Add status update",statusFieldLabel:"Status",startDateFieldLabel:"Start date",targetDateFieldLabel:"Target date",statusPickerFilterPlaceholderText:"Filter statuses",statusPickerResultsAriaLabel:"Status results",statusPickerTitle:"Select a status",statusPickerAriaLabel:"Select status",startDatePickerAriaLabel:"Select start date",targetDatePickerAriaLabel:"Select target date",confirmDeleteTitle:"Delete status update",confirmDeleteBody:"Are you sure you'd like to delete this status update?",subscribeToUpdates:"Subscribe to status updates for this project",unsubscribeFromUpdates:"Unsubscribe from status updates for this project"},rQ={error:"An error has occurred.",noCollaborators:"You don't have any collaborators yet.",filtering:"No collaborators found.",collaboratorsFound:e=>`${e} ${rC(e,"collaborator","collaborators")} found.`},rX={setup:"Set up issue types in your project",renameCustomType:e=>`Rename your \u{201C}${e}\u{201C} custom field and start using issue types defined by your organization.`,addedUnsupportedItemToast:"Drafts can\u2019t be added with an issue type. Item was added to No type group",learnMoreText:"Learn more about issue types.",learnMoreLink:"https://gh.io/issue-types-learn-more"},rY={IssueTypeRenamePopover:{title:rX.setup,description:rX.renameCustomType,altText:"Issues create dialog with issue type selection",actionPrimary:"Get Started",actionSecondary:"I\u2019ll do it later"},IssueTypeRenameDialog:{title:rX.setup,description:e=>`To start using issue types in your project, please rename your \u{201C}${e}\u{201C} custom field and update any filters that reference it.`,learnMoreLink:rX.learnMoreLink,learnMoreText:rX.learnMoreText,fieldLabel:"Rename field",actionPrimary:"Finish setup",actionSecondary:"Cancel",defaultInputString:"Custom Type",videoDescription:"Selecting the type field on a project, and applying Epic, Feature, and Task to project items"}},rJ={IssueTypeRename:{copy1:"Action required",copy2:rX.renameCustomType,learnMoreLink:rX.learnMoreLink,learnMoreText:rX.learnMoreText,actionPrimary:"Get Started"}},r0=(0,H.createContext)(null),r1=(0,H.createContext)(null),r2=(0,H.createContext)(null),r5=(0,H.createContext)(null),r3=(0,H.createContext)(void 0),r4=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(""),[a]=(0,H.useState)(()=>{var e;return e=eP("memex-creator"),e?.login?rI.untitledUserProject(e.login):rI.untitledProject}),[n,i]=(0,H.useState)(()=>{let e=eP("memex-data");return e?{...e}:{id:-1,number:-1,title:a,titleHtml:a,public:!1,closedAt:null,isTemplate:!1}}),l=(0,H.useCallback)(e=>{i(t=>({...t,...e}))},[]),s=n.number,o=!0===n.public,d=null!=n.closedAt,u=!0===n.isTemplate,c=n.templateId,m=(0,H.useMemo)(()=>n.title||a,[a,n.title]),p=(0,H.useMemo)(()=>n.titleHtml||m,[n.titleHtml,m]),f=n.shortDescription||"",h=n.shortDescriptionHtml||f,g=n.description||"",y=(0,H.useMemo)(()=>({setProject:l}),[l]),x=(0,H.useMemo)(()=>({projectNumber:s}),[s]),b=(0,H.useMemo)(()=>({isPublicProject:o,isClosed:d,isTemplate:u}),[d,o,u]),v=(0,H.useMemo)(()=>({title:m,titleHtml:p,description:g,shortDescription:f,shortDescriptionHtml:h,descriptionHtml:t,setDescriptionHtml:r}),[g,t,f,h,m,p]);return(0,O.jsx)(r5.Provider,{value:y,children:(0,O.jsx)(r1.Provider,{value:x,children:(0,O.jsx)(r2.Provider,{value:b,children:(0,O.jsx)(r0.Provider,{value:v,children:(0,O.jsx)(r3.Provider,{value:c,children:e})})})})})});try{r0.displayName||(r0.displayName="ProjectDetailsContext")}catch{}try{r1.displayName||(r1.displayName="ProjectNumberContext")}catch{}try{r2.displayName||(r2.displayName="ProjectStateContext")}catch{}try{r5.displayName||(r5.displayName="SetProjectContext")}catch{}try{r3.displayName||(r3.displayName="ProjectTemplateIdContext")}catch{}try{r4.displayName||(r4.displayName="MemexStateProvider")}catch{}let r8=()=>{let e=(0,H.useContext)(r0);if(!e)throw Error("useProjectDetails must be used within a ProjectDetailsContext.Provider");return e},r6=(0,H.createContext)(null),r7=()=>{let e=(0,H.useContext)(r6);if(!e)throw Error("useCustomFieldsSettings must be used within a SettingsContext.Provider");return e},r9=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)("");return(0,O.jsx)(r6.Provider,{value:(0,H.useMemo)(()=>({currentColumnTitle:t,setCurrentColumnTitle:r}),[t]),children:e})});try{r6.displayName||(r6.displayName="CustomFieldsSettingsContext")}catch{}try{r9.displayName||(r9.displayName="CustomFieldSettingsProvider")}catch{}var ae=r(59620),at=r(37904);let ar={};function aa(e){let t=ar[e];if(!t){if(t=eP(e))ar[e]=t;else throw Error(`Missing API metadata for ${e}`)}return t}var an=r(13737),ai=r(87623);let api_error_ApiError=class api_error_ApiError extends Error{constructor(e,t={}){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=function(e){let t={};e.status&&(t.status=e.status),e.code&&(t.code=e.code),e.name&&(t.name=e.name),e.contentType&&(t.contentType=e.contentType);let r="ApiError";return Object.keys(t).length>0?`${r} (${JSON.stringify(t)})`:r}(t),this.status=t.status,this.code=t.code,t.sourceStack&&(this.stack?this.stack+=`
${t.sourceStack.substring(t.sourceStack.indexOf("\n")+1)}`:this.stack=t.sourceStack)}};let al={JSON:"application/json",FormData:"application/x-www-form-urlencoded",CSV:"text/csv",HTML:"text/html",Text:"text/plain"};function as(e){let t=[];return!function e(t,r,a="",n=!1){let i=Array.isArray(t);for(let l in t){let s=t[l];if(void 0===s)continue;let o=Array.isArray(s),d="object"==typeof s,u=a||"";n&&(u+="[]"),a?i||(u+=`[${l}]`):u+=l,o&&0===s.length?r.push(`${u}[]`):d?e(s,r,u,o):r.push(`${u}=${encodeURIComponent(t[l])}`)}}(e,t),t.join("&")}function ao(e,t=rI.genericErrorMessage){if("object"==typeof e&&null!==e){if("error"in e&&"string"==typeof e.error)return e.error;if("errors"in e&&"string"==typeof e.errors)return e.errors;if("message"in e&&"string"==typeof e.message)return e.message;if("errors"in e&&Array.isArray(e.errors)&&e.errors.length>0&&"string"==typeof e.errors[0])return e.errors[0]}return t}let ErrorUsedToCatchStackTraceBeforeAsyncAction=class ErrorUsedToCatchStackTraceBeforeAsyncAction extends Error{constructor(...e){super(...e),Object.setPrototypeOf(this,new.target.prototype),this.name="ErrorUsedToCatchStackTraceBeforeAsyncAction"}};async function ad(e,{token:t,contentType:r=al.JSON,...a}={}){let n;let i=ah(e=(0,an.O1)(e.toString()),t,af(a,r));i.headers.set("Accept","application/json"),a.body&&i.headers.set("Content-Type",r),i.headers.set("X-Requested-With","XMLHttpRequest");let l=Error(),s=!1,o=0,d=new Headers;try{let e=await fetch(i);s=e.ok,o=e.status,d=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:o,sourceStack:l.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:o,sourceStack:l.stack})}if(s&&n)return(0,an.d5)(n),{headers:d,ok:s,data:n};if(s)return{headers:d,ok:s,data:{}};if(401===o)return window.location.reload(),{headers:d,ok:s,data:{}};if(n)throw new api_error_ApiError((Array.isArray(n.errors)?n.errors[0]:n.errors)??rI.genericErrorMessage,{status:o,code:n.code,sourceStack:l.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:o,sourceStack:l.stack})}async function au(e,{token:t,contentType:r=al.JSON,...a}={}){let n;let i=ah((0,an.O1)(e.toString()),t,af(a,r));i.headers.set("Accept","application/json"),a.body&&i.headers.set("Content-Type",r),i.headers.set("X-Requested-With","XMLHttpRequest");let l=Error(),s=!1,o=0,d=new Headers;try{let e=await fetch(i);s=e.ok,o=e.status,d=e.headers;let t=await e.text();n=t&&JSON.parse(t)}catch(e){if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:o,sourceStack:l.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:o,sourceStack:l.stack})}if(s&&n)return(0,an.d5)(n),{headers:d,ok:s,data:n};if(s)return{headers:d,ok:s,data:{}};if(401===o)return window.location.reload(),{headers:d,ok:s,error:{code:401,message:ao(n,"Unauthorized")}};if(404===o)return{headers:d,ok:s,error:{code:404,message:ao(n,"Not Found")}};if(n)throw new api_error_ApiError(ao(n),{status:o,code:n.code,sourceStack:l.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:o,sourceStack:l.stack})}async function ac(e,t){let r;let a=Error(),n=!1,i=0,l=new Headers,s="unknown",o=t?.contentType??al.JSON;try{let a=o===al.FormData?await function(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":al.FormData},a=t?.body?as(t.body):void 0;return(0,ai.Q)(e,{...t,body:a,headers:r})}((0,an.O1)(e),t):await (0,ai.v)((0,an.O1)(e),t);n=a.ok,i=a.status,l=a.headers,s=a.headers.get("content-type")||"unknown";let d=await a.text();r=d&&JSON.parse(d)}catch(e){if(e instanceof Error)throw new api_error_ApiError(e.message,{name:e.name,status:i,contentType:s,sourceStack:a.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:i,sourceStack:a.stack})}if(n&&r)return(0,an.d5)(r),{headers:l,ok:n,data:r};if(n)return{headers:l,ok:n,data:{}};if(401===i)return window.location.reload(),{headers:l,ok:n,data:{}};if(r)throw new api_error_ApiError((Array.isArray(r.errors)?r.errors[0]:r.errors)??rI.genericErrorMessage,{status:i,code:r.code,sourceStack:a.stack});throw new api_error_ApiError(rI.genericErrorMessage,{status:i,sourceStack:a.stack})}async function am(e,t,r=1e3){return async function r(a){let n=new Request(e,t);n.headers.append("X-Requested-With","XMLHttpRequest");let i=new ErrorUsedToCatchStackTraceBeforeAsyncAction,l=await self.fetch(n),{status:s}=l;if(s<200||s>=300)throw new api_error_ApiError(rI.genericErrorMessage,{status:s,sourceStack:i.stack});if(200===s)return l;if(202===s)return await new Promise(e=>setTimeout(e,a)),r(a);throw new api_error_ApiError(rI.genericErrorMessage,{status:s,sourceStack:i.stack})}(r)}async function ap(e,t){let r=new ErrorUsedToCatchStackTraceBeforeAsyncAction,a=await (0,ai.Q)(e,t),{status:n}=a;if(a.ok)return a;throw new api_error_ApiError(rI.genericErrorMessage,{status:n,sourceStack:r.stack})}function af({body:e,...t},r){let a={...t};return e&&r===al.JSON?a.body=JSON.stringify(e):e&&(a.body=as(e)),a}function ah(e,t,r={}){let a=new Request(e,{...r,mode:"same-origin"});return t&&a.headers.append("Scoped-CSRF-Token",t),a}async function ag({memexProjectItemId:e}){let t=new URL(aa("memex-item-get-api-data").url,window.location.origin);return t.searchParams.set("memexProjectItemId",`${e}`),au(t)}function ay(e){let t=RegExp(".*\\/(?<owner>[^/]+)\\/(?<repo>[^/]+)\\/issues\\/(?<number>\\d+)$"),r=e.match(t),a=r?.groups?.owner,n=r?.groups?.repo,i=r?.groups?.number;return a&&i&&n?{number:parseInt(i,10),repo:n,owner:a,type:"Issue"}:void 0}let ax={Open:"open",Closed:"closed"},ab={Open:"open",Closed:"closed",Draft:"draft"},av={NotPlanned:"not_planned"},aw={Open:"open",Merged:"merged"},aj={Open:"open",Closed:"closed"},aC={NotPlanned:"not_planned",Completed:"completed",Reopened:"reopened"},aI={Read:"read",Write:"write",Admin:"admin",None:"no access"},aS={Admin:"project_admin",Writer:"project_writer",Reader:"project_reader",None:"none"},ak={User:"user",Team:"team",None:"none"},aT={role:aI.Read,canChangeProjectVisibility:!1,canCopyAsTemplate:!1},aN=new Map([[aI.Read,aS.Reader],[aI.Write,aS.Writer],[aI.Admin,aS.Admin],[aI.None,aS.None]]),a_=new Map([...aN.entries()].map(([e,t])=>[t,e]));let HierarchySidePanelItem=class HierarchySidePanelItem{getState(){return this.state}isDraft(){return!1}getItemIdentifier(){return ay(this.getUrl())}hierarchyEntry(){return{ownerId:this.key.repoId,itemId:this.key.issueId}}itemId(){return this.key.issueId}ownerId(){return this.key.repoId}getHtmlTitle(){return this.title}getRawTitle(){return this.title}getLabels(){return this.labels}getUrl(){return this.url}getAssignees(){return this.assignees}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getRepositoryName(){return this.repoName}getItemNumber(){return this.number}getMilestone(){}getCompletion(){return this.completion}getLinkedPullRequests(){return[]}getExtendedRepository(){return this.repository||{name:this.repoName,nameWithOwner:"",id:this.key.repoId,url:"",isForked:!1,isPublic:!1,isArchived:!1,hasIssues:!1}}getTrackedBy(){return this.trackedBy}getIssueType(){}getStatus(){}getCustomField(e){}constructor(e,t){this.isHierarchy=!0,Object.assign(this,e),this.completion=t,this.contentType=eL.Issue,this.state===ab.Draft&&(this.contentType=eL.DraftIssue),-1===this.itemId()&&(this.contentType=eL.RedactedItem)}};let SubIssueSidePanelItem=class SubIssueSidePanelItem{getState(){return this.state}isDraft(){return!1}getItemIdentifier(){return ay(this.getUrl())}itemId(){return this.id}ownerId(){return 0}hierarchyEntry(){return{itemId:this.itemId(),ownerId:this.ownerId()}}getHtmlTitle(){return this.title}getRawTitle(){return this.title}getLabels(){return[]}getUrl(){return this.url}getAssignees(){return[]}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getRepositoryName(){return""}getItemNumber(){return this.number}getMilestone(){}getCompletion(){}getLinkedPullRequests(){return[]}getExtendedRepository(){}getIssueType(){}getStatus(){}getTrackedBy(){}getCustomField(e){}constructor(e){this.isHierarchy=!0,this.contentType=eL.Issue,this.id=e.id,this.title=e.title,this.number=e.number,this.url=e.url,this.state=e.state,this.stateReason=e.stateReason}};let aR={INFO:"info",BULK_ADD:"bulk-add",ISSUE:"issue"},aP="side-panel",aD="draft_convert",aE="draft_open",aA="view options toolbar",aM="view options menu",aL="memex_project_field_group_by",aF="roadmap_date_fields_popover",aZ="roadmap_date_fields_popover_dismissed",aO="field_sort_asc",aV="field_sort_desc",aB="table header menu",a$="field_hide",az="command palette",aW="search bar",aG="layout_switch",aU="item_rename",aH={SUCCESS:"success",FAILURE:"failure"},aq="tab navigation",aK="settings sidebar nav",aQ="settings_field_rename",aX="settings_field_save",aY="settings",aJ="table header menu",a0="item_value_edit",a1="item_value_add",a2="table row action menu",a5="table row keyboard shortcut",a3="board card action menu",a4="board card keyboard shortcut",a8="board column action menu",a6="side-panel",a7="top_menu",a9="settings",ne="insights_chart_create",nt="insights_chart_update",nr="slice panel",na="slice_by_applied",nn="slice_by_removed",ni="side_panel_navigate_to_item",nl="templates_create",ns="copy",no="copy_as_template",nd="bulk_add_side_panel_open",nu="card_move",nc={KeyboardShortcut:"keyboard_shortcut",MouseMove:"mouse_move",ContextMenu:"context_menu"};var nm=r(35614),np=r(39959),nf=r(2291),nh=r(82881),ng=r(79887),ny=r(38260);function nx(e,t){let{0:r=[],1:a=[]}=function(e,t){let r={};for(let a of e){let e=t(a);(r[e]??(r[e]=[])).push(a)}return r}(e,e=>t(e)?0:1);return[r,a]}function nb(e){return nv(e.startDate,e.duration)}function nv(e,t){return(0,ta.E)(e instanceof Date?e:(0,rx.D)(e),t-1)}function nw(e){return(0,ta.E)(nb(e),1)}function nj(e,t){let r=(0,rx.D)(t.startDate),a=new Date(e.getFullYear(),e.getMonth(),e.getDate());return(0,nm.A)(a,(0,np.k)(r,1))&&(0,nf.R)(a,nw(t))}function nC(e){let t=(0,nh.F)(e,new Date)?"MMM dd":"MMM dd, yyyy";return(0,eE.WU)(e,t)}function nI(e,t){return e.toString().padStart(t,"0")}function nS(e){let t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return`${t.toString()}-${nI(r,2)}-${nI(a,2)}`}function nk(e){let t=(0,rx.D)(e.startDate),r=(0,ti.J)(t)?t:new Date;return{startDate:r,endDate:nv(r,e.duration)}}function nT(e){let t=`${e.startDate}T00:00:00Z`;return{startDate:tK(t)??new Date,endDate:(0,ng.T)((0,rx.D)(t),(e.duration-1)*24)}}function nN(e){if(!e||!e.startDate)return"";let{startDate:t,endDate:r}=nk(e);return`${nC(t)} - ${nC(r)}`}function n_(e){return e?function({quantity:e,units:t}){return`${e} ${1===e?nz[t]:t}`}(nW(e.duration)):""}function nR(e){return nP(e.settings.configuration)}function nP(e){let t=[],{iterations:r,completedIterations:a}=e;return r.length&&t.push(...r),a.length&&t.push(...a),t}function nD({startDate:e,duration:t}){return(0,nf.R)((0,ta.E)((0,rx.D)(e),t),new Date)}function nE(e){let[t,r]=nx([...e].sort(nM),nD);return{completedIterations:t.reverse(),iterations:r}}function nA(e,t){return-nM(e,t)}function nM(e,t){return e.startDate<t.startDate?-1:e.startDate>t.startDate?1:0}function nL(e){let t=nP(e);return 0===t.length?null:t.sort(nA)[0]??null}function nF(e){return Object.values(nO).includes(e)?e:null}function nZ(e,t){let r=nF(e);return r?function(e,t){if(e.dataType!==eA.Iteration)return null;let r=e.dataType!==eA.Iteration?null:nR(e).find(e=>nj(new Date,e))??null;if(t===nO.Current)return r;let{completedIterations:a,iterations:n}=nE(nR(e));switch(t){case nO.Previous:return a.length>0?a[0]??null:null;case nO.Next:{let e=r?1:0;return n.length>e?n[e]??null:null}default:return null}}(t,r):null}let nO={Current:"@current",Next:"@next",Previous:"@previous"};function nV(e,t){if(e&&t&&nB(e,t))return{startDate:nS(nw(e)),duration:(0,ny.j)((0,rx.D)(t.startDate),nw(e))}}function nB(e,t){return(0,ny.j)((0,rx.D)(t.startDate),(0,rx.D)(e.startDate))>e.duration}function n$(e,t){return{...e,startDate:0===t?e.startDate:nS((0,ta.E)((0,rx.D)(e.startDate),t))}}let nz={weeks:"week",days:"day"};function nW(e){let t=e%7==0?"weeks":"days";return{quantity:"weeks"===t?e/7:e,units:t}}function nG({units:e,quantity:t}){return t*("weeks"===e?7:1)}let nU={quantity:2,units:"weeks"};function nH(e){return e?.dataType===eA.Iteration}function nq(e){return e?.dataType===eA.SingleSelect}function nK(e){return e?.dataType===eA.Date}let nQ="no_vertical_group",nX=e=>!!e&&"color"in e&&"description"in e&&"descriptionHtml"in e,nY=e=>!!e&&"duration"in e&&"title"in e&&"startDate"in e,nJ=e=>({...e,groupMetadata:e}),n0=e=>({id:e.id,name:e.title,nameHtml:e.titleHtml,groupMetadata:e}),n1=e=>({id:nQ,name:`No ${e}`,nameHtml:`No ${e}`,groupMetadata:void 0}),n2=e=>e.map(nJ),n5=(e,{includeAllCompletedIterations:t=!1}={})=>{let{iterations:r,completedIterations:a}=e,n=a.slice().sort(nA);return[...t?n:n.slice(0,3),...r].sort(nM).map(n0)};function n3(e,t={}){if(!e)return[];let r=n1(e.name);if(nq(e))return[r,...n2(e.settings.options)];if(nH(e)){let{configuration:a}=e.settings;return[r,...n5(a,t)]}throw Error(`Unable to obtain vertical groups for field type: ${e.dataType}`)}function n4(e){return nq(e)||nH(e)}let n8=["memex_beta_with_dummy_feature","memex_insights","memex_charts_basic_allow","memex_chart_cards_insights","memex_historical_charts_on_assignees_milestones","tasklist_block","memex_group_by_multi_value_changes","tasklist_tracked_by_redesign","memex_paginated_archive","memex_resync_index","memex_automation_enabled","memex_header_redesign","memex_table_without_limits","memex_new_issue_viewer","memex_issue_viewer_prefetch","memex_disable_draft_issue_file_upload","graphql_subscriptions","memex_disable_autofocus","issue_types","memex_status_updates_notifications","copilot_workspace","issues_react_comment_editor","sub_issues","memex_sub_issues","sub_issues_workflow","mwl_beta_optout","mwl_filter_bar_validation","memex_mwl_swimlanes","issues_react_checklist_improvements","fix_quote_reply_assets","memex_charts_basic_public","memex_charts_basic_private","memex_insights_limited_public","memex_insights_limited_private","memex_insights_basic_public","memex_insights_basic_private"],n6=n8.reduce((e,t)=>(e[t]=!1,e),{});function n7(){if(!a){let e=eP("memex-enabled-features");for(let t of(a=e&&new Set(e),n8))n6[t]=!!a&&a.has(t)}return n6}let n9=()=>n7(),ie={EMPTY:{focus:null,previousFocus:null}},it={NAVIGATE:"NAVIGATE",SET_FOCUS:"SET_FOCUS",INIT:"INIT"},ir=e=>({type:it.NAVIGATE,navigation:e}),ia=e=>({type:it.SET_FOCUS,focus:e}),ii=(e,t)=>{let r=(0,H.createContext)({navigationDispatch:()=>void 0,state:{focus:null,previousFocus:null}}),a=(0,H.createContext)({stateRef:(0,H.createRef)(),navigationDispatch:()=>void 0}),n=(0,H.memo)(function({metaRef:n,children:i}){let[l,s]=il(e,t,n,ie.EMPTY),o=(0,e5.Z)(l),d=(0,H.useMemo)(()=>({state:l,navigationDispatch:s}),[s,l]),u=(0,H.useMemo)(()=>({navigationDispatch:s,stateRef:o}),[o,s]);return(0,O.jsx)(r.Provider,{value:d,children:(0,O.jsx)(a.Provider,{value:u,children:i})})});return{context:r,NavigationProvider:n,useNavigation:()=>(0,H.useContext)(r),useStableNavigation:()=>(0,H.useContext)(a)}},il=(e,t,r,a)=>{let n=n9(),i=(0,H.useCallback)((a,i)=>{switch(i.type){case it.NAVIGATE:return e(a,r.current,i,n);case it.SET_FOCUS:return t(a,r.current,i,n);case it.INIT:return i.state;default:return a}},[r,e,t,n]);return(0,H.useReducer)(i,a)};try{(o=MyComponent).displayName||(o.displayName="MyComponent")}catch{}try{(d=NavigationProvider).displayName||(d.displayName="NavigationProvider")}catch{}let is={Focus:"Focus",Edit:"Edit",Suspended:"Suspended",Same:"Same"},io={First:"First",Second:"Second",Previous:"Previous",Same:"Same",Next:"Next",Last:"Last"},{useNavigation:id,useStableNavigation:iu,NavigationProvider:ic}=ii(function(e,t,r){let{focus:a}=e;if(r.navigation.details?.type==="previousFocus")return{...e,focus:e.previousFocus,previousFocus:null};if(r.navigation.details?.type==="footer"){let n=r.navigation.details.verticalGroupId;if(null==n){if(a?.type==="coordinate"){let e=t.cardGrid[a.details.meta.horizontalGroupIndex];(0,J.Z)(e,"horizontalGroup should not be null"),n=e?.verticalGroups[a.details.x]?.verticalGroupId}else{let e=t.cardGrid[0];(0,J.Z)(e,"horizontalGroup should not be null"),n=e.verticalGroups[0]?.verticalGroupId}}return{...e,focus:{type:"footer",focusType:is.Focus,details:{verticalGroupId:n,horizontalGroupIndex:r.navigation.details.horizontalGroupIndex}},previousFocus:e.focus}}if(r.navigation.details?.type==="search-input")return{...e,focus:{type:"search-input",focusType:is.Focus,details:{}},previousFocus:e.focus??e.previousFocus};if(r.navigation.details?.type==="nearestCard"){let{indexOfCardWithinColumn:a,columnIndex:n,cardId:i,findMemexItem:l,horizontalGroupIndex:s}=r.navigation.details;return{...e,focus:function(e,t,r,a,n,i){let l=n[e],s=l?.verticalGroups[r],o=i?s.items.filter(e=>i(e.id)):s.items,d=o.findIndex(e=>e.id===a),u=o.length>1,c=o.length>0,m=o.length-1,p=-1,f=r;if(c&&-1===d)p=o[t>m?m:t]?.id??0;else if(u)p=d===m?o[d-1].id:o[d+1].id;else{let t=1;for(;-1===p&&(r-t>=0||r+t<(l?.verticalGroups.length??0));){let e=l?.verticalGroups[r-t],a=l?.verticalGroups[r+t];r-t>=0&&!iw(e)?(p=e.items[0].id,f=r-t):r+t<(l?.verticalGroups.length??0)&&!iw(a)&&(p=a.items[0].id,f=r+t),t++}if(-1===p)return{type:"footer",focusType:is.Focus,details:{verticalGroupId:s.verticalGroupId,horizontalGroupIndex:e}}}return{type:"coordinate",focusType:is.Focus,details:{x:f,y:p,meta:{horizontalGroupIndex:e??0}}}}(s,a,n,i,t.cardGrid,l),previousFocus:e.focus}}if(!a)return e;if("coordinate"===a.type){let n=function(e,t,r){let a=r[e.details.meta.horizontalGroupIndex];(0,J.Z)(a,"horizontalGroup should not be null");let n=e.details.meta.keyboardMovingCard,i=r.findIndex(e=>!e.isCollapsed),l=e.details.meta.horizontalGroupIndex===i;if(t.navigation.y===io.Next&&function(e,t,r){let a=e.verticalGroups[t];if(iw(a))return!1;let n=a?a.items:[],i=n.length-1;return r===n[i].id}(a,e.details.x,e.details.y)){if(n)return{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...n,sashSide:"after"}}}};let t=e.details.x,a=e.details.meta.horizontalGroupIndex,i=r[a],l=r[a]?.verticalGroups[t];for(;a<r.length-1&&i&&i.isFooterDisabled;)if(a=ib(r,a,io.Next),i=r[a],!iw(l=r[a]?.verticalGroups[t])){let e=(l?.items[0]).id;return{type:"coordinate",focusType:is.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:a}}}}return!i||i.isFooterDisabled||i.isCollapsed?e:{type:r.length>1?"add-item":"footer",focusType:is.Focus,details:{verticalGroupId:l.verticalGroupId,horizontalGroupIndex:a}}}if(t.navigation.y===io.Previous&&function(e,t,r){let a=e.verticalGroups[t];return!iw(a)&&r===(a?.items[0]).id}(a,e.details.x,e.details.y)){if(n)return{...e,details:{...e.details,meta:{...e.details.meta,keyboardMovingCard:{...n,sashSide:"before"}}}};if(l)return{type:"search-input",focusType:is.Focus,details:{}};let t=e.details.x,a=e.details.meta.horizontalGroupIndex,i=r[a],s=r[a]?.verticalGroups[t];for(i?.isFooterDisabled||(a=ib(r,a,io.Previous));a>0&&i&&i.isFooterDisabled;)if(a=ib(r,a,io.Previous),i=r[a],!iw(s=r[a]?.verticalGroups[t])){let e=(s?.items[0]).id;return{type:"coordinate",focusType:is.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:a}}}}return!i||i.isFooterDisabled||i.isCollapsed?e:{type:r.length>1?"add-item":"footer",focusType:is.Focus,details:{verticalGroupId:s.verticalGroupId,horizontalGroupIndex:a}}}let s=iv(r,e.details.meta.horizontalGroupIndex,e.details.x,t.navigation.x??io.Same,!!n),o=a?.verticalGroups[s];if(n&&iw(o))return{type:"coordinate",focusType:is.Focus,details:{x:s,y:-1,meta:{horizontalGroupIndex:e.details.meta.horizontalGroupIndex,keyboardMovingCard:{...n,sashSide:"before"}}}};if(!o)return e;if(iw(o))return 1===r.length||a?.isFooterDisabled?e:{type:"add-item",focusType:is.Focus,details:{verticalGroupId:o.verticalGroupId,horizontalGroupIndex:e.details.meta.horizontalGroupIndex}};let d=a.verticalGroups[e.details.x].items.findIndex(t=>t.id===e.details.y),u=-1===e.details.y?0:ix(o.items,d,t.navigation.y??io.Same),c=o.items[u].id,m=function({action:e,sashSide:t,currentRowIndex:r,newRowIndex:a,newColumn:n}){if(e.navigation.y===io.First)return"before";if(e.navigation.y===io.Last);else if(e.navigation.y===io.Previous&&0===r&&r===a)return"before";else if(e.navigation.y===io.Next&&r===n.items.length-1&&r===a);else if(t&&r!==a)return t;return"after"}({action:t,sashSide:e.details.meta.keyboardMovingCard?.sashSide,currentRowIndex:d,newRowIndex:u,newColumn:o});return{type:"coordinate",focusType:is.Focus,details:{x:s,y:c,meta:{horizontalGroupIndex:e.details.meta.horizontalGroupIndex,keyboardMovingCard:e.details.meta.keyboardMovingCard?{...e.details.meta.keyboardMovingCard,sashSide:m}:void 0}}}}(a,r,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}{let n=function(e,t,r){let a=t.navigation,n=function(e){for(let t=e.length-1;t>=0;t--)if(!e[t]?.isCollapsed)return t;return e.length-1}(r),i=r["footer"===e.type||"add-item"===e.type?e.details.horizontalGroupIndex:0];(0,J.Z)(i);let l=i.verticalGroups.findIndex(t=>t.verticalGroupId===e.details?.verticalGroupId);if(-1===l)return e;let s=e.details&&"horizontalGroupIndex"in e.details&&"number"==typeof e.details.horizontalGroupIndex?e.details?.horizontalGroupIndex:0;if(a.y){if(a.y===io.Next){if(s===n)return{type:"search-input",focusType:is.Focus,details:{}};s=Math.max(0,ib(r,s,io.Next))}let t=iv(r,s,l,a.x||io.Same),i=r[s]?.verticalGroups[t];if(t<0||t>=(r[s]?.verticalGroups.length??0))return e;let o=null;if(a.y===io.Previous||a.y===io.Last){if(iw(i)){if(s>0){for(s=Math.max(0,ib(r,s,a.y));s>0&&r[s]?.isFooterDisabled&&(o=(i=r[s]?.verticalGroups[t]).items.length-1,!(i&&i.items?.length>0));)s=Math.max(0,ib(r,s,a.y));if(!r[s]?.isFooterDisabled)return{type:r.length>1?"add-item":"footer",focusType:is.Focus,details:{verticalGroupId:i.verticalGroupId,horizontalGroupIndex:s}};o=(i=r[s]?.verticalGroups[t]).items.length-1}}else o=i.items.length-1}else if(a.y!==io.First||iw(i)){if(a.y===io.Next){if(iw(i)){if(r.length-1>=s)return{type:r.length>1?"add-item":"footer",focusType:is.Focus,details:{verticalGroupId:i.verticalGroupId,horizontalGroupIndex:s}}}else o=0}}else o=0;if(null!=o&&o>-1){let e=i.items[o].id;return{type:"coordinate",focusType:is.Focus,details:{x:t,y:e,meta:{horizontalGroupIndex:s}}}}return{type:"search-input",focusType:is.Focus,details:{}}}if(a.x&&"add-item"===e.type){let e=iv(r,s,l,a.x||io.Same),t=r[s]?.verticalGroups[e];return{type:"add-item",focusType:is.Focus,details:{verticalGroupId:t.verticalGroupId,horizontalGroupIndex:s}}}return e}(a,r,t.cardGrid);return{...e,focus:n,previousFocus:e.focus}}},function(e,t,r){return{...e,focus:r.focus,previousFocus:function({focus:e,previousFocus:t}){return e?im(e)||ip(e)?t:e:null}(e)}});function im(e){return e?.type==="footer"}function ip(e){return e?.type==="search-input"}function ih(e,t,r,a=is.Focus){return ia({type:"coordinate",focusType:a,details:{x:t,y:r,meta:{horizontalGroupIndex:e}}})}function ig(){return ir({focusType:is.Focus,details:{type:"previousFocus"}})}function iy(){return ia(null)}function ix(e,t,r){return r===io.Same?Math.min(t,e.length-1):r===io.First?0:r===io.Last?e.length-1:r===io.Next?Math.min(t+1,e.length-1):Math.max(0,t-1)}function ib(e,t,r){let a=ix(e,t,r);for(;e[a]?.isCollapsed&&a>0&&a<e.length-1;)a=ix(e,a,r);return a}function iv(e,t,r,a,n){let i=e[t];(0,J.Z)(i);let l=ix(i.verticalGroups,r,a);if(n)iw(i.verticalGroups[l])&&i.verticalGroups[l]?.verticalGroupId===nQ&&i.verticalGroups[l+1]&&l++;else if(a!==io.Same&&iw(i.verticalGroups[l])&&(1===e.length||i.isFooterDisabled))for(;l>=0&&l<i.verticalGroups.length&&iw(i.verticalGroups[l]);)l=a===io.First||a===io.Next?l+1:l-1;return l}function iw(e){return!e||0===e.items.length}function ij(e){throw Error(`${e} has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?`)}function iC(e){return`${e.userName}/${e.repoName}#${e.number}`}function iI(e,t){return t&&e.userName.toLowerCase()===t.login.toLowerCase()?`${e.repoName}#${e.number}`:iC(e)}function iS(e){return e.kind,!1}function ik(e){let t=e.filter(e=>e.subRows.length>0);if(t&&t.length>0&&t.every(e=>iS(e.groupedSourceObject))){let r=e.find(e=>!iS(e.groupedSourceObject));r&&t.push(r)}return t}let iT=e=>{if(!iS(e.groupedSourceObject))return rI.addItem;switch(e.groupedColumnId){case eM.Milestone:return rI.cannotAddItemsWhenGroupByMilestone;case eM.IssueType:return rI.cannotAddItemsWhenGroupByIssueType;default:return rI.addItem}};function iN(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eA.Assignees:return re(e.value.map(e=>e.login));case eA.Date:return tY(e.value.date.value);case eA.Iteration:return e.value.iteration.title;case eA.Milestone:return e.value.title;case eA.IssueType:return e.value.name;case eA.ParentIssue:return e.value.nwoReference;case eA.Number:return`${e.value.number.value}`;case eA.Repository:return e.value.nameWithOwner;case eA.SingleSelect:return e.value.option.name;case eA.Text:return e.value.text.raw;case eA.TrackedBy:return iC(e.value);case eA.Labels:return e.value.name;default:ij(e)}}function i_(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eA.Assignees:return e.value.map(e=>e.login).join("_");case eA.Date:return tX(e.value.date.value);case eA.Iteration:return e.value.iteration.title;case eA.Milestone:return e.value.title;case eA.IssueType:return e.value.name;case eA.Number:return`${e.value.number.value}`;case eA.Repository:return e.value.nameWithOwner;case eA.SingleSelect:return e.value.option.name;case eA.Text:return e.value.text.raw;case eA.TrackedBy:case eA.ParentIssue:return e.value.title}}let iR={COORDINATE:"coordinate",FOOTER:"footer",SEARCH_INPUT:"search-input",GROUP_FOOTER:"group-footer",GLOBAL_OMNIBAR:"global-omnibar"};function iP(e){return e.type===iR.FOOTER}function iD(e){return e?.type===iR.SEARCH_INPUT}function iE(e){return e.type===iR.GROUP_FOOTER}function iA(e,t){return e.type===iR.GROUP_FOOTER&&e.details.groupId===t}function iM(e){return e.type===iR.COORDINATE}function iL(){return ia({focusType:is.Focus,type:iR.FOOTER,details:null})}function iF(){return ia({focusType:is.Focus,type:iR.SEARCH_INPUT,details:null})}function iZ(e){return ia({focusType:is.Focus,type:iR.GROUP_FOOTER,details:{groupId:e}})}function iO(e,t,r,a,n,i){return ia({focusType:is.Focus,type:iR.COORDINATE,details:{y:e,x:t,meta:{editing:r,suspended:a,replaceContents:n,newContent:i}}})}function iV(){return ia(null)}let{useNavigation:iB,useStableNavigation:i$,NavigationProvider:iz}=ii(function(e,t,r){let{focus:a,previousFocus:n}=e,{visibleColumns:i,flatRows:l,groupedRows:s,state:o}=t.instance,{collapsedGroups:d}=o,{getHeaderFocus:u,focusableRowFilter:c,focusableColumnFilter:m}=t;if(!a)return e;let{navigation:p}=r,f=null,h=l.filter(e=>!e.isGrouped),g=c?h.filter(e=>c(a,n,p,e)):h,y=c&&s?s.map(e=>({...e,subRows:e.subRows.filter(e=>c(a,n,p,e))})):s,x=i.filter(e=>!e.nonNavigable).map(e=>e.id),b=m?x.filter(e=>m(e,p,iM(a)?l.find(e=>e.id===a.details.y):void 0)):x;if(y){let e=iG(y,d);if(iM(a)){let t=i1(e,a);t&&(f=iQ(t,p,e,b)),null===f&&(f=i0(a,p,g,b,u))}else iE(a)?f=iX(a,p,e,b,n):iD(a)&&(f=iJ(p,g,b,n))}else iP(a)?f=iY(p,g,b,u,n):iD(a)?f=iJ(p,g,b,n):iM(a)&&(f=i0(a,p,g,b,u));return f?{...e,focus:f,previousFocus:iq(e)}:e},function(e,t,r){let a=null;if(r.focus?.type===iR.GLOBAL_OMNIBAR){let{groupedRows:r,state:n}=t.instance;a=function(e,t){let{focus:r}=e;if(t){if(!t.length)return e.focus;if(r&&iM(r)){let e=i1(t,r);if(e)return iZ(e.group.id).focus}let a=t[0];if(a)return iZ(a.id).focus}return iL().focus}(e,r?iG(r,n.collapsedGroups):void 0)}return{...e,focus:a??r.focus,previousFocus:iq(e)}});function iW(){let{state:{focus:e}}=iB();return null!=e&&iM(e)&&e.details.meta.newContent||""}function iG(e,t){return e.filter(e=>e.subRows.length>0&&!iS(e.groupedSourceObject)&&-1===t.indexOf(e.groupedValue))}let iU=(e,t,r,a)=>{if(a===io.Same)return t;if(a===io.First)return e[0];if(a===io.Second)return e[1];if(a===io.Last)return e[e.length-1];if(t&&-1!==r){if(a===io.Next){let t=Math.min(r+1,e.length-1);return e[t]}if(a===io.Previous)return e[Math.max(0,r-1)]}};function iH(e,t){if(e&&iM(e)){let r=t.findIndex(t=>t===e?.details?.x);return r>-1?r:null}return null}function iq({focus:e,previousFocus:t}){return e?iP(e)||iE(e)||iD(e)?t:e:null}let iK=e=>{if(!e||0===e.length)return null;let t=0,r=0;for(let a=0;a<e.length;a++){let n=e[a];if(void 0!==n){let e=n.index;e>r&&(r=e,t=a)}}return e[t]},iQ=(e,t,r,a)=>{let{firstRow:n,lastRow:i,group:l,colID:s}=e,o=a.findIndex(e=>e===s)??0,d=r.findIndex(e=>e.id===l.id),u=!!t.details?.wrap,c=u&&0===o&&t.x===io.Previous,m=u&&o===a.length-1&&t.x===io.Next,p=c||t.y===io.Previous,f=m||t.y===io.Next;if(p&&d>0&&n){let e=r[d-1];return e?iZ(e.id).focus:null}return f&&i?iZ(l.id).focus:null},iX=(e,t,r,a,n)=>{let i=e.details.groupId,l=r.findIndex(e=>e.id===i),s=r[l],o=!!t.details?.wrap,d=o&&t.x===io.Previous,u=o&&t.x===io.Next,c=d||t.y===io.Previous,m=u||t.y===io.Next,p=iH(n,a);if(m&&l<r.length-1){let e=r[l+1];if(e&&e.subRows.length>0){let t=e.subRows[0]?.id,r=a[o?0:p??0];return void 0===t||void 0===r?null:iO(t,r).focus}if(e)return iZ(e.id).focus}if(c&&l>=0&&s&&s.subRows.length>0){let e=s.subRows.at(-1).id,t=o?a.length-1:p??0,r=a[t];return void 0===r?null:iO(e,r).focus}if(c&&l>0&&s&&0===s.subRows.length){let e=r[l-1];return e?iZ(e.id).focus:null}if(t.y===io.Last&&t.x===io.Second){if(!s)return null;let e=iK(s.subRows);if(!e)return null;let t=a[1]?a[1]:a[0];return void 0===t?null:iO(e.id,t).focus}return null},iY=(e,t,r,a,n)=>{if(e.y===io.Last&&e.x===io.Second){let e=iK(t);if(!e)return null;let a=r[1]?r[1]:r[0];return void 0===a?null:iO(e.id,a).focus}let i=iH(n,r);if(e.y===io.Previous){if(0===t.length)return a();let e=r[i??0];return void 0===e?null:iO(t.at(-1).id,e,!1).focus}if(e.y){let a=iU(t.map(e=>e.id),void 0,-1,e.y),n=iU(r,void 0,-1,e.x||io.First)??r[0];return a&&n?iO(a,n,!1).focus:null}return e.x&&e.details?.wrap?0===t.length?a():iO(t.at(-1).id,r.at(-1),!1).focus:e.details?.previousFocus?n:null},iJ=(e,t,r,a)=>{if(e.y){let a=iU(t.map(e=>e.id),void 0,-1,e.y),n=iU(r,void 0,-1,e.x||io.First)??r[0];return a&&n?iO(a,n,!1).focus:iL().focus}return e.details?.previousFocus?a:iL().focus},i0=(e,t,r,a,n)=>{if(e.details.y===r.at(-1)?.id&&t.y===io.Next)return iL().focus;if(e.details.y===r.at(0)?.id&&t.y===io.Previous)return n();let i=r.findIndex(t=>t.id===e.details.y)??0,l=a.findIndex(t=>t===e.details.x)??0,s=iU(r.map(e=>e.id),e?.details.y,i,t.y||io.Same),o=iU(a,e?.details.x,l,t.x||io.Same);if(t?.details?.wrap){if(t.x===io.Next&&a.findIndex(t=>t===e?.details.x)+1>=a.length){if(!(i+1<=r.length-1))return iL().focus;o=a[0],s=r[i+1]?.id}else if(t.x===io.Previous&&a.findIndex(t=>t===e?.details.x)-1<0){if(!(i-1>=0))return n();o=a[a.length-1],s=r[i-1]?.id}}let d=e?.details.meta.editing??!1,u=e?.details.meta.suspended??!1;return(t.focusType===is.Edit?d=!0:t.focusType===is.Focus&&(d=!1),t.focusType===is.Suspended?u=!0:t.focusType!==is.Same&&(u=!1),s&&o)?iO(s,o,d,u).focus:null};function i1(e,t){let{x:r,y:a}=t.details;for(let t of e){let e=t.subRows.findIndex(e=>e.id===a);if(e>=0){let a=0===e,n=e===t.subRows.length-1;return{group:t,subRowIndex:e,colID:r,firstRow:a,lastRow:n}}}return null}let i2={mode:void 0,light:void 0,dark:void 0,markdown_fixed_width_font:!1};function i5(){if(!n){let e=eP("memex-owner"),t=eP("memex-data"),r=eP("github-runtime")??"dotcom",a=eP("github-billing-enabled")??!1,i=eP("memex-feedback");n={themePreferences:eP("theme-preferences")??i2,mediaUrls:eP("media-urls"),loggedInUser:eP("logged-in-user"),projectData:t,projectOwner:e,projectCreator:eP("memex-creator"),projectLimits:{projectItemLimit:1200,projectItemArchiveLimit:1e4,limitedChartsLimit:2,singleSelectColumnOptionsLimit:25,autoAddCreationLimit:4,viewsLimit:50,...eP("memex-limits")},relayIds:eP("memex-relay-ids"),viewerPrivileges:eP("memex-viewer-privileges")??aT,feedbackLink:i?.url??"https://github.com/github/feedback/discussions/categories/issues-feedback",issueViewerFeedbackLink:i?.issue_viewer_url??"https://github.com/github/feedback/discussions/categories/issues-feedback",pwlBetaFeedbackLink:i?.pwl_beta_url??"https://github.com/orgs/community/discussions/106785",archiveAlphaFeedbackLink:eP("archive-alpha-feedback")?.url,isOrganization:e?.type==="organization",githubRuntime:r,isDotcomRuntime:"dotcom"===r,isEnterpriseRuntime:"enterprise"===r,isBillingEnabled:a,showTemplateDialog:!!eP("memex-templates"),createdWithTemplateMemex:eP("created-with-template-memex"),partialFailures:eP("memex-columns-data")?.reduce((e,t)=>t.partialFailures?e.concat(t.partialFailures):e,[]),copyProjectPartialUrl:eP("copy-memex-project-partial-data")?.url??"",systemTemplates:eP("memex-system-templates"),betaOptoutUrl:eP("memex-without-limits-beta-optout-api-data")?.url}}return n}function i3(e){return!!e&&e.length>=i5().projectLimits.singleSelectColumnOptionsLimit}let i4=()=>{let{viewerPrivileges:e,loggedInUser:t}=i5();return{isLoggedIn:void 0!==t,isReadonly:e.role===aI.Read,hasWritePermissions:e.role!==aI.Read,hasAdminPermissions:e.role===aI.Admin,canChangeProjectVisibility:e.canChangeProjectVisibility,canCopyAsTemplate:e.canCopyAsTemplate}},i8=class MemexItemModelBase{getState(){throw Error("Method not implemented.")}getSuggestionsCacheKey(){return`${this.contentType}:${this.itemId()}`}getItemIdentifier(){}isDraft(){return!1}hierarchyEntry(){return{ownerId:this.contentRepositoryId||0,itemId:this.content?.id||0}}memexItemId(){return this.id}itemId(){return this.content.id}ownerId(){return this.contentRepositoryId||0}getLabels(){return this.columns.Labels||[]}getUrl(){return""}getHtmlTitle(){return t0(this.columns.Title)}getRawTitle(){return tJ(this.columns.Title)}getAssignees(){return this.columns.Assignees||[]}getReviewers(){return this.columns.Reviewers||[]}getRepositoryName(){return this.columns.Repository?.name||""}getNameWithOwnerReference(){let e=this.getExtendedRepository()?.nameWithOwner;if(!e)return"";let t=this.getItemNumber();return`${e}#${t}`}getItemNumber(){return 0}getMilestone(){return this.columns.Milestone}getLinkedPullRequests(){return this.columns["Linked pull requests"]||[]}getExtendedRepository(){return this.columns.Repository}getCompletion(){return this.columns.Tracks}getTrackedBy(){return this.columns["Tracked by"]}getIssueType(){return this.columns[eM.IssueType]}getParentIssue(){return this.columns[eM.ParentIssue]}login(){}getStatus(){return this.columnData[eM.Status]}getCustomField(e){return this.columnData[e]}get columns(){return this.columnData}setItemData(e){if(this.id=e.id,this.priority=e.priority,e.updatedAt&&(this.updatedAt=e.updatedAt),e.createdAt&&(this.createdAt=e.createdAt),e.issueCreatedAt&&(this.issueCreatedAt=e.issueCreatedAt),e.issueClosedAt&&(this.issueClosedAt=e.issueClosedAt),e.state&&(this.state=e.state),e.stateReason&&(this.stateReason=e.stateReason),e.content&&(this.content={...this.content,...e.content}),this.contentType!==e.contentType&&(this.contentType=e.contentType),e.memexProjectColumnValues)for(let t of(this.columnData={},e.memexProjectColumnValues))this.setColumnValueForItemColumnType(t)}isTitleForIssue(e){return!!e&&"string"!=typeof e.title&&"raw"in e.title&&"html"in e.title}async whileSkippingLiveUpdates(e){try{this.skippingLiveUpdates=!0,await e(),this.skippingLiveUpdates=!1}catch(e){throw this.skippingLiveUpdates=!1,e}}setTitleValue(e){switch(this.contentType){case eL.DraftIssue:{let{title:t}=e;if("string"==typeof t)break;this.isTitleForIssue(e)&&(this.columnData[eM.Title]={contentType:eL.DraftIssue,value:{...e,title:t}});break}case eL.RedactedItem:{let{title:t}=e;"string"==typeof t&&(this.columnData.Title={contentType:eL.RedactedItem,value:{title:t}});break}case eL.Issue:if("isDraft"in e)return;"number"in e&&this.isTitleForIssue(e)&&(this.columnData.Title={contentType:eL.Issue,value:e});break;case eL.PullRequest:"isDraft"in e&&this.isTitleForIssue(e)&&(this.columnData[eM.Title]={contentType:eL.PullRequest,value:e})}}setColumnValueForItemColumnType(e){switch(e.memexProjectColumnId){case eM.Title:this.setTitleValue(e.value);break;case eM.Assignees:this.columnData[eM.Assignees]=e.value?.sort((e,t)=>e.login.localeCompare(t.login))??void 0;break;case eM.Labels:this.columnData[eM.Labels]=e.value?.sort((e,t)=>e.name.localeCompare(t.name))??void 0;break;case eM.LinkedPullRequests:this.columnData[eM.LinkedPullRequests]=e.value?.sort((e,t)=>e.number-t.number)??void 0;break;case eM.Milestone:this.columnData[eM.Milestone]=e.value??void 0;break;case eM.ParentIssue:this.columnData[eM.ParentIssue]=e.value??void 0;break;case eM.Repository:this.columnData[eM.Repository]=e.value??void 0;break;case eM.Reviewers:this.columnData[eM.Reviewers]=e.value?.sort((e,t)=>e.reviewer.name.localeCompare(t.reviewer.name))??void 0;break;case eM.Status:this.columnData[eM.Status]=e.value??void 0;break;case eM.Tracks:this.columnData[eM.Tracks]=e.value??void 0;break;case eM.TrackedBy:this.columnData[eM.TrackedBy]=e.value??void 0;break;case eM.IssueType:this.columnData[eM.IssueType]=e.value??void 0;break;case eM.SubIssuesProgress:this.columnData[eM.SubIssuesProgress]=e.value??void 0;break;default:this.columnData[e.memexProjectColumnId]=e.value??void 0}}constructor(e){this.columnData={},this.skippingLiveUpdates=!1,this.isHierarchy=!1,this.setItemData(e),this.archived=e.archived,this.memexProjectColumnValues=e.memexProjectColumnValues,this.prioritizedIndex=e.id}};let DraftIssueModel=class DraftIssueModel extends i8{isDraft(){return!0}getState(){return ab.Draft}constructor(e){super(e),this.contentType=eL.DraftIssue,this.content=e.content}};let RedactedItemModel=class RedactedItemModel extends i8{getState(){return ab.Open}constructor(e){super(e),this.contentType=eL.RedactedItem,this.content=e.content}};let IssueModel=class IssueModel extends i8{getState(){return(this.columnData[eM.Title]?.value).state}getUrl(){return this.content.url}getItemNumber(){return(this.columnData[eM.Title]?.value).number}getItemIdentifier(){return ay(this.getUrl())}constructor(e){super(e),this.contentType=eL.Issue,this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};let PullRequestModel=class PullRequestModel extends i8{getState(){return(this.columnData[eM.Title]?.value).state}isDraft(){return(this.columnData[eM.Title]?.value).isDraft}getUrl(){return this.content.url}getItemNumber(){return(this.columnData[eM.Title]?.value).number}constructor(e){super(e),this.contentType=eL.PullRequest,this.content=e.content,this.contentRepositoryId=e.contentRepositoryId}};function i6(e){switch(e.contentType){case eL.DraftIssue:return new DraftIssueModel(e);case eL.RedactedItem:return new RedactedItemModel(e);case eL.Issue:return new IssueModel(e);case eL.PullRequest:return new PullRequestModel(e)}}function i7(e){return e.contentType===eL.PullRequest?`pull_request:${e.content.id}`:e.contentType===eL.Issue?`issue:${e.content.id}`:void 0}let i9="sortedBy[columnId]",le="sortedBy[direction]",lt="filterQuery",lr="layout",la="groupedBy[columnId]",ln="verticalGroupedBy[columnId]",li="visibleFields",ll="hideItemsCount",ls="sumFields",lo="sliceBy[columnId]",ld="sliceBy[value]",lu="period",lc="start_date",lm="end_date",lp="xAxis[groupBy]",lf="xAxis[dataSource][column]",lh="yAxis[aggregate][columns]",lg="yAxis[aggregate][operation]",ly="pane",lx="itemId",lb="hierarchy",lv="statusUpdateId";var lw=r(20249),lj=r(65782);let lC={ISSUE:"issue",PROJECT_DRAFT_ISSUE:"project_draft_issue"},lI={HEART:"heart",TADA:"tada",SMILE:"smile",ROCKET:"rocket",EYES:"eyes",THUMBS_UP:"+1",THUMBS_DOWN:"-1",THINKING_FACE:"thinking_face"},lS={NONE:"NONE"};async function lk(e,t){let r=new URL(aa("memex-get-sidepanel-item-api-data").url,window.location.origin);switch(e.kind){case lC.ISSUE:r.searchParams.set("kind",e.kind),r.searchParams.set("item_id",`${e.itemId}`),r.searchParams.set("repository_id",`${e.repositoryId}`),r.searchParams.set("omit_comments",`${e.omitComments??!1}`),r.searchParams.set("omit_capabilities",`${e.omitCapabilities??!1}`);break;case lC.PROJECT_DRAFT_ISSUE:r.searchParams.set("kind",e.kind),r.searchParams.set("project_item_id",`${e.projectItemId}`)}let{data:a}=await ad(r,t);return a}async function lT(e){let t=aa("memex-comment-on-sidepanel-item-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e,contentType:al.FormData});return r}async function lN(e){let t=aa("memex-edit-sidepanel-comment-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e,contentType:al.FormData});return r}async function l_(e){let t=aa("memex-update-sidepanel-item-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e,contentType:al.FormData});return r}async function lR(e){let t=aa("memex-update-sidepanel-item-reaction-api-data");await ac(t.url,{method:"POST",body:e,contentType:al.FormData})}async function lP(e){let t=new URL(aa("memex-update-sidepanel-item-state-api-data").url,window.location.origin);t.searchParams.set("kind",lC.ISSUE),await ac(t.toString(),{method:"POST",body:e,contentType:al.FormData})}function lD(e,t,r,a){return a?e[t]=e[t]?.filter(e=>e!==r):t in e?e[t]?.push(r):e[t]=[r],e}let lE=(0,lj.r)({queryKey:["side-panel-item-not-on-client"],fetcher:async({itemId:e})=>{let t=Number(e);if(Number.isNaN(t))return;let r=await ag({memexProjectItemId:t});if(r.ok)return i6(r.data.memexProjectItem)}}),lA=(0,lj.r)({queryKey:["side-panel-item"],fetcher:async({contentType:e,itemId:t,memexItemId:r,repositoryId:a},{signal:n})=>{switch(e){case eL.Issue:return lk({kind:lC.ISSUE,itemId:t,repositoryId:a},{signal:n});case eL.DraftIssue:return lk({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:r},{signal:n});default:throw Error(`${e} is not supported`)}}}),lM=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async({contentType:e,itemId:t,memexItemId:r,repositoryId:a})=>{switch(e){case eL.Issue:return lk({kind:lC.ISSUE,itemId:t,repositoryId:a,omitCapabilities:!0});case eL.DraftIssue:return lk({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:r,omitCapabilities:!0});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:r,itemId:a,memexItemId:n})=>{e.cancelQueries({queryKey:lA.getKey({contentType:t,repositoryId:r,itemId:a,memexItemId:n})})},onSuccess:async(t,{contentType:r,repositoryId:a,itemId:n,memexItemId:i})=>{e.setQueriesData({queryKey:lA.getKey({contentType:r,repositoryId:a,itemId:n,memexItemId:i})},e=>e?{...e,...t}:e)}})},lL=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async({contentType:e,itemId:t,memexItemId:r,repositoryId:a,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l})=>{switch(e){case eL.Issue:return l_({kind:lC.ISSUE,itemId:t,repositoryId:a,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l});case eL.DraftIssue:return l_({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:r,update:n,tasklist_blocks_operation:i,tasklist_blocks_operation_tracker:l});default:throw Error(`${e} is not supported`)}},onMutate:async({contentType:t,repositoryId:r,itemId:a,memexItemId:n})=>{e.cancelQueries({queryKey:lA.getKey({contentType:t,repositoryId:r,itemId:a,memexItemId:n})})},onSuccess:async(t,{contentType:r,repositoryId:a,itemId:n,memexItemId:i})=>{e.setQueriesData({queryKey:lA.getKey({contentType:r,repositoryId:a,itemId:n,memexItemId:i})},e=>e?{...e,...t}:e)},onSettled:(t,r,{contentType:a,repositoryId:n,itemId:i,memexItemId:l})=>{e.invalidateQueries({queryKey:lA.getKey({contentType:a,repositoryId:n,itemId:i,memexItemId:l})})}})},lF=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async e=>lT(e),onSuccess:async(t,{repositoryId:r,itemId:a,memexItemId:n,updateState:i,stateReason:l})=>{e.setQueriesData({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:r,itemId:a,memexItemId:n})},e=>e?{...e,comments:e.comments?.concat(t),state:{state:i??e.state.state,stateReason:l??e.state.stateReason}}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:a,itemId:n,memexItemId:i})})}})},lZ=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async e=>lN(e),onSuccess:async(t,{repositoryId:r,itemId:a,memexItemId:n})=>{e.setQueriesData({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:r,itemId:a,memexItemId:n})},e=>e?{...e,comments:e.comments?.map(e=>e.id===t.id?t:e)}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:a,itemId:n,memexItemId:i})})}})},lO=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async e=>(await lR(e),e),onMutate:async({repositoryId:t,itemId:r,memexItemId:a,commentId:n,reaction:i,actor:l,command:s})=>{e.setQueriesData({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:t,itemId:r,memexItemId:a})},e=>e?void 0===n&&e.reactions?{...e,reactions:lD(e.reactions,i,l,"unreact"===s)}:{...e,comments:e.comments?.map(e=>{if(e.id===n){let t=lD(e.reactions,i,l,"unreact"===s);return{...e,reactions:t}}return e})}:e)},onSettled:(t,r,{repositoryId:a,itemId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:a,itemId:n,memexItemId:i})})}})},lV=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:async e=>(await lP(e),e),onMutate:t=>{e.setQueriesData({queryKey:lA.getKey({contentType:eL.Issue,repositoryId:t.repositoryId,itemId:t.itemId,memexItemId:t.memexItemId})},e=>e?{...e,state:{state:t.state??e.state.state,stateReason:t.stateReason??e.state.stateReason}}:e)},onSettled:(t,r,{itemId:a,repositoryId:n,memexItemId:i})=>{e.invalidateQueries({queryKey:lA.getKey({contentType:eL.Issue,itemId:a,repositoryId:n,memexItemId:i})})}})};function lB(e){return{skipTurbo:!0,...e}}let l$=()=>{let e=(0,K.s0)();return(0,H.useCallback)((t,r)=>e(t,{...r,state:lB(r?.state)}),[e])},lz=(0,H.forwardRef)(function(e,t){return(0,O.jsx)(Q.rU,{"data-turbo":"false",...e,state:lB(e.state),ref:t})}),lW=(0,H.forwardRef)(function(e,t){return(0,O.jsx)(Q.OL,{"data-turbo":"false",...e,state:lB(e.state),ref:t})}),lG=()=>{let[e,t]=(0,Q.lr)();return[e,(0,H.useCallback)((e,r)=>{t(e,{...r,state:lB(r?.state)})},[t])]};try{lz.displayName||(lz.displayName="Link")}catch{}try{lW.displayName||(lW.displayName="NavLink")}catch{}try{(u=function(e){return(0,O.jsx)(K.Fg,{...e,state:lB(e.state)})}).displayName||(u.displayName="Navigate")}catch{}let lU=(e,t)=>Error(`Value of column with ID "${e}" does not match expected type "${t}"`);function lH(e,t){return lq(function(e){switch(e.dataType){case eA.Assignees:return eM.Assignees;case eA.Labels:return eM.Labels;case eA.Milestone:return eM.Milestone;case eA.Repository:return eM.Repository;case eA.TrackedBy:return eM.TrackedBy;case eA.IssueType:return eM.IssueType;case eA.ParentIssue:return eM.ParentIssue;case eA.Title:return eM.Title;case eA.Text:case eA.Number:case eA.Date:case eA.Iteration:case eA.SingleSelect:return e.memexProjectColumnId}}(e),e.dataType,t)}function lq(e,t,r){switch(t){case eA.Assignees:return{dataType:t,value:r.columns[eM.Assignees]??[]};case eA.Labels:return{dataType:t,value:r.columns[eM.Labels]??[]};case eA.Milestone:return{dataType:t,value:r.columns[eM.Milestone]};case eA.Repository:return{dataType:t,value:r.columns[eM.Repository]};case eA.TrackedBy:return{dataType:t,value:r.columns[eM.TrackedBy]??[],appendOnly:!1};case eA.IssueType:return{dataType:t,value:r.columns[eM.IssueType]};case eA.ParentIssue:return{dataType:t,value:r.columns[eM.ParentIssue]};case eA.Title:{let e=r.columns[eM.Title];if(!e||e.contentType===eL.RedactedItem)throw Error("Cannot update title of redacted item");return{dataType:t,value:e.value}}case eA.Text:if("number"==typeof e){let a=r.columns[e];if(void 0===a||t4(a))return{dataType:t,memexProjectColumnId:e,value:a?.raw}}throw lU(e,t);case eA.Number:if("number"==typeof e){let a=r.columns[e];if(void 0===a||t8(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw lU(e,t);case eA.Date:if("number"==typeof e){let a=r.columns[e];if(t6(a)){let r=tq(a);if(r)return{dataType:t,memexProjectColumnId:e,value:r};if(null===r)return{dataType:t,memexProjectColumnId:e,value:void 0}}else if(void 0===a)return{dataType:t,memexProjectColumnId:e,value:a}}throw lU(e,t);case eA.Iteration:if("number"==typeof e){let a=r.columns[e];if(void 0===a||t7(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw lU(e,t);case eA.SingleSelect:if("number"==typeof e||e===eM.Status){let a=r.columns[e];if(void 0===a||t7(a))return{dataType:t,memexProjectColumnId:e,value:a}}throw lU(e,t);case eA.LinkedPullRequests:case eA.Reviewers:case eA.Tracks:case eA.SubIssuesProgress:throw Error(`Columns of type "${t}" cannot be updated.`)}}function lK(e){return tW(e)||e===eM.Title||e===eM.Status||e===eM.Assignees}let lQ=[eA.Tracks,eA.TrackedBy];function lX(e){return lQ.some(t=>t===e.dataType)}function lY(e,t,r){if(t&&e===eL.DraftIssue&&(t=t.filter(e=>lK(e.memexProjectColumnId))),t&&0!==t.length||null!=r)return{previousMemexProjectItemId:r,memexProjectColumnValues:t}}function lJ(e,t){let{content:r,contentType:a,id:n,memexProjectColumnValues:i,priority:l,updatedAt:s,createdAt:o,issueCreatedAt:d,issueClosedAt:u,state:c,stateReason:m}=t,p=i??Object.keys(e.columns).reduce((t,r)=>{let a=tZ(r);if(!a)return t;let n=function(e,t){switch(e){case eM.Assignees:return{memexProjectColumnId:eM.Assignees,value:t.columns[eM.Assignees]||null};case eM.Labels:return{memexProjectColumnId:eM.Labels,value:t.columns[eM.Labels]||null};case eM.LinkedPullRequests:return{memexProjectColumnId:eM.LinkedPullRequests,value:t.columns[eM.LinkedPullRequests]||null};case eM.Milestone:return{memexProjectColumnId:eM.Milestone,value:t.columns[eM.Milestone]||null};case eM.Repository:return{memexProjectColumnId:eM.Repository,value:t.columns[eM.Repository]||null};case eM.Reviewers:return{memexProjectColumnId:eM.Reviewers,value:t.columns[eM.Reviewers]||null};case eM.Status:return{memexProjectColumnId:eM.Status,value:t.columns[eM.Status]||null};case eM.Tracks:return{memexProjectColumnId:eM.Tracks,value:t.columns[eM.Tracks]||null};case eM.TrackedBy:return{memexProjectColumnId:eM.TrackedBy,value:t.columns[eM.TrackedBy]||null};case eM.IssueType:return{memexProjectColumnId:eM.IssueType,value:t.columns[eM.IssueType]||null};case eM.ParentIssue:return{memexProjectColumnId:eM.ParentIssue,value:t.columns[eM.ParentIssue]||null};case eM.SubIssuesProgress:return{memexProjectColumnId:eM.SubIssuesProgress,value:t.columns[eM.SubIssuesProgress]||null};case eM.Title:return function(e){let t=e.columns.Title;if(!t)return null;switch(t.contentType){case eL.DraftIssue:case eL.Issue:case eL.PullRequest:case eL.RedactedItem:return{memexProjectColumnId:eM.Title,value:t.value};default:return null}}(t);default:{let r=t.columns[e]||null;return tW(e)?{memexProjectColumnId:e,value:r}:null}}}(a,e);return n?[...t,n]:t},[]),f=e.contentRepositoryId??-1;"contentRepositoryId"in t&&(f=t.contentRepositoryId);let h=r??e.content,g=e.content;switch(a){case eL.Issue:case eL.PullRequest:if(!(h&&"id"in h&&"url"in h))return null;return{contentType:a,content:{...g,...h},contentRepositoryId:f,memexProjectColumnValues:p,id:n,priority:l,updatedAt:s,createdAt:o,issueCreatedAt:d,issueClosedAt:u,state:c,stateReason:m};case eL.DraftIssue:return{contentType:a,content:{...g,...h},memexProjectColumnValues:p,id:n,priority:l,updatedAt:s,createdAt:o};case eL.RedactedItem:return{contentType:a,content:h,memexProjectColumnValues:p,id:n,priority:l,updatedAt:s,createdAt:o};default:ij(a)}}function l0(e){return"groups"in e}function l1(e){return"groupedItems"in e}function l2(e){return null!=e.horizontalGroupedByColumnId||null!=e.verticalGroupedByColumnId}let l5="paginatedMemexItems",l3="pageParamsData",l4="sliceByData",l8="paginatedTotalCounts",l6="ungrouped",l7="groups",l9=(e,t,r)=>[l5,e,t,r],se=e=>[l5,e,l3],st=e=>[l5,e,l4],sr=e=>[l5,e,l8],sa=e=>e[2],sn=e=>e[2]===l7&&l2(e[1]),si=e=>sl(e[2]),sl=e=>"string"!=typeof e,ss=e=>({groupId:e.groupId}),so=e=>({groupId:e}),sd=e=>e.groupId,su=e=>{let t=e.queryKey,r=t[t.length-1];return r===l3||r===l8||r===l4},sc=void 0,sm="next_placeholder";var sp=r(93646);let sf={"memex-items-data":{memexItems:[],memexColumnsByItemId:new Map},"memex-paginated-items-data":{memexItems:{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}},memexColumnsByItemId:new Map}};function sh(e,t=sf){if("memex-items-data"===e)return t[e].memexItems.length&&t[e].memexColumnsByItemId.size||(t[e].memexItems=eP(e)??[],t[e].memexColumnsByItemId=sg(t[e].memexItems)),t[e];{var r;if(("nodes"in(r=t[e].memexItems)?r.nodes:"nodes"in r.groups?r.groups.nodes:r.groups).length&&t[e].memexColumnsByItemId.size)return t[e];let a=eP(e)??{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}};if(t[e].memexItems=a,"groups"in a){let r=a.groupedItems.reduce((e,t)=>e.concat(t.nodes),[]);t[e].memexColumnsByItemId=sg(r)}else t[e].memexColumnsByItemId=sg(a.nodes);return t[e]}}function sg(e){let t=new Map;return e.reduce((e,t)=>{let{contentType:r,id:a,memexProjectColumnValues:n}=t;return e.set(a,{contentType:r,columns:n})},t)}let sy=(0,sp.H)({queryKey:["memexItems"],structuralSharing:!1,fetcher:()=>({nodes:[],pageInfo:{startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:0,isApproximate:!1}}),getNextPageParam:()=>0,initialPageParam:0,initialData:()=>{let{memexItems:e}=sh("memex-items-data");return{pages:[sx((e||[]).map(e=>i6(e)))],pageParams:[0]}},use:[e=>t=>e({...t,enabled:!1})]});function sx(e){for(let[t,r]of e.entries())r.prioritizedIndex=t;return{nodes:e,pageInfo:{startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1},totalCount:{value:e.length,isApproximate:!1}}}function sb(e){let t=[l5],r=e.getQueryCache().find({queryKey:t,exact:!1,type:"active"});return r?r.queryKey.slice(0,2):t}function sv(e){let{memex_table_without_limits:t}=n7();return t?sb(e):sy.getKey()}let sw={totalCount:{value:0,isApproximate:!1},groups:{}};function sj(e,t,r){let a=sr(t);e.setQueryData(a,e=>{let t=e??sw;return{totalCount:r.totalCount||t?.totalCount,groups:{...t?.groups,...r.groups}}})}function sC(e,t,r){let a=sS(e,t),n=a.totalCount.value+r;return{...a.totalCount,value:n}}function sI(e,t,r,a){let n=sS(e,t),i=n.groups[r]??{isApproximate:!1},l=(n.groups[r]?.value??0)+a;return{...i,value:l}}function sS(e,t){let r=sr(t);return e.getQueryData(r)||sw}function sk(e,t,r){let a=[l5,t,l7,r];return e.getQueryData(a)}function sT(e,t,r,a){let n=[l5,t,l7,r];e.setQueryData(n,a)}function sN(e,t){return e.getQueryData(se(t))||{pageParams:[]}}function s_(e,t,r){e.setQueryData(se(t),r)}let sR=e=>{let t={queryKey:[l5],exact:!1,type:"inactive"};e.removeQueries({...t,predicate:t=>{if(su(t))return!1;let r=t.queryKey;return r[3]===sc&&si(r)?!function(e,t){let r=sk(e,t[1],sc),a=r?.groups.map(e=>e.groupId)||[],n=sa(t),i=sl(n)?sd(n):"";return a.includes(i)}(e,r):(r[3]!==sc||si(r)||function(e,t){let r=sN(e,t);if(!r||0===r.pageParams.length||r.pageParams[r.pageParams.length-1]===sm)return;let a=e.getQueryData([l5,t,l7,sc]),n=a&&l0(a)?a.groups:[],i={groups:n.reduce((e,t)=>(e[t.groupId]=[sc],e),{})};s_(e,t,{...n.length>0?i:{},pageParams:[sc]})}(e,r[1]),r[3]!==sc&&r[3]!==sm)}}),e.invalidateQueries({...t,refetchType:"active",predicate:e=>{let t=e.queryKey;return!su(e)&&t[3]===sc&&!si(t)}})};function sP(){let{memex_table_without_limits:e}=n7();return!e}function sD(e){let t=sv(e);return e.getQueriesData({queryKey:t}).flatMap(e=>e[1]&&"nodes"in e[1]?e[1]?.nodes:[])}function sE(e){return e||sx([])}function sA(e){return sb(e)[1]}function sM(e,t){for(let[r,a]of e.getQueriesData(sZ))if(a&&"nodes"in a&&a.nodes.find(e=>e.id===t))return r}function sL(e){return{pages:[sx(e)],pageParams:[]}}function sF(e){return void 0!==e&&"nodes"in e}let sZ={queryKey:[l5],exact:!1,type:"active",predicate:e=>!su(e)};function sO(e,t,r){let a=[l5,t,l6,r];return e.getQueryData(a)}function sV(e,t,r,a){let n=[l5,t,r,a];return e.getQueryData(n)}function sB(e,t,r,a){let n=[l5,t,l6,r];e.setQueryData(n,a)}function s$(e,t,r,a,n){let i=[l5,t,r,a];e.setQueryData(i,n)}function sz(e){return sP()?sJ(e.getQueryData(sv(e)))||[]:sD(e)}function sW(e){return e.getQueryData(sv(e))}function sG(e,t){e.setQueryData(sv(e),{...t})}function sU(e,t){if(!sP())return sD(e).find(e=>e.id===t);{let r=sJ(e.getQueryData(sv(e)));return r?r.find(e=>e.id===t):void 0}}function sH(e,t){if(!sP())return sD(e).findIndex(e=>e.id===t);{let r=sJ(e.getQueryData(sv(e)));return r?r.findIndex(e=>e.id===t):-1}}function sq(e,t,r){if(sP()){let a=sH(e,t.id);e.setQueryData(sv(e),e=>{let n=[...sJ(e)||[]],i=r??n.length;return -1!==a&&(n.splice(a,1),i=a),n.splice(i,0,t),sL(n)})}else{let a=sH(e,t.id),n=!1,i=0,l=sz(e).length;if(e.setQueriesData(sZ,e=>{if(!sF(e))return sE(e);if(-1!==a)return{...e};if(n)return e;if(null!=r&&r>=i&&r<i+e.nodes.length){let a=[...e.nodes];return a.splice(r-i,0,t),n=!0,{...e,nodes:a}}if(null!=r||i+e.nodes.length!==l)return i+=e.nodes.length,e;{if(n=!0,e.pageInfo.hasNextPage)return e;let r=[...e.nodes];return r.push(t),{...e,nodes:r}}}),n){let t=sA(e),r=sC(e,t,1);sj(e,t,{totalCount:r})}}}function sK(e,t){if(sP())e.setQueryData(sv(e),e=>{let r=sJ(e)||[],a=new Set(t);return sL(r.filter(e=>!a.has(e.id)))});else{let r=sA(e),a={queryData:[],totalCounts:sS(e,r)},n=new Set(t),i=0,l={};for(let t of e.getQueriesData(sZ).map(([e])=>e))e.setQueryData(t,e=>{if(!sF(e))return sE(e);let r=!1;if(i===n.size)return e;let s=[];for(let o of e.nodes)if(n.has(o.id)){i++;let n=sa(t);if(sl(n)){let e=sd(n);l[e]=(l[e]??0)+1}r||(a.queryData.push({queryKey:t,queryData:e}),r=!0)}else s.push(o);return{...e,nodes:s}});let s={groups:Object.keys(l).reduce((t,a)=>{let n=l[a]??0;return t[a]=sI(e,r,a,-n),t},{}),totalCount:sC(e,r,-i)};return sj(e,r,s),a}}function sQ(e,t){if(!t)return;for(let{queryKey:r,queryData:a}of t.queryData)e.setQueryData(r,a);let r=sr(sA(e));e.setQueryData(r,t.totalCounts)}function sX(e,t){if(t)return e.getQueryData(lE.getKey({itemId:t}))}function sY(e,t){let r=sU(e,t.id),a=lE.getKey({itemId:t.id.toString()});r?e.removeQueries({queryKey:a,exact:!0}):e.setQueryData(a,t)}function sJ(e){return e?.pages[0]?.nodes}var s0=r(24139),s1=r(78551);function s2(e,t,r,a){"slices"in r&&null!=r.slices&&function(e,t,r){let a={...t,sliceByValue:void 0};e.setQueryData(st(a),r)}(e,t,{slices:r.slices});let n={groups:{}},{totalCount:i}=r;if(a&&sl(a)){let e=sd(a);n.groups[e]=i}else n.totalCount=i;let l=function(e,t,r,a){let{totalCount:n,...i}=r;if(!("groups"in i))return{...i,nodes:i.nodes.map(e=>i6(e))};{let r={groups:[],pageInfo:i.groups.pageInfo};for(let e of i.groups.nodes)a.groups[e.groupId]=e.totalCount,r.groups.push(e);for(let r of i.groupedItems){let a={nodes:r.nodes.map(e=>i6(e)),pageInfo:r.pageInfo};s$(e,t,ss(r),sc,a)}return r}}(e,t,r,n);return sj(e,t,n),l}function s5(e){let t=(0,W.NL)(),r=function(e,t){if(0!==e.getQueriesData({queryKey:[l5]}).length)return l2(t)?{pageParams:[sc],groupedItems:{}}:{pageParams:[sc]};{let{memexItems:r}=sh("memex-paginated-items-data"),a=s2(e,t,r);return l0(a)?(sT(e,t,sc,a),{groupedItems:a.groups.reduce((e,t)=>(e[t.groupId]=[sc],e),{}),pageParams:[sc]}):(sB(e,t,sc,a),{pageParams:[sc]})}}(t,e),{data:a}=(0,s1.a)({queryKey:se(e),initialData:r,enabled:!1,structuralSharing:!1});return{pageParamsQueryData:a,setPageParamsQueryData:(0,H.useCallback)(r=>{s_(t,e,r)},[t,e]),getPageParamsQueryData:(0,H.useCallback)(()=>sN(t,e),[t,e])}}let s3={hasNextPage:!1,hasPreviousPage:!1};function s4(e){let{getPageParamsQueryData:t,setPageParamsQueryData:r}=s5(e),a=(0,W.NL)(),n=(0,H.useCallback)(()=>{let n=t();if(l1(n)){let t={};for(let[r,i]of Object.entries(n.groupedItems)){let n=so(r),l={nodes:i.flatMap(t=>sV(a,e,n,t)).filter(e=>!!e).flatMap(e=>e.nodes),pageInfo:s3};s8(a,e,n,l),t[r]=[sm]}let i={groups:n.pageParams.map(t=>sk(a,e,t)).flatMap(e=>e?.groups??[]),pageInfo:s3};s8(a,e,l7,i),r({groupedItems:t,pageParams:[sc,sm]})}else{let t={nodes:n.pageParams.map(t=>sO(a,e,t)).filter(e=>!!e).flatMap(e=>e.nodes),pageInfo:s3};s8(a,e,l6,t),r({pageParams:[sc,sm]})}},[t,a,r,e]),i=(0,H.useCallback)((t,r,n)=>{if(t[t.length-1]===sm){let i=sl(r)?sV(a,e,r,sm):sO(a,e,sm),l=t.slice(0,t.length-1),s=i?.nodes.slice(n?.nodes.length);if(!(s?.length&&n?.pageInfo.hasNextPage&&n?.pageInfo.endCursor))return a.removeQueries({queryKey:l9(e,r,sm)}),l;{let t={nodes:s,pageInfo:s3},i=[...l,{after:n?.pageInfo.endCursor},sm];return sl(r)?s$(a,e,r,sm,t):sB(a,e,sm,t),i}}return t},[a,e]),l=(0,H.useCallback)((e,a)=>{let n=t(),l=sl(a)&&l1(n),s=l?sd(a):void 0,o=l&&s?n.groupedItems[s]||[]:n.pageParams;if(o[o.length-1]!==sm)return;let d=i(o,a,e);if(l&&s){let e={...n.groupedItems};e[s]=d,r({...n,groupedItems:e})}else r({...n,pageParams:d})},[t,i,r]);return{setUpNextPlaceholderQueries:n,updateMemexGroupsNextPlaceholderQuery:(0,H.useCallback)(n=>{let l=t(),s=l1(l)?l.groupedItems:{},o={...s};for(let e of n.groupedItems){let t=ss(e),r=sd(t),a=s[r]||[];(0===a.length||a[0]!==sc)&&a.unshift(sc);let n=i(a,t,e);o[r]=n||[]}let d=l.pageParams;if(d[d.length-1]===sm){let t=sk(a,e,sm),i=d.slice(0,d.length-1),l=t?.groups.slice(n.groups.nodes.length);l?.length&&n.groups.pageInfo.hasNextPage&&n.groups.pageInfo.endCursor?(r({groupedItems:o,pageParams:[...i,{after:n.groups.pageInfo.endCursor},sm]}),sT(a,e,sm,{groups:l,pageInfo:s3})):(a.removeQueries({queryKey:[l5,e,l7,sm]}),r({groupedItems:o,pageParams:i}))}else r({...l,groupedItems:o})},[t,i,a,r,e]),updateMemexItemsNextPlaceholderQuery:l}}function s8(e,t,r,a){l0(a)?sT(e,t,sm,a):sl(r)?s$(e,t,r,sm,a):sB(e,t,sm,a)}var s6=r(80044);async function s7(e={},t){let r=new URL(aa("memex-paginated-items-get-api-data").url,window.location.origin);if(e.after&&r.searchParams.set("after",e.after),e.before&&r.searchParams.set("before",e.before),e.q&&r.searchParams.set("q",e.q),e.scope&&r.searchParams.set("scope",e.scope),e.sortedBy)for(let{columnId:t,direction:a}of e.sortedBy)r.searchParams.append(le,a),r.searchParams.append(i9,`${t}`);null!=e.horizontalGroupedByColumnId&&r.searchParams.set(la,`${e.horizontalGroupedByColumnId}`),null!=e.verticalGroupedByColumnId&&r.searchParams.set(ln,`${e.verticalGroupedByColumnId}`),e.groupedByGroupValue&&r.searchParams.set("groupedBy[value]",`${e.groupedByGroupValue}`),e.verticalGroupedByGroupValue&&r.searchParams.set("verticalGroupedBy[value]",`${e.verticalGroupedByGroupValue}`),e.sliceByColumnId&&r.searchParams.set(lo,`${e.sliceByColumnId}`),e.sliceByValue&&r.searchParams.set(ld,`${e.sliceByValue}`),e.fieldIds?.length&&r.searchParams.set("fieldIds",JSON.stringify(e.fieldIds));let{data:a}=await ad(r,{signal:t});return a}var s9=r(53434);let oe="_noValue",ot=(0,H.createContext)(null),or=()=>{let e=(0,H.useContext)(ot);if(!e)throw Error("useSliceBy must be used within a ViewProvider");return e};async function oa(e){let t=aa("stats-post-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}let on=(0,H.createContext)(null),oi=()=>{let e=(0,H.useContext)(on);if(!e)throw Error("useViews must be used within a ViewProvider");return e},ol=()=>{let e=(0,H.useContext)(on);return e?.currentView?.number},os=()=>{let e=ol(),{loggedInUser:t}=i5();return{postStats:(0,H.useCallback)(r=>{t?.id&&oa({payload:{memexProjectViewNumber:e,...r}})},[e,t])}},oo=[{keyword:"is",isFilterable:!0,description:"Filter by item state or object type"},{keyword:"no",isFilterable:!1,description:""},{keyword:"has",isFilterable:!1,description:""},{keyword:"reason",isFilterable:!0,description:"Filter by item's state reason"},{keyword:"last-updated",isFilterable:!0,description:"Filter by item last updated"},{keyword:"updated",isFilterable:!0,description:"Filter by item's updated date"}];function od(){let e=(0,H.useCallback)(e=>oo.map(e=>e.keyword).includes(e),[]);return{FilterKeywords:oo,isKeywordQualifier:e}}var ou=r(37736);function oc(e){let[t]=e.split("T");return(0,J.Z)(t,"A date string must have been passed"),t}let om=/^["'`](.*)["'`]$/,op=(e,t)=>(t=t.toLocaleLowerCase(),e.every(e=>t.includes(e.replace(om,"$1")))),of=(e,t)=>e.some(e=>RegExp(`^${e.trim().split("*").map(e=>(0,ou.Z)(e)).join(".*")}$`,"i").test(t.trim())),oh=/>(.*)/,og=/>=(.*)/,oy=/<(.*)/,ox=/<=(.*)/,ob=/(.*)\.\.(.*)/,ov=/\*\.\.(.*)/,ow=/(.*)\.\.\*/,oj=e=>{let t=e.match(og);return t&&t[1]?{operator:"GREATER_THAN_OR_EQUAL",value:t[1]}:(t=e.match(oh))&&null!=t[1]?{operator:"GREATER_THAN",value:t[1]}:(t=e.match(ox))&&null!=t[1]?{operator:"LESS_THAN_OR_EQUAL",value:t[1]}:(t=e.match(oy))&&null!=t[1]?{operator:"LESS_THAN",value:t[1]}:(t=e.match(ov))&&null!=t[1]?{operator:"LESS_THAN_RANGE",end:t[1]}:(t=e.match(ow))&&null!=t[1]?{operator:"GREATER_THAN_RANGE",start:t[1]}:(t=e.match(ob))&&null!=t[1]&&null!=t[2]?{operator:"RANGE",start:t[1],end:t[2]}:null},oC=(e,t)=>{if(!e)return null;switch(e.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":return{...e,value:t(e.value)};case"GREATER_THAN_RANGE":return{...e,start:t(e.start)};case"LESS_THAN_RANGE":return{...e,end:t(e.end)};case"RANGE":return{...e,start:t(e.start),end:t(e.end)};default:ij(e)}},oI=(e,t)=>e.some(e=>{let r=oj(e);if(r?.operator==="GREATER_THAN_OR_EQUAL")return t>=tO(r.value);if(r?.operator==="GREATER_THAN")return t>tO(r.value);if(r?.operator==="LESS_THAN_OR_EQUAL")return t<=tO(r.value);if(r?.operator==="LESS_THAN")return t<tO(r.value);if(r?.operator==="LESS_THAN_RANGE")return t<=tO(r.end);if(r?.operator==="GREATER_THAN_RANGE")return t>=tO(r.start);if(r?.operator==="RANGE")return t>=tO(r.start)&&t<=tO(r.end);else return tO(e)===t});function oS(e,t){if("GREATER_THAN_OR_EQUAL"===e.operator)return e.value&&t>=e.value;if("GREATER_THAN"===e.operator)return e.value&&t>e.value;if("LESS_THAN_OR_EQUAL"===e.operator)return e.value&&t<=e.value;if("LESS_THAN"===e.operator)return e.value&&t<e.value;if("LESS_THAN_RANGE"===e.operator)return e.end&&t<=e.end;if("GREATER_THAN_RANGE"===e.operator)return e.start&&t>=e.start;if("RANGE"===e.operator){if(e.start&&e.end)return t>=e.start&&t<=e.end;if(e.start)return t>=e.start;if(e.end)return t<=e.end}return!1}let ok=(e,t)=>{let r=tV(t);return!!r&&e.some(a=>{let n=oj(a),i=!1,l=oC(n,e=>{let t=tV(e);return e&&!t&&(i=!0),t});if(i)return!1;if(l?.operator)return oS(l,r);{let n=tV(a);if(!n)return!1;let i=r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate();return of(e,t)||i}})};function oT(e,t){let r=nZ(e,t);if(r)return r;let a=nR(t).sort(nM);if(Object.values(nO).some(t=>e.includes(t))){let r=tP(e),n=tM(r,{kind:"string",start:0}),i=n?nF(n.text):null,l=i?nZ(i,t):null;if(l&&n){let e=tL(r,{kinds:["keyword.operator","string"],start:n});if(!e)return null;let[t,i]=e,s=tO(i.text)*("+"===t.text?1:-1);if(!isNaN(s)){let e=a.findIndex(e=>e.id===l.id);if(e>-1)return a.at(e+s)??null}}}return a.find(t=>e.toLowerCase().trim()===t.title.toLowerCase().trim())??null}function oN(e,t,r,a){let n=nR(t).find(e=>e.id===a);if(!n)return r;let i=e=>{let r=oT(e,t)?.startDate;return r?tV(r):void 0};return e.some(e=>{let r=oC(oj(e),i);if(r?.operator){let e=tV(n.startDate);return!!e&&oS(r,e)}{let r=oT(e,t);return r?.id===n.id}})}let o_=/(\d+)%/g,oR=(e,t)=>{let r=t5(t);return oI(e.filter(e=>o_.test(e)).map(e=>e.replace(o_,(e,t)=>t)),r)},oP=(e,t)=>{let r=iC(t).toLocaleLowerCase();return e.some(e=>e.toLocaleLowerCase()===r)},oD=(e,t,r)=>!r.length||!!t.find(t=>{switch(t.dataType){case eA.Title:{let t=tJ(e.Title),a=t1(e.Title),n=tW(a)?`${t} #${a}`:t;return!!n&&(op(r,t)||op(r,n))}case eA.Assignees:return!!e[eM.Assignees]?.find(e=>op(r,e.login)||e.name&&op(r,e.name));case eA.SingleSelect:{let a=e[t.id]?.id,n=t.settings.options?.find(e=>e.id===a),i=n?.name;return i&&op(r,i)}case eA.Labels:return!!e[eM.Labels]?.find(e=>op(r,e.name));case eA.Repository:{let t=e[eM.Repository]?.nameWithOwner;return!!t&&op(r,t)}case eA.Milestone:{let t=e[eM.Milestone]?.title;return!!t&&op(r,t)}case eA.Text:{let a=e[t.id];return!!a&&op(r,a.raw)}case eA.Number:{let a=e[t.id];return!!a&&op(r,a.value.toString())}case eA.Date:{let a=e[t.id];return!!a&&op(r,a.value.toString())}case eA.Iteration:{let a=e[t.id]?.id,n=nR(t).find(e=>e.id===a),i=n?.title;return i&&op(r,i)}case eA.LinkedPullRequests:return!!e[eM.LinkedPullRequests]?.find(e=>op(r,e.number.toString()));case eA.Reviewers:return!!e.Reviewers?.find(e=>op(r,e.reviewer.name)||e.reviewer.name&&op(r,e.reviewer.name));case eA.Tracks:{let t=e.Tracks;return!!t&&op(r,t&&rI.progressCount({percent:t5(t),total:t.total}))}case eA.TrackedBy:return e[eM.TrackedBy]?.some(e=>op(r,iC(e)));case eA.IssueType:{let t=e[eM.IssueType]?.name;return!!t&&op(r,t)}case eA.ParentIssue:{let t=e[eM.ParentIssue]?.nwoReference;return!!t&&op(r,t)}case eA.SubIssuesProgress:return!1;default:ij(t)}}),oE=({columnData:e,field:t,value:r,matchNegated:a=!1})=>{let n;let i=e.Title;if(!i)return!1;if("type"===t)switch(i.contentType){case eL.DraftIssue:return n="draft"===r||"issue"===r,a?!n:n;case eL.Issue:return n="issue"===r,a?!n:n;case eL.PullRequest:{let{state:e,isDraft:t}=i.value;return n="draft"===r?"open"===e&&t:"pr"===r,a?!n:n}default:return!1}if("state"===t)switch(i.contentType){case eL.Issue:return n=i.value.state.toString()===r,a?!n:n;case eL.PullRequest:{let{isDraft:e,state:t}=i.value;return n=t===r||"merged"===t&&"closed"===r||e&&"open"===t&&"draft"===r,a?!n:n}case eL.DraftIssue:if("open"===r)return!a;if("closed"===r||"merged"===r)return a;return!1;default:return!1}if("reason"===t)switch(i.contentType){case eL.Issue:{let e=i.value.state.toString(),t=i.value.stateReason??("closed"===e?aC.Completed:void 0);return n="closed"===e&&t&&new Set([aC.Completed,aC.NotPlanned]).has(t)?t===o8(r):"open"===e&&t===aC.Reopened&&t===o8(r),a?!n:n}case eL.PullRequest,eL.DraftIssue:return a}return!1},oA=[],oM=({column:e,columnData:t,values:r=oA,matchEmpty:a=!1,matchNegated:n=!1})=>{let i;let{loggedInUser:l}=i5();switch(e.dataType){case eA.Title:{let e=tJ(t.Title),l=t1(t.Title),s=tW(l)?`${e} #${l}`:e;return i=s?of(r,e)||of(r,s):a,n?!i:i}case eA.Assignees:return oO(t,"Assignees",r,a,n,l);case eA.SingleSelect:{let l=t[e.id]?.id,s=e.settings.options?.find(e=>e.id===l),o=s?.name;return i=o?of(r,o):a,n?!i:i}case eA.Labels:if(a){let e=!t.Labels||!t.Labels?.length;return n?!e:e}return i=!!t.Labels?.find(e=>of(r,e.name)),n?!i:i;case eA.Repository:{let e=t.Repository?.nameWithOwner;return i=e?of(r,e):a,n?!i:i}case eA.Milestone:{let e=t.Milestone?.title;return i=e?of(r,e):a,n?!i:i}case eA.Text:{let l=t[e.id];return i=l?of(r,l.raw):a,n?!i:i}case eA.Number:{let l=t[e.id];return i=l?oI(r,l.value):a,n?!i:i}case eA.Date:{let l=t[e.id];return i=l?ok(r,oc(l.value)):a,n?!i:i}case eA.Iteration:{let l=t[e.id]?.id;return i=oN(r,e,a,l),n?!i:i}case eA.LinkedPullRequests:if(a){let e=!t[eM.LinkedPullRequests]||!t[eM.LinkedPullRequests]?.length;return n?!e:e}return i=!!t[eM.LinkedPullRequests]?.find(e=>of(r,e.number.toString())),n?!i:i;case eA.Reviewers:return oO(t,"Reviewers",r,a,n,l);case eA.Tracks:{let e=t[eM.Tracks];return i=e&&e.total>0?oR(r,e):a,n?!i:i}case eA.TrackedBy:{i=!1;let e=t[eM.TrackedBy]??[];if(a){let t=0===e.length;return n?!t:t}for(let t of e)oP(r,t)&&(i=!0);return n?!i:i}case eA.IssueType:{let e=t[eM.IssueType]?.name;return i=e?of(r,e):a,n?!i:i}case eA.ParentIssue:{let e=t[eM.ParentIssue]?.nwoReference;return i=e?of(r,e):a,n?!i:i}case eA.SubIssuesProgress:{let e=t[eM.SubIssuesProgress];if(r.length)return!1;return i=e?.total?!a:a,n?!i:i}default:ij(e)}},oL=({itemUpdateAtDate:e,value:t,matchNegated:r})=>{if(!e)return!1;let a=t.match(td),n=a?a[1]:void 0;return!!n&&!!oS({operator:r?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:tV(`@today-${n}`)},e)},oF={d:1,w:7,m:28},oZ=({itemUpdateAtDate:e,value:t,matchNegated:r})=>{if(!e)return!1;let a=t.match(tu);if(a){let[t,n,i]=a;if(n&&i){let t=parseInt(n)*oF[i];return!!oS({operator:r?"GREATER_THAN_OR_EQUAL":"LESS_THAN",value:tV(`@today-${t}`)},e)}}return!1};function oO(e,t,r,a,n,i){let l;if(a){let r=!e[t]||!e[t]?.length;return n?!r:r}let s=r.indexOf("@me");return s>-1&&i?.login&&r.splice(s,1,i.login.toLocaleLowerCase()),l="Assignees"===t?!!e[t]?.find(e=>of(r,e.login)||e.name&&of(r,e.name)):!!e[t]?.find(e=>of(r,e.reviewer.name)||e.reviewer.name&&of(r,e.reviewer.name)),n?!l:l}let oV=/(?:[\w-]+:)+(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)*|(?:[^\s"']+|"(?:[^"]*)"*|'(?:[^']*)'*)/g;function oB(e){let t=e.split(oV);oV.lastIndex=0;let r=[],a=[],n=[],i=oV.exec(e);oV.lastIndex=0,i&&i.index>0&&n.push({type:"search",value:"",spaceAfter:" ".repeat(i.index)});let l=null,s=1;for(;null!==(l=oV.exec(e));){let i=l[0];if(!i)continue;if(oW(i))return{searchTokens:[],fieldFilters:[],orderedTokenizedFilters:[{type:"search",value:e,spaceAfter:""}],invalidQuery:!0};let o=t[s]||"";if(s+=1,null!==i.match(oX)){let e=function(e){let t=e.match(oH);return t&&t[0]?t[0]:""}(i),t=i.substring(e.length+1);if(e&&a.push([e,oU(t)]),"no"===e)n.push({type:"no-field",field:t,spaceAfter:o});else if("-no"===e)n.push({type:"no-field",field:t,exclude:!0,spaceAfter:o});else if("has"===e)n.push({type:"has",field:t,spaceAfter:o});else if("-has"===e)n.push({type:"has",field:t,exclude:!0,spaceAfter:o});else if("is"===e)n.push({type:"is",value:t,spaceAfter:o});else if("-is"===e)n.push({type:"is",exclude:!0,value:t,spaceAfter:o});else if("reason"===e)n.push({type:"reason",value:t,spaceAfter:o});else if("-reason"===e)n.push({type:"reason",exclude:!0,value:t,spaceAfter:o});else if("last-updated"===e)n.push({type:"last-updated",value:t,spaceAfter:o});else if("-last-updated"===e)n.push({type:"last-updated",exclude:!0,value:t,spaceAfter:o});else if("updated"===e)n.push({type:"updated",value:t,spaceAfter:o});else if("-updated"===e)n.push({type:"updated",exclude:!0,value:t,spaceAfter:o});else{let r=e.startsWith("-");n.push({type:"field",field:r?e.slice(1):e,value:t,exclude:r,spaceAfter:o})}}else{n.push({type:"search",value:i,spaceAfter:o});let e=i.trim();e.length&&r.push(e.toLowerCase())}}return{searchTokens:r,fieldFilters:a,orderedTokenizedFilters:n,invalidQuery:!1}}function o$(e){return"no"===e||"has"===e}function oz(e){return 0===e.indexOf("-")}function oW(e){let t=[],r=[];for(let a of e){let e=r.length>0,n=t.length>0,i=t[t.length-1]||"",l=r[r.length-1]||"";"'"===a?(!e||l<i)&&(t.length>0&&i===a?t.pop():t.push(a)):'"'===a&&(!n||i<l)&&(r.length>0&&l===a?r.pop():r.push(a))}return t.length>0||r.length>0}let oG=/"/g;function oU(e){let t=[],r=0;for(let a=0;a<=e.length;a++){let n=e[a],i=e.substring(r,a),l=(i.match(oG)||[]).length;if(","===n&&l%2==0||a===e.length){let e=i.replace(om,"$1").trim();r=a+1,e.length&&t.push(e)}}return t}let oH=/^[^:]*/;function oq(e){let t=new Map;for(let r of e){let e=oQ(r.name);t.set(e,r)}return t}function oK(e){let t=o0(e.toLocaleLowerCase().trim());return["repo","assignee","label"].includes(t)&&("repo"===t&&(t="repository"),"assignee"===t&&(t="assignees"),"label"===t&&(t="labels")),t}function oQ(e){let t=e.toLocaleLowerCase().trim().replace(oY,"-");return["repository","assignees","labels"].includes(t)&&("repository"===t&&(t="repo"),"assignees"===t&&(t="assignee"),"labels"===t&&(t="label")),t}let oX=/^(?:(?!["']|:).)+(?=:)/,oY=/ /g,oJ=/-/g;function o0(e){return e.replace(oJ," ")}let o1=(e,t,r)=>{if(!e.length||!r.length||r.length>1)return null;let{dataType:a}=t;switch(a){case eA.SingleSelect:{let e=t.settings.options?.find(e=>of(r,e.name));return e?{dataType:a,memexProjectColumnId:t.id,value:{id:e.id}}:null}case eA.Iteration:{let e;let{configuration:n}=t.settings;if(!n)return null;let i=r[0];if(null==i)return null;let l=nZ(i,t);return(e=1===r.length&&l?l:nP(n).find(e=>of(r,e.title))||null)?{dataType:a,memexProjectColumnId:t.id,value:{id:e.id}}:null}case eA.Text:for(let n of e){let e=n.columns[t.id];if(e&&of(r,e.raw))return{dataType:a,memexProjectColumnId:t.id,value:e.raw}}return null;case eA.Date:{let e=r[0];if(null==e)return null;let n=tK(e);if(!n)return null;return{dataType:a,memexProjectColumnId:t.id,value:{value:n}}}case eA.Number:for(let n of e){let e=n.columns[t.id];if(e&&of(r,`${e.value}`))return{dataType:a,memexProjectColumnId:t.id,value:e}}return null;case eA.ParentIssue:for(let n of e){let e=n.columns[t.id];if(e&&of(r,e.nwoReference))return{dataType:a,value:e}}return null;case eA.Assignees:case eA.Labels:return{dataType:a,value:[]};case eA.Milestone:return{dataType:a,value:void 0};case eA.Repository:default:return null}},o2=/^(@)*\w+(-\d+(d|w|m))?$/,o5=/\S+:["']*$/;function o3(e,t,{value:r,replace:a,filterForPresence:n=!1,filterForEmpty:i=!1,filterForNegative:l=!1}={}){let s=oQ(t),o=e.trim();a&&(o.endsWith('"')||o.endsWith("'"))&&(o=o.slice(0,-1));let d=o.match(o5),u=`${s}:`,c=tP(o),m=tA(c,{kind:["keyword.operator.range","keyword.operator.comparison"],start:o.length-1,end:["keyword.operator.separator","source.whitespace"]}),p=tA(c,{kind:"keyword.operator.separator",start:o.length-1});m&&(u+=o.substring(p?p.location.start+1:0,m.location.start)+m.text);let f=()=>{let e=o.lastIndexOf(",");if(-1===e)return!1;if(e===o.length-1)return!0;let t=o.substring(e+1);return r?.includes(t)||!1},h=t=>{let r=e.lastIndexOf(" "),a=e.substring(0,r);return a.length?`${a} ${t}`:`${a}${t}`},g=t=>{let r=e.lastIndexOf(","),a=e.substring(0,r+1);return`${a}${t}`};if(n)return f()?g(s):h(`${l?"-":""}has:${s}`);if(i)return f()?g(s):h(`${l?"-":""}no:${s}`);if(l){let e="";return(r&&(e=r.toString().match(o2)?r:`"${r}"`),f())?g(e):h(`-${u}${e}`)}if(r){let e=r.match(o2)?r:`"${r}"`;if(f())return g(e);u=`${u}${e}`}if(d)return e.replace(o5,u);if(a){if(r){let t=e.lastIndexOf(`${s}:`),r=e.substring(0,t);return`${r}${u}`}return h(u)}return o.length?`${o} ${u}`:u}function o4(e){let t=e.toLocaleLowerCase(),r=oB(t);return{normalisedQuery:t,...r}}function o8(e){let t=e.replace(/[-_ ]/g,"").toLocaleLowerCase();return"notplanned"===t?aC.NotPlanned:"completed"===t?aC.Completed:"reopened"===t?aC.Reopened:null}let o6=(e,t,r)=>{let a=(0,ou.Z)(e),n=(0,ou.Z)(t),i=RegExp(`\\s*${a}:(.*,)?("?${n}"?)(,\\S)?`,"ig").exec(r);if(!i)return r;let l=i[0],s=i[1],o=i[2]??"",d=i[3],u=s?`,${o}`:d?`${o},`:l;return function(e,t){let r=RegExp("^[\\s,\\s]*|[\\s,\\s]*");return e.replace(r,"")}(r.replace(u,""),0)};function o7(e,t,r={}){for(let a of t?.type!=="no-field"&&t?.type!=="has"&&t?.value?t.value.split(",").map(e=>e.trim()):[])e.add(r.columnOptionMap?.get(a.toLowerCase())||a);return e}function o9(e){return!e.includes(" ")||e.startsWith('"')||e.endsWith('"')||e.startsWith("'")||e.endsWith("'")?e:`"${e}"`}let de={open:"open",closed:"closed",merged:"merged",draft:"draft",issue:"issue",pr:"pr"},dt={not_planned:"not planned",completed:"completed",reopened:"reopened"},dr={is:de,reason:dt,"last-updated":{seven_days:"7days",fourteen_days:"14days",twenty_one_days:"21days"},updated:{seven_days:"<@today-7d",two_weeks:"<@today-2w",one_month:"<@today-1m"}},da=new Set(["reason"]),dn=e=>da.has(e.toLowerCase()),di=Symbol("UNSET");function dl(e){let t=(0,H.useRef)(di);return t.current===di&&(t.current=e()),t}let BaseColumnModel=class BaseColumnModel{constructor(e){this.id=e.id,this.name=e.name,this.dataType=e.dataType,this.userDefined=e.userDefined,this.databaseId=e.databaseId,this.position=e.position||-1,this.defaultColumn=e.defaultColumn,this.settings={width:200,...e.settings}}};let DateColumnModel=class DateColumnModel extends BaseColumnModel{};let IterationColumnModel=class IterationColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,configuration:e.settings?.configuration??{startDay:new Date().getDay()||7,duration:14,iterations:[],completedIterations:[]}}})}};let NumberColumnModel=class NumberColumnModel extends BaseColumnModel{};let BaseSingleSelectColumnModel=class BaseSingleSelectColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,options:e.settings?.options??[]}})}};let SingleSelectColumnModel=class SingleSelectColumnModel extends BaseSingleSelectColumnModel{};let TextColumnModel=class TextColumnModel extends BaseColumnModel{};let AssigneesColumnModel=class AssigneesColumnModel extends BaseColumnModel{};let IssueTypeColumnModel=class IssueTypeColumnModel extends BaseColumnModel{};let LabelsColumnModel=class LabelsColumnModel extends BaseColumnModel{};let LinkedPullRequestsColumnModel=class LinkedPullRequestsColumnModel extends BaseColumnModel{};let MilestoneColumnModel=class MilestoneColumnModel extends BaseColumnModel{};let ParentIssueColumnModel=class ParentIssueColumnModel extends BaseColumnModel{};let RepositoryColumnModel=class RepositoryColumnModel extends BaseColumnModel{};let ReviewersColumnModel=class ReviewersColumnModel extends BaseColumnModel{};let StatusColumnModel=class StatusColumnModel extends BaseSingleSelectColumnModel{};let SubIssuesProgressColumnModel=class SubIssuesProgressColumnModel extends BaseColumnModel{};let TitleColumnModel=class TitleColumnModel extends BaseColumnModel{constructor(e){super({...e,settings:{...e.settings,width:e.settings?.width??650}})}};let TrackedByColumnModel=class TrackedByColumnModel extends BaseColumnModel{};let TracksColumnModel=class TracksColumnModel extends BaseColumnModel{};function ds(e){switch(e.dataType){case eA.Assignees:return new AssigneesColumnModel(e);case eA.Labels:return new LabelsColumnModel(e);case eA.LinkedPullRequests:return new LinkedPullRequestsColumnModel(e);case eA.Milestone:return new MilestoneColumnModel(e);case eA.ParentIssue:return new ParentIssueColumnModel(e);case eA.Repository:return new RepositoryColumnModel(e);case eA.Reviewers:return new ReviewersColumnModel(e);case eA.SubIssuesProgress:return new SubIssuesProgressColumnModel(e);case eA.Title:return new TitleColumnModel(e);case eA.Tracks:return new TracksColumnModel(e);case eA.TrackedBy:return new TrackedByColumnModel(e);case eA.Text:return new TextColumnModel(e);case eA.SingleSelect:if(e.id===eM.Status)return new StatusColumnModel(e);return new SingleSelectColumnModel(e);case eA.Number:return new NumberColumnModel(e);case eA.Date:return new DateColumnModel(e);case eA.Iteration:return new IterationColumnModel(e);case eA.IssueType:return new IssueTypeColumnModel(e);default:ij(e.dataType)}}let dd=(0,H.createContext)(null),du=(0,H.createContext)(null),dc=(0,H.memo)(function({children:e}){let{tasklist_block:t,issue_types:r}=n9(),a=dl(()=>eP("reserved-column-names")||[]),[n,i]=(0,H.useState)(()=>{let e=eP("memex-columns-data")||[];return t||(e=e.filter(e=>e.id!==eM.TrackedBy)),r||(e=e.filter(e=>e.id!==eM.IssueType)),dm(e)}),l=(0,H.useRef)(n),s=dl(()=>(function(){let{memex_table_without_limits:e}=n7(),{memexItems:t}=sh(e?"memex-paginated-items-data":"memex-items-data"),r="nodes"in t?t.nodes:"groups"in t?t.groupedItems.reduce((e,t)=>e.concat(t.nodes),[]):t,a=new Set;if(r?.length){let e=r.sort((e,t)=>t.memexProjectColumnValues.length-e.memexProjectColumnValues.length)[0];if(e)for(let t of e.memexProjectColumnValues)a.add(t.memexProjectColumnId)}return a})()),o=(0,H.useCallback)(e=>{i(e),l.current=e},[]),d=(0,H.useCallback)(e=>{s.current.add(e)},[s]),u=(0,H.useMemo)(()=>({reservedColumnNames:a.current,setAllColumns:o,allColumns:n,allColumnsRef:l,addLoadedFieldId:d,loadedFieldIdsRef:s}),[a,s,o,n,d]),c=(0,H.useMemo)(()=>({setAllColumns:o,allColumnsRef:l,addLoadedFieldId:d,loadedFieldIdsRef:s}),[s,d,o]);return(0,O.jsx)(dd.Provider,{value:u,children:(0,O.jsx)(du.Provider,{value:c,children:e})})});function dm(e){return e.map(e=>ds(e))}try{dd.displayName||(dd.displayName="ColumnsContext")}catch{}try{du.displayName||(du.displayName="ColumnsStableContext")}catch{}try{dc.displayName||(dc.displayName="ColumnsStateProvider")}catch{}let dp=()=>{let e=(0,H.useContext)(dd);if(!e)throw Error("useColumnsContext must be used within a ColumnsContext.Provider");return e},df=()=>dp();function dh(){let{allColumns:e}=df(),t=(0,H.useMemo)(()=>oq(e),[e]),{isKeywordQualifier:r}=od();return{itemMatchesFilterQuery:(0,H.useCallback)((e,a,n)=>(function(e,t,r,a,n){if(e instanceof RedactedItemModel)return!1;let i=e.columns,l=!!t.fieldFilters.length,s=l&&t.fieldFilters.some(e=>e[1].length>0),o=n||[...r.values()];if(l&&s){let n=!0;for(let l of t.fieldFilters){let t=l[0],s=l[1],o=oz(t);o&&(t=t.substring(1));let d=r.get(oQ(t));if(!a(t)&&!d)return!1;let u=dn(t),c=!1;if(o$(t)&&s.length)for(let e of s){let a=r.get(oQ(e)),l=o&&"no"===t||!o&&"has"===t;if(a&&(n=oM({columnData:i,column:a,matchEmpty:!0,matchNegated:l})))break}else if(a(t)){if(!s.length)return!0;for(let r of s){if("last-updated"===t){n=oL({itemUpdateAtDate:e.updatedAt?tV(oc(e.updatedAt)):void 0,value:r,matchNegated:o});break}if("updated"===t){n=oZ({itemUpdateAtDate:e.updatedAt?tV(oc(e.updatedAt)):void 0,value:r,matchNegated:o});break}switch(r){case dr.is.open:case dr.is.closed:case dr.is.merged:n=oE({columnData:i,field:"state",value:r,matchNegated:o});break;case dr.is.issue:case dr.is.pr:n=oE({columnData:i,field:"type",value:r,matchNegated:o});break;case dr.is.draft:n=oE({columnData:i,field:"state",value:r,matchNegated:o})||oE({columnData:i,field:"type",value:r,matchNegated:o});break;case dr.reason.not_planned:case dr.reason.completed:case dr.reason.reopened:n=oE({columnData:i,field:"reason",value:r,matchNegated:o});break;default:if(!u)return!1;c=!0}if(o&&!n||!o&&n)break}}if(d&&!u||u&&c){if(!d)return!1;if(!s.length)continue;n=oM({columnData:i,column:d,values:s,matchNegated:o})}if(!n)break}return!!n&&(t.searchTokens.length&&(n=oD(i,o,t.searchTokens)),n)}return l?!t.searchTokens.length||oD(i,o,t.searchTokens):(!(t.normalisedQuery.length>0)||0!==t.searchTokens.length)&&oD(i,o,t.searchTokens)})(e,a,t,r,n),[t,r])}}function dg(){let e=(0,K.TH)();for(let t of[ev,eb]){let r=t.matchPath(e.pathname);if(r)return{projectViewRoutesMatch:r,isProjectViewRoute:!0}}return{projectViewRoutesMatch:null,isProjectViewRoute:!1}}let dy={SetSortedBy:"SetSortedBy",SetHorizontalGroupedBy:"SetHorizontalGroupedBy",ClearHorizontalGroupedBy:"ClearHorizontalGroupedBy",SetVerticalGroupedBy:"SetVerticalGroupedBy",SetViewType:"SetViewType",SetFilter:"SetFilter",ShowField:"ShowField",HideField:"HideField",ToggleField:"ToggleField",MoveField:"MoveField",GoToViewNumber:"GoToViewNumber",ResetViewState:"ResetViewState",AddField:"AddField",RemoveField:"RemoveField",SetState:"SetState",SaveViewName:"SaveViewName",AddView:"AddView",DeleteView:"DeleteView",UpdateView:"UpdateView",SetViews:"SetViews",SetLocalViewState:"SetLocalViewState",SetViewServerStates:"SetViewServerStates",ReorderView:"ReorderView",ToggleItemsCount:"ToggleItemsCount",AddFieldAggregation:"AddFieldAggregation",RemoveFieldAggregation:"RemoveFieldAggregation",SetRoadmapDateFields:"SetRoadmapDateFields",SetRoadmapZoomLevel:"SetRoadmapZoomLevel",SetColumnWidths:"SetColumnWidths",ToggleRoadmapMarkerFields:"ToggleRoadmapMarkerFields",UpdateBoardColumnLimit:"UpdateBoardColumnLimit",SetSliceBy:"SetSliceBy",ClearSliceBy:"ClearSliceBy",SetSliceValue:"SetSliceValue",SetSliceByFilter:"SetSliceByFilter",SetSliceByPanelWidth:"SetSliceByPanelWidth"},dx={isMainProjectFilter:!0,viewStateActionType:dy.SetFilter,getSearchQueryFromView:e=>e?.localViewState?.filter??"",getSearchIsDirty:e=>e?.isFilterDirty??!1,stats:{search:"search",cancel:"search_cancel"}},db=(0,H.createContext)(null),dv=()=>{let e=(0,H.useContext)(db);if(!e)throw Error("useSearch must be used inside a SearchProvider");return e},dw=(0,H.memo)(function({children:e,config:t}){let{currentView:r,viewStateDispatch:a}=oi(),{allColumns:n}=df(),{itemMatchesFilterQuery:i}=dh(),l=(0,H.useRef)(null),{postStats:s}=os(),o=(0,e5.Z)(s),d=(0,H.useMemo)(()=>(0,s9.Z)(e=>{t.stats?.search&&o.current({name:t.stats.search,context:e.trim()})},500),[o,t.stats]),u=(0,H.useCallback)((e,r)=>{d.cancel(),a({type:t.viewStateActionType,viewNumber:e,filter:r}),d(r)},[d,a,t.viewStateActionType]),c=t.getSearchQueryFromView(r),m=t.getSearchIsDirty(r),p=(0,H.useMemo)(()=>r?.localViewStateDeserialized.visibleFields??[],[r?.localViewStateDeserialized.visibleFields]),f=(0,H.useMemo)(()=>{let e,t;let a=r?.localViewStateDeserialized.sliceBy?.field,n=r?.localViewStateDeserialized.sliceValue;if(!a||!n)return o4("");let i=oQ(a.name);return n===oe?(e="no",t=i):(e=i,t=n),o4(`${e}:"${t}"`)},[r]),h=(0,H.useMemo)(()=>o4(t.baseQuery?`${t.baseQuery} ${c}`:c),[c,t.baseQuery]),g=(0,H.useCallback)((e,t={})=>{r&&u(r.number,o3(c,e,t))},[r,c,u]),y=(0,H.useCallback)((e,t)=>h.fieldFilters.some(([r,a])=>r===e.toLowerCase()&&a.includes(t.toLowerCase())),[h.fieldFilters]),x=(0,H.useCallback)((e,t)=>{r?.number&&g(oQ(e),{value:t.toString()})},[g,r]),b=(0,H.useCallback)((e,t)=>{if(!r?.number)return;let a=oQ(e),n=t.toString();u(r.number,o6(a,n,c))},[r,c,u]),v=(0,H.useCallback)((e,t)=>{if(!r?.number)return;let a=oQ(e),n=t.toString();(y(a,n)?b:x)(a,n)},[r,y,x,b]),w=(0,H.useCallback)((e,t)=>{if(!r?.number)return;let a=e.toLowerCase(),i=t.toString(),l=function(e){switch(e?.dataType){case eA.SingleSelect:return e.settings.options.map(e=>o9(e.name));case eA.Iteration:return e.settings.configuration.iterations.map(e=>o9(e.title));default:return}}(n.filter(dj).find(e=>e.name.toLowerCase()===("-"===a[0]?a.slice(1):a)));u(r.number,function(e,t,r,a){let{orderedTokenizedFilters:n}=oB(e),i=oz(t),l=(i?t.slice(1):t).toLowerCase(),s=new Set,o=new Set,d=new Map(a?.columnOptions?.map(e=>[e.toLowerCase(),e])),{firstInclusiveFilterIndex:u,firstExclusiveFilterIndex:c,filters:m}=function(e,t,r){let a=-1,n=-1,i=[];for(let l=0;l<e.length;l++){let s=e[l];if("search"!==s.type||""!==s.value){if("field"!==s.type||s?.field.toLocaleLowerCase()!==t.toLocaleLowerCase()){i.push({...s,spaceAfter:" "});continue}s.exclude?(r(!0,s),-1===n&&(n=l,i.push(s))):(r(!1,s),-1===a&&(a=l,i.push(s)))}}return{firstInclusiveFilterIndex:a,firstExclusiveFilterIndex:n,filters:i}}(n,l,(e,t)=>{e?o7(o,t,{columnOptionMap:d}):o7(s,t,{columnOptionMap:d})});i?o.add(o9(r)):s.add(o9(r));let p=[...s][0],f=[...o][0];if(i&&1===s.size&&1===o.size&&p===f)s.delete(p);else for(let e of s)o.has(e)&&(s.delete(e),o.delete(e));let h=0;if(s.size>0){let e=Array.from(s).join(","),t=-1===u?m.length:u;m[t]={type:"field",field:l,value:e,exclude:!1,spaceAfter:m[t]?.spaceAfter||" "}}else u>-1&&(m.splice(u,1),u<c&&h--);if(o.size>0){let e=Array.from(o).join(","),t=-1===c?m.length:c+h;m[t]={type:"field",field:l,value:e,spaceAfter:m[t]?.spaceAfter||" ",exclude:!0}}else c>-1&&m.splice(c+h,1);return m[m.length-1]&&(m[m.length-1].spaceAfter=""),function(e){let t="";for(let r of e){switch(r.type){case"search":t+=r.value;break;case"is":t+=`${r.exclude?"-":""}is:${r.value}`;break;case"reason":t+=`${r.exclude?"-":""}reason:${r.value}`;break;case"field":t+=`${r.exclude?"-":""}${r.field}:${r.value}`;break;case"no-field":t+=`${r.exclude?"-":""}no:${r.field}`}t+=r.spaceAfter}return t}(m)}(c,a,i,{columnOptions:l}))},[r,c,u,n]),j=(0,H.useCallback)((e,t="include")=>{if(!r)return!1;let a=i(e,h,p);return"include"===t&&f.normalisedQuery?a&&i(e,f,p):a},[p,r,h,i,f]),{FilterKeywords:C}=od(),I=(0,H.useCallback)((e,t="include")=>e.length?(h.normalisedQuery||f.normalisedQuery)&&("exclude"!==t||h.normalisedQuery)?e.reduce((e,r)=>(r.isGrouped?(r.subRows=I(r.subRows,t),e.push({...r})):j(r.original,t)&&e.push(r),e),[]):e:[],[h.normalisedQuery,f.normalisedQuery,j]),S=(0,H.useCallback)(()=>{l.current?.focus()},[]),k=(0,H.useCallback)(e=>{u(e,""),t.stats?.cancel&&s({name:t.stats.cancel})},[s,u,t.stats]),T=(0,H.useCallback)(()=>{let e=c.trimEnd();if(r&&e.length>0){let t=e.endsWith(":")||e.endsWith(",");u(r.number,t?e:`${e} `),S()}else S()},[r,c,u,S]),{isProjectViewRoute:N}=dg();ep(()=>N&&t.isMainProjectFilter?["f","Filter by...",n.filter(dj).map((e,t)=>[t.toString(36),`Filter by ${e.name}`,"filter",()=>{g(e.name),S()}]).concat(C.filter(e=>e.isFilterable).map((e,t)=>[(100+t).toString(),e.description,"filter",()=>{g(e.keyword),S()}]))]:null,[n,g,N,h,S,C,t.isMainProjectFilter]);let _=(0,H.useMemo)(()=>({searchInputRef:l,query:c,baseQuery:t.baseQuery,...h,addSpaceToQuery:T,setQuery:u,clearSearchQuery:k,appendFilter:g,addFilter:x,removeFilter:b,toggleFilter:v,insertFilter:w,isSearchDirty:m,matchesSearchQuery:j,globalFilter:I,focusFilterInput:S,transientQuery:f}),[c,h,T,u,k,g,x,b,v,w,m,j,I,S,f,t.baseQuery]);return(0,O.jsx)(db.Provider,{value:_,children:e})});function dj(e){return e.dataType!==eA.Title}try{db.displayName||(db.displayName="SearchContext")}catch{}try{dw.displayName||(dw.displayName="SearchProvider")}catch{}let dC=(0,H.createContext)(null),dI=()=>{let e=(0,H.useContext)(dC);if(!e)throw Error("useHorizontalGroupedBy must be used within a HorizontalGroupedByContext");return e},dS=(0,H.createContext)(null),dk=()=>{let e=(0,H.useContext)(dS);if(!e)throw Error("useVerticalGroupedBy must be used within a VerticalGroupedByContext");return e},dT=(0,H.createContext)(null),dN=()=>{let e=(0,H.useContext)(dT);if(!e)throw Error("useSortedBy must be used within a SortedByContext");return e};function d_({withSliceByValue:e}){let{currentView:t}=oi(),r=dx.getSearchQueryFromView(t),{sorts:a}=dN(),n=(0,H.useMemo)(()=>a.map(e=>({columnId:e.column.databaseId,direction:e.direction})),[a]),{groupedByColumnId:i}=dI(),{groupedByColumnId:l}=dk();t?.localViewStateDeserialized.viewType!=="board"&&(l=void 0);let{sliceField:s,sliceValue:o}=or(),d=s?.id;return(0,H.useMemo)(()=>({q:r,sortedBy:n,horizontalGroupedByColumnId:i,verticalGroupedByColumnId:l,sliceByColumnId:d,sliceByValue:e?o??void 0:void 0}),[r,n,i,l,d,e,o])}function dR(){let e=d_({withSliceByValue:!0}),{queries:t,queryKeys:r}=function(e){let{pageParamsQueryData:t}=s5(e),r=(0,W.NL)(),{updateMemexItemsNextPlaceholderQuery:a,updateMemexGroupsNextPlaceholderQuery:n}=s4(e),i=(0,H.useMemo)(()=>{let i=[],l=l1(t)?[...Object.entries(t.groupedItems).flatMap(([e,t])=>t.map(t=>({pageType:{groupId:e},pageParam:t}))),...t.pageParams.map(e=>({pageType:l7,pageParam:e}))]:t.pageParams.map(e=>({pageType:l6,pageParam:e})),s=function(e){let t={},r=[...sv(e),l7];for(let[a,n]of e.getQueriesData({queryKey:r}))for(let e of n&&l0(n)?n.groups:[])t[e.groupId]=e.groupValue;return t}(r);for(let{pageType:t,pageParam:o}of l)i.push({queryKey:l9(e,t,o),queryFn:async({signal:i})=>{if(o===sm)return{nodes:[],pageInfo:s3,totalCount:{value:0,isApproximate:!1}};let l=function(e,t,r,a){let n={...e,...a};if(sl(r)){let a=t[r.groupId];e.verticalGroupedByColumnId?n.verticalGroupedByGroupValue=a:e.horizontalGroupedByColumnId&&(n.groupedByGroupValue=a)}return n}(e,s,t,o),d=await s7(l,i);if(i.aborted)return{nodes:[],pageInfo:s3,totalCount:{value:0,isApproximate:!1}};let u=s2(r,e,d,t),{totalCount:c,...m}=d;return"groups"in m?n(m):a(m,t),u},structuralSharing:!1,staleTime:1/0});return i},[t,r,n,a,e]),l=(0,H.useMemo)(()=>i.map(e=>e.queryKey||[]),[i]);return{queries:function(e){let t=(0,H.useRef)([]);return t.current&&e.length===t.current.length&&e.every((e,r)=>{let a=t.current&&e.data===t.current[r]?.data;return a&&(t.current[r]=e),a})||(t.current=e),t.current}((0,s6.h)({queries:i})),queryKeys:l}}(e),a=sS((0,W.NL)(),e),{queriesForItems:n,queryKeysForItems:i,queriesForGroups:l,queryKeysForGroups:s}=(0,H.useMemo)(()=>(function(e,t){let r=[],a=[],n=[],i=[];for(let[l,s]of e.entries()){let e=t[l];sn(e)?(n.push(s),i.push(e)):(r.push(s),a.push(e))}return{queriesForItems:r,queryKeysForItems:a,queriesForGroups:n,queryKeysForGroups:i}})(t,r),[t,r]),o=(0,H.useMemo)(()=>n.map(e=>e.data||{nodes:[],pageInfo:{hasNextPage:!1,hasPreviousPage:!1}}),[n]),d=(0,H.useMemo)(()=>(function(e,t,r,a){let n={};if(0===r.length)return{};for(let[r,a]of t.entries()){let t=sa(a),i=e[r];if(i&&sl(t)){let e=sd(t),r=n[e]||[];r.push(i),n[e]=r}}return r.flatMap(e=>e.data?.groups||[]).reduce((e,t)=>{let r=n[t.groupId]||[],i=a?.groups[t.groupId]||{value:0,isApproximate:!1};return{...e,[t.groupId]:{...t,queries:r,totalCount:i}}},{})})(n,i,l,a),[l,n,i,a]);return{data:o,queriesForItems:n,queryKeysForItems:i,queriesForGroups:l,queryKeysForGroups:s,itemQueriesByGroup:d,...function(e,t,r,a,n){let{getPageParamsQueryData:i,setPageParamsQueryData:l}=s5(n),s=(0,W.NL)(),{setUpNextPlaceholderQueries:o}=s4(n),d=i(),u=l1(d)?t:e,c=u[d.pageParams.length-1],m=(0,H.useCallback)(()=>{let e=c?.data?.pageInfo.endCursor,t=null==e?sc:{after:e};l({...d,pageParams:[...d.pageParams,t]})},[d,c,l]),p=(0,H.useCallback)(async()=>{let e=[...r.concat(a)];for(let t of(o(),e))t[3]!==sm&&s.removeQueries({queryKey:t});sR(s)},[o,r,a,s]);return{fetchNextPage:m,hasNextPage:c?.data==null||c?.data.pageInfo.hasNextPage,isFetchingNextPage:c?.isFetching??!1,isRefetching:u.some(e=>e.isRefetching),invalidateAllQueries:p}}(n,l,i,s,e),...function(e,t,r){let{getPageParamsQueryData:a,setPageParamsQueryData:n}=s5(r),i=a(),l=(0,H.useMemo)(()=>l1(i)?i.groupedItems:{},[i]),s=(0,H.useCallback)(a=>{let n=l[sd(a)]||[];return function(e,t,r){let a=(0,s0.Ym)(e);return t[r.findIndex(e=>(0,s0.Ym)(e)===a)]}([l5,r,a,n[n.length-1]],e,t)},[l,e,t,r]);return{fetchNextPageForGroupedItems:(0,H.useCallback)(e=>{let t=s(e),r=t?.data?.pageInfo.endCursor,i=null==r?sc:{after:r},l=a(),o=l1(l)&&l.groupedItems||{},d=sd(e),u=[...o[d]||[],i],c={...o,[d]:u};n({...l,groupedItems:c})},[a,s,n]),hasNextPageForGroupedItems:(0,H.useCallback)(e=>{let t=s(e);if(!t)return!1;let r=t.data;return null==r||r.pageInfo.hasNextPage},[s]),isFetchingNextPageForGroupedItems:(0,H.useCallback)(e=>{let t=s(e);return t?.isFetching},[s])}}(n,i,e),totalCount:a?.totalCount}}let dP=()=>{let{memex_table_without_limits:e}=n9();return e?dD():dE()},dD=()=>{let{data:e}=dR();return(0,H.useMemo)(()=>({items:e.flatMap(e=>e.nodes)}),[e])},dE=()=>({items:sy().data?.pages[0]?.nodes||[]}),dA=()=>{let e=(0,W.NL)();return{setItemData:(0,H.useCallback)(t=>{!function(e,t){if(sP()){let r=sH(e,t.id);-1!==r&&e.setQueryData(sv(e),e=>{let a=[...sJ(e)||[]],n=a[r];if(n){let e=lJ(n,t);if(e){let t=i6(e);return a[r]=t,sL(a)}}return e})}else{let r=sM(e,t.id);if(!r)return function(e,t){let r=sX(e,t.id.toString());if(r){let a=lJ(r,t);a&&sY(e,i6(a))}}(e,t);e.setQueryData(r,e=>{if(!e)return sx([]);let r=[...e.nodes],a=r.findIndex(e=>e.id===t.id),n=r[a];if(n){let e=lJ(n,t);if(e){let t=i6(e);r[a]=t}}return{...e,nodes:r}})}}(e,t)},[e]),setItemsStateFromModels:(0,H.useCallback)(()=>{!function(e){sP()?e.setQueryData(sv(e),e=>sL([...sJ(e)||[]])):e.setQueriesData(sZ,e=>sF(e)?{...e}:sE(e))}(e)},[e])}},dM=new Set([eL.DraftIssue,eL.Issue]),dL="item",dF={type:aR.INFO},dZ=new Set,dO=(0,H.createContext)(null),dV=(0,H.createContext)(void 0),dB=(0,H.createContext)([]),d$=(e,t)=>{let r=(0,W.NL)(),{memex_table_without_limits:a}=n9(),n=(0,H.useCallback)(e=>{a&&e instanceof i8&&sY(r,e)},[a,r]);if(!a)return{query:void 0,setQueryDataForSidePanelItem:n};let i=sX(r,e);return{query:lE({variables:{itemId:e},enabled:!!(e&&!t&&!i),initialData:i}),setQueryDataForSidePanelItem:n}},dz=[],dW=({children:e})=>{let[t,r]=lG(),{items:a}=dP(),n=t.get(ly),i=n===aR.BULK_ADD,l=n===dL||n===aR.ISSUE,s=t.get(lx),o="true"===t.get(lb),d=s?a.find(e=>e.id===parseInt(s)):void 0,{query:u,setQueryDataForSidePanelItem:c}=d$(s,d);!d&&u?.data&&(d=u.data),function(){let[e,t]=lG(),r=e.get(ly)===dL;(0,H.useEffect)(()=>{r&&t(e=>(e.set(ly,aR.ISSUE),e),{replace:!0})},[r,t])}(),function({itemIdParam:e,paneItem:t,isHierarchyParam:r}){let{addToast:a}=e9(),[,n]=lG(),i=(0,e5.Z)(a);(0,H.useEffect)(()=>{!(!e||t?.contentType&&dM.has(t.contentType))&&(r||(i.current({type:e$.error,message:t?.contentType===eL.PullRequest?rI.sidePanelItemNotSupported:rI.sidePanelItemNotFound}),n(e=>(e.delete(ly),e.delete(lx),e.delete(lb),e),{replace:!0})))},[i,r,e,t?.contentType,n])}({itemIdParam:u?.isLoading?null:s,isHierarchyParam:o,paneItem:d});let[m,p]=(0,H.useState)(d?[d]:dz),f=0===m.length;d&&f&&p([d]);let h=(0,H.useMemo)(()=>0===m.length?dz:m.reduce((e,t)=>{if(!t.memexItemId)return e.push(t),e;if(u?.data){let r=t.memexItemId();u?.data.id===r&&e.push(u?.data)}else{let r=t.memexItemId(),n=a.find(e=>e.id===r);n&&e.push(n)}return e},[]),[m,a,u?.data]),g=h.at(-1),y=(0,H.useMemo)(()=>l&&g?{type:aR.ISSUE,item:g}:null,[l,g]),{hasWritePermissions:x}=i4(),b=(0,K.TH)(),v=(0,H.useMemo)(()=>x&&i?{...function(e){let t={targetRepository:void 0,query:void 0,newItemAttributes:void 0};return e&&("targetRepository"in e&&(t.targetRepository=e.targetRepository),"query"in e&&(t.query=e.query),"newItemAttributes"in e&&(t.newItemAttributes=e.newItemAttributes)),t}(b.state),type:aR.BULK_ADD}:null,[i,x,b.state]);(0,H.useEffect)(()=>{i&&!x&&r(e=>(e.delete(ly),e),{replace:!0})},[x,i,r]);let w=function(e,t){return e&&new Set(Object.values(aR)).has(e)?t[e]:null}(n,{[aR.ISSUE]:y,[aR.INFO]:dF,[aR.BULK_ADD]:v});(0,H.useEffect)(()=>{!w&&A.current&&(A.current?.(),A.current=void 0)},[w]);let j=!!w;(0,H.useEffect)(()=>{s&&!ee.current?.contains(document.activeElement)&&setTimeout(()=>J.current?.focus())},[s]);let{postStats:C}=os(),[I,S]=(0,ae._)("projects.sidePanelPinned",!1),k=(0,H.useCallback)(e=>{S(e),setTimeout(()=>Y.current?.focus(),25),C({name:"side_panel_pin",context:e?"pin":"unpin"})},[S,C]),[T,N]=(0,H.useState)(dZ),_=T.size>0,R=(0,H.useCallback)(()=>N(dZ),[]),{setItemData:P}=dA(),D=(0,H.useCallback)(async e=>{let t=e.memexItemId?.();if(void 0===t)return;let r=await ag({memexProjectItemId:t});r.ok&&P(r.data.memexProjectItem)},[P]),E=(0,H.useCallback)(async()=>{w?.type===aR.ISSUE&&D(w.item)},[D,w]),A=(0,H.useRef)(),{memex_new_issue_viewer:M,memex_sub_issues:L}=n9(),F=(0,H.useCallback)((e,t)=>{dM.has(e.contentType)&&(c(e),M||(D(e),R()),r(t=>(t.set(ly,aR.ISSUE),t.set(lx,e.id.toString()),e.isHierarchy&&t.set(lb,"true"),t)),A.current=t,p([e]),C({name:aE,memexProjectItemId:e.id}))},[c,M,r,C,D,R]),Z=(0,H.useCallback)(e=>{t.get(ly)!==aR.INFO&&r(t=>(t.set(ly,aR.INFO),e&&t.set(lv,e.toString()),t))},[t,r]),V=(0,H.useCallback)((e,t,a,n)=>{R(),r(e=>(e.set(ly,aR.BULK_ADD),e),{state:{targetRepository:t,newItemAttributes:n,query:a}}),C({name:nd,ui:e})},[R,C,r]),B=(0,at.N)(),$=(0,H.useCallback)(async()=>!_||await B({...rI.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[B,_]),z=(0,H.useCallback)(async e=>{if(_&&!(e&&e.force)){if(!await $())return!1;R()}return r(e=>(e.delete(ly),e.delete(lx),e.delete(lb),e.get(lv)&&e.delete(lv),e)),p(dz),!0},[_,R,r,$]),W=(0,H.useCallback)(e=>{if(_)return e.preventDefault(),e.returnValue=""},[_]);(0,Q.yq)(W);let G=(0,H.useCallback)(e=>{if(!e)return;let{historyIdx:t,item:r}=e;r&&(p(e=>{let a=e.slice();return void 0!==t&&(a=e.slice(0,t)),[...a,r]}),C({name:aE,memexProjectItemId:r.id}))},[C]),U=(0,H.useCallback)(async e=>{if(w?.type!==aR.ISSUE||!e)return;let{item:t}=e;t&&await $()&&(D(t),R(),G(e))},[w?.type,D,R,G,$]),q=(0,H.useCallback)(async e=>{if(!e||!e.item?.isHierarchy)return;let{item:t}=e;t&&await $()&&(D(t),R(),G(e))},[D,R,G,$]);(0,H.useEffect)(()=>{if(L){let e=a.find(e=>e.getParentIssue()?.id.toString()===s)?.getParentIssue(),t=e?new SubIssueSidePanelItem(e):void 0;o&&s&&t&&F(t)}},[o,s,a,L,F]);let{isProjectViewRoute:X}=dg();ep(()=>X&&w?.type!==aR.BULK_ADD?["a","Add items",nd,()=>V(az)]:null,[X,w,V]),ep(()=>w?I?["p",rI.sidePanelUnpinLabel,"side-panel-unpin",()=>k(!1)]:["p",rI.sidePanelPinLabel,"side-panel-pin",()=>k(!0)]:null,[w,I,k]);let Y=(0,H.useRef)(null),J=(0,H.useRef)(null),ee=(0,H.useRef)(null),et=(0,H.useMemo)(()=>({sidePanelState:w,openProjectItemInPane:F,reloadPaneItem:E,openPaneInfo:Z,openPaneBulkAdd:V,closePane:z,hasUnsavedChanges:_,setDirtyItems:N,dirtyItems:T,isPaneOpened:j,supportedItemTypes:dM,openPaneHistoryItem:U,openPaneHierarchyHistoryItem:q,pinned:I,setPinned:k,pinButtonRef:Y,initialFocusRef:J,containerRef:ee}),[z,N,T,_,j,V,q,U,Z,F,E,w,I,k]);return(0,O.jsx)(dO.Provider,{value:et,children:(0,O.jsx)(dV.Provider,{value:w&&"item"in w?w.item.id:void 0,children:(0,O.jsx)(dB.Provider,{value:h,children:e})})})},dG=(0,H.memo)(dW),dU=()=>(0,H.useContext)(dB),dH=()=>(0,H.useContext)(dV),dq=()=>{let e=(0,H.useContext)(dO);if(null===e)throw Error("useSidePanel must be used within a SidePanelProvider");return e},dK=()=>{let{openProjectItemInPane:e,...t}=dq(),{navigationDispatch:r}=i$(),{postStats:a}=os();return{openPane:(0,H.useCallback)(t=>{e(t,()=>{r(ir({focusType:is.Focus}))}),a({name:"side_panel_table_open",context:JSON.stringify({contentType:t.contentType})}),r(ir({focusType:is.Suspended}))},[r,e,a]),...t}},dQ=()=>{let{openProjectItemInPane:e,...t}=dq(),{navigationDispatch:r}=iu(),{postStats:a}=os();return{openPane:(0,H.useCallback)(t=>{e(t,()=>{r(ig())}),a({name:"side_panel_board_open",context:JSON.stringify({contentType:t.contentType})})},[r,e,a]),...t}};try{dO.displayName||(dO.displayName="SidePanelContext")}catch{}try{dV.displayName||(dV.displayName="SidePanelCurrentItemIdContext")}catch{}try{dB.displayName||(dB.displayName="SidePanelBreadcrumbHistoryContext")}catch{}try{dW.displayName||(dW.displayName="SidePanelProviderRenderFunction")}catch{}try{dG.displayName||(dG.displayName="SidePanelProvider")}catch{}let dX=()=>{let{pathname:e}=(0,K.TH)(),{currentView:t}=oi(),{title:r}=r8(),{sidePanelState:a}=dq(),n=eR(e),{currentColumnTitle:i}=r7(),l=(0,H.useMemo)(()=>{if(a&&"item"in a)return rk.item(r,a.item.getRawTitle());switch(n){case e_.PROJECT_ROUTE:case e_.PROJECT_VIEW_ROUTE:return rk.view(r,t?.name);case e_.PROJECT_ARCHIVE_ROUTE:return rk.archive(r);case e_.PROJECT_SETTINGS_FIELD_ROUTE:return rk.settings(r,i);case e_.PROJECT_SETTINGS_ROUTE:case e_.PROJECT_SETTINGS_ACCESS_ROUTE:return rk.settings(r);case e_.PROJECT_WORKFLOWS_ROUTE:case e_.PROJECT_WORKFLOW_CLIENT_ID_ROUTE:return rk.workflows(r);case e_.PROJECT_INSIGHTS_ROUTE:case e_.PROJECT_INSIGHTS_NUMBER_ROUTE:return rk.insights(r)}return r},[a,n,r,t?.name,i]);(0,H.useEffect)(()=>{(0,eh.T)(l)},[l]),(0,H.useEffect)(()=>{document.dispatchEvent(new CustomEvent("context-region-label:update",{detail:{label:r}}))},[r])};function dY({children:e,...t}){return(0,O.jsx)(eO.Z,{...t,sx:{position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",backgroundColor:e=>`${e.colors.canvas.default}`,color:e=>`${e.colors.fg.default}`,width:"100%",height:"100%",overflow:"auto",...t.sx},children:e})}try{dY.displayName||(dY.displayName="BaseSettingsPage")}catch{}async function dJ(e,t,r){let a=t.map(t=>` ${e?.nameWithOwner}#${t.number}`).join(","),n={memexProjectItem:{contentType:eL.DraftIssue,content:{title:a},memexProjectColumnValues:r}},i=aa("memex-item-create-bulk-api-data"),{data:l}=await ac(i.url,{method:"POST",body:n});return(await am(l.job.url,{headers:{accept:"application/json"}})).ok}async function d0(e,t){let r=e.map(e=>` ${e.userName}/${e.repoName}#${e.number}`).join(","),a={memexProjectItem:{contentType:eL.DraftIssue,content:{title:r},memexProjectColumnValues:t}},n=aa("memex-item-create-bulk-api-data"),{data:i}=await ac(n.url,{method:"POST",body:a});return(await am(i.job.url,{headers:{accept:"application/json"}})).ok}let d1=({request:e,rollback:t,showErrorToast:r=!0})=>{let a=(0,H.useRef)({status:"idle",data:void 0}),{addToast:n}=e9(),i=(0,H.useCallback)(async(i,l)=>{try{a.current.status="loading";let t=await e(i);a.current.data=t,a.current.status="succeeded"}catch(e){if(e instanceof api_error_ApiError){a.current.status="failed",t&&t(l),r&&n({message:e.message,type:e$.error});return}throw e}},[n,e,t,r]);return(0,H.useMemo)(()=>({perform:i,status:a}),[i,a])};async function d2(e,t,r,a){let n=new URL(aa("search-issues-and-pulls-api-data").url,window.location.origin);n.searchParams.set("repositoryId",`${e}`),n.searchParams.set("q",t),null!=r&&n.searchParams.set("memexNumber",`${r}`),null!=a&&n.searchParams.set("limit",`${a}`);let{data:i}=await ad(n);return i}let d5=()=>{let e=(0,H.useContext)(r1);if(!e)throw Error("useMemex must be used within a ProjectNumberContext.Provider");return e},d3=(e,t)=>{let[r,a]=(0,H.useState)(null),[n,i]=(0,H.useState)(!1),l=(0,H.useRef)(),s=(0,H.useRef)(),{projectNumber:o}=d5(),{perform:d,status:u}=d1({request:(0,H.useCallback)(async({repositoryId:e,query:r,memexNumber:a})=>(await d2(e,r,a,t?.limit)).issuesAndPulls,[t?.limit])}),c=(0,H.useCallback)(async(t,r,n=!1)=>{let c;i(!1);let m=r.trim();return(n||void 0===s.current||s.current!==m)&&(n||e(!0),l.current&&l.current.cancel(),l.current=(0,s9.Z)(async()=>{await d({repositoryId:t,memexNumber:o,query:m}),"succeeded"===u.current.status&&(a(u.current.data),i(!0)),n||e(!1)},200),c=l.current()),s.current=m,c||(c=Promise.resolve()),c},[d,o,u,e]),m=(0,H.useCallback)(e=>{r&&a(r.filter(t=>t.id!==e.id))},[r,a]);return{items:r,removeItem:m,removeItems:(0,H.useCallback)(e=>{a(t=>t&&t.filter(t=>!e.has(t.number)))},[a]),refresh:c,finishedFetchingRepoItems:n,setFinishedFetchingRepoItems:i}};function d4(e){switch(e.dataType){case eA.Assignees:return{memexProjectColumnId:eM.Assignees,value:e.value};case eA.Labels:return{memexProjectColumnId:eM.Labels,value:e.value};case eA.Milestone:return{memexProjectColumnId:eM.Milestone,value:e.value};case eA.TrackedBy:return{memexProjectColumnId:eM.TrackedBy,value:e.value};case eA.IssueType:return{memexProjectColumnId:eM.IssueType,value:e.value};case eA.ParentIssue:return{memexProjectColumnId:eM.ParentIssue,value:e.value};case eA.Number:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value};case eA.Date:var t,r;let a;return t=e.memexProjectColumnId,(r=e.value?.value)&&(a={value:tY(r)}),{memexProjectColumnId:t,value:a};case eA.Repository:return{memexProjectColumnId:eM.Repository,value:e.value||null};case eA.Title:return{memexProjectColumnId:eM.Title,value:e.value};case eA.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?{raw:e.value,html:e.value}:void 0};case eA.SingleSelect:case eA.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value}}}function d8(e){var t,r;switch(e.dataType){case eA.Assignees:return{memexProjectColumnId:eM.Assignees,value:e.value.map(e=>e.id)};case eA.Labels:return{memexProjectColumnId:eM.Labels,value:e.value.map(e=>e.id)};case eA.Milestone:return{memexProjectColumnId:eM.Milestone,value:e.value?e.value.id:""};case eA.TrackedBy:return{memexProjectColumnId:eM.TrackedBy,value:e.value.map(iC),appendOnly:e.appendOnly};case eA.IssueType:return{memexProjectColumnId:eM.IssueType,value:e.value?e.value.id:""};case eA.ParentIssue:return{memexProjectColumnId:eM.ParentIssue,value:e.value?e.value.id:""};case eA.Number:{let t=e.value?e.value.value:"";return{memexProjectColumnId:e.memexProjectColumnId,value:t}}case eA.Date:return{memexProjectColumnId:e.memexProjectColumnId,value:(t=e.value?.value)?t.toISOString():""};case eA.Title:return"string"==typeof(r=e.value.title)?{memexProjectColumnId:eM.Title,value:{title:r}}:{memexProjectColumnId:eM.Title,value:{title:r.raw}};case eA.Text:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value||""};case eA.SingleSelect:case eA.Iteration:return{memexProjectColumnId:e.memexProjectColumnId,value:e.value?.id||""};default:return null}}let d6=(0,H.createContext)(null),d7=(0,H.memo)(function({children:e,selectedRepository:t,query:r}){let[a,n]=(0,H.useState)(!0),[i,l]=(0,H.useState)(!1),[s,o]=(0,H.useState)([]),[d,u]=(0,H.useState)([]),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(t),[h,g]=(0,H.useState)(r??""),[y,x]=(0,H.useState)(!1),[b,v]=(0,H.useState)(!1),{refresh:w,items:j,removeItems:C}=d3(n,{limit:25}),I=(0,H.useMemo)(()=>new Set(s.map(e=>e.number)),[s]),S=(0,H.useCallback)(e=>{s.some(t=>t.number===e.number)?o(s.filter(t=>t.number!==e.number)):o(t=>[...t,e])},[s]),k=(0,H.useMemo)(()=>s.length===j?.length,[j,s]),T=(0,H.useCallback)(()=>{k?o([]):j&&o(j)},[k,j]),N=(0,H.useCallback)(e=>I.has(e),[I]),_=(0,H.useCallback)(()=>{o([])},[]),R=(0,H.useCallback)(async e=>{v(!1),m(!1),p?(_(),await w(p.id,e,!0)):y&&null===p&&v(!0)},[_,y,w,p]);(0,H.useEffect)(()=>{j&&v(!0)},[j]),(0,H.useEffect)(()=>{R(h)},[R,h]),(0,H.useEffect)(()=>{c&&R(h)},[c,R,h]),(0,H.useEffect)(()=>{b&&y?n(!1):n(!0)},[b,y,a,n]);let P=d1({request:(0,H.useCallback)(async e=>{let t=[];for(let e of d){let r=d8(e);r&&t.push(r)}let r=new Set(e.map(e=>e.number));l(!0),(p?await dJ(p,e,t):await d0(e,t))&&(C(r),o(e=>e.filter(e=>!r.has(e.number))),l(!1),25===e.length&&v(!1))},[p,d,C]),rollback:(0,H.useCallback)(()=>{l(!1)},[])});return(0,O.jsx)(d6.Provider,{value:(0,H.useMemo)(()=>({addSelectedItemsRequest:P,clearSelectedItems:_,isSelected:N,selectItem:S,selectedItems:s,selectedRepo:p,setSelectedRepo:f,updateColumnsAction:d,setUpdateColumnsAction:u,hasFetchedRepos:y,setHasFetchedRepos:x,items:j,loading:a,addingItems:i,finishedFetchingRepoItems:b,searchQuery:h,setSearchQuery:g,selectAllItems:T,areAllItemsSelected:k,areAllItemsAdded:c,setAreAllItemsAdded:m,MAX_ITEM_NUM:25}),[P,_,N,S,s,p,f,d,u,y,x,j,a,i,b,h,g,T,k,c,m,25]),children:e})}),d9=()=>{let e=(0,H.useContext)(d6);if(null===e)throw Error("useBulkAddItems must be used within an BulkAddItemsContext");return e};try{d6.displayName||(d6.displayName="BulkAddItemsContext")}catch{}try{d7.displayName||(d7.displayName="BulkAddItemsProvider")}catch{}var ue=r(81313),ut=r(51461);function ur(){let e=(0,K.bS)(eb.pathWithChildPaths);(0,J.Z)(e);let{ownerType:t,ownerIdentifier:r,projectNumber:a}=e.params;return(0,J.Z)(t),(0,J.Z)(r),(0,J.Z)(a),(0,H.useMemo)(()=>({ownerType:t,ownerIdentifier:r,projectNumber:parseInt(a,10)}),[t,r,a])}async function ua(){let e=new URL(aa("memex-get-archive-status-api-data").url,window.location.origin),{data:t}=await ad(e);return t}let un=class DebounceAsyncCancellation extends Error{constructor(){super("this invocation was cancelled"),Object.setPrototypeOf(this,new.target.prototype),this.name="DebounceAsyncCancellation"}};function ui(e,t){let r=null,a=()=>{r&&(window.clearTimeout(r),r=null)},n=(...n)=>new Promise((i,l)=>{a();let s=window.setTimeout(async()=>{if(r===s)try{let t=await e(...n);if(r===s)return i(t)}catch(e){l(e)}else l(new un)},t);r=s});return n.cancel=a,n}let ul=(0,H.createContext)(null),us=(0,H.memo)(function({children:e}){let{items:t}=dP(),{loggedInUser:r}=i5(),[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useState)(!1),s=(0,H.useMemo)(()=>ui(async()=>{if(r)try{let{isArchiveFull:e}=await ua();n(e)}catch(e){n(!1)}},500),[r]);return(0,H.useEffect)(()=>(s(),()=>{s.cancel()}),[s,t.length]),(0,O.jsx)(ul.Provider,{value:(0,H.useMemo)(()=>({isArchiveFull:a,setArchiveStatus:s,shouldDisableArchiveForActiveWorkflow:i,setShouldDisableArchiveForActiveWorkflow:l}),[a,s,i]),children:e})});try{ul.displayName||(ul.displayName="ArchiveStatusContext")}catch{}try{us.displayName||(us.displayName="ArchiveStatusProvider")}catch{}let uo=()=>{let e=(0,H.useContext)(ul);if(!e)throw Error("useArchiveStatus must be used within an ArchiveStatusProvider");return e},ud=(0,H.createContext)(null),uu=({children:e})=>{let[t,r]=(0,H.useState)(!1),[a,n]=(0,H.useState)(),[i,l]=(0,H.useState)(rA.defaultWorkflowName),[s,o]=(0,H.useState)(),d=(0,H.useCallback)(e=>{void 0===e?(n(void 0),l(rA.defaultWorkflowName)):(n({...e}),o(e.clientId),l(rA.newWorkflowName(e.name)))},[]),u=(0,H.useMemo)(()=>({isDialogOpen:t,workflowTemplate:a,workflowName:i,setWorkflowName:l,applyWorkflowTemplate:d,setIsDialogOpen:r,returnFocusClientId:s}),[d,t,s,i,a]);return(0,O.jsx)(ud.Provider,{value:u,children:e})};try{ud.displayName||(ud.displayName="NewWorkflowDialogContext")}catch{}try{uu.displayName||(uu.displayName="NewWorkflowDialogProvider")}catch{}async function uc(e){let t=aa("memex-workflow-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function um(e){let t=aa("memex-workflow-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}let up={ItemAdded:"item_added",Reopened:"reopened",ReviewChangesRequested:"review_changes_requested",ReviewApproved:"review_approved",Closed:"closed",Merged:"merged",QueryMatched:"query_matched",ProjectItemColumnUpdate:"project_item_column_update",SubIssues:"sub_issues"},uf={SetField:"set_field",GetItems:"get_items",GetProjectItems:"get_project_items",ArchiveProjectItem:"archive_project_item",AddProjectItem:"add_project_item",CloseItem:"close_item",GetSubIssues:"get_sub_issues"},uh={get_project_items:0,get_items:0,get_sub_issues:0,add_project_item:1,archive_project_item:1,close_item:2,set_field:2},ug={Issue:"Issue",PullRequest:"PullRequest"},uy=(e,t)=>{let r={triggerType:t?.triggerType||up.QueryMatched,contentTypes:t?.contentTypes||[ug.Issue,ug.PullRequest],actions:t?.actions.map(e=>{let t={...e};return delete t.id,t})||[{actionType:uf.GetItems,arguments:{query:"is:pr,issue is:open label:bug",repositoryId:void 0}},{actionType:uf.AddProjectItem,arguments:{}}]};return{id:void 0,clientId:crypto.randomUUID(),isUserWorkflow:!0,name:e,enabled:!1,...r}};let MemexWorkflowConverter=class MemexWorkflowConverter{static toClient(e,t=!1,r){return{...e,clientId:r||crypto.randomUUID(),isUserWorkflow:t}}static toServer(e){let{id:t,name:r,triggerType:a,contentTypes:n,enabled:i,actions:l}=e;return{id:t,name:r,triggerType:a,contentTypes:n,enabled:i,actions:l}}};function ux(e){return"number"==typeof e.id}function ub(e){return e.actions.some(e=>e.actionType===uf.ArchiveProjectItem)}function uv(e){return e.triggerType!==up.SubIssues&&e.actions.some(e=>e.actionType===uf.AddProjectItem)}function uw(e){return e.clientId}function uj(e,t){return(uh[e.actionType]??0)-(uh[t.actionType]??0)}function uC(e){let t=Array.from(e.actions).sort(uj),r=t[t.length-1]?.actionType??"";return`${e.triggerType}_${r}`}function uI(e,t,r){let a=r?uC:uw,n=r??a(t);return e.findIndex(e=>a(e)===n)}let uS=e=>{switch(e){case up.ItemAdded:return eF.PlusIcon;case up.Reopened:return eF.IssueReopenedIcon;case up.ReviewChangesRequested:return eF.DiffIcon;case up.ReviewApproved:return eF.CheckCircleFillIcon;case up.Closed:return eF.SkipIcon;case up.Merged:return eF.GitMergeIcon;default:return eF.WorkflowIcon}},uk={enable:"enable"},uT=(e,t)=>{let r=l$(),a=ur(),n=(0,H.useMemo)(()=>e.find(e=>e.clientId===t)??function(e){return e.find(e=>e.enabled)??e[0]}(e),[t,e]),i=(0,H.useMemo)(()=>{let t=new Set(e.map(e=>e.name.toLocaleLowerCase()));return n?.name&&t.delete(n?.name?.toLocaleLowerCase()),t},[n?.name,e]),l=(0,H.useMemo)(()=>e.find(e=>ub(e)),[e]);return{activeWorkflow:n,workflowNames:i,autoArchiveWorkflow:l,numberOfUserAddedWorkflows:(0,H.useMemo)(()=>e.reduce((e,t)=>t.isUserWorkflow?e+1:e,0),[e]),hasUnpersistedUserAddedWorkflow:(0,H.useMemo)(()=>e.some(e=>e.isUserWorkflow&&!ux(e)),[e]),navigateToWorkflow:(0,H.useCallback)(e=>{e?r(ej.generatePath({...a,workflowClientId:encodeURIComponent(e)}),{replace:!0}):r(ew.generatePath(a),{replace:!0})},[r,a]),projectRouteParams:a}};var uN=r(22578);let u_=(e,t)=>{let r=e.toLocaleLowerCase().trim();return 0===r.length?uE(rE.emptyWorkflowName):r.length>250?uE(rE.workflowNameTooLong):t.has(r)?uE(rE.duplicateWorkflowName):uE()},uR=(e,t)=>{if(!e.actions.length)return uE(rE.invalidNoAction);if(!e.contentTypes.length)return uE(rE.invalidNoContentType);if(t){let r=u_(e.name,t);if(!r.isValid)return r}for(let t of e.actions){let e=uP(t);if(!e.isValid)return e}return uE()},uP=e=>{switch(e.actionType){case uf.SetField:if(!e.arguments.fieldId)return uE(rE.invalidActionField);if(!e.arguments.fieldOptionId)return uE(rE.invalidActionFieldValue);break;case uf.GetProjectItems:{let{query:t,fieldId:r,fieldOptionId:a}=e.arguments;if(t)return uD(e);if(!r)return uE(rE.invalidNoQueryOrFieldId);if(!a)return uE(rE.invalidActionFieldValue);break}case uf.GetItems:if("string"!=typeof e.arguments.query)return uE(rE.invalidNoQuery);if(!e.arguments.repositoryId&&e.id)return uE(rE.invalidNoRepository);break;case uf.AddProjectItem:if(!e.arguments.subIssue&&!e.arguments.repositoryId&&e.id)return uE(rE.invalidNoRepository)}return uE()},uD=e=>{let t=e.arguments.query&&oB(e.arguments.query);if(t){for(let r of t.orderedTokenizedFilters)if("search"!==r.type&&(e.actionType!==uf.GetProjectItems||"field"!==r.type||"last-updated"!==r.field&&"updated"!==r.field)&&"field"===r.type)return uE(rE.invalidQuery)}return uE()},uE=e=>({errorMessage:e,isValid:!e});function uA(e,t,r,a){let n=function(e){let t=new Map;for(let r of e){let e=uC(r);t.has(e)||r.isUserWorkflow||t.set(e,r.clientId)}return t}(e),i=t.map(e=>{let{defaultWorkflow:t}=e;return MemexWorkflowConverter.toClient(t,!1,n.get(uC(t)))}),l=new Map;for(let e of r){let t=uC(e),r=l.get(t)||0,a=r>0,n=MemexWorkflowConverter.toClient(e,a,e.id.toString()),s=uI(i,n,t);-1!==s?a?i.push(n):i.splice(s,1,n):i.push(n),l.set(t,r+1)}return a?i:i.filter(e=>e.triggerType!==up.SubIssues)}let uM=(0,H.createContext)(null),uL=(0,H.memo)(function({children:e}){let{sub_issues_workflow:t}=n9(),{projectLimits:{autoAddCreationLimit:a}}=i5(),{isArchiveFull:n,setShouldDisableArchiveForActiveWorkflow:i}=uo(),l=K.bS(ej.path)?.params.workflowClientId,[s]=(0,H.useState)(()=>eP("memex-workflow-configurations-data")||[]),[o]=(0,H.useState)(()=>eP("memex-workflows-data")||[]),[d,u]=(0,H.useState)(()=>uA([],s,o,t)),[c]=(0,H.useState)(()=>s.reduce((e,t)=>(e[t.triggerType]=t.constraints.contentTypes,e),{})),[m]=(0,H.useState)(()=>s.reduce((e,t)=>(e[t.triggerType]=t.enableable,e),{})),p=d.map(e=>e.clientId).reduce((e,t)=>Object.assign(e,{[t]:!1}),{}),[f,h]=(0,H.useState)(p),g=(0,H.useRef)(new Map),{activeWorkflow:y,workflowNames:x,autoArchiveWorkflow:b,numberOfUserAddedWorkflows:v,hasUnpersistedUserAddedWorkflow:w,navigateToWorkflow:j}=uT(d,l),C=eP("memex-relay-ids")?.memexProject,{addToast:I}=e9(),S=(0,H.useCallback)((e,t=!0)=>{t||(e.enabled=!1),u(t=>{let r=uI(t,e);return t.splice(r,1,e),[...t]})},[]),k=(0,H.useCallback)((e,r)=>{w||u(a=>uA(a,e,r,t))},[w,t]),T=(0,H.useCallback)((e,t,r)=>{let a;return!d.some(t=>t.name===e)&&"query_matched_add_project_item"===t&&(a=uy(e,r),u(e=>(a&&e.push(a),[...e])),j(a.clientId),!0)},[j,d]),N=(0,H.useCallback)(async e=>{let t=g.current.get(e.clientId);if(!t)try{t=uF(MemexWorkflowConverter.toServer(e)),g.current.set(e.clientId,t);let r=await t,a=MemexWorkflowConverter.toClient(r.workflow,e.isUserWorkflow,r.workflow.id.toString());u(t=>{let r=uI(t,e);return t.splice(r,1,a),[...t]}),h(t=>{let r={...t};return delete r[e.clientId],{...r,[a.clientId]:!1}}),j(a.clientId)}finally{g.current.delete(e.clientId)}return t},[j]),_=(0,H.useCallback)(async(e,t)=>{if(!C)return;let a=d.findIndex(t=>ux(t)&&t.number===e),n=uZ(d,a),i=d[a];i&&function({environment:e,input:{workflowNumber:t,projectId:a},optimisticUpdater:n,onCompleted:i,onError:l}){(0,uN.commitMutation)(e,{mutation:r(12793),variables:{workflowNumber:t,projectId:a},optimisticUpdater:n,onCompleted:i,onError:l})}({environment:t,input:{workflowNumber:e,projectId:C},optimisticUpdater:()=>{u(e=>(e.splice(a,1),[...e]))},onCompleted:()=>{I({message:rE.deleteWorkflowSuccess,type:"success"}),j(n?.clientId)},onError:()=>{u(e=>(e.splice(a,0,i),[...e])),I({message:rE.deleteWorkflowError,type:"error"})}})},[I,j,C,d]),R=(0,H.useCallback)(e=>{let t=d.findIndex(t=>t.clientId===e),r=d[t],a=uZ(d,t);r&&(u(e=>(e.splice(t,1),[...e])),l===r.clientId&&j(a?.clientId))},[l,j,d]),P=(0,H.useCallback)(async e=>await um(e),[]),D=(0,H.useCallback)(async(e,t)=>{let r={...e,...t};if(!ux(e))return N(r);{let a=await P({workflowNumber:e.number,...t});return S(r),j(e.id.toString()),a}},[N,j,S,P]),E=(0,H.useCallback)(async(e,t)=>D(e,{enabled:t}),[D]),A=(0,H.useCallback)(async(e,t)=>{let r=t.reduce((e,t)=>e.map(e=>e.actionType===t.actionType?t:e),e.actions),a={...e,actions:r};if(uR(a,x).isValid)return D(a,{name:a.name,contentTypes:a.contentTypes,enabled:a.enabled,actions:r});S(a,!1)},[S,D,x]),M=(0,H.useCallback)(e=>c[e],[c]),L=(0,H.useCallback)(e=>m[e],[m]),F=(0,H.useCallback)((e,t)=>d.filter(r=>ux(r)&&r.actions.find(r=>r.arguments.fieldId===e&&r.arguments.fieldOptionId===t)),[d]),Z=(0,H.useCallback)((e,t)=>{let r=new Set(t);return d.filter(t=>ux(t)&&t.actions.find(t=>t.arguments.fieldId===e&&t.arguments.fieldOptionId&&!r.has(t.arguments.fieldOptionId)))},[d]),V=(0,H.useCallback)(e=>{for(let t in f)f[t]=t===e&&!f[t];h({...f})},[f]),B=(0,H.useCallback)(()=>{h({...p})},[p]),$=(0,H.useCallback)(e=>f[e],[f]),z=(0,H.useRef)(new Map),W=(0,H.useCallback)(()=>z.current,[]),G=(0,H.useCallback)(e=>{e&&requestAnimationFrame(()=>{let t=W().get(e);t?.focus()})},[W]),U=d1({request:(0,H.useCallback)(async({workflow:e,enable:t})=>{await E(e,t)},[E])});(0,H.useEffect)(()=>{n&&b?.enabled&&U.perform({workflow:b,enable:!1})},[b,U,n]),(0,H.useEffect)(()=>{y&&i(ub(y)&&n)},[y,n,i]);let q=(0,H.useMemo)(()=>v>=a-1,[v,a]),Q=(0,H.useMemo)(()=>({activeWorkflow:y,workflows:d,workflowNames:x,handleEnabledChangeRequest:U,updateWorkflowAndAction:A,getValidContentTypesForTriggerType:M,setAllWorkflows:k,workflowWithTriggerTypeIsEnableable:L,workflowsUsingColumnOption:F,workflowsUsingMissingColumnOption:Z,newWorkflow:T,setWorkflowMenuState:V,resetWorkflowMenuStates:B,isWorkflowMenuOpen:$,handleReturnFocus:G,getWorkflowMenuItemsMap:W,itemsRef:z,customWorkflowLimitReached:q,deleteWorkflow:_,deleteNonPersistedWorkflow:R}),[y,d,x,U,A,M,k,L,F,Z,T,V,B,$,G,W,z,q,_,R]);return(0,O.jsx)(uM.Provider,{value:Q,children:(0,O.jsx)(uu,{children:e})})});async function uF(e){let{id:t,...r}=e;return uc({workflow:r})}function uZ(e,t){return t>0?e[t-1]:e[1]}try{uM.displayName||(uM.displayName="WorkflowsContext")}catch{}try{uL.displayName||(uL.displayName="WorkflowsStateProvider")}catch{}function uO(){let e=(0,H.useContext)(uM);if(!e)throw Error("useWorkflows must be used within a WorkflowsStateProvider");return e}function uV(){let e=(0,H.useContext)(ud);if(!e)throw Error("useNewWorkflowCreation must be used within a NewWorkflowCreationProvider");return e}var uB=r(73290),u$=r(74121),uz=r(99782);let uW=e=>(0,O.jsx)(eO.Z,{sx:{...e.sx||{},display:"flex",flex:"1 1 auto",width:"100%",height:"100%",position:"relative",backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat"},...e,children:(0,O.jsx)(eO.Z,{sx:{m:"auto",textAlign:"center"},children:e.children})});try{uW.displayName||(uW.displayName="Blankslate")}catch{}var uG=r(63451),uU=r(64530);let uH=(0,H.createContext)({observer:null,elMapRef:{current:new Map},avgRef:{current:{count:0,avg:0}}}),uq=(0,H.memo)(function(e){let[t,r]=(0,H.useState)(null),a=dl(()=>new Map),n=(0,H.useRef)({count:0,avg:e.sizeEstimate??0}),i=(0,e5.Z)(e),l=(0,H.useCallback)(e=>{(0,uU.unstable_batchedUpdates)(()=>{for(let t of e){let e=t.target,r=a.current.get(e);if(r){if(i.current.disableHide&&!t.isIntersecting)continue;r.setIsVisible(t.isIntersecting)}}})},[i,a]);(0,uG.b)(()=>{if(e.rootRef&&!e.rootRef.current)return;let t=new IntersectionObserver(l,{root:e.rootRef?.current??null,rootMargin:e.rootMargin??`${window.innerHeight/2}px ${window.innerWidth/2}px`});return r(t),()=>{t?.disconnect()}},[l,e.rootMargin,e.rootRef]);let s=(0,H.useMemo)(()=>({observer:t,elMapRef:a,avgRef:n}),[t,a]);return(0,O.jsx)(uH.Provider,{value:s,children:e.children})});function uK({ref:e,defaultHeight:t}){let[r,a]=(0,H.useState)(!1),{observer:n,elMapRef:i,avgRef:l}=(0,H.useContext)(uH),s=(0,H.useRef)(t??l.current?.avg),o=(0,H.useRef)(!1);return(0,uG.b)(()=>{let t=e.current;if(!t)return;let r=t.getBoundingClientRect();r.top<window.pageYOffset+window.innerHeight&&r.left<window.pageXOffset+window.innerWidth&&r.top+r.height>window.pageYOffset&&r.left+r.width>window.pageXOffset&&a(!0)},[e]),(0,uG.b)(()=>{let t=e.current;if(!t||!n)return;let r=i.current;return r.set(t,{setIsVisible:a}),n.observe(t),()=>{r.delete(t),n.unobserve(t)}},[i,n,e]),(0,H.useEffect)(()=>{if(r){if(!e.current||!l.current)return;let r=e.current.getBoundingClientRect().height;t||o.current||(l.current={count:l.current.count+1,avg:(l.current.count*l.current.avg+r)/(l.current.count+1)}),o.current=!0,s.current=r}},[l,r,e,t]),{isVisible:r,size:s.current}}try{(c=Parent).displayName||(c.displayName="Parent")}catch{}try{(m=Child).displayName||(m.displayName="Child")}catch{}try{uq.displayName||(uq.displayName="ObserverProvider")}catch{}let uQ={FORBID_TAGS:["style"],ALLOW_DATA_ATTR:!1},uX={...uQ,ALLOWED_TAGS:["a","#text","img","g-emoji","code"],ADD_ATTR:["alias","fallback-src"],FORBID_ATTR:["style"],KEEP_CONTENT:!0},uY={...uQ,ADD_TAGS:["action-menu","anchored-position","auto-complete","focus-group","g-emoji","tracking-block","tracking-block-omnibar","tasklist-block-title","details-menu","math-renderer","task-lists","tool-tip","turbo-frame","modal-dialog","primer-text-field"],ADD_ATTR:["alias","anchor","anchor-offset","fallback-src","data-hovercard-type","data-hovercard-url","data-octo-click","data-octo-dimensions","data-identity","data-host","data-src","data-content","data-type","data-json","data-plain","data-id","data-issue","data-draft-issue","data-item-uuid","data-item-id","data-item-title","data-item-state","data-item-position","data-menu-type","data-repository-id","data-repository-name","data-show-dialog-id","data-close-dialog-id","data-modal-dialog-overlay","data-display-number","data-hydro-click-hmac","data-hydro-click-payload","data-hydro-click","data-tracking-block-item-title","data-tracking-block-convert-button","data-tracking-block-remove-button","data-tracking-block-draft-title","data-form-tracking-block-update","data-completion-completed","data-completion-total","data-response-source-type","data-query-type","data-precache","sortable","data-view-component","data-catalyst","data-action","data-target","data-targets","data-canonical-src","data-static-url","mnemonics","popover","popovertarget","retain","side"],ADD_URI_SAFE_ATTR:["data-action","data-item-title","data-plain","data-host","data-content","data-json"]},uJ=new Set(["github.com","githubusercontent.com","githubassets.com","github.localhost","ghe.com","ghe.localhost"]),u0=ts()();function u1(e){return u0.sanitize(e,uX).toString()}u0.addHook("afterSanitizeAttributes",e=>{("target"in e||e instanceof HTMLAnchorElement)&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer")),!e.hasAttribute("target")&&(e.hasAttribute("xlink:href")||e.hasAttribute("href"))&&e.setAttribute("xlink:show","new")}),u0.addHook("afterSanitizeElements",e=>{if("IMG"===e.tagName){let t=e.getAttribute("src");if(t)try{let r=new URL(t,document.baseURI).hostname.split(".");if(r.length>=2){let e=`${r.at(-2)}.${r.at(-1)}`;if(uJ.has(e)||new URL(document.baseURI).origin===new URL(t,document.baseURI).origin)return}e.parentNode?.removeChild(e)}catch{e.parentNode?.removeChild(e)}}});let u2=(0,H.forwardRef)(({children:e,...t},r)=>(0,O.jsx)(eB.Z,{ref:r,...t,dangerouslySetInnerHTML:{__html:u1(e)}}));u2.displayName="SanitizedHtml";let u5=(0,H.memo)(u2),u3={open:{"aria-label":"Open issue",icon:eF.IssueOpenedIcon,color:"open.fg"},closed:{"aria-label":"Closed as completed issue",icon:eF.IssueClosedIcon,color:"done.fg"}},u4={not_planned:{"aria-label":"Closed as not planned issue",icon:eF.SkipIcon,color:"fg.muted"},completed:u3.closed,reopened:u3.open},u8={open:{"aria-label":"Open pull request",icon:eF.GitPullRequestIcon,color:"open.fg"},closed:{"aria-label":"Closed pull request",icon:eF.GitPullRequestClosedIcon,color:"closed.fg"},merged:{"aria-label":"Merged pull request",icon:eF.GitMergeIcon,color:"done.fg"},draft:{"aria-label":"Draft pull request",icon:eF.GitPullRequestDraftIcon,color:"fg.muted"}},u6=({type:e,state:t,stateReason:r,isDraft:a})=>e===eL.PullRequest||t===aw.Merged?u8[t===aw.Open&&a?"draft":t]:t===aj.Closed&&r?u4[r]:u3[t],u7=({type:e,state:t,stateReason:r,isDraft:a,sx:n,...i})=>{let{icon:l,color:s,...o}=u6({type:e,state:t,stateReason:r,isDraft:a});return(0,O.jsx)(eZ.Z,{icon:l,...o,...i,sx:{color:s,...n}})},u9=({title:e,...t})=>{switch(e.contentType){case eL.Issue:{let r=e.value.stateReason;return(0,O.jsx)(u7,{type:e.contentType,state:e.value.state,stateReason:r,isDraft:!1,...t})}case eL.PullRequest:{let r=e.value.isDraft;return(0,O.jsx)(u7,{type:e.contentType,state:e.value.state,isDraft:r,...t})}default:ij(e)}};try{u7.displayName||(u7.displayName="ItemState")}catch{}try{u9.displayName||(u9.displayName="ItemStateForTitle")}catch{}let ce={borderBottom:"1px solid",borderColor:"border.default","&:last-child":{borderBottom:"none"},display:"flex",alignItems:"center"},ct={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none","&:hover":{color:"accent.fg"}},cr=(0,H.memo)(function({item:e,keyName:t,url:r}){let a=(0,H.useRef)(null),{isVisible:n}=uK({ref:a});return(0,O.jsx)(eO.Z,{ref:a,as:"li",sx:ce,children:n?(0,O.jsx)(ca,{keyName:t,item:e,url:r}):null},t)}),ca=(0,H.memo)(function({item:e,url:t}){let{selectItem:r,isSelected:a}=d9(),n=(0,H.useCallback)(()=>{r(e)},[r,e]),i=`item-title-${e.number}`;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{as:"label",sx:{pl:1},...(0,ef.f)("repo-item"),children:(0,O.jsx)(uz.Z,{sx:{alignSelf:"start"},"aria-labelledby":i,checked:a(e.number),onChange:n})}),(0,O.jsx)(eO.Z,{sx:{pl:2},children:(0,O.jsx)(u7,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,O.jsxs)(eO.Z,{sx:{p:2,display:"flex",flex:"1",justifyContent:"flex-start",width:"100%",minWidth:"0"},children:[(0,O.jsx)(eO.Z,{as:"span",id:i,sx:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:(0,O.jsx)(uB.Z,{sx:ct,target:"_blank",rel:"noreferrer",href:t,tabIndex:-1,children:(0,O.jsx)(u5,{children:e.title})})}),(0,O.jsx)(eB.Z,{sx:{ml:2,color:"fg.muted"},children:`#${e.number}`})]})]})});try{cr.displayName||(cr.displayName="SuggestedItem")}catch{}try{ca.displayName||(ca.displayName="SuggestedItemInner")}catch{}let cn={listStyleType:"none",display:"flex",flexDirection:"column",contentVisibility:"auto"},ci=(0,H.memo)(function({hasSearchInput:e}){return(0,O.jsxs)(uW,{...(0,ef.f)("side-panel-no-suggested-items"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,O.jsx)(eZ.Z,{icon:eF.RepoIcon,size:30,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"No items to add"}),(0,O.jsx)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:e?rI.noItemsInSearchResult:rI.repoIsEmpty})]})}),cl=(0,H.memo)(function({isOrganization:e,owner:t}){return(0,O.jsxs)(uW,{...(0,ef.f)("side-panel-no-suggested-repos"),sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,O.jsx)(eZ.Z,{icon:eF.RepoIcon,size:30,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"No repositories found"}),(0,O.jsxs)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:["Create a"," ",(0,O.jsx)(uB.Z,{inline:!0,href:e?`/orgs/${t}/repositories`:`/${t}?tab=repositories`,children:"repository"})," ","to get started."]})]})}),cs=(0,H.memo)(function(){return(0,O.jsx)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:(0,O.jsx)(u$.Z,{})})}),co=()=>{let{selectedRepo:e,items:t,loading:r,finishedFetchingRepoItems:a,selectAllItems:n,areAllItemsSelected:i,searchQuery:l,MAX_ITEM_NUM:s}=d9(),{projectOwner:o,isOrganization:d}=i5(),u=o?.name?.toLowerCase();return(0,O.jsx)(eO.Z,{sx:cn,...(0,ef.f)("side-panel-suggested-items"),children:r?(0,O.jsx)(cs,{}):t?.length===0&&a&&e?(0,O.jsx)(ci,{hasSearchInput:!!l}):e?(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{...(0,ef.f)("selection-all-items"),sx:{display:"flex",borderBottom:"1px solid",borderColor:"border.default",paddingBottom:2,paddingTop:3,justifyContent:"space-between"},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{as:"label",sx:{pl:1,pr:"10px"},children:(0,O.jsx)(uz.Z,{sx:{alignSelf:"start"},"aria-label":i?"Deselect all items":"Select all items",checked:i,onChange:n})}),(0,O.jsx)(eB.Z,{children:i?"Deselect all items":"Select all items"})]}),t?.length===s&&(0,O.jsxs)(eB.Z,{...(0,ef.f)("side-panel-suggested-items-recent-count"),sx:{fontSize:0,color:"fg.muted"},children:["Showing ",s," most recent items"]})]}),(0,O.jsx)(eO.Z,{as:"ul",children:t?.map(t=>{let r=e.nameWithOwner;return O.jsx(cr,{item:t,keyName:`${e.nameWithOwner}-${t.number}`,url:t.type===eL.PullRequest?`/${r}/pull/${t.number}`:`/${r}/issues/${t.number}`},`${e.nameWithOwner}-${t.number}`)})}),(0,O.jsxs)(eB.Z,{...(0,ef.f)("side-panel-suggested-items-footer"),sx:{color:"fg.muted",display:"block",textAlign:"center",paddingTop:4,paddingBottom:4},children:["Showing ",t?.length," most recent ",t?.length===1?"item":"items"," that"," ",t?.length===1?"has":"have"," not been added to this project",t&&t?.length>1&&". Use search to narrow down this list."]})]}):(0,O.jsx)(cl,{owner:u,isOrganization:d})})};try{ci.displayName||(ci.displayName="NoSuggestedItems")}catch{}try{cl.displayName||(cl.displayName="NoSuggestedRepos")}catch{}try{cs.displayName||(cs.displayName="Loader")}catch{}try{co.displayName||(co.displayName="ItemSuggestionsList")}catch{}var cd=r(88216),cu=r(97714);function cc(e){return(0,e5.Z)(e).current}let cm=/is:issues?,prs?|is:prs?,issues?/gi,cp=/is:issue/gi,cf=/is:pr/gi,ch=/\s*assignee:(.*,)?("?(@me)"?)(,\S)*/gi,cg=RegExp("\\s*assignee:(?<assignees>[^\\s+]*)\\s*","i"),cy=/[@|\s]/g,cx=/is:(\S+)/gi,cb=/issues?/,cv=/prs?/,cw="issue",cj=[ug.Issue,ug.PullRequest],cC=e=>{let{loggedInUser:t}=i5();if(t?.login){let r=[...e.matchAll(ch)];if(r.length){let[a,n,i,l]=r[0];e=e.replace(n?i:l?i:a,t.login)}}let r=e.match(cg);if(r&&r.groups?.assignees){let t=r.groups.assignees,a=[...new Set(t.toLowerCase().replace(cy,"").split(","))].join(",");return e.replace(t,a)}return e},cI=e=>cR(cC(e)).trim(),cS=e=>{let t=cR(e);return t.match(cp)?[ug.Issue]:t.match(cf)?[ug.PullRequest]:cj},ck=(e,t)=>{if(cT(t)&&!e.match(cm))return`is:issue,pr ${e}`;if(1===t.length){if(t[0]===ug.Issue&&!e.match(cb))return`is:issue ${e}`;if(t[0]===ug.PullRequest&&!e.match(cv))return`is:pr ${e}`}return e},cT=e=>!(!e||e?.length<cj.length)&&cj.every(t=>e.includes(t)),cN=e=>e.match(cb)?cw:e.match(cv)?"pr":e,c_=e=>{let t=new Set(e.split(",").map(e=>cN(e))),r="";return t.has(cw)&&(t.delete(cw),r="is:issue"),t.has("pr")&&(t.delete("pr"),r=0===r.length?"is:pr":""),t.size>0?`${r} is:${Array.from(t.values()).join(",")}`.trim():r},cR=e=>{let t=e;for(let[e,r]of[...t.matchAll(cx)])r&&(t=t.replace(e,c_(r)));return t},cP=(e,t)=>({title:rE.manualRunConfirmationTitle(e),content:(0,O.jsx)(u5,{children:rE.manualRunConfirmationMessage(e,t)}),confirmButtonContent:rE.manualRunConfirmationButton(e),confirmButtonType:"primary"}),cD=()=>{let e=(0,at.N)();return(0,H.useCallback)(async({confirmationSource:t,onConfirm:r,count:a,onDismiss:n})=>{await e(cP(t,a))?await r():n?.()},[e])},cE=()=>{let e=(0,H.useContext)(du);if(!e)throw Error("useColumnsStableContext must be used within a ColumnsStableContext.Provider");return e},cA=()=>{let{allColumnsRef:e}=cE();return{findColumnByDatabaseId:(0,H.useCallback)(t=>e.current.find(e=>e.databaseId===t),[e])}},cM=e=>{let{findColumnByDatabaseId:t}=cA(),{fieldOptionId:r,fieldId:a}=e.arguments,n=a?t(a):void 0,i=n&&"options"in n.settings?n.settings.options?.find(e=>e.id===r):void 0;return{column:n,selectedOption:i}},cL=()=>{let{hasWritePermissions:e}=i4();return{hasWorkflowWritePermission:e}},cF=(e,t)=>{let r=e.actions[0];(0,J.Z)(r,"defaultAction must exist");let{selectedOption:a}=cM(r),{hasWorkflowWritePermission:n}=cL(),{shouldDisableArchiveForActiveWorkflow:i}=uo();return(0,H.useMemo)(()=>{let l=r.actionType===uf.SetField,s=a?.nameHtml,o=0===t.length&&ub(e);return l&&!s||!n||i||o},[r.actionType,a?.nameHtml,t.length,e,n,i])},cZ=(e,t,r)=>{let{workflowNames:a}=uO(),[n,i]=(0,H.useState)(e),[l,s]=(0,H.useState)(e.name),[o,d]=(0,H.useState)(uR(e,a).isValid),[u,c]=(0,H.useState)(r),m=(0,H.useMemo)(()=>{if(e.triggerType===up.ProjectItemColumnUpdate)return"";let t=e.actions.find(e=>"string"==typeof e.arguments.query)?.arguments.query;return"string"==typeof t?ck(t,e.contentTypes):""},[e.actions,e.contentTypes,e.triggerType]),p=(0,H.useMemo)(()=>e.actions.find(e=>e.arguments.repositoryId)?.arguments.repositoryId,[e]),[f,h]=(0,H.useState)(n.contentTypes),[g,y]=(0,H.useState)(m),[x,b]=(0,H.useState)(p),v=(0,H.useRef)(),{updateWorkflowAndAction:w}=uO(),j=cF(n,g),C=cD(),I=(0,H.useCallback)(e=>{let t=n.actions.findIndex(t=>t.id===e.id),r=[...n.actions];r[t]=e,i({...n,actions:[...r]})},[n]),S=(0,H.useCallback)(()=>{e.triggerType===up.QueryMatched&&(y(m),b(p))},[m,p,e.triggerType]),k=(0,H.useCallback)(()=>{i({...e}),h(e.contentTypes),s(e.name)},[e]),T=(0,H.useCallback)(()=>{c(!0)},[]),N=(0,H.useCallback)(()=>{c(!1)},[]),_=(0,H.useCallback)(()=>n.actions.map(e=>{switch(e.actionType){case uf.GetItems:return{...e,arguments:{...e.arguments,query:cI(g),repositoryId:x}};case uf.AddProjectItem:return{...e,arguments:{...e.arguments,repositoryId:x}};case uf.GetProjectItems:return{...e,arguments:{...e.arguments,query:g}};default:return e}}),[g,x,n.actions]),R=(0,H.useCallback)(async e=>{let t=e?_():n.actions;await w({...n,name:l.trim(),contentTypes:[...f],enabled:e},[...t])},[f,_,w,n,l]),P=d1({request:(0,H.useCallback)(async e=>{await w({...n,name:e.trim()},n.actions)},[w,n])}),D=d1({request:R}),E=(0,H.useCallback)(async e=>{await P.perform(e)},[P]),A=(0,H.useCallback)(async(e=!0)=>{let r=!1;ub(n)&&t>0&&e?await C({count:t,confirmationSource:uk.enable,onConfirm:async()=>await D.perform(e),onDismiss:()=>{r=!0}}):await D.perform(e),"succeeded"!==D.status.current.status||r||c(!1)},[t,D,C,n]);return(0,H.useEffect)(()=>{u||(k(),S())},[S,k,u]),(0,H.useEffect)(()=>{let e=_();d(uR({...n,actions:e}).isValid)},[_,n]),{localContentTypes:f,setLocalContentTypes:h,localQuery:g,setLocalQuery:y,localRepositoryId:x,setLocalRepositoryId:b,workflowName:l,setWorkflowName:s,isEditing:u,setIsEditing:c,edit:T,discard:N,save:A,saveNameChange:E,saveWorkflowChanges:v,shouldDisableWorkflowToggle:j,workflow:n,setWorkflow:i,replaceAction:I,initialQuery:m,initialRepositoryId:p,isWorkflowValid:o,setIsWorkflowValid:d}},cO=(0,H.createContext)(null),cV=({children:e,initialWorkflow:t,startInEditMode:r})=>{let[a,n]=(0,H.useState)(0),{localContentTypes:i,setLocalContentTypes:l,localQuery:s,setLocalQuery:o,localRepositoryId:d,setLocalRepositoryId:u,workflowName:c,setWorkflowName:m,isEditing:p,setIsEditing:f,edit:h,discard:g,save:y,saveNameChange:x,saveWorkflowChanges:b,shouldDisableWorkflowToggle:v,workflow:w,setWorkflow:j,replaceAction:C,initialQuery:I,initialRepositoryId:S,isWorkflowValid:k,setIsWorkflowValid:T}=cZ(t,a,r);return(0,O.jsx)(cO.Provider,{value:(0,H.useMemo)(()=>({filterCount:a,setFilterCount:n,localContentTypes:i,shouldDisableWorkflowToggle:v,setLocalContentTypes:l,localQuery:s,setLocalQuery:o,saveWorkflowChanges:b,isEditing:p,setIsEditing:f,edit:h,discard:g,save:y,saveNameChange:x,workflow:w,setWorkflow:j,replaceAction:C,localRepositoryId:d,setLocalRepositoryId:u,workflowName:c,setWorkflowName:m,initialQuery:I,initialRepositoryId:S,isWorkflowValid:k,setIsWorkflowValid:T}),[a,i,v,l,s,o,b,p,f,h,g,y,x,w,j,C,d,u,c,m,I,S,k,T]),children:e})};try{cO.displayName||(cO.displayName="AutomationGraphContext")}catch{}try{cV.displayName||(cV.displayName="AutomationGraphStateProvider")}catch{}let cB=()=>{let e=(0,H.useContext)(cO);if(!e)throw Error("useAutomationGraph must be used within an AutomationGraphStateProvider");return e},c$=({icon:e=eF.AlertIcon,heading:t,content:r,children:a,headingAs:n="h2",...i})=>(0,O.jsxs)(uW,{...i,children:[(0,O.jsx)(eZ.Z,{icon:e,size:30,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:n,sx:{mt:3},children:t}),(0,O.jsx)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:r}),a]});try{c$.displayName||(c$.displayName="BlankslateErrorMessage")}catch{}let ErrorBoundary=class ErrorBoundary extends H.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){setTimeout(()=>{throw e})}render(){return this.state.error?this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}};let cz=({endpointPosition:e,workflow:t})=>{let r="top"===e?"to bottom":"to top";return(0,O.jsx)(eO.Z,{sx:{width:"14px",height:"14px",borderRadius:"50%",marginTop:"top"===e?"-8px":"0px",marginBottom:"bottom"===e?"-8px":"0px",position:"relative",zIndex:1,backgroundImage:e=>`linear-gradient(${r}, ${e.colors.canvas.default} 50%, ${e.colors.border.default} 50%, ${e.colors.border.default})`,"&::before":{content:'""',position:"absolute",top:"1px",left:"1px",width:"12px",height:"12px",backgroundColor:"canvas.default",borderRadius:"50%"},"&::after":{content:'""',position:"absolute",top:"4px",left:"4px",width:"6px",height:"6px",backgroundColor:t.enabled?"accent.emphasis":"border.default",borderRadius:"50%",transition:"background-color 0.3s ease-out"}}})},cW=()=>{let{workflow:e}=cB();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cz,{workflow:e,endpointPosition:"top"}),(0,O.jsx)(eO.Z,{sx:{height:"30px",width:"0",borderColor:e.enabled?"accent.muted":"border.muted",borderLeftWidth:"2px",borderStyle:"solid",borderRight:"none",transition:"border-color 0.3s ease-out"}}),(0,O.jsx)(cz,{workflow:e,endpointPosition:"bottom"})]})};try{cz.displayName||(cz.displayName="ConnectorEndpoint")}catch{}try{cW.displayName||(cW.displayName="Connector")}catch{}var cG=r(75308);let cU=({icon:e,iconBg:t,iconColor:r,headerDescription:a,children:n,...i})=>(0,O.jsx)(eO.Z,{sx:{borderStyle:"solid",borderWidth:"1px",borderColor:"border.subtle",borderRadius:2,backgroundColor:"canvas.default",width:"100%",transition:"border-color 0.3s ease-out",boxShadow:"shadow.medium"},...(0,ef.f)("automation-block"),...i,children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,O.jsxs)(eO.Z,{sx:{p:3,display:"flex",alignItems:"center",borderBottom:n?"1px solid":"none",borderBottomColor:"border.subtle"},children:[e&&(0,O.jsx)(eO.Z,{sx:{bg:t,borderRadius:"4px",p:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,O.jsx)(eZ.Z,{icon:e,sx:{color:r}})}),a&&(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:1,color:"fg.default",ml:2},children:a})]}),n&&(0,O.jsx)(eO.Z,{sx:{display:"flex",flexWrap:"wrap",flex:"auto",alignItems:"center",m:3},children:n})]})});try{cU.displayName||(cU.displayName="AutomationBlock")}catch{}let cH=({headerDescription:e=rE.addItemBlockLabel})=>(0,O.jsx)(cU,{icon:eF.PlusIcon,iconBg:"success.subtle",iconColor:"success.fg",headerDescription:e,...(0,ef.f)("automation-add-item-block")});try{cH.displayName||(cH.displayName="AddItemBlock")}catch{}let cq=()=>(0,O.jsx)(cU,{icon:eF.ArchiveIcon,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:rE.archiveItemLabel,...(0,ef.f)("automation-archive-block")});try{cq.displayName||(cq.displayName="ArchiveBlock")}catch{}let cK=()=>(0,O.jsx)(cU,{icon:eF.SkipIcon,iconBg:"done.subtle",iconColor:"done.fg",headerDescription:rE.closeItemBlockLabel,...(0,ef.f)("automation-close-block")});try{cK.displayName||(cK.displayName="CloseItemBlock")}catch{}var cQ=r(46008),cX=r(39752);async function cY({repositoryId:e,query:t,memexNumber:r}){let a=new URL(aa("count-issues-and-pulls-api-data").url,window.location.origin);a.searchParams.set("repositoryId",`${e}`),a.searchParams.set("q",t),a.searchParams.set("memexNumber",`${r}`);let{data:n}=await ad(a);return n}let cJ=()=>{let[e,t]=(0,H.useState)(),[r,a]=(0,H.useState)(0),[n,i]=(0,H.useState)(""),l=(0,H.useRef)(),{localQuery:s,setLocalRepositoryId:o,setLocalQuery:d,setLocalContentTypes:u}=cB(),{projectNumber:c}=d5(),{projectOwner:m}=i5(),p=(0,H.useMemo)(()=>`-project:${m?.login}/${c}`,[c,m]),f=d1({request:(0,H.useCallback)(e=>cY(e),[])}),h=(0,H.useCallback)(async(e,t)=>{if(e){await f.perform({repositoryId:e.id,query:t,memexNumber:c});let{data:r,status:n}=f.status.current;"succeeded"===n&&r&&a(r.count)}},[f,c]),g=(0,H.useCallback)((e,t)=>{let r=cI(t);h(e,r),i(`${e.url}/issues?q=${encodeURIComponent(`${p} ${r}`)}`)},[h,p]);return{count:r,searchResultUrl:n,onSearchQueryChange:(0,H.useCallback)(t=>{d(t),l.current&&l.current.cancel(),l.current=(0,s9.Z)(()=>{e&&(g(e,t),u(cS(t)))},200),l.current()},[d,e,g,u]),onRepositoryChange:(0,H.useCallback)(e=>{g(e,s),t(e),o(e.id)},[s,o,g]),repository:e}};var c0=r(16545),c1=r(6873);async function c2({query:e,onlyWithIssueTypes:t,milestone:r}){let a=new URL(aa("search-repositories-api-data").url,window.location.origin);a.searchParams.set("q",e),t&&a.searchParams.append("with_issue_types","true"),r&&a.searchParams.append("milestone",r);let{data:n}=await ad(a);return n}async function c5({memexNumber:e,repositoryId:t,onlyWithIssueTypes:r,milestone:a}){let n=new URL(aa("suggested-repositories-api-data").url,window.location.origin);null!=e&&n.searchParams.append("memexNumber",`${e}`),null!=t&&n.searchParams.append("repositoryId",`${t}`),r&&n.searchParams.append("with_issue_types","true"),a&&n.searchParams.append("milestone",a);let{data:i}=await ad(n);return i}let c3=(e,t)=>t?`milestone: ${t}`:e?"withIssueTypes":"default",c4={default:{lastFetched:0,repositories:[]}},c8=(0,H.createContext)(null),c6=(0,H.memo)(function({children:e}){let{projectNumber:t}=d5(),r=(0,H.useRef)(c4),a=(0,H.useCallback)((e,t,a)=>{let n=r.current[t];return!!a&&!n?.repositories.find(e=>e.id===a)||null==n||e-n.lastFetched>3e4},[]),n=(0,H.useCallback)((e,t,a)=>{let n=r.current;r.current={...n,[e]:{...n[e],lastFetched:a,repositories:t}}},[]),i=(0,H.useCallback)(async e=>{let{repositoryId:i,onlyWithIssueTypes:l=!1,milestone:s}=e||{},o=Date.now(),d=c3(l,s);if(!a(o,d,i)){let e=r.current[d]?.repositories;if(e&&e.length>0)return e}let u=await c5({memexNumber:t,repositoryId:i,onlyWithIssueTypes:l,milestone:s});return n(d,u.repositories,o),u.repositories},[a,t,n]),l=(0,H.useCallback)(()=>{r.current=c4},[]),s=(0,H.useMemo)(()=>({suggestRepositories:i,repositoriesCache:r,clearCachedSuggestions:l}),[i,l]);return(0,O.jsx)(c8.Provider,{value:s,children:e})});try{c8.displayName||(c8.displayName="RepositoriesContext")}catch{}try{c6.displayName||(c6.displayName="RepositoriesStateProvider")}catch{}let c7=()=>{let e=(0,H.useContext)(c8);if(!e)throw Error("useRepositories must be used within a RepositoriesStateProvider");let{suggestRepositories:t,repositoriesCache:r,clearCachedSuggestions:a}=e;return{clearCachedSuggestions:a,suggestRepositories:t,repositoriesCache:r}},c9=({repository:e,...t})=>e.isArchived?(0,O.jsx)(eZ.Z,{icon:eF.ArchiveIcon,"aria-label":"Archived repository",...t}):e.isForked?(0,O.jsx)(eZ.Z,{icon:eF.RepoForkedIcon,"aria-label":"Forked repository",...t}):e.isPublic?(0,O.jsx)(eZ.Z,{icon:eF.RepoIcon,"aria-label":"Public repository",...t}):(0,O.jsx)(eZ.Z,{icon:eF.LockIcon,"aria-label":"Private repository",...t});try{c9.displayName||(c9.displayName="RepositoryIcon")}catch{}let me=({targetRepositoryId:e,isEditing:t,onRepositorySelected:r,onNoSuggestedRepositories:a,sx:n})=>{let i=(0,H.useRef)(null),l=(0,H.useRef)(null),[s,o]=(0,H.useState)(""),[d,u]=(0,H.useState)(!1),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(void 0),[h,g]=(0,H.useState)([]),[y,x]=(0,H.useState)([]),b=(0,H.useRef)(),{suggestRepositories:v}=c7(),w=(0,H.useRef)(y),j=(0,H.useRef)(0),C=(0,H.useRef)(!1);(0,c0.P)({restoreFocusOnCleanUp:!0,initialFocusRef:i,containerRef:l});let I=(0,H.useCallback)(()=>{u(!1)},[]),S=(0,H.useCallback)(async()=>{if(w.current.length||C.current)return;C.current=!0,m(!0);let t=await v({repositoryId:e});j.current+=1,t&&(w.current=t),t&&x(t),C.current=!1,m(!1)},[v,e]),k=(0,H.useCallback)(e=>(""!==s?h:y).find(t=>t.id===e),[s,h,y]),T=(0,H.useCallback)(()=>{let t=y.find(t=>t.id===e)||y[0];t&&(f({id:t.id,text:t.name,leadingVisual:()=>c9({repository:t})}),r(t))},[y,e,r]);(0,H.useEffect)(()=>{p||T()},[T,p]),(0,H.useEffect)(()=>{p?.id!==e&&T()},[T,p?.id,e]),(0,H.useEffect)(()=>{!C.current&&(0===j.current?S():e&&!y.find(t=>t.id===e)&&j.current<2?(w.current=[],S()):0===w.current.length&&a&&a())},[S,a,y,e]);let N=(0,H.useCallback)(async e=>{if(""!==e){m(!0);let{repositories:t}=await c2({query:e});g(t),m(!1)}else g(y??[])},[y]),_=(0,H.useCallback)(e=>{b.current&&b.current.cancel(),b.current=(0,s9.Z)(()=>N(e),200),b.current()},[N]),R=e=>{if(e?.id){let t=k(e.id);t&&(f({id:t.id,text:t.name,leadingVisual:()=>c9({repository:t})}),r(t))}},P=(""!==s?h:y).map(e=>{let{projectOwner:t}=i5(),r=e.nameWithOwner.split("/")[0],a=r?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:a,leadingVisual:()=>c9({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),R(e),I()}}});return(0,O.jsx)(O.Fragment,{children:y.length>0?(0,O.jsx)(c1.b,{placeholderText:rI.repoPickerFilterPlaceholder,open:d,renderAnchor:({children:e,...r})=>(0,O.jsx)(cd.r,{sx:n,disabled:!p||!t,leadingVisual:p?.leadingVisual,trailingVisual:eF.TriangleDownIcon,...r,...(0,ef.f)("repo-suggestions-button"),children:e||"Select Repo"}),onOpenChange:e=>u(e),loading:c,selected:p,filterValue:s,items:P,showItemDividers:!0,onFilterChange:e=>{o(e),_(e)},onSelectedChange:R,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:I,...(0,ef.f)("repo-picker-repo-list")}}):(0,O.jsx)(cQ.o,{variant:"rounded",width:"138px",height:"32px"})})};me.displayName="RepositoryPicker";var mt=r(50576);let mr=({offsetWidth:e,offsetHeight:t,clientWidth:r,clientHeight:a})=>({offsetWidth:e,offsetHeight:t,clientWidth:r,clientHeight:a});function ma(e){let t=(0,H.useRef)({}),r=(0,H.useCallback)(t=>{if(!e)return()=>void 0;let r=new ResizeObserver(t);return r.observe(e),()=>{r.unobserve(e),r.disconnect()}},[e]);return(0,H.useSyncExternalStore)(r,()=>{if(!e)return t.current;let r=mr(e);return(0,mt.Z)(r,t.current)?t.current:(t.current=r,r)})}let mn={None:"none",ColumnOnly:"column-only",ColumnAndValues:"column-and-values"},mi=e=>"last-updated"===e||"updated"===e,ml=[];function ms(){let{allColumns:e}=df(),t=(0,H.useMemo)(()=>oq(e),[e]);return{findFilterableFieldByName:(0,H.useCallback)(e=>t.get(oQ(e)),[t])}}var mo=r(79804),md=r(79902);let mu=({color:e,sx:t})=>{let{bg:r,accent:a}=(0,tt.L7)(e);return(0,O.jsx)(eO.Z,{sx:{bg:r,borderColor:a,borderWidth:2,borderStyle:"solid",width:16,height:16,borderRadius:8,flexShrink:0,...t}})};try{mu.displayName||(mu.displayName="ColorDecorator")}catch{}let mc={UserDefined:0,SystemExclude:1,SystemNo:2,SystemHas:3,Me:4,PreviousIteration:5,NextIteration:6,CurrentIteration:7,TodayToken:7};function mm(e,t,r){for(let a of t){let t=a.columns;if(!t[e.id])continue;let n=t[e.id];n&&r(n)}}let mp=({color:e,nameHtml:t})=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",gap:2},children:[(0,O.jsx)(mu,{color:e,sx:{height:14,width:14}}),(0,O.jsx)(u5,{children:t})]}),mf=({color:e,nameHtml:t})=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",gap:2},children:[(0,O.jsx)(eO.Z,{sx:{bg:`#${e}`,borderColor:`#${e}`,width:14,minWidth:14,height:14,borderRadius:10,borderWidth:"1px",borderStyle:"solid"}}),(0,O.jsx)(u5,{children:t})]});function mh(e,t,r){for(let a of(t?.login&&e.set("@me",{value:"@me",priority:mc.Me}),r)){let t="reviewer"in a?a.reviewer.name:a.login,r="reviewer"in a?a.reviewer.avatarUrl:a.avatarUrl;e.set(t,{value:t,renderItem:()=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,O.jsx)(mo.O,{loading:"lazy",sx:{minWidth:"20px",mr:2},alt:"",src:r}),(0,O.jsx)(eB.Z,{children:t})]})})}}try{mp.displayName||(mp.displayName="SingleSelectSuggestion")}catch{}try{mf.displayName||(mf.displayName="LabelSuggestion")}catch{}var mg=r(44067),my=r(31171),mx=r(52972);let mb=(e="")=>{let t=(0,H.useId)();return e.trim()?`${e}:${t}`:t};function mv(e){let{originRef:t,contentRef:r,contentWidth:a,contentHeight:n}=e,i=e.alignment??{xAlign:void 0,yAlign:void 0,xOriginEdgeAlign:void 0,yOriginEdgeAlign:void 0,yTopOffset:12},l=a&&n,s=l||r.current,o=l,d=0,u=0;if(t.current&&s){let e=t.current.getBoundingClientRect(),s=parseInt(window.getComputedStyle(t?.current).getPropertyValue("margin-left")),c=l?{width:0,height:0}:r.current.getBoundingClientRect(),m={width:a??c.width,height:n??c.height};switch(o=m.width&&m.height,i.yAlign=function(e,t,r){let a=r.top,n=window.innerHeight-r.bottom,i={top:a>t.height,middle:a>t.height,bottom:n>t.height};return void 0!==e&&i[e]?e:i.bottom?"bottom":"top"}(i.yOriginEdgeAlign||i.yAlign,m,e),i.xAlign=function(e,t,r){let a=window.innerWidth-r.left<t.width,n={left:!a,center:!a,right:a};return void 0!==e&&n[e]?e:n.left?"left":"right"}(i.xOriginEdgeAlign||i.xAlign,m,e),i.xAlign){case"left":switch(i.xOriginEdgeAlign){case void 0:case"left":u=e.left;break;case"right":u=e.left+e.width-s}break;case"center":u=e.left+e.width/2;break;case"right":u=e.left-(m.width-e.width)}switch(i.yAlign){case"top":d=e.top-m.height+(i.yTopOffset??12);break;case"middle":d=e.top-m.height/2+(i.yTopOffset??12);break;case"bottom":d=e.top+e.height+4}}return{top:Math.round(d),left:Math.round(u),yAlign:i.yAlign,xAlign:i.xAlign,hasContentDimensions:o}}let mw=({inputRef:e,selectedIndex:t,getListItemId:r})=>{(0,H.useEffect)(()=>{let a=e.current;if(a){let e=r(t);-1!==t&&e?a.setAttribute("aria-activedescendant",e):a.removeAttribute("aria-activedescendant")}return()=>{a?.removeAttribute("aria-activedescendant")}},[e,t,r])};function mj(e,t,r){let a=r?.preventDefault??!0,n=r?.stopPropagation??!0;return(0,H.useCallback)(t=>{(!e||e&&e(t))&&(a&&t.preventDefault(),n&&t.stopPropagation())},[a,n,...t])}let mC=({children:e,id:t,onMount:r})=>{let a=(0,e5.Z)(r),n=dl(()=>document.createElement("div"));return t&&n.current.setAttribute("id",t),(0,H.useEffect)(()=>{let e=n.current,t=document.getElementById("portal-root");return t?.appendChild(e),a.current&&a.current(),function(){t?.removeChild(e)}},[n,a]),(0,uU.createPortal)((0,O.jsx)(z.Z,{display:"contents",children:e}),n.current)};try{mC.displayName||(mC.displayName="Portal")}catch{}let mI=e=>{let t={ref:e.selectedItemRef,onSelect:e.onSelect,id:e.id,"aria-selected":e.selected,active:e.selected,tabIndex:-1,...(0,ef.f)(e.testId)};return e.renderItem?(0,O.jsx)(mx.S.Item,{role:"option",...t,children:e.renderItem()}):e.asHTML?(0,O.jsx)(mx.S.Item,{role:"option",...t,children:(0,O.jsx)(u5,{children:e.value})}):(0,O.jsx)(mx.S.Item,{role:"option",...t,children:e.value})};mI.displayName="SuggestionsListItem";let mS=e=>{let[t,r]=(0,H.useState)(0),{items:a,controllingElementRef:n,inputRef:i}=e;mw({inputRef:i??n,selectedIndex:t,getListItemId:(0,H.useCallback)(e=>a[e]?.testId,[a])}),(0,H.useEffect)(()=>{r(0)},[a.length]);let l=(0,H.useCallback)(()=>{r(e=>null==e||e+1===a.length?0:e+1)},[a.length]),s=(0,H.useCallback)(()=>{r(e=>null==e||0===e?a.length-1:e-1)},[a.length]);(0,uG.b)(()=>{d.current?.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[t]);let o=mj(e=>{switch(e.key){case"ArrowDown":return l(),!0;case"ArrowUp":return s(),!0;case"Enter":if(a.length)return a[t]?.onSelect(),!0;return!1;default:return!1}},[a,l,s,t],void 0);(0,H.useEffect)(()=>(addEventListener("keydown",o),()=>{removeEventListener("keydown",o)}),[o]);let d=(0,H.useRef)(null),u=mb("__omnibarPortalRoot__");return a.length>0?(0,O.jsx)(mC,{id:u,children:(0,O.jsx)(mT,{items:a,controllingElementRef:e.controllingElementRef,listRef:e.listRef,selectedItemIndex:t,selectedItemRef:d,xAlign:e.xAlign,xOriginEdgeAlign:e.xOriginEdgeAlign,testId:e.testId,style:e.style})}):null},mk={position:"absolute",width:"300px",maxHeight:"220px",zIndex:200,overflowY:"auto",overflowX:"hidden",m:0,ml:"22px",py:2,pr:0,pl:1,listStyle:"none",bg:"canvas.overlay",borderRadius:"12px",boxShadow:"shadow.large"};function mT({items:e,controllingElementRef:t,listRef:r,selectedItemIndex:a,selectedItemRef:n,xAlign:i,xOriginEdgeAlign:l,testId:s,style:o}){let d=(0,H.useRef)(null);return(0,my.z)(r,d),function({controllingElementRef:e,items:t,listRef:r,xAlign:a="left",xOriginEdgeAlign:n="right"}){(0,H.useEffect)(()=>{let{current:t}=r;if(!e.current||!t)return;let i=mv({originRef:e,contentRef:r,alignment:{xAlign:a,xOriginEdgeAlign:n}});t.style.top=`${i.top}px`,t.style.left=`${i.left}px`,t.style.transition="left 0.1s ease"},[e,t,r,a,n])}({controllingElementRef:t,items:e,listRef:d,xAlign:i,xOriginEdgeAlign:l}),(0,O.jsxs)("div",{role:"dialog","aria-label":"Filter suggestions",children:[(0,O.jsx)(mx.S,{sx:{...mk,...o},id:s,"aria-label":"Results",role:"listbox",ref:d,...(0,ef.f)(s),tabIndex:-1,children:e.map((e,t)=>(0,O.jsx)(mI,{id:e.testId,value:e.value,testId:e.testId,asHTML:e.asHTML,onSelect:e.onSelect,renderItem:e.renderItem,selected:a===t,selectedItemRef:a===t?n:null},t))}),(0,O.jsx)(mg.T,{id:`${s}-feedback`,"aria-live":"polite","aria-atomic":"true",...(0,ef.f)(`${s}-feedback`),children:rI.resultCount(e.length)})]})}mS.displayName="SuggestionsList";let mN=[{name:"Filter by",icon:eF.FilterIcon}],m_=new Set(["title"]),mR=e=>!m_.has(e.name.toLowerCase());function mP(e){return`${o0(oQ(e))}:`}let mD=(0,H.createContext)(null),mE=()=>{let e=(0,H.useContext)(mD);if(!e)throw Error("useFilterSuggestionsItemsContext can only be used inside a FilterSuggestionsItemsContext");return e},mA=/\b([\w-]+:\S+)/g,mM=/(?=(?:[^"]*"[^"]*")*[^"]*$)(?=(?:[^']*'[^']*')*[^']*$),/g,mL=/\s(?=(?:'[^']*'|[^'])*$)/g,mF=/\s(?=(?:"[^"]*"|[^"])*$)/g,mZ=(0,H.memo)((0,H.forwardRef)(function({filterInputRef:e,query:t,areFilterSuggestionsVisible:r,setAreFilterSuggestionsVisible:a,setQuery:n,suggestColumns:i=!0,showColumnSuggestionIf:l,testId:s,anchorRef:o},d){let{items:u,repoSuggestions:c,issueTypeSuggestedNames:m}=mE(),{allColumns:p}=df(),[f,h]=(0,H.useState)(null),{fieldFilters:g}=dv(),{findColumnByDatabaseId:y}=cA(),{findFilterableFieldByName:x}=ms(),{clientWidth:b}=ma(o.current),v=(0,H.useMemo)(()=>({minWidth:"300px",width:b??"fit-content",marginLeft:0}),[b]),{activeWorkflow:w}=uO(),j=w&&!uv(w),{isKeywordQualifier:C}=od(),I=(0,H.useMemo)(()=>p.filter(mR),[p]),{displayableColumns:S,displayableCommands:k,displayableKeywords:T}=function({query:e,columns:t,commands:r=ml,options:a={suggestColumns:!0}}){let{searchTokens:n}=(0,H.useMemo)(()=>oB(e),[e]),i=(0,H.useCallback)(e=>{let t="";if(n.length){let e=n[n.length-1];void 0!==e&&(t=e)}return oz(t)&&(t=t.substr(1)),!!(0===t.length||oQ(e).startsWith(t.toLowerCase()))||!!o0(oQ(e)).startsWith(t.toLowerCase())},[n]),l=(0,H.useMemo)(()=>r.filter(t=>!e||!!t.name.toLowerCase().startsWith(e.toLowerCase())),[r,e]),s=(0,H.useMemo)(()=>{let e=a.suggestColumns?t.filter(e=>i(e.name)):[];return void 0!==a.showColumnSuggestionIf&&(e=e.filter(e=>{let t=a.showColumnSuggestionIf?.(e.name);return t===mn.ColumnOnly||t===mn.ColumnAndValues})),e},[t,i,a]),{FilterKeywords:o}=od(),d=(0,H.useMemo)(()=>{let e=o.map(e=>e.keyword);return a.suggestColumns?e:e.filter(e=>"no"!==e)},[o,a.suggestColumns]);return{displayableColumns:s,displayableCommands:l,displayableKeywords:(0,H.useMemo)(()=>d.filter(e=>i(e)),[i,d])}}({query:t,columns:I,commands:mN,options:{suggestColumns:i,showColumnSuggestionIf:l}}),{getSuggestionsForColumn:N}={getSuggestionsForColumn:(0,H.useCallback)((e,t,r,a)=>{let n=e.databaseId,i=function(e,t,r,a){let{loggedInUser:n}=i5(),i=new Map;if(!t)return i;switch(t.dataType){case eA.SingleSelect:for(let e of t.settings.options??[])i.set(e.name,{value:e.nameHtml,renderItem:()=>(0,O.jsx)(mp,{color:e.color,nameHtml:e.nameHtml})});return i;case eA.Number:{let r=new Set;for(let a of(mm(t,e,e=>{r.add(e.value)}),[...r].sort((e,t)=>e-t)))i.set(`${a}`,{value:`${a}`});return i}case eA.Iteration:{i.set(nO.Current,{value:nO.Current,priority:mc.CurrentIteration}),i.set(nO.Next,{value:nO.Next,priority:mc.NextIteration}),i.set(nO.Previous,{value:nO.Previous,priority:mc.PreviousIteration});let r=new Set;for(let a of(mm(t,e,e=>{r.add(e.id)}),nR(t)))r.has(a.id)&&i.set(a.title,{value:a.titleHtml});break}case eA.TrackedBy:mm(t,e,e=>{for(let t of e){let e=iC(t);i.set(e,{value:t.title,renderItem:()=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(u7,{state:t.state,type:"Issue",isDraft:!1}),(0,O.jsx)(md.Z,{sx:{mr:2,ml:2,maxWidth:"100%",width:"100%",display:"block"},title:t.title,children:t.title}),(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",fontSize:12},children:e})]})})}});break;case eA.Assignees:mm(t,e,e=>{mh(i,n,e)});break;case eA.Labels:if(r?.labels)for(let e of r.labels)i.set(e.name,{value:e.nameHTML,renderItem:()=>(0,O.jsx)(mf,{nameHtml:e.nameHTML,color:e.color})});else mm(t,e,e=>{for(let t of e)i.set(t.name,{value:t.nameHtml,renderItem:()=>(0,O.jsx)(mf,{nameHtml:t.nameHtml,color:t.color})})});break;case eA.LinkedPullRequests:mm(t,e,e=>{for(let t of e)i.set(t.number.toString(),{value:t.number.toString(),renderItem:()=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,O.jsx)(u7,{isDraft:t.isDraft,state:t.state,type:eL.PullRequest}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:`#${t.number}`})]})})});break;case eA.Repository:mm(t,e,e=>{i.set(e.nameWithOwner,{value:e.nameWithOwner,renderItem:()=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,O.jsx)(c9,{repository:e}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:e.nameWithOwner})]})})});break;case eA.Reviewers:mm(t,e,e=>{mh(i,n,e)});break;case eA.Milestone:if(r?.milestones)for(let e of r.milestones)i.set(e.title,{value:e.title});else mm(t,e,e=>{i.set(e.title,{value:e.title})});break;case eA.IssueType:if(r?.issueTypes)for(let e of r.issueTypes)i.set(e.name,{value:e.name});else if(a)for(let e of a)i.set(e,{value:e});else mm(t,e,e=>{i.set(e.name,{value:e.name})});break;case eA.ParentIssue:mm(t,e,e=>{i.set(e.nwoReference,{value:e.title,renderItem:()=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(u7,{state:e.state,stateReason:e.stateReason,type:"Issue",isDraft:!1}),(0,O.jsx)(md.Z,{sx:{mr:2,ml:2,maxWidth:"100%",width:"100%",display:"block"},title:e.title,children:e.title}),(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",fontSize:12},children:e.nwoReference})]})})});break;case eA.SubIssuesProgress:break;case eA.Title:mm(t,e,e=>{let t=tJ(e);i.set(t,{value:t})});break;case eA.Text:mm(t,e,e=>{i.set(e.raw,{value:e.html})});break;case eA.Date:i.set(to,{value:to,priority:mc.TodayToken}),mm(t,e,e=>{let t=tq(e);if(t){let e=tY(t.value),r=tX(t.value);e&&r&&i.set(e,{value:r})}})}return new Map([...i.entries()].sort((e,t)=>{let r=e[1].priority??0,a=(t[1].priority??0)-r;if(0!==a)return a;let n=e[0],i=t[0];return n.localeCompare(i)}))}(u,e,c,m);t||(a||i.set(`exclude-${n}`,{value:`exclude-${n}`,priority:mc.SystemExclude}),i.set(`present-${n}`,{value:`present-${n}`,priority:mc.SystemHas}),i.set(`empty-${n}`,{value:`empty-${n}`,priority:mc.SystemNo}));let l=Array.from(i.keys());l.sort((e,t)=>(i.get(t)?.priority??mc.UserDefined)-(i.get(e)?.priority??mc.UserDefined));let s=l.filter(a=>{if("string"!=typeof a)return!1;if(nK(e)||e.dataType===eA.TrackedBy||e.dataType===eA.ParentIssue){if(a.toLowerCase().includes(r))return!0;let e=i.get(a);if(e&&(e.priority??mc.UserDefined)===mc.UserDefined)return e.value.toLowerCase().includes(r)}return!t.includes(a)&&a.toLowerCase().includes(r)});return 1===s.length&&s[0]?.toLowerCase()===r&&s.pop(),{filteredKeys:s,uniqueColumnValues:i}},[u,c,m])},[_,R]=(0,H.useState)("none"),[P,D]=(0,H.useState)(""),[E,A]=(0,H.useState)(null),M=(0,H.useCallback)((r,a,i=!1)=>{(r&&r.name||a)&&(n(o3(t,r?.name??a,{replace:!0,filterForNegative:i})),A({keyword:a,filterForNegative:i,columnDatabaseId:r&&r.databaseId,value:""}),e.current?.focus())},[t,e,n]),L=(0,H.useCallback)((r,{filterForPresence:i=!1,filterForEmpty:l=!1,filterForNegative:s=!1}={})=>{if(E){if(E.columnDatabaseId){let e=y(E.columnDatabaseId);if(!e)return;n(o3(t,e.name,{value:r,replace:!0,filterForPresence:i,filterForEmpty:l,filterForNegative:s}))}else if(E.keyword){if(!j&&mi(E.keyword))return;let[e,a]="updated"===E.keyword?[`${t}<`,r.replace("<","")]:[t,r];n(o3(e,E.keyword,{value:a,replace:!0,filterForPresence:i,filterForEmpty:l,filterForNegative:s}))}A(null),a(!1)}e.current?.focus()},[E,e,a,y,n,t,j]),F=(0,H.useMemo)(()=>{let e="",t=g.find(e=>"is"===e[0])?.[1]?.[0];return t&&(e=t),e},[g]),Z=(0,H.useCallback)((e,r,a)=>{let n=oz(e);n&&(e=e.substring(1,e.length));let i=x(e),l=C(e);if(i&&mR(i)){R("values");let l=tA(tP(t),{kind:["keyword.operator.comparison","keyword.operator.range"],start:a,end:"variable"}),s=l&&(i.dataType===eA.Date||i.dataType===eA.Number||i.dataType===eA.Iteration)?t.substring(l.location.end+1,a):t.substring(r+1,a);A({keyword:dn(i.name)?e:null,columnDatabaseId:i.databaseId,value:s,filterForNegative:n});return}if(l){R("values"),A({keyword:e,columnDatabaseId:null,value:t.substring(r+1,a),filterForNegative:n});return}R("none")},[t,C,x]),V=(0,H.useCallback)((e,t)=>{if("number"!=typeof t||t!==e.length){R("none"),A(null);return}if(!f){let e=mN[0];(0,J.Z)(e,"Default filter command must exist"),h(e),R("filterQualifier")}if((0===t||e[t-1])&&e[t]){R("none");return}if(!e){R(f?"filterQualifier":"commands");return}let r=e.charAt(t-1),a=oW(e),n=rp(a?mA:oV,e),i=0,l=e,s="";n&&(l=n[0],i=n.index);let o=l.indexOf(":"),d=a&&["'",'"'].includes(r);s=l.substring(0,o),D(l.substring(o+1,t-(d?1:0)));let u=rp(mM,e),c=Math.max(rm(mF,e),rm(mL,e),0),m=Math.max((i+s.length||0)+(a?1:0),(u?u.index:e.lastIndexOf(","))||0);if(c>=m&&!a){if(['"',"'"," "].includes(r)){R("none");return}R("filterQualifier"),A({keyword:null,filterForNegative:oz(e[t-1]),columnDatabaseId:null,value:""});return}Z(s,m,t)},[f,Z]);(0,H.useEffect)(()=>{let r=requestAnimationFrame(()=>{if(!t.length)return;let r=null;e.current&&(r=e.current.selectionStart),V(t,r)});return()=>{cancelAnimationFrame(r)}},[V,t,e,r]);let B=(0,H.useMemo)(()=>new Set(I.map(e=>e.name.toLowerCase())),[I]),$=(0,H.useMemo)(()=>T.filter(e=>!dn(e)||dn(e)&&!B.has(e)).filter(e=>!mi(e)||j).map(e=>({key:e,value:mP(e),asHTML:!1,onSelect:()=>M(null,e,!!E?.filterForNegative),testId:`search-suggestions-item-${e}`})),[T,B,j,M,E?.filterForNegative]),z=(0,H.useCallback)(t=>{e.current&&(e.current.value="",e.current?.focus()),h(t)},[e,h]);if(!t.length||!r)return null;switch(_){case"commands":return(0,O.jsx)(mS,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,style:v,controllingElementRef:o,inputRef:e,items:k.map(e=>({key:e.name,value:e.name,asHTML:!1,onSelect:()=>z(e),testId:`search-suggestions-item-${e.name}`}))});case"filterQualifier":return(0,O.jsx)(mS,{xAlign:"left",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,style:v,items:S.map(e=>({key:e.name,value:mP(e.name),asHTML:!1,onSelect:()=>M(e,dn(e.name)?e.name.toLowerCase():null,!!E?.filterForNegative),testId:`search-suggestions-item-${e.name}`})).concat($)});case"values":{if(!E)return null;let t=E.value.toLowerCase(),r=[];if(E.columnDatabaseId&&i){let e=E.filterForNegative,a=y(E.columnDatabaseId);if(void 0!==l&&l(a.name)!==mn.ColumnAndValues)return null;let{filteredKeys:n,uniqueColumnValues:i}=N(a,P,t,E.filterForNegative),s=o0(oQ(a.name));r.push(...n.flatMap(t=>{if(t===`present-${E.columnDatabaseId}`){let r=`${rI.hasSuggestion} ${s}`;return{key:t,value:r,asHTML:!0,onSelect:()=>L(t,{filterForPresence:!0,filterForNegative:e}),testId:`search-suggestions-item-${r}`}}if(t===`empty-${E.columnDatabaseId}`){let r=`${rI.noSuggestion} ${s}`;return{key:t,value:r,asHTML:!0,onSelect:()=>L(t,{filterForEmpty:!0,filterForNegative:e}),testId:`search-suggestions-item-${r}`}}if(t===`exclude-${E.columnDatabaseId}`){let e=`${rI.excludeSuggestion} ${s}`;return{key:t,value:e,asHTML:!0,onSelect:()=>M(a,null,!0),testId:`search-suggestions-item-${e}`}}let r=i.get(t),n=r?r.value:"",l=r&&r.priority&&r.priority>mc.UserDefined?()=>(0,O.jsx)(eB.Z,{sx:{color:"accent.fg"},children:n}):r?.renderItem;return{key:t,value:n,renderItem:l,asHTML:!0,onSelect:()=>L(t,{filterForNegative:e}),testId:`search-suggestions-item-${t}`}}))}if(E.keyword){if("no"===E.keyword||"has"===E.keyword){let t=E.value?S.filter(e=>e.name.toLowerCase().indexOf(E.value)>=0):S,r=E.filterForNegative,a=t.map(e=>o0(oQ(e.name))).filter(e=>!P.includes(e));return(0,O.jsx)(mS,{style:v,xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:a.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>L(e,{filterForNegative:r}),testId:`search-suggestions-item-${e}`}))})}if(r.length>0)return(0,O.jsx)(mS,{xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:r,style:v});if(mi(E.keyword)&&!j||!Object.keys(dr).includes(E.keyword))return null;let t=E.keyword,a=Object.values(dr[t]),n=(E.value?a.filter(e=>e.indexOf(E.value)>=0):a).filter(e=>!P.includes(e));if("reason"===t)switch(F){case de.open:n=n.filter(e=>e===dt.reopened);break;case de.closed:n=n.filter(e=>e!==dt.reopened)}let i=E.filterForNegative;r.push(...n.map(e=>({key:e,value:e,asHTML:!0,onSelect:()=>L(e,{filterForNegative:i}),testId:`search-suggestions-item-${e}`})))}if(r.length>0)return(0,O.jsx)(mS,{xAlign:"right",xOriginEdgeAlign:"left",testId:s,listRef:d,controllingElementRef:o,inputRef:e,items:r,style:v});return null}default:return null}}));try{mD.displayName||(mD.displayName="FilterSuggestionsItemsContext")}catch{}try{mA.displayName||(mA.displayName="INVALID_VALUE_REGEX")}catch{}try{mM.displayName||(mM.displayName="COMMA_OUTSIDE_QUOTES_REGEX")}catch{}try{mL.displayName||(mL.displayName="WHITESPACE_OUTSIDE_SINGLE_QUOTES")}catch{}try{mF.displayName||(mF.displayName="WHITESPACE_OUTSIDE_DOUBLE_QUOTES")}catch{}try{mZ.displayName||(mZ.displayName="FilterSuggestions")}catch{}try{mZ.displayName||(mZ.displayName="FilterSuggestions")}catch{}let mO=(0,te.eE)()?"Meta":"Ctrl",mV={ARCHIVE:"e",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CTRL_J:"Ctrl+j",CTRL_K:"Ctrl+k",CTRL_SPACE:"Ctrl+ ",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",META_A:`${mO}+a`,META_C:`${mO}+c`,META_V:`${mO}+v`,META_S:`${mO}+s`,META_D:`${mO}+d`,META_Z:`${mO}+z`,META_ARROW_DOWN:`${mO}+ArrowDown`,META_ARROW_LEFT:`${mO}+ArrowLeft`,META_ARROW_RIGHT:`${mO}+ArrowRight`,META_ARROW_UP:`${mO}+ArrowUp`,META_END:`${mO}+End`,META_SHIFT_F:`${mO}+Shift+f`,META_F:`${mO}+f`,META_HOME:`${mO}+Home`,META_K:`${mO}+k`,META_ENTER:`${mO}+Enter`,META_SPACE:`${mO}+ `,META_SLASH:`${mO}+/`,SHIFT_ARROW_DOWN:"Shift+ArrowDown",SHIFT_ARROW_UP:"Shift+ArrowUp",SHIFT_SPACE:"Shift+ ",SHIFT_TAB:"Shift+Tab",SHIFT_ENTER:"Shift+Enter",META_SHIFT_ENTER:`${mO}+Shift+Enter`,SPACE:" ",TAB:"Tab",META_F6:`${mO}+F6`},mB=[mV.ARCHIVE,mV.SHIFT_SPACE],m$=()=>{if(!i){let e=document.querySelector("meta[name=keyboard-shortcuts-preference]");i=e?e.content:"all"}return"no_character_key"===i},mz=e=>{let t="";return(e.ctrlKey&&(t+="Ctrl+"),e.metaKey&&(t+="Meta+"),e.shiftKey&&(t+="Shift+"),t+=e.key,m$()&&mB.includes(t))?"":t},mW=mV.META_SLASH,mG=e=>(window.addEventListener("focus",e,{capture:!0}),window.addEventListener("blur",e),window.addEventListener("click",e),()=>{window.removeEventListener("focus",e,{capture:!0}),window.removeEventListener("blur",e),window.removeEventListener("click",e)}),mU=e=>(0,H.useSyncExternalStore)(mG,()=>e.length>0&&e.some(e=>e.current?.contains(document.activeElement)));var mH=r(79621),mq=r(50919);let mK=(0,H.memo)(function({onClick:e,onKeyDown:t}){return e?(0,O.jsx)(mQ,{onClick:e,onKeyDown:t}):null}),mQ=({onClick:e,onKeyDown:t})=>{let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":rI.clearFilter,direction:"sw",anchorSide:"outside-bottom"});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mq.h,{ref:r,variant:"invisible",onClick:e,onKeyDown:t,icon:eF.XCircleFillIcon,size:"small","aria-label":rI.clearFilter,...a,...(0,ef.f)("clear-filter-query")}),n]})};try{mK.displayName||(mK.displayName="ClearFilterButton")}catch{}try{mQ.displayName||(mQ.displayName="ClearFilterButtonWithTooltip")}catch{}var mX=r(33777),mY=r(80309);let mJ=new Intl.Collator(void 0,{numeric:!0});function m0(e,t){let r=e.sourceObject,a=t.sourceObject;return r.dataType!==eA.Assignees||a.dataType!==eA.Assignees?-1:mJ.compare(e.value,t.value)}function m1(e,t){let r=e.sourceObject,a=t.sourceObject;return r.dataType===eA.TrackedBy&&"group"===r.kind&&a.dataType===eA.TrackedBy&&"group"===a.kind?mJ.compare(iC(r.value),iC(a.value)):-1}function m2(e,t){return mJ.compare(e.login,t.login)}function m5(e,t){return mJ.compare(e.name,t.name)}function m3(e){if("empty"!==e.kind)switch((0,J.Z)(e.dataType!==eA.Labels,"Drag and drop not yet supported for labels"),e.dataType){case eA.Iteration:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.iteration.id}};case eA.SingleSelect:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{id:e.value.option.id}};case eA.Text:return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:e.value.text.raw};case eA.Number:{let t=e.value.number;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:{value:t.value}}}case eA.Date:{let t=e.value.date;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.Milestone:case eA.IssueType:case eA.ParentIssue:case eA.Repository:case eA.Assignees:return{dataType:e.dataType,value:e.value};case eA.TrackedBy:return{dataType:e.dataType,value:[e.value],appendOnly:!1};default:ij(e)}}function m4(e){switch(e.dataType){case eA.Assignees:case eA.Milestone:case eA.Repository:case eA.TrackedBy:case eA.Labels:case eA.IssueType:case eA.ParentIssue:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`}};case eA.Date:case eA.Iteration:case eA.Number:case eA.Text:case eA.SingleSelect:return{dataType:e.dataType,kind:"empty",value:{titleHtml:`No ${e.name}`,columnId:e.id}}}}function m8(e,t,r){if("_noValue"===t)return m4(e);switch(e.dataType){case eA.LinkedPullRequests:case eA.Reviewers:case eA.Title:case eA.TrackedBy:case eA.Tracks:return;case eA.Assignees:if(r&&"login"in r)return{dataType:e.dataType,kind:"group",value:[r]};return;case eA.Date:{let r=tU({value:function(e){let t=parseInt(e,10);return isNaN(t)?null:new Date(t)}(t)});if(!r)return;return{dataType:eA.Date,kind:"group",value:{date:r,columnId:e.id}}}case eA.Iteration:{if(r&&"duration"in r)return{dataType:e.dataType,kind:"group",value:{iteration:r,columnId:e.id}};let a=nR(e).find(e=>e.title===t);if(!a)return;return{dataType:eA.Iteration,kind:"group",value:{iteration:a,columnId:e.id}}}case eA.Labels:if(r&&"url"in r&&"color"in r)return{dataType:e.dataType,kind:"group",value:r};return;case eA.Milestone:if(r&&"url"in r&&"title"in r&&"repoNameWithOwner"in r)return{dataType:e.dataType,kind:"group",value:r};return;case eA.IssueType:if(r&&"name"in r&&"id"in r)return{dataType:e.dataType,kind:"group",value:r};return;case eA.ParentIssue:if(r&&"nwoReference"in r&&"id"in r)return{dataType:e.dataType,kind:"group",value:r};return;case eA.Number:{let r=t$({value:Number(t)});if(!r)return;return{dataType:eA.Number,kind:"group",value:{number:r,columnId:e.id}}}case eA.Repository:if(r&&"nameWithOwner"in r)return{dataType:e.dataType,kind:"group",value:r};return;case eA.SingleSelect:{if(r&&"descriptionHtml"in r)return{dataType:e.dataType,kind:"group",value:{option:r,columnId:e.id}};let a=(e.settings.options||[]).find(e=>e.name===t);if(!a)return;return{dataType:eA.SingleSelect,kind:"group",value:{option:a,columnId:e.id}}}case eA.Text:{let r=tB({raw:t,html:t});if(!r)return;return{dataType:eA.Text,kind:"group",value:{text:r,columnId:e.id}}}}}let m6=e=>e.toLowerCase().replace(/\s+/g,"-"),m7={date:mX.C0,iteration:mX.C0,linkedPullRequests:mX.$G,milestone:mX.$G,type:mX.$G,no:mX.$G,number:mX.C0,reviewers:mX.$G,singleSelect:mX.$G,state:mX.C0,text:mX.C0,subIssuesProgress:mX.$G,parentIssue:mX.$G},m9={date:e=>({key:m6(e.name),displayName:e.name,icon:eF.CalendarIcon,priority:m7.date,type:mX.be.Date}),iteration:e=>({key:m6(e.name),displayName:e.name,icon:eF.IterationsIcon,priority:m7.iteration}),linkedPullRequests:{displayName:"Linked pull requests",key:"linked-pull-requests",icon:eF.GitPullRequestIcon,description:"Issue items with a linked pull request",priority:m7.linkedPullRequests},no:{key:"no",displayName:"No",description:"Items without a value for the specified field",priority:m7.no,icon:eF.NoEntryIcon},number:e=>({key:m6(e.name),displayName:e.name,icon:eF.NumberIcon,priority:m7.number,type:mX.be.Number}),reviewers:{displayName:"Reviewers",key:"reviewers",icon:eF.PersonIcon,description:"Items reviewed by the user",priority:m7.reviewers},singleSelect:e=>({key:m6(e.name),displayName:e.name,icon:eF.SingleSelectIcon,priority:m7.singleSelect}),text:e=>({key:m6(e.name),displayName:e.name,icon:eF.TypographyIcon,priority:m7.text,type:mX.be.Text}),parentIssue:e=>({key:"parent-issue",displayName:e.name,icon:eF.IssueTrackedByIcon,priority:m7.parentIssue,type:mX.be.Text}),subIssuesProgress:e=>({key:"sub-issues-progress",displayName:e.name,icon:eF.IssueTracksIcon,priority:m7.subIssuesProgress,type:mX.be.Unknown})};let LinkedPullRequestsFilterProvider=class LinkedPullRequestsFilterProvider extends mY.JC{constructor(e){super(m9.linkedPullRequests,{...e,filterTypes:{...e?.filterTypes,valueless:!0}})}};let ReviewersFilterProvider=class ReviewersFilterProvider extends mY.vB{constructor(e,t){super(e,m9.reviewers,t)}};let DateFilterProvider=class DateFilterProvider extends mY.JC{constructor(e){super(m9.date(e),{filterTypes:{valueless:!1}})}};let IterationFilterProvider=class IterationFilterProvider extends mY.Bw{constructor(e){let t=m9.iteration(e),{iterations:r,completedIterations:a}=e.settings.configuration;super(t,[...r,...a].map((t,r)=>{let a=m8(e,t.id),{title:n,titleHtml:i,startDate:l,duration:s}=a&&"empty"!==a.kind?a.value.iteration:t;return{ariaLabel:n,value:n,priority:r,displayName:i,description:nN({startDate:l,duration:s}),inlineDescription:!1}}),{filterTypes:{valueless:!1}})}};let NumberFilterProvider=class NumberFilterProvider extends mY.JC{constructor(e){super(m9.number(e),{filterTypes:{valueless:!1}})}};let SingleSelectFilterProvider=class SingleSelectFilterProvider extends mY.Bw{constructor(e){super(m9.singleSelect(e),(e.settings.options??[]).map((t,r)=>{let a=m8(e,t.name),{descriptionHtml:n,name:i,nameHtml:l,color:s}=a&&"empty"!==a.kind?a.value.option:t;return{ariaLabel:i,value:i,priority:r,displayName:l,description:n,inlineDescription:!1,iconColor:s}}))}};let TextFilterProvider=class TextFilterProvider extends mY.JC{constructor(e){super(m9.text(e),{filterTypes:{valueless:!1}})}};let SubIssuesProgressFilterProvider=class SubIssuesProgressFilterProvider extends mY.Bw{constructor(e){super(m9.subIssuesProgress(e),[],{})}};let ParentIssueFilterProvider=class ParentIssueFilterProvider extends mY.JC{constructor(e){super(m9.parentIssue(e),{filterTypes:mX.UE?.filterTypes})}};var pe=r(60378),pt=r(72375),pr=r(47142),pa=r(61792);let pn={key:"has",displayName:"Has",description:"Filter by items which have any value for metadata",priority:1,icon:eF.PlusCircleIcon};let HasFilterProvider=class HasFilterProvider extends pa.s{async getSuggestions(e,t,r,a){if(!this.shouldGetSuggestions(t))return null;let n=(0,pe.R8)(t,a),i=[];if(!n)return this.filterValues.filter(t=>(0,pe.u8)(e,this.key,(0,pe.jk)(t.value)).length<1);for(let t of this.filterValues){let{value:r,displayName:a}=t,l=(0,pe.B8)(r),s=!!l&&(0,pr.CD)(n,l),o=!!a&&(0,pr.CD)(n,a);!((0,pe.u8)(e,this.key,(0,pe.jk)(l)).length>0)&&l&&(s||o)&&(t.priority-=(0,pt.EW)(n,l),i.push({...t,type:mX.NM.Value}))}return i}async validateFilterBlockValues(e,t,r){return r.map((a,n)=>{let i=(0,pe.B8)(a.value),l=(0,pe.u8)(e,this.key,(0,pe.jk)(i)).sort((e,t)=>e.id-t.id),s=!!i&&!!this.filterValues.find(e=>(0,pe.fe)((0,pe.B8)(e.value)??"",i));return l[0]?.id!==void 0&&(t.id!==l[0].id||r.findIndex(e=>e.value===i)<n)&&(s=!1),{...a,valid:s}})}getValueRowProps(e){return{text:e.displayName??(0,pe.B8)(e.value)??"",leadingVisual:(0,pe.sA)({value:e})}}constructor(e,t){super(pn,t),this.options={...mX.UE,...t,filterTypes:{...mX.UE.filterTypes,valueless:!1,...t?.filterTypes}},this.filterValues=e.map(e=>({...e,ariaLabel:`${e.displayName}, ${this.displayName}`}))}};function pi(e){(0,H.useEffect)(()=>{function t(t){mz(t)!==mW||t.defaultPrevented||(t.stopPropagation(),t.preventDefault(),e())}return addEventListener("keydown",t),()=>removeEventListener("keydown",t)},[e])}let pl=[eA.Assignees,eA.Date,eA.Iteration,eA.Labels,eA.LinkedPullRequests,eA.Milestone,eA.IssueType,eA.Number,eA.Repository,eA.Reviewers,eA.SingleSelect,eA.Text],ps=(e,t,r,a,n,i)=>{let l=t?{showAtMe:!0,currentUserLogin:t.login,currentUserAvatarUrl:t.avatarUrl}:{showAtMe:!1};switch(e.dataType){case eA.Assignees:return new mY.b9(l,{filterTypes:{exclusive:!0}});case eA.Date:return new DateFilterProvider(e);case eA.Iteration:return new IterationFilterProvider(e);case eA.Labels:return new mY.PA({filterTypes:{exclusive:!0}});case eA.LinkedPullRequests:return new LinkedPullRequestsFilterProvider;case eA.Milestone:return new mY.lh({priority:m7.milestone,filterTypes:{exclusive:!0}});case eA.IssueType:return new mY.Kf({priority:m7.type,filterTypes:{valueless:!0}},!1,r,void 0,a,{login:n,projectNumber:i});case eA.Number:return new NumberFilterProvider(e);case eA.Repository:return new mY.Tx({filterTypes:{exclusive:!0}});case eA.Reviewers:return new ReviewersFilterProvider(l,{filterTypes:{exclusive:!0}});case eA.SingleSelect:return new SingleSelectFilterProvider(e);case eA.SubIssuesProgress:return new SubIssuesProgressFilterProvider(e);case eA.Text:return new TextFilterProvider(e);case eA.ParentIssue:return new ParentIssueFilterProvider(e);default:throw Error(`Filter support for ${e.name} column not implemented`)}},po={width:"100%"},pd=(0,H.memo)(function({value:e,onChange:t}){let r=(0,uN.useRelayEnvironment)(),{issue_types:a,memex_sub_issues:n}=n9(),{allColumns:i}=df(),{loggedInUser:l,projectOwner:s,projectData:o}=i5(),{mwl_filter_bar_validation:d}=n9(),u=(0,H.useMemo)(()=>{let e=[...pl];return n&&(e.push(eA.ParentIssue),e.push(eA.SubIssuesProgress)),i.filter(({dataType:t})=>e.includes(t)).map(e=>ps(e,l,r,a,s?.login,o?.number))},[n,i,l,r,a,s?.login,o?.number]),c=(0,H.useRef)(null);pi((0,H.useCallback)(()=>{c.current?.focus()},[]));let m=(0,H.useMemo)(()=>u.sort((e,t)=>(e.displayName??e.key)?.localeCompare(t.displayName??t.key)??0).filter(e=>!1!==e.options.filterTypes.valueless).map(e=>({value:e.key,priority:mX.$G,displayName:e.displayName,type:mX.NM.Value,icon:e.icon})),[u]);return(0,O.jsx)(mX.wn,{id:"filter-bar-component","data-testid":"filter-bar-component",label:"Filter",filterButtonVariant:"compact",settings:{aliasMatching:!0},"aria-label":rI.filterByKeyboardOrByField,placeholder:rI.filterByKeyboardOrByField,sx:po,filterValue:e,inputRef:c,onChange:t,showValidationMessage:d,providers:(0,H.useMemo)(()=>[...u,new mY.fh(["issue","pr","open","closed","draft","merged"],{filterTypes:{valueless:!1}}),new mY.sC("mixed",{priority:m7.state,support:{status:mX.b7.Unsupported},filterTypes:{valueless:!1}}),new HasFilterProvider(m)],[u,m])})});try{pd.displayName||(pd.displayName="FilterBar")}catch{}var pu=r(41273);function pc({children:e,...t}){let r=(0,H.useRef)(null),a=(0,pu.F)(r.current);return(0,O.jsx)(eO.Z,{ref:r,role:"region","aria-label":"View filters",...(0,ef.f)("base-filter-input"),sx:{display:"flex",flex:1,flexDirection:"row",maxWidth:"100%",position:"relative",gap:2,flexWrap:a(["wrap","nowrap"]),justifyContent:a(["flex-end","space-between"])},...t,children:e})}try{pc.displayName||(pc.displayName="FilterContainer")}catch{}var pm=r(54901);let pp={lineHeight:0};function pf({filterCount:e,hideCounterLabel:t}){return t||"number"!=typeof e?null:(0,O.jsxs)(eO.Z,{sx:pp,"aria-live":"polite","aria-atomic":!0,children:[(0,O.jsx)(pm.Z,{...(0,ef.f)("filter-results-count"),children:e}),(0,O.jsxs)(mg.T,{children:[" ",1===e?"matching item":"matching items"]})]})}try{pf.displayName||(pf.displayName="FilterCounterLabel")}catch{}let ph={display:"flex",height:"100%",gap:2,marginTop:"2px"},pg={display:"flex",gap:2,flexShrink:0};function py({onResetChanges:e,onSaveChanges:t,saveButtonText:r,hideSaveButton:a,hideResetChangesButton:n,children:i}){return a&&n?null:(0,O.jsxs)(eO.Z,{sx:pg,children:[i,(0,O.jsxs)(eO.Z,{sx:ph,...(0,ef.f)("filter-state-actions"),children:[n?null:(0,O.jsx)(cd.r,{onClick:e,size:"small",disabled:!e,...(0,ef.f)("filter-actions-reset-changes-button"),children:rI.discardChanges}),a?null:(0,O.jsx)(cd.r,{variant:"primary",size:"small",onClick:t,disabled:!t,...(0,ef.f)("filter-actions-save-changes-button"),children:r??rI.saveChanges})]})]})}try{py.displayName||(py.displayName="FilterInputActions")}catch{}let px={alignItems:"center",pl:"12px",pr:2,maxWidth:"100%",flexShrink:1,flexGrow:1,minHeight:"32px",display:"grid",gridTemplateColumns:"auto 1fr auto",gap:2,minWidth:"20px",borderRadius:2,borderColor:"border.default",borderStyle:"solid",borderWidth:"1px",":hover":{cursor:"text"},"&.is-focused":{borderColor:"accent.fg"}},pb=(0,H.forwardRef)(function({children:e},t){return(0,O.jsx)(eO.Z,{ref:t,sx:px,children:e})});try{pb.displayName||(pb.displayName="FilterInputContainer")}catch{}try{pb.displayName||(pb.displayName="FilterInputContainer")}catch{}function pv(e){return t=>(0,U.U2)(e)({theme:t})}var pw=r(14626);let pj={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},pC=(e,t)=>{for(let r of t)r&&(r.style.font=e.font,r.style.fontSize=e.fontSize,r.style.fontFamily=e.fontFamily,r.style.fontWeight=e.fontWeight,r.style.fontStyle=e.fontStyle,r.style.letterSpacing=e.letterSpacing,r.style.textTransform=e.textTransform)},pI=(0,H.forwardRef)(function({minWidth:e=1,as:t=pw.Z,containerSx:r,...a},n){let i=(0,H.useRef)(null),l=(0,H.useRef)(null),s=(0,H.useRef)(null);(0,H.useImperativeHandle)(n,()=>i.current);let o=(0,H.useCallback)(()=>{requestAnimationFrame(()=>{let{current:t}=l,{current:r}=s;if(!t)return;let a=i.current&&window.getComputedStyle(i.current);a&&pC(a,[t,r]);let n=t.scrollWidth,o=r?.scrollWidth??0,d=Math.max(n+2,i.current?.value===""?o+2:0,e);i.current&&(i.current.style.width=`${d}px`)})},[e]);(0,H.useEffect)(()=>{o()});let d={...a,onChange:e=>{o(),a.onChange?.(e)},onBlur:e=>{o(),a.onBlur?.(e)},ref:i};return(0,O.jsxs)(eO.Z,{sx:r,children:[(0,O.jsx)(eO.Z,{sx:pj,ref:l,"aria-hidden":"true",children:function(...e){for(let t of e)if(null!=t)return t.toString();return""}(a.defaultValue,a.value)}),a.placeholder?(0,O.jsx)(eO.Z,{sx:pj,ref:s,"aria-hidden":"true",children:a.placeholder}):null,(0,O.jsx)(t,{...d})]})});try{pI.displayName||(pI.displayName="AutosizeTextInput")}catch{}try{pI.displayName||(pI.displayName="AutosizeTextInput")}catch{}let pS={color:"fg.default",fontFamily:"inherit",border:0,padding:0,boxShadow:"none",backgroundColor:"transparent",display:"block",width:"100%","&::-webkit-datetime-edit":{display:"flex",alignItems:"center"},"&:focus-within":{border:0,boxShadow:"none",outline:"none"},"&::placeholder":{color:"fg.muted"},"&.is-disabled":{cursor:"not-allowed"}},pk={},pT=(0,H.forwardRef)(function(e,t){let r=(0,H.useMemo)(()=>(function(e=pk){return{...pS,...e}})(e.sx),[e.sx]);return(0,O.jsx)(eO.Z,{as:"input",...e,sx:r,ref:t})});pT.displayName="BorderlessTextInput";let pN="search-suggestions-box",p_="filter-bar-input",pR=(0,H.forwardRef)(function({areFilterSuggestionsVisible:e,value:t,onChange:r,onKeyDown:a,onFocus:n,onBlur:i,onClick:l,disabled:s,...o},d){let u=(0,H.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),l?.(e)},[l]);return(0,O.jsx)(pI,{as:pT,role:"combobox",id:p_,"aria-haspopup":"listbox","aria-expanded":e,"aria-autocomplete":"list","aria-controls":pN,"aria-label":rI.filterByKeyboardOrByField,name:"Filter",value:t,disabled:s,onChange:r,onClick:u,onKeyDown:a,onFocus:n,onBlur:i,placeholder:rI.filterByKeyboardOrByField,autoComplete:"off",autoCorrect:"false",autoCapitalize:"false",spellCheck:"false",...(0,ef.f)("filter-bar-input"),ref:d,tabIndex:0,sx:pD,containerSx:pP,...o})}),pP={minWidth:"100%",height:"100%"},pD={position:"relative",display:"flex",resize:"none",outline:"none",border:"0px",width:"100%",padding:"0px",background:"transparent",overflow:"hidden",overflowX:"auto",color:"transparent",minWidth:"100%",caretColor:pv("colors.fg.default"),fontSize:1,flex:1,height:"100%",maxHeight:"unset","&::-webkit-autofill, &::-webkit-contacts-auto-fill-button, &::-webkit-credentials-auto-fill-button":{visibility:"hidden",display:"none !important",pointerEvents:"none",position:"absolute",right:0},"&:disabled":{cursor:"not-allowed"}};try{pR.displayName||(pR.displayName="RawFilterInput")}catch{}var pE=r(24815);let pA={x:0,y:0};function pM(e){let t=(0,H.useCallback)(()=>e(pA),[e]);return(0,H.useSyncExternalStore)(pL,t)}function pL(e){function t(t){let r={x:t.x,y:t.y};(0,mt.Z)(r,pA)||(pA={x:t.x,y:t.y}),e()}return document.addEventListener("pointermove",t),()=>document.removeEventListener("pointermove",t)}let pF=e=>e.invalid?{"&::before":{position:"absolute",bottom:0,width:"100%",height:"0.25em",content:'""',background:t=>`linear-gradient(135deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%),linear-gradient(45deg, transparent, transparent 45%, ${t.colors[e.variant??"danger"].emphasis}, transparent 55%, transparent 100%)`,backgroundRepeat:"repeat-x,repeat-x",backgroundSize:"0.5em 0.5em"}}:{},pZ=({length:e})=>0===e?null:(0,O.jsx)(O.Fragment,{children:Array.from({length:e}).map((e,t)=>(0,O.jsx)(H.Fragment,{children:"\xa0"},t))}),pO={position:"absolute",userSelect:"none",whiteSpace:"nowrap",wordBreak:"break-word",fontSize:1,flex:1,width:"100%",padding:"0px",top:"50%",transform:"translateY(-50%)"},pV=(0,H.memo)(function({query:e,suggestColumns:t=!0,showColumnSuggestionIf:r}){let a=(0,H.useRef)(null),{orderedTokenizedFilters:n,invalidQuery:i}=(0,H.useMemo)(()=>oB(e),[e]),l=pM((0,H.useCallback)(e=>!!a.current&&ry(a.current,e),[])),s=e.split(" ").findIndex(e=>" "!==e);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:pO,ref:a,...(0,ef.f)("tokenized-query"),"aria-errormessage":i?"tokenized-query-invalid-query-errormessage":void 0,children:[(0,O.jsx)(pZ,{length:s}),n.map((e,a)=>(0,O.jsxs)(H.Fragment,{children:[(0,O.jsx)(pz,{...e,id:`tokenized-query-token-${a}`,invalid:i,suggestColumns:t,showColumnSuggestionIf:r}),(0,O.jsx)(pZ,{length:e.spaceAfter.length})]},a))]}),i?(0,O.jsx)(pE.u,{contentRef:a,direction:"se",open:l,"aria-label":i?r_.invalidFilterQuotes:void 0,id:"tokenized-query-invalid-query-errormessage","aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})});function pB(e){return{message:e}}let p$=/^(?:[+\-><]?[=]?|(\*\.\.))\d+(\.\d+)?(?:\.\.\*|\.\.)?(?:\d+(\.\d+)?)?$/,pz=(0,H.memo)(function({invalid:e,id:t,suggestColumns:r,showColumnSuggestionIf:a,...n}){let{findFilterableFieldByName:i}=ms(),{repoSuggestions:l}=mE(),{issue_types:s}=n9(),{activeWorkflow:o}=uO(),d=s&&o&&uv(o),u=void 0!==a;switch(n.type){case"search":return(0,O.jsx)(pG,{id:t,value:n.value,invalid:e});case"field":{let s;let o=!0;if(d&&"type"===n.field)s=function(e,t){let r=oU(e),a=t?.issueTypes?function(e){let t=new Set;for(let r of e)r.isEnabled&&t.add(r.name);return t}(t.issueTypes):void 0,n=new Set;for(let e of r)a?.has(e)||n.add(e);if(n.size>0)return pB(r_.noOptionsMatch([...n].join(","),"type"))}(n.value,l);else{let e=i(n.field),t=u&&e?a(e.name):void 0;e=u?t===mn.ColumnOnly||t===mn.ColumnAndValues?e:void 0:e,o=!!r&&!!e;let d=u&&t===mn.ColumnAndValues;s=function(e,t,r=!1,a){if(!e)return;let n=oU(t);switch(e.dataType){case eA.SingleSelect:{let{options:t}=e.settings,r=new Set;for(let e of n)t.some(t=>of([e],t.name))||r.add(e);if(r.size>0)return pB(r_.noOptionsMatch([...r].join(","),e.name));return}case eA.Number:{let e=new Set;for(let t of n)p$.test(t)||e.add(t);if(e.size>0)return pB(r_.invalidNumberValue([...e].join(",")));return}case eA.Date:{let e=new Set;for(let t of n){let r=oj(t);if(r)switch(r.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===tV(r.value)&&e.add(r.value);break;case"RANGE":{let a=!r.start||null!==tV(r.start),n=!r.end||null!==tV(r.end);a||n?a?n||e.add(r.end):e.add(r.start):e.add(t);break}case"LESS_THAN_RANGE":r.end&&null===tV(r.end)&&e.add(r.end);break;case"GREATER_THAN_RANGE":r.start&&null===tV(r.start)&&e.add(r.start);break;default:ij(r)}else null===tV(t)&&e.add(t)}if(e.size>0)return pB(r_.invalidDateValue([...e].join(",")));return}case eA.Iteration:{let t=new Set;for(let r of n){if(nF(r))continue;let a=oj(r);if(a)switch(a.operator){case"GREATER_THAN":case"GREATER_THAN_OR_EQUAL":case"LESS_THAN":case"LESS_THAN_OR_EQUAL":null===oT(a.value,e)&&t.add(a.value);break;case"RANGE":{let n=!a.start||null!==oT(a.start,e),i=!a.end||null!==oT(a.end,e);n||i?n?i||t.add(a.end):t.add(a.start):t.add(r);break}case"LESS_THAN_RANGE":a.end&&null===oT(a.end,e)&&t.add(a.end);break;case"GREATER_THAN_RANGE":a.start&&null===oT(a.start,e)&&t.add(a.start);break;default:ij(a)}else null===oT(r,e)&&t.add(r)}if(t.size>0)return pB(r_.noIterationMatch([...t].join(","),e.name));return}case eA.Labels:{if(!r)return;let t=a?.labels?function(e){let t=new Set;for(let r of e)t.add(r.name);return t}(a.labels):void 0,i=new Set;for(let e of n)t?.has(e)||i.add(e);if(i.size>0)return pB(r_.noOptionsMatch([...i].join(","),e.name));return}case eA.Milestone:{if(!r)return;let t=a?.milestones?function(e){let t=new Set;for(let r of e)t.add(r.title);return t}(a.milestones):void 0,i=new Set;for(let e of n)t?.has(e)||i.add(e);if(i.size>0)return pB(r_.noOptionsMatch([...i].join(","),e.name));return}case eA.Text:case eA.Title:case eA.Repository:case eA.Reviewers:case eA.LinkedPullRequests:case eA.Assignees:case eA.Tracks:case eA.IssueType:case eA.ParentIssue:case eA.SubIssuesProgress:case eA.TrackedBy:return;default:ij(e)}}(e,n.value,d,l)}return(0,O.jsx)(pW,{id:t,leftSide:n.field,rightSide:n.value,invalid:e||!o,valueErrors:s,keyErrors:o?void 0:{message:r_.unknownFieldFilter(n.field)},exclude:n.exclude})}case"is":case"reason":{let r=function(e,t){let r=oU(e),a=new Set(Object.values(t)),n=new Set(r.filter(e=>!a.has((function(e){let t=e,r=e.match(/(["])(.*?[^\\])\1/);if(r){let e=r[2];(0,J.Z)(e,"Value must be returned from match"),t=e}return t})(e).toLowerCase())));if(0!==n.size)return{message:r_.invalidQualifier([...n],t)}}(n.value,dr[n.type]);return(0,O.jsx)(pW,{id:t,leftSide:n.type,invalid:e,exclude:n.exclude,rightSide:n.value,valueErrors:r})}case"last-updated":{let r=(u&&a("last-updated")===mn.None)??!1,i=n.value.match(td)?void 0:{message:r_.lastUpdatedValueErrorMessage};return(0,O.jsx)(pW,{id:t,leftSide:n.type,invalid:e||r,exclude:n.exclude,rightSide:n.value,valueErrors:r?void 0:i,keyErrors:e||r?{message:r_.unknownFieldFilter(n.type)}:void 0})}case"updated":{let r=(u&&a("updated")===mn.None)??!1,i=n.value.match(tu)?void 0:{message:r_.updatedValueErrorMessage};return(0,O.jsx)(pW,{id:t,leftSide:n.type,invalid:e||r,exclude:n.exclude,rightSide:n.value,valueErrors:r?void 0:i,keyErrors:e||r?{message:r_.unknownFieldFilter(n.type)}:void 0})}case"no-field":case"has":{let r=function(e,t,r=!1){let a=oU(e),n=new Set;for(let e of a)if(!t(e)){if(r&&"type"===e)continue;n.add(e)}if(0!==n.size)return{message:r_.unknownFieldFilter([...n].join(","))}}(n.field,i,d),a="no-field"===n.type?"no":"has";return(0,O.jsx)(pW,{id:t,leftSide:a,rightSide:n.field,exclude:n.exclude,invalid:e,valueErrors:r?{message:r_.unknownFieldFilter(n.field)}:void 0})}default:ij(n)}}),pW=(0,H.memo)(function({id:e,leftSide:t,rightSide:r,invalid:a,exclude:n=!1,valueErrors:i,keyErrors:l}){let s=(0,H.useRef)(null),o=(0,H.useRef)(null),d=pM((0,H.useCallback)(e=>!!s.current&&ry(s.current,e),[])),u=pM((0,H.useCallback)(e=>!!o.current&&ry(o.current,e),[]));return(0,O.jsxs)(eO.Z,{id:e,ref:s,sx:{position:"relative",display:"inline-block",...pF({invalid:!!(a||l)})},children:[(0,O.jsxs)(eB.Z,{sx:{display:"inline-block",whiteSpace:"pre",color:"fg.muted"},role:"textbox","aria-errormessage":l?`${e}-key-errormessage`:void 0,children:[`${n?"-":""}${t}:`,l?(0,O.jsx)(pE.u,{direction:"se",open:d,"aria-label":l.message,contentRef:s,id:`${e}-key-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]}),(0,O.jsxs)(eB.Z,{ref:o,sx:{position:"relative",display:"inline-block",color:"accent.fg",whiteSpace:"pre",...pF({invalid:!!i,variant:"attention"})},role:"textbox","aria-errormessage":i?`${e}-value-errormessage`:void 0,children:[r,i?(0,O.jsx)(pE.u,{contentRef:o,direction:"se",open:u,"aria-label":i.message,id:`${e}-value-errormessage`,"aria-live":"polite",anchorSide:"inside-bottom",anchorOffset:-2}):null]})]})}),pG=(0,H.memo)(function({value:e,invalid:t,id:r}){return(0,O.jsx)(eB.Z,{id:r,sx:{color:"fg.default",position:"relative",display:"inline-block",whiteSpace:"pre",...pF({invalid:t,variant:"danger"})},children:e})});try{pZ.displayName||(pZ.displayName="Spaces")}catch{}try{pV.displayName||(pV.displayName="TokenizedQuery")}catch{}try{p$.displayName||(p$.displayName="NUMBER_VALIDATION")}catch{}try{(p=QUALIFIERS).displayName||(p.displayName="QUALIFIERS")}catch{}try{pz.displayName||(pz.displayName="Token")}catch{}try{pW.displayName||(pW.displayName="PairFilterToken")}catch{}try{pG.displayName||(pG.displayName="SingleFilterToken")}catch{}let pU={position:"relative",display:"flex",alignItems:"center",zIndex:2,maxHeight:"unset",overflowX:"auto",height:"100%",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};function pH({children:e}){return(0,O.jsx)(eO.Z,{sx:pU,children:e})}try{pH.displayName||(pH.displayName="TokenizedQueryContainer")}catch{}let pq={color:"fg.subtle"},pK=(0,H.memo)(function({height:e,containerRef:t,value:r,onChange:a,onChangeValue:n,onInputKeyDown:i,onFocus:l,onBlur:s,inputRef:o,filterCount:d,onClearButtonClick:u,onClearButtonKeyDown:c,onResetChanges:m,onSaveChanges:p,setValueFromSuggestion:f,saveButtonText:h,suggestColumns:g=!0,showColumnSuggestionIf:y,hideSuggestions:x=!1,filterIconButtonIcon:b=eF.FilterIcon,hideSaveButton:v=!1,hideCounterLabel:w=!1,hideResetChangesButton:j=!1,children:C,onInputClick:I,...S}){let{memex_table_without_limits:k}=n9(),T=(0,H.useRef)(null);(0,H.useImperativeHandle)(o,()=>T.current);let N=(0,H.useRef)(null);(0,H.useImperativeHandle)(t,()=>N.current);let _=(0,H.useRef)(null),R=mU([_,T,N]),P=!!(r&&(u||c)),[D,E]=(0,H.useState)(R);(0,uG.b)(()=>{E(R&&r.trim().length>0)},[R,r]);let A=(0,e5.Z)(i),M=(0,H.useCallback)(e=>{switch(mz(e)){case mV.ESCAPE:if(D){E(!1);return}A.current?.(e);return;case mV.ARROW_DOWN:if(D)return;A.current?.(e);return;case mV.TAB:if(r.length>0)return;D&&E(!1),A.current?.(e);return}},[D,A,E,r.length]),L=(0,H.useCallback)(e=>{e.stopPropagation(),(0,uU.flushSync)(()=>{m?.(e)}),T.current?.focus()},[m]),F=(0,H.useCallback)(e=>{e.stopPropagation(),(0,uU.flushSync)(()=>{p?.(e)}),T.current?.focus()},[p]),Z=(0,H.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),(0,uU.flushSync)(()=>{u?.(e)}),T.current?.focus()},[u]),V=(0,H.useCallback)(()=>{T.current?.focus()},[]),B=k&&n;return(0,O.jsxs)(pc,{...S,children:[B?(0,O.jsxs)(eO.Z,{sx:{display:"flex",position:"relative",width:"100%",minHeight:32},children:[(0,O.jsx)(pd,{value:r,onChange:n}),(0,O.jsx)(eO.Z,{sx:{zIndex:6,position:"absolute",right:28,top:"2px",height:28,paddingLeft:2,display:"flex",alignItems:"center",backgroundColor:e=>`${e.colors.canvas.default}`},children:(0,O.jsx)(pf,{hideCounterLabel:w,filterCount:d})})]}):(0,O.jsxs)(pb,{ref:N,children:[(0,O.jsx)(eO.Z,{onClick:V,children:(0,O.jsx)(eZ.Z,{sx:pq,icon:b})}),(0,O.jsxs)(pH,{children:[(0,O.jsx)(pV,{query:r,suggestColumns:g,showColumnSuggestionIf:y}),(0,O.jsx)(pR,{areFilterSuggestionsVisible:D,onKeyDown:M,ref:T,onChange:a,value:r,onBlur:s,onFocus:l,onClick:I,...S})]}),(0,O.jsxs)(eO.Z,{sx:pQ,children:[(0,O.jsx)(pf,{hideCounterLabel:w,filterCount:d}),(0,O.jsx)(mK,{onClick:P?Z:void 0,onKeyDown:c})]})]}),(0,O.jsx)(py,{hideSaveButton:v,hideResetChangesButton:j,onResetChanges:m?L:void 0,onSaveChanges:p&&!v?F:void 0,saveButtonText:h,children:C}),x||B?null:(0,O.jsx)(mZ,{testId:pN,ref:_,filterInputRef:T,anchorRef:N,query:r,setQuery:f,suggestColumns:g,showColumnSuggestionIf:y,areFilterSuggestionsVisible:D,setAreFilterSuggestionsVisible:E})]})}),pQ={display:"flex",alignItems:"center"};try{pK.displayName||(pK.displayName="TokenizedFilterInput")}catch{}try{pK.displayName||(pK.displayName="TokenizedFilterInput")}catch{}let pX=({query:e,onClickHandler:t,filterCount:r,icon:a})=>(0,O.jsx)(eO.Z,{...(0,ef.f)("disabled-filter-input"),onClick:t,sx:{border:e=>`1px solid ${e.colors.border.default}`,borderRadius:2,display:"flex",flex:1,flexDirection:"row",justifyContent:"space-between",maxWidth:"100%",pl:2,pr:[3,4,5],position:"relative",color:e=>`${e.colors.primer.fg.disabled}`,backgroundColor:e=>`${e.colors.input.disabledBg}`,minHeight:"32px",cursor:"text"},children:(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",maxWidth:"100%",display:"flex"},children:[a,(0,O.jsx)(eB.Z,{sx:{pl:2,pr:2,whiteSpace:"nowrap"},children:e}),void 0!==r&&(0,O.jsx)(pm.Z,{...(0,ef.f)("disabled-filter-results-count"),children:r})]})});try{pX.displayName||(pX.displayName="DisabledFilterInput")}catch{}r(44311);let pY=r(3521),pJ=r(54283),p0=r(49611),p1=({query:e,initialQuery:t,onQueryChange:r})=>{let[a,n]=(0,H.useState)(t),i=(0,H.useMemo)(()=>e.trim()!==a,[e,a]),{isEditing:l}=cB(),{hasWorkflowWritePermission:s}=cL(),o=(0,H.useCallback)(e=>{r?.(e)},[r]),d=(0,H.useCallback)(()=>{o("")},[o]),u=(0,H.useCallback)(()=>{o(a)},[a,o]),c=(0,H.useCallback)(e=>{o(e.currentTarget.value)},[o]),m=(0,H.useCallback)(e=>{o(e)},[o]);return(0,H.useEffect)(()=>{n(t)},[t]),{queryCheckpoint:a,editingDisabled:!s||!l,isDirty:i,clearQuery:d,handleQueryChange:c,setValueFromSuggestion:m,setQueryCheckpoint:n,resetChanges:u}},p2=new Map([["Labels",mn.ColumnAndValues],["Milestone",mn.ColumnAndValues],["Type",mn.ColumnAndValues],["Assignees",mn.ColumnOnly],["last-updated",mn.None],["updated",mn.None]]),p5=e=>{if(p2.has(e))return p2.get(e)},p3=r(14432),p4=r(49039),p8=r(39695),p6=({onQueryChange:e,query:t,initialQuery:a="",milestoneSuggestionsQueryRef:n,labelSuggestionsQueryRef:i,issueTypeSuggestionsQueryRef:l})=>{let{workflow:s}=cB(),{setValueFromSuggestion:o,isDirty:d,editingDisabled:u,clearQuery:c,handleQueryChange:m,resetChanges:p}=p1({query:t,initialQuery:a,workflow:s,onQueryChange:e}),f=(0,uN.usePreloadedQuery)(p3,i),h=(0,uN.usePreloadedQuery)(p4,n),g=(0,uN.usePreloadedQuery)(p8,l),{data:y,loadNext:x,isLoadingNext:b,hasNext:v}=(0,uN.usePaginationFragment)(r(24245),f.repository?f.repository:null),{data:w,loadNext:j,isLoadingNext:C,hasNext:I}=(0,uN.usePaginationFragment)(r(59842),h.repository?h.repository:null),{data:S,loadNext:k,isLoadingNext:T,hasNext:N}=(0,uN.usePaginationFragment)(r(31109),g.repository&&!g.repository.isExcludedFromIssueTypes?g.repository:null),_=S?.issueTypes?.totalCount||0,R=(S?.issueTypes?.edges||[]).flatMap(e=>e?.node?[(0,uN.readInlineData)(p0,e.node)]:[]),P=y?.labels?.totalCount||0,D=(y?.labels?.edges||[]).flatMap(e=>e?.node?[(0,uN.readInlineData)(pJ,e.node)]:[]),E=w?.milestones?.totalCount||0,A=(w?.milestones?.edges||[]).flatMap(e=>e?.node?[(0,uN.readInlineData)(pY,e.node)]:[]);(0,H.useEffect)(()=>{v&&!b&&D.length<P&&x(100)},[x,D,P,v,b]),(0,H.useEffect)(()=>{I&&!C&&A.length<E&&j(100)},[j,A,E,I,C]),(0,H.useEffect)(()=>{N&&!T&&R.length<_&&k(100)},[k,R,_,N,T]);let M=(0,H.useMemo)(()=>[].concat(D),[D]),L=(0,H.useMemo)(()=>[].concat(A),[A]),F=(0,H.useMemo)(()=>[].concat(R),[R]),Z=(0,H.useMemo)(()=>({items:[],repoSuggestions:{labels:M,milestones:L,issueTypes:F}}),[M,L,F]);return u?(0,O.jsx)(pX,{query:t,icon:(0,O.jsx)(eF.SearchIcon,{})}):(0,O.jsxs)(mD.Provider,{value:Z,children:[(0,O.jsx)(pK,{height:"32px",value:t,onChange:m,onClearButtonClick:c,setValueFromSuggestion:o,onResetChanges:d?p:void 0,filterIconButtonIcon:eF.SearchIcon,suggestColumns:!0,showColumnSuggestionIf:p5,hideSaveButton:!0,hideCounterLabel:!0,"aria-describedby":"query-validation-message"}),d&&0===t.length&&(0,O.jsx)(cX.Z.Validation,{variant:"error",id:"query-validation-message",sx:{mt:1,color:"attention.fg"},children:rE.emptyFilterAutoAdd})]})};try{p2.displayName||(p2.displayName="AllowedSuggestedColumnsMap")}catch{}try{p6.displayName||(p6.displayName="SearchInput")}catch{}let p7=({onNoSuggestedRepositories:e})=>{let{isEditing:t,localRepositoryId:r,localQuery:a,initialQuery:n}=cB(),{count:i,searchResultUrl:l,onRepositoryChange:s,onSearchQueryChange:o,repository:d}=cJ(),u=d?.nameWithOwner.split("/")[0],[c,m,p]=(0,uN.useQueryLoader)(p3),[f,h,g]=(0,uN.useQueryLoader)(p4),[y,x,b]=(0,uN.useQueryLoader)(p8);return(0,H.useEffect)(()=>(d&&u&&(m({owner:u,repo:d.name},{fetchPolicy:"store-or-network"}),h({owner:u,repo:d.name},{fetchPolicy:"store-or-network"}),x({owner:u,repo:d.name},{fetchPolicy:"store-or-network"})),()=>{p(),g(),b()}),[d,b,p,g,x,m,h,u]),(0,O.jsx)(cU,{icon:eF.RepoIcon,iconBg:"severe.subtle",iconColor:"attention.fg",headerDescription:rE.getItemsBlockLabel,...(0,ef.f)("get-items-block"),children:(0,O.jsxs)(cX.Z,{sx:{flex:1,alignItems:"stretch"},children:[(0,O.jsx)(cX.Z.Label,{children:"Filters"}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flex:"auto"},children:[(0,O.jsx)(me,{targetRepositoryId:r,sx:{alignSelf:"start"},onRepositorySelected:s,onNoSuggestedRepositories:e,isEditing:t}),(0,O.jsx)(eO.Z,{sx:{ml:2,flex:"1 1 100%"},children:c&&f&&y?(0,O.jsx)(p6,{labelSuggestionsQueryRef:c,milestoneSuggestionsQueryRef:f,issueTypeSuggestionsQueryRef:y,onQueryChange:o,initialQuery:n,query:a}):(0,O.jsx)(cQ.o,{variant:"rounded",height:"32px",width:"100%"})})]}),t&&l&&(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted",paddingTop:3},children:[(0,O.jsxs)(uB.Z,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:l,...(0,ef.f)("search-result-link"),children:[" ","See ",i," existing items that match this query ",(0,O.jsx)(eF.LinkExternalIcon,{})]}),(0,O.jsxs)(eO.Z,{sx:{paddingTop:3},children:[rE.autoAddManualTip," ",(0,O.jsx)(uB.Z,{sx:{alignSelf:"start"},target:"_blank",rel:"noreferrer",href:"https://docs.github.com/issues/planning-and-tracking-with-projects/managing-items-in-your-project/adding-items-to-your-project#adding-multiple-issues-or-pull-requests-from-a-repository",...(0,ef.f)("add-multiple-link"),"aria-label":"Link to GitHub Docs page about adding multiple issues or pull requests to a project",children:(0,O.jsx)(eF.LinkExternalIcon,{})})]})]})]})})};try{p7.displayName||(p7.displayName="GetItemsBlock")}catch{}let p9=()=>{let{itemMatchesFilterQuery:e}=dh(),{items:t}=dP(),{setFilterCount:r,localQuery:a,setLocalQuery:n,setLocalContentTypes:i}=cB(),l=(0,H.useRef)(),s=(0,H.useCallback)(r=>t.filter(t=>e(t,o4(r))).length,[e,t]),o=(0,H.useCallback)(e=>{n(e),l.current&&l.current.cancel(),l.current=(0,s9.Z)(()=>{i(cS(e))},200),l.current()},[n,i]);return(0,H.useEffect)(()=>{r(s(a))},[s,a,r]),{onSearchQueryChange:o}},fe=({field:e,unit:t,value:r})=>(0,O.jsxs)(eB.Z,{as:"p",sx:{fontSize:0,color:"fg.muted",display:"flex",alignItems:"center",mt:2,mb:0,width:"100%"},children:[(0,O.jsx)(eO.Z,{as:"span",sx:{display:"flex",mr:1},"aria-hidden":"true",children:(0,O.jsx)(eF.StopwatchIcon,{size:14})}),(0,O.jsxs)(eB.Z,{as:"span",children:["Using the ",e," operator means that your workflow will run every ",r," ",t]})]});try{fe.displayName||(fe.displayName="TimeBoundFilterWarning")}catch{}let ft={"last-updated":{field:"last-updated",unit:"hours",value:12},updated:{field:"updated",unit:"hours",value:12}},fr=()=>{let{workflow:e,initialQuery:t,localQuery:r,filterCount:a}=cB(),{hasWorkflowWritePermission:n}=cL(),{items:i}=dP(),{onSearchQueryChange:l}=p9(),{setValueFromSuggestion:s,isDirty:o,editingDisabled:d,clearQuery:u,handleQueryChange:c,resetChanges:m}=p1({query:r,initialQuery:t,workflow:e,onQueryChange:l}),p=(0,H.useRef)(null),f=(0,H.useRef)(null),h=(0,H.useMemo)(()=>ub(e),[e]),g=(0,H.useMemo)(()=>{let e={};for(let t of oB(r).orderedTokenizedFilters){let r=ft[t.type];r&&!e[t.type]&&(e[t.type]=r)}return Object.values(e)},[r]),y=(0,H.useMemo)(()=>({items:i}),[i]),x=(0,H.useId)(),b=(0,H.useId)(),v=h&&g.length>0;return(0,O.jsxs)(cU,{icon:eF.FilterIcon,iconBg:"accent.subtle",iconColor:"accent.fg",headerDescription:rE.autoArchiveItemsLabel,children:[(0,O.jsxs)(cX.Z,{sx:{flex:1,alignItems:"stretch"},children:[(0,O.jsx)(cX.Z.Label,{children:"Filters"}),d?(0,O.jsx)(pX,{query:r,filterCount:n?a:void 0,icon:(0,O.jsx)(eF.FilterIcon,{})}):(0,O.jsx)(mD.Provider,{value:y,children:(0,O.jsx)(pK,{height:"32px",containerRef:p,value:r,onChange:c,inputRef:f,onClearButtonClick:u,setValueFromSuggestion:s,filterCount:a,onResetChanges:o?m:void 0,suggestColumns:!1,hideSaveButton:!0,"aria-describedby":v?b:x})}),o&&0===r.length&&(0,O.jsx)(cX.Z.Validation,{variant:"error",id:x,children:rE.emptyFilterDefault})]}),v&&(0,O.jsx)(eO.Z,{sx:{width:"100%"},id:b,...(0,ef.f)("time-bound-notification"),children:g.map(({field:e,value:t,unit:r})=>(0,O.jsx)(fe,{field:e,value:t,unit:r},e))})]})};try{fr.displayName||(fr.displayName="GetProjectItemsBlock")}catch{}let fa=()=>{let{isEditing:e}=cB();return(0,O.jsx)(cU,{icon:eF.IssueTracksIcon,iconBg:"accent.subtle",iconColor:"accent.fg",headerDescription:rE.getSubIssuesBlockLabel,...(0,ef.f)("automation-get-sub-issues-block"),children:e&&(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{sx:{mb:2},children:["Enabling this workflow will automatically add sub-issues in the following scenarios:",(0,O.jsxs)(eO.Z,{as:"ul",sx:{pt:2,pl:6},children:[(0,O.jsx)(eO.Z,{as:"li",children:"When a sub-issue is added to an issue in the project"}),(0,O.jsx)(eO.Z,{as:"li",children:"When an issue with sub-issues is added to the project"})]})]}),(0,O.jsx)(eO.Z,{children:"Note: This workflow will initially add all existing sub-issues of issues in the project."})]})})};try{fa.displayName||(fa.displayName="GetSubIssuesBlock")}catch{}let fn=({selectedOption:e,options:t,isEditing:r,onStatusSelected:a,testId:n,sx:i})=>{let l=(0,H.useMemo)(()=>t.map(e=>({text:e.name,id:e.name})),[t]),[s,o]=(0,H.useState)(""),[d,u]=(0,H.useState)(!1),c=(0,H.useCallback)(()=>{u(!1)},[]),m=l.filter(e=>e.text?.toLowerCase().startsWith(s.toLowerCase())),p=l.find(t=>t.text===e?.name);return(0,O.jsx)(c1.b,{placeholderText:rE.setValueLabel,open:d,onOpenChange:u,selected:p,onFilterChange:o,items:m,onSelectedChange:e=>{a(t.find(t=>t.name===e?.text))},renderAnchor:({children:t,...a})=>(0,O.jsx)(cd.r,{sx:i,disabled:!r,trailingVisual:eF.TriangleDownIcon,...a,...(0,ef.f)(`${n}-anchor`),children:e?(0,O.jsx)(u5,{children:`Status: ${e?.nameHtml}`}):rE.invalidNoValue}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:c,...(0,ef.f)(`${n}-panel`)}})};try{fn.displayName||(fn.displayName="StatusPicker")}catch{}let fi=({headerDescription:e})=>{let{isEditing:t,workflow:r,replaceAction:a}=cB(),n=r.actions[0];(0,J.Z)(n,"Action must be defined");let{column:i,selectedOption:l}=cM(n),s=i&&"options"in i.settings?i.settings.options:[];return(0,O.jsx)(cU,{icon:eF.PencilIcon,iconBg:"attention.subtle",iconColor:"attention.fg",headerDescription:e,children:(0,O.jsx)(fn,{onStatusSelected:e=>{a({...n,arguments:{...n.arguments,fieldOptionId:e?.id}})},options:s,selectedOption:l?{...l}:void 0,isEditing:t,testId:"workflow-set-field"})})};try{fi.displayName||(fi.displayName="SetBlock")}catch{}let fl=({selectedContentTypes:e,contentTypes:t,isEditing:r,onContentTypesSelected:a,testId:n,sx:i})=>{let{setIsWorkflowValid:l}=cB(),s=(0,H.useMemo)(()=>t.map(e=>({text:function(e){switch(e){case ug.PullRequest:return rI.pullRequest;case ug.Issue:return rI.issue;default:ij(e)}}(e),id:e})),[t]),[o,d]=(0,H.useState)(""),[u,c]=(0,H.useState)(!1),m=(0,H.useCallback)(()=>{c(!1)},[]),p=(0,H.useCallback)(e=>{0===e.length?l(!1):l(!0)},[l]),f=s.filter(e=>e.text.toLowerCase().startsWith(o.toLowerCase())),h=s.filter(t=>e.includes(t.id));return(0,O.jsx)(c1.b,{placeholderText:rE.selectContentType,open:u,onOpenChange:c,selected:h,onFilterChange:d,items:f,onSelectedChange:e=>{let t=e.map(e=>e.id).filter(e=>void 0!==e&&e in ug);p(t),a(t)},renderAnchor:({children:e,...t})=>(0,O.jsx)(cd.r,{sx:i,disabled:!h||!r,trailingVisual:eF.TriangleDownIcon,...t,...(0,ef.f)(`${n}-anchor`),children:h.length>0?e:rE.invalidNoContentType}),overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:m,...(0,ef.f)(`${n}-panel`)}})};try{fl.displayName||(fl.displayName="ContentTypePicker")}catch{}let fs=({description:e,icon:t,iconColor:r,iconBg:a})=>{let{isEditing:n,workflow:i,localContentTypes:l,setLocalContentTypes:s}=cB(),{getValidContentTypesForTriggerType:o}=uO(),d=o(i.triggerType);return(0,O.jsx)(cU,{icon:t,iconBg:a,iconColor:r,headerDescription:e,children:d.length>1&&(0,O.jsx)(fl,{contentTypes:d,onContentTypesSelected:s,selectedContentTypes:l,isEditing:n,testId:"workflows-when-content-types"})})};try{fs.displayName||(fs.displayName="WhenBlock")}catch{}let fo=({action:e,onNoSuggestedRepositories:t})=>{let{workflow:r}=cB();switch(e.actionType){case uf.SetField:{let e=function(e){switch(e){case up.ItemAdded:return{description:rE.itemAddedToProjectLabel,icon:uS(e),iconColor:"success.fg",iconBg:"success.subtle"};case up.Reopened:return{description:rE.itemReopenedLabel,icon:uS(e),iconColor:"success.fg",iconBg:"success.subtle"};case up.Closed:return{description:rE.itemClosedLabel,icon:uS(e),iconColor:"fg.muted",iconBg:"canvas.inset"};case up.ReviewChangesRequested:return{description:rE.codeChangesRequestedLabel,icon:uS(e),iconColor:"danger.fg",iconBg:"danger.subtle"};case up.ReviewApproved:return{description:rE.codeReviewApprovedLabel,icon:uS(e),iconColor:"open.fg",iconBg:"success.subtle"};case up.Merged:return{description:rE.pullRequestMergedLabel,icon:uS(e),iconColor:"done.fg",iconBg:"done.subtle"};default:throw Error(`${e} is not a valid MemexWorkflowTriggerType for a WhenBlock`)}}(r.triggerType);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(fs,{...e}),(0,O.jsx)(cW,{}),(0,O.jsx)(fi,{headerDescription:rE.setValueLabel})]})}case uf.GetProjectItems:if(r.triggerType===up.ProjectItemColumnUpdate)return(0,O.jsx)(fi,{headerDescription:rE.projectItemColumnUpdateLabel});return(0,O.jsx)(fr,{});case uf.GetItems:return(0,O.jsx)(p7,{onNoSuggestedRepositories:t});case uf.ArchiveProjectItem:return(0,O.jsx)(cq,{});case uf.AddProjectItem:return(0,O.jsx)(cH,{headerDescription:e.arguments.subIssue?rE.addSubIssuesBlockLabel:rE.addItemBlockLabel});case uf.CloseItem:return(0,O.jsx)(cK,{});case uf.GetSubIssues:return(0,O.jsx)(fa,{});default:return null}};try{fo.displayName||(fo.displayName="ActionBlock")}catch{}let fd=({onNoSuggestedRepositories:e})=>{let{workflow:t}=cB(),r=(0,H.useMemo)(()=>t.actions.sort(uj),[t.actions]);return(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"80%",px:3},children:r.map((t,a)=>(0,O.jsxs)(H.Fragment,{children:[(0,O.jsx)(fo,{action:t,sortedActions:r,onNoSuggestedRepositories:e}),a<r.length-1&&(0,O.jsx)(cW,{})]},t.id??t.actionType))})};try{fd.displayName||(fd.displayName="AutomationGraph")}catch{}var fu=r(58497),fc=r(79903);let fm=()=>{let[e,t]=(0,H.useState)(!1),{workflowName:r,isEditing:a}=cB(),n=(0,H.useRef)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:3,color:"fg.default",wordBreak:"break-word"},id:"workflow-name",...(0,ef.f)("workflow-name-heading"),children:r}),!a&&(0,O.jsx)(mq.h,{ref:n,as:"button",icon:eF.PencilIcon,onClick:()=>t(!0),variant:"invisible","aria-label":"Edit workflow name",...(0,ef.f)("workflow-name-edit-button")})]}),(0,O.jsx)(fp,{isOpen:e,setIsOpen:t,returnFocusRef:n})]})},fp=({isOpen:e,setIsOpen:t,returnFocusRef:r})=>{let{workflowNames:a}=uO(),{workflowName:n,saveNameChange:i}=cB(),[l,s]=(0,H.useState)(n),[o,d]=(0,H.useState)(),u=(0,H.useRef)(null),c=(0,H.useCallback)(e=>{let t=u_(e,a);t.isValid?o&&d(void 0):d(t.errorMessage)},[a,o]),m=(0,fu.N)(c,200),p=(0,H.useCallback)(e=>{let t=e.target.value;s(t),m(t)},[m]),f=(0,H.useCallback)(()=>{o||(t(!1),i(l))},[o,l,i,t]),h=(0,H.useCallback)(()=>{s(n),t(!1),d(void 0)},[t,n]);return(0,O.jsxs)(fc.Z,{isOpen:e,initialFocusRef:u,returnFocusRef:r,onDismiss:h,"aria-labelledby":"workflow-name-editor-header",children:[(0,O.jsx)(fc.Z.Header,{sx:{background:"none",border:"none"},id:"workflow-name-editor-header",children:(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:3},children:"Edit workflow name"})}),(0,O.jsx)(eO.Z,{sx:{px:3},children:(0,O.jsxs)(cX.Z,{sx:{flex:1},children:[(0,O.jsx)(cX.Z.Label,{children:"Workflow name"}),(0,O.jsx)(pw.Z,{ref:u,name:"workflowName",value:l,onChange:p,validationStatus:o?"error":void 0,sx:{width:"100%"},"aria-describedby":"workflow-name-editor-error",...(0,ef.f)("workflow-name-editor-input")}),o&&(0,O.jsx)(cX.Z.Validation,{variant:"error",id:"workflow-name-editor-error",children:o})]})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default",gap:1},children:[(0,O.jsx)(cd.r,{variant:"default",onClick:h,children:"Cancel"}),(0,O.jsx)(cd.r,{variant:"primary",onClick:f,children:"Save"})]})]},e?"open":"closed")};try{fm.displayName||(fm.displayName="WorkflowName")}catch{}try{fp.displayName||(fp.displayName="WorkflowNameEditorDialog")}catch{}let ff=()=>(0,O.jsxs)(eO.Z,{sx:{mb:5,color:"fg.muted",fontSize:"12px",display:"flex",alignItems:"center"},...(0,ef.f)("read-only-label"),children:[(0,O.jsx)(eZ.Z,{icon:eF.LockIcon,size:12,sx:{color:"fg.muted",mr:1}}),(0,O.jsx)(eB.Z,{children:rE.readOnlyLabel})]}),fh=(0,H.forwardRef)((e,t)=>{let{discard:r}=cB();return(0,O.jsx)(cd.r,{ref:t,onClick:r,...(0,ef.f)("workflow-discard-button"),sx:{ml:2},children:rE.discardWorkflow})});fh.displayName="DiscardButton";let fg=({clientId:e})=>{let{deleteNonPersistedWorkflow:t}=uO(),r=(0,at.N)(),a=(0,H.useCallback)(async()=>{await r({title:rE.deleteWorkflowConfirmationTitle,content:rE.deleteWorkflowConfirmationContent,confirmButtonContent:rE.deleteWorkflowConfirmationButton,confirmButtonType:"danger"})&&t(e)},[r,t,e]);return(0,O.jsx)(cd.r,{onClick:()=>a(),...(0,ef.f)("workflow-delete-button"),sx:{ml:2},children:rE.deleteWorkflow})},fy=({children:e})=>{let{isEditing:t,edit:r,workflow:a,save:n,isWorkflowValid:i}=cB(),{shouldDisableWorkflowToggle:l}=cB(),s=(0,H.useCallback)(async()=>{n(!a.enabled)},[n,a]),o=ux(a),d=(0,H.useRef)(null),u=(0,H.useRef)(null),c=cc(t);return(0,H.useEffect)(()=>{t!==c&&(t?d.current?.focus():u.current?.focus())},[t,c]),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,O.jsxs)(eO.Z,{sx:{py:[1,2,3],px:[2,3,4],display:"flex",justifyContent:"space-between",alignItems:"baseline",width:"100%",borderBottom:"1px solid",borderBottomColor:"border.subtle"},children:[(0,O.jsx)(fm,{}),(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[!t&&(0,O.jsxs)(O.Fragment,{children:[o&&(0,O.jsx)("span",{...(0,ef.f)("workflow-enable-toggle-container"),children:(0,O.jsx)(cu.Z,{checked:a.enabled,onClick:s,disabled:l,"aria-labelledby":"workflow-name"})}),(0,O.jsx)(cd.r,{ref:u,sx:{ml:2},leadingVisual:eF.PencilIcon,onClick:r,...(0,ef.f)("workflow-edit-button"),children:rE.editWorkflow})]}),t&&(0,O.jsxs)(O.Fragment,{children:[!o&&a.isUserWorkflow?(0,O.jsx)(fg,{clientId:a.clientId}):(0,O.jsx)(fh,{ref:d}),(0,O.jsx)(cd.r,{sx:{ml:2},variant:"primary",disabled:!i,onClick:()=>{n()},...(0,ef.f)("workflow-save-button"),children:rE.saveWorkflow})]})]})]}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",backgroundColor:"canvas.inset",py:5,borderRadius:2},children:[!t&&(0,O.jsx)(ff,{}),e]})]})},fx=({workflow:e,onNoSuggestedRepositories:t,startInEditMode:r})=>(0,O.jsx)(cV,{startInEditMode:r,initialWorkflow:e,children:(0,O.jsx)(ErrorBoundary,{fallback:(0,O.jsx)(c$,{heading:"Oops!",content:"Something went wrong loading this workflow configuration."}),children:(0,O.jsx)(fy,{children:(0,O.jsx)(fd,{onNoSuggestedRepositories:t})})})});try{ff.displayName||(ff.displayName="ReadOnlyLabel")}catch{}try{fg.displayName||(fg.displayName="DeleteButton")}catch{}try{fy.displayName||(fy.displayName="AutomationGraphViewContent")}catch{}try{fx.displayName||(fx.displayName="AutomationGraphView")}catch{}var fb=r(14783);let fv=(0,H.forwardRef)(function({isActive:e,className:t,...r},a){return(0,O.jsx)(lW,{...r,ref:a,className:({isActive:r})=>r||e?`${t} selected`.trim():t??""})});try{fv.displayName||(fv.displayName="NavLinkWithActiveClassName")}catch{}try{fv.displayName||(fv.displayName="NavLinkWithActiveClassName")}catch{}function fw({to:e,children:t,isActive:r,...a}){let n=(0,K.WU)(e),i=(0,K.bS)({path:n.pathname,end:!0});return(0,O.jsx)(fb.$.Item,{"aria-current":(!!r||!!i)&&"page",as:fv,...a,to:e,children:t})}try{fw.displayName||(fw.displayName="NavLinkActionListItem")}catch{}var fj=r(35732),fC=r(65379);let fI=({workflowToDuplicate:e})=>{let{setIsDialogOpen:t,applyWorkflowTemplate:r}=uV(),{customWorkflowLimitReached:a,setWorkflowMenuState:n}=uO(),i=(0,H.useCallback)(i=>{a||(r(e),t(!0),n(e.clientId),i.stopPropagation())},[a,r,e,t,n]);return a?(0,O.jsx)(fC.Z,{"aria-label":rA.userAddedWorkflowLimitReached,direction:"s",wrap:!0,children:(0,O.jsxs)(mx.S.Item,{as:"button","aria-label":"Duplicate workflow",onSelect:e=>e.stopPropagation(),...(0,ef.f)(`duplicate-option-disabled-${e.clientId}`),disabled:!0,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.DuplicateIcon,{className:"duplicate-workflow-button"})}),(0,O.jsx)(eB.Z,{className:"duplicate-workflow-button",children:rA.duplicateWorkflowLabel})]},`duplicate-option-${e.clientId}`)}):(0,O.jsxs)(mx.S.Item,{as:"button",onSelect:i,"aria-label":"Duplicate workflow",...(0,ef.f)(`duplicate-option-${e.clientId}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.DuplicateIcon,{className:"duplicate-workflow-button"})}),(0,O.jsx)(eB.Z,{className:"duplicate-workflow-button",children:rA.duplicateWorkflowLabel})]},`duplicate-option-${e.clientId}`)};try{fI.displayName||(fI.displayName="DuplicateWorkflowButton")}catch{}let fS=(0,H.forwardRef)(({workflow:e,showDelete:t,isOpen:r},a)=>{let{deleteWorkflow:n,setWorkflowMenuState:i,handleReturnFocus:l}=uO(),s=(0,uN.useRelayEnvironment)(),o=(0,at.N)(),d=(0,H.useCallback)(()=>{i(e.clientId),l(e.clientId)},[i,e.clientId,l]),u=(0,H.useCallback)(async t=>{let r=await o({title:rE.deleteWorkflowConfirmationTitle,content:rE.deleteWorkflowConfirmationContent,confirmButtonContent:rE.deleteWorkflowConfirmationButton,confirmButtonType:"danger"});i(e.clientId),r?n(t.number,s):l(e.clientId)},[o,n,s,l,i,e.clientId]),[c,m]=(0,H.useState)(r),p=(0,H.useCallback)(t=>{t.target instanceof Element&&t.target?.closest("a")?.href?.includes("/workflows/")||i(e.clientId)},[i,e.clientId]),f=(0,H.useRef)(null);(0,my.z)(a,f);let h=(0,H.useMemo)(()=>{let r=[];return ux(e)&&(t&&r.push((0,O.jsxs)(mx.S.Item,{variant:"danger",onSelect:()=>u(e),...(0,ef.f)(`workflow-nav-item-menu-delete-${e.clientId}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),rE.deleteWorkflowCallToAction]},`${e.clientId}-delete-option`)),uv(e)&&r.push((0,O.jsx)(fI,{workflowToDuplicate:e},`${e.clientId}-duplicate-option`))),r},[u,t,e]);return(0,O.jsx)(O.Fragment,{children:h.length>0?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mq.h,{id:`workflow-nav-item-menu-${e.clientId}`,ref:f,icon:eF.KebabHorizontalIcon,variant:"invisible","aria-label":"Open workflow options",sx:{color:"fg.default",py:0},...(0,ef.f)(`workflow-nav-item-menu-${e.clientId}`)},`workflow-nav-item-menu-${e.clientId}`),(0,O.jsx)(fj.P,{anchorRef:f,open:c,onOpenChange:m,children:(0,O.jsx)(fj.P.Overlay,{sx:{overflow:"visible"},onClickOutside:p,onEscape:d,children:(0,O.jsx)(mx.S,{...(0,ef.f)(`workflow-nav-item-menu-list-${e.clientId}`),children:h},`workflow-nav-item-menu-list-${e.clientId}`)})})]}):null})});fS.displayName="WorkflowMenu";let fk=(0,H.memo)(({activeWorkflow:e})=>{let{workflows:t,workflowWithTriggerTypeIsEnableable:r,setWorkflowMenuState:a,resetWorkflowMenuStates:n,isWorkflowMenuOpen:i,getWorkflowMenuItemsMap:l}=uO(),{isArchiveFull:s}=uo(),o=(0,H.useCallback)((e,t)=>{["button","svg","path"].includes(e.target.tagName.toLowerCase())?(e.preventDefault(),a(t)):n()},[n,a]),d=ur();return(0,O.jsx)(fb.$,{...(0,ef.f)("settings-side-nav"),children:(0,O.jsxs)(fb.$.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{as:"h2",children:"Default workflows"}),t.map(a=>{let n=r(a.triggerType),u=a.clientId===e.clientId,c=a.isUserWorkflow&&!ux(a);return(0,O.jsx)(fw,{to:{pathname:ej.generatePath({...d,workflowClientId:a.clientId})},onClick:e=>o(e,a.clientId),tabIndex:n?0:-1,isActive:u,sx:{pointerEvents:n?"auto":"none",opacity:n?void 0:.5,minHeight:"44px",display:"flex",alignItems:"center"},...(0,ef.f)(`workflow-nav-item-${uC(a)}`),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",flex:"auto",alignItems:"center",justifyContent:"space-between"},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:[(0,O.jsx)(fT,{workflow:a,isActive:u,isArchiveFull:s,isNonPersistedUserWorkflow:c}),(0,O.jsx)(fN,{name:a.name,isNonPersistedUserWorkflow:c})]}),(0,O.jsx)(eO.Z,{sx:{flexShrink:"0",display:"flex",alignItems:"center"},children:ux(a)&&(0,O.jsx)(fS,{ref:e=>{let t=l();e?t.set(a.clientId,e):t.delete(a.clientId)},workflow:a,showDelete:!function(e,t){let r=t.actions.map(e=>e.actionType);return 1===e.filter(e=>e.id&&e.triggerType===t.triggerType&&e.actions.every(e=>r.includes(e.actionType))).length}(t,a),isOpen:i(a.clientId)},`workflow-nav-list-item-${a.clientId}`)})]})},a.clientId)})]})})});fk.displayName="AutomationSideNav";let fT=({workflow:e,isActive:t,isArchiveFull:r,isNonPersistedUserWorkflow:a})=>a?(0,O.jsx)(eZ.Z,{icon:eF.DotFillIcon,size:20,sx:{mr:1,color:"attention.emphasis"}}):r&&ub(e)?(0,O.jsx)(eZ.Z,{icon:eF.DotFillIcon,size:20,sx:{mr:1,color:"danger.fg"}}):e.enabled?(0,O.jsx)(eZ.Z,{icon:eF.DotFillIcon,size:20,sx:{mr:1,color:"success.emphasis"}}):uR(e).isValid?(0,O.jsx)(eZ.Z,{icon:eF.DotIcon,size:20,sx:{mr:1,color:t?"fg.default":"fg.muted"}}):(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,size:14,sx:{ml:"3px",mr:"7px",color:"danger.fg"}}),fN=({name:e,isNonPersistedUserWorkflow:t})=>t?(0,O.jsx)(eB.Z,{sx:{fontStyle:"italic"},children:e}):(0,O.jsx)(eB.Z,{children:e});try{fT.displayName||(fT.displayName="ProjectWorkflowIcon")}catch{}try{fN.displayName||(fN.displayName="WorkflowName")}catch{}let f_=({onWorkflowNameValidation:e,onWorkflowNameChange:t,debounceDelay:r,workflowNames:a})=>{let[n,i]=(0,H.useState)(),l=(0,H.useCallback)(t=>{let r=u_(t,a);r.isValid?n&&(e?.(!0),i(void 0)):(e?.(!1),i(r.errorMessage))},[n,e,a]),s=(0,fu.N)(l,r??200);return{validate:l,onChangeHandler:(0,H.useCallback)(e=>{let r=e.target.value;t?.(r),s(r)},[s,t]),error:n}},fR=({setStartInEditMode:e})=>{let{isDialogOpen:t,setIsDialogOpen:r,workflowName:a,setWorkflowName:n,workflowTemplate:i,applyWorkflowTemplate:l,returnFocusClientId:s}=uV(),{workflowNames:o,activeWorkflow:d,newWorkflow:u,handleReturnFocus:c}=uO(),{error:m,onChangeHandler:p,validate:f}=f_({onWorkflowNameChange:n,workflowNames:d?new Set(o).add(d.name.toLocaleLowerCase()):o}),h=(0,H.useRef)(null),g=(0,H.useCallback)(()=>{u(a,"query_matched_add_project_item",i),r(!1),e(!0)},[u,e,r,a,i]),y=(0,H.useCallback)(()=>{r(!1),l(),c(s)},[l,r,c,s]);return(0,H.useEffect)(()=>{t&&f(a)},[t]),(0,O.jsxs)(fc.Z,{isOpen:t,initialFocusRef:h,onDismiss:y,"aria-labelledby":"new-workflow-header",children:[(0,O.jsx)(fc.Z.Header,{sx:{background:"none",border:"none"},id:"new-workflow-header",children:(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:3},children:rA.duplicateWorkflowLabel})}),(0,O.jsx)(eO.Z,{sx:{px:3},children:(0,O.jsxs)(cX.Z,{sx:{my:2},children:[(0,O.jsx)(cX.Z.Label,{children:rA.workflowNameInputLabel}),(0,O.jsx)(pw.Z,{ref:h,sx:{width:"100%",minHeight:"34px"},value:a,onChange:p,validationStatus:m?"error":void 0,...(0,ef.f)("new-workflow-dialog-input")}),m&&(0,O.jsx)(eB.Z,{as:"p",sx:{color:"danger.fg"},...(0,ef.f)("new-workflow-dialog-error"),children:m})]})}),(0,O.jsx)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default"},children:(0,O.jsx)(cd.r,{disabled:!!m,variant:"primary",onClick:g,...(0,ef.f)("new-workflow-dialog-create-button"),children:rA.duplicateButton})})]})};try{fR.displayName||(fR.displayName="CreateNewWorkflowDialog")}catch{}let fP=()=>{let[e,t]=(0,H.useState)(!1),{activeWorkflow:r}=uO(),{shouldDisableArchiveForActiveWorkflow:a,setArchiveStatus:n}=uo(),[i,l]=(0,H.useState)(!1);(0,H.useEffect)(()=>(n(),()=>{n.cancel()}),[n]),(0,H.useEffect)(()=>{t(!1),l(!1)},[r]);let s=(0,H.useCallback)(()=>{t(!0)},[t]),{projectOwner:o,isOrganization:d}=i5(),u=o?.name?.toLowerCase();return(0,O.jsx)(ue.X,{containerWidth:"full",columnGap:"none",padding:"none",sx:{height:"100%","& > *":{minHeight:"100%"}},children:r?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ue.X.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle",height:[null,null,"100%"]},children:(0,O.jsx)(fk,{activeWorkflow:r})}),(0,O.jsxs)(ue.X.Content,{width:"full",padding:"none",children:[a?(0,O.jsx)(fD,{}):null,e?(0,O.jsx)(cl,{isOrganization:d,owner:u}):(0,O.jsx)(fx,{startInEditMode:i,workflow:r,onNoSuggestedRepositories:s},r.id)]}),(0,O.jsx)(fR,{setStartInEditMode:l})]}):(0,O.jsx)("div",{children:"No workflows"})})},fD=()=>{let{projectNumber:e}=d5(),t=ur(),r=e?eN.generatePath(t):"";return(0,O.jsx)(ut.Z,{variant:"danger",sx:{mb:3},...(0,ef.f)("archive-full-warning"),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,size:14,sx:{color:"danger.fg"}}),(0,O.jsxs)(eB.Z,{sx:{ml:"8px"},children:["This workflow is disabled because the Archive is full. Remove items from"," ",(0,O.jsx)(lz,{to:r,children:"the Archive"})," to enable this workflow."]})]})})};try{fP.displayName||(fP.displayName="AutomationView")}catch{}try{fD.displayName||(fD.displayName="FullArchiveWarning")}catch{}function fE(){return dX(),(0,O.jsx)(d7,{children:(0,O.jsx)(dY,{...(0,ef.f)("automation-page"),children:(0,O.jsx)(fP,{})})})}try{fE.displayName||(fE.displayName="AutomationPage")}catch{}let fA=()=>{window.location.reload()},fM=()=>(0,O.jsx)(c$,{as:"main",headingAs:"h1",heading:"This project failed to load",content:"Sorry about that. Please try refreshing and contact us if the problem persists.",...(0,ef.f)("project-error-fallback"),children:(0,O.jsx)(cd.r,{variant:"primary",onClick:fA,sx:{mt:2,mx:"auto"},children:"Reload"})});try{fM.displayName||(fM.displayName="ProjectErrorFallback")}catch{}var fL=r(47658),fF=r(95963),fZ=r(17167),fO=r(33421),fV=r(32458),fB=r(20171),f$=r(16203);let fz={FilterName:"tracked-by"},fW={Table:"table_layout",Board:"board_layout",List:"list_layout",Roadmap:"roadmap_layout"},fG=()=>({hideItemsCount:!1,sum:[]}),fU=["id","number","createdAt","updatedAt","priority"],fH="none",fq={Month:"month",Quarter:"quarter",Year:"year"},fK="sliceValue",fQ={Table:"table",Board:"board",List:"list",Roadmap:"roadmap"},fX={[fW.Board]:fQ.Board,[fW.Table]:fQ.Table,[fW.List]:fQ.List,[fW.Roadmap]:fQ.Roadmap},fY={[fQ.Board]:fW.Board,[fQ.Table]:fW.Table,[fQ.List]:fW.List,[fQ.Roadmap]:fW.Roadmap},fJ={[fW.Board]:eF.ProjectIcon,[fW.Table]:eF.TableIcon,[fW.List]:eF.ProjectIcon,[fW.Roadmap]:eF.ProjectRoadmapIcon};let EnumValueError=class EnumValueError extends Error{constructor(e,t,r){super(rI.invalidFieldValues({name:e,value:`${t}`,fields:re(Object.keys(r))})),Object.setPrototypeOf(this,new.target.prototype),this.name="EnumValueError"}};function f0(e){let t=fX[e];if(!t)throw new EnumValueError("ViewTypeParam",e,fW);return t}function f1(e){let t=fY[e];if(!t)throw new EnumValueError("ViewType",e,fQ);return t}function f2(){f5.cancel()}let f5=ui(async e=>{let t=aa("memex-refresh-api-data"),{visibleFields:r}=e,a=new URL(t.url,window.location.origin);r.length>0&&a.searchParams.set("visibleFields",JSON.stringify(r));let{data:n,ok:i}=await ad(a);if(!i)throw new api_error_ApiError("Unable to refresh project data");return n},1250);async function f3(e){let t=aa("memex-refresh-api-data"),{visibleFields:r}=e,a=new URL(t.url,window.location.origin);r.length>0&&a.searchParams.set("visibleFields",JSON.stringify(r));let{data:n,ok:i}=await ad(a);if(!i)throw new api_error_ApiError("Unable to refresh project data");return n}let f4=new class MostRecentUpdate{constructor(){this.updatedAt=0,this.set=e=>{e>this.updatedAt&&(this.updatedAt=e)},this.get=()=>this.updatedAt,this._reset=()=>{this.updatedAt=0}}},f8=new class PendingUpdates{constructor(){this.lastIncremented=0,this.value=0,this.increment=()=>{this.lastIncremented=Date.now(),this.value++},this.decrement=()=>{this.value=Math.max(0,this.value-1),0===this.value&&(this.lastIncremented=0)},this.hasPendingUpdates=()=>(this.value>0&&this.lastIncremented<=Date.now()-6e4&&(this.value=0,this.lastIncremented=0),this.value>0),this._reset=()=>{this.lastIncremented=0,this.value=0}}};async function f6(e){let t=aa("memex-item-update-api-data");f8.increment();try{let{data:r}=await ac(t.url,{method:"PUT",body:e});return f4.set(new Date(r.memexProjectItem.updatedAt||0).getTime()),f8.decrement(),r}catch(e){throw f8.decrement(),e}}let f7=()=>{let{loadedFieldIdsRef:e}=cE();return{findLoadedFieldIds:(0,H.useCallback)(()=>[...e.current],[e])}},f9=()=>{let{memex_table_without_limits:e}=n9();return e?ht():he()},he=()=>({handleRefresh:fV.Z,handleCancelFetchData:fV.Z}),ht=()=>{let{invalidateAllQueries:e,queryKeysForGroups:t,queryKeysForItems:r}=dR(),a=(0,W.NL)(),n=(0,H.useCallback)(()=>{for(let e of t)e[3]!==sm&&a.cancelQueries({queryKey:e});for(let e of r)e[3]!==sm&&a.cancelQueries({queryKey:e})},[t,r,a]);return{handleRefresh:(0,H.useCallback)(async t=>{if((t||1/0)>=Math.floor(f4.get()/1e3)&&!f8.hasPendingUpdates())return n(),e()},[e,n]),handleCancelFetchData:n}},hr=()=>{let{setItemsStateFromModels:e}=dA();return{setColumnValue:(0,H.useCallback)((t,r,a=!1)=>{let{contentType:n}=t,{memexProjectColumnId:i}=r;(n!==eL.DraftIssue||lK(i)||a)&&(f2(),t.setColumnValueForItemColumnType(r),e())},[e])}},ha=()=>{let{setColumnValue:e}=hr(),{setItemData:t}=dA(),{findLoadedFieldIds:r}=f7(),a=r(),{handleCancelFetchData:n}=f9();return{updateColumnValueAndPriority:(0,H.useCallback)(async(r,i)=>{if(r.contentType===eL.RedactedItem)return;let l=[],s=[];if(i.columnValues?.length)for(let t of i.columnValues){let a=d4(t),n=d4(lH(t,r));n&&l.push(n);let i=d8(t);i&&s.push(i),a&&e(r,a)}let o=i.previousMemexProjectItemId,d=lY(r.contentType,s,o);if(d)try{f2(),n();let{memexProjectItem:e}=await f6({memexProjectItemId:r.id,fieldIds:a,...d});t(e)}catch(t){for(let t of l)e(r,t);throw t}},[a,e,t,n]),updateMultipleSequentially:(0,H.useCallback)(async(r,n,i)=>{if(r.contentType===eL.RedactedItem)return;let l=n.map(d4),s=n.map(d8),o=n.map(e=>d4(lH(e,r)));return r.whileSkippingLiveUpdates(async()=>{let n;for(let t of l)t&&e(r,t);for(let e of s){if(!e)continue;let t=e?[e]:void 0,l=lY(r.contentType,t,i);if(l)try{f2(),n=await f6({memexProjectItemId:r.id,fieldIds:a,...l})}catch(e){}}if(n){t(n.memexProjectItem);return}for(let t of o)e(r,t)})},[a,e,t])}},hn=()=>{let{allColumnsRef:e}=cE();return{findColumnByName:(0,H.useCallback)(t=>e.current.find(e=>e.name.toLowerCase()===t.toLowerCase()),[e])}},hi=()=>{let e=(0,W.NL)();return{findMemexItem:(0,H.useCallback)(t=>sU(e,t),[e]),findMemexItemIndex:(0,H.useCallback)(t=>sH(e,t),[e])}};async function hl({issueId:e}){let t=new URL(aa("memex-tracked-by-api-data").url,window.location.origin);t.searchParams.set("issueId",`${e}`);let{data:r}=await ad(t);return r}let hs=(0,H.createContext)(null),ho=(0,H.createContext)(null),hd=(0,H.memo)(function({children:e}){let{items:t}=dP(),{findMemexItem:r}=hi(),[a,n]=(0,H.useState)(new Map),i=(0,H.useRef)(a),l=(0,H.useRef)(new Map),s=(0,H.useCallback)(async e=>{if(i.current.has(e))return i.current.get(e);i.current.set(e,void 0);let t=await hl({issueId:e}).catch(()=>null);if(!t){n(new Map(a.set(e,void 0)));return}return n(r=>new Map(r.set(e,t))),i.current=new Map(i.current.set(e,t)),a.get(e)},[a]),o=(0,H.useCallback)(e=>{let t=e.reduce((e,t)=>{let r=a.get(t);return r?(i.current.delete(t),e.set(t,r)):e},new Map);return n(new Map(i.current)),()=>{for(let e of t.keys())i.current.set(e,t.get(e));n(new Map(i.current))}},[a]),d=(0,H.useCallback)(e=>{let t=new Map;for(let[r]of i.current){let n=a.get(r);if(!n)continue;let l=n.items.filter(t=>0>e.indexOf(t.itemId));l.length!==n.items.length&&t.set(r,n),0===l.length?i.current.delete(r):i.current.set(r,{...n,items:l,count:l.length})}return n(new Map(i.current)),()=>{for(let e of t.keys())i.current.set(e,t.get(e));n(new Map(i.current))}},[a]),u=(0,H.useCallback)((e,t)=>{l.current.set(e,t)},[]),c=(0,H.useCallback)(()=>l.current,[]),m=(0,e5.Z)(t),p=(0,H.useMemo)(()=>t.some(e=>e.contentType===eL.Issue&&e.columns[eM.TrackedBy]),[t]);(0,H.useEffect)(()=>{l.current=m.current.reduce((e,t)=>{let a=t.columns[eM.TrackedBy];if(t.contentType!==eL.Issue||!a)return e;let n=r(t.id)?.content.id;if(!n)return e;for(let t of a)e.get(t.key.itemId)?.includes(n)||e.set(t.key.itemId,[...e.get(t.key.itemId)||[],n]);return e},new Map)},[r,p,m]);let f=(0,H.useMemo)(()=>({getChildrenTrackedByParent:s,setChildTrackedByParent:u,parentIssuesById:a,parentIssuesByIdRef:i,removeParentIssues:o,removeChildIssues:d,getAllProjectRelationships:c}),[c,s,a,d,o,u]),h=(0,H.useMemo)(()=>({parentIssuesByIdRef:i,removeParentIssues:o,setChildTrackedByParent:u,getAllProjectRelationships:c}),[c,o,u]);return(0,O.jsx)(hs.Provider,{value:f,children:(0,O.jsx)(ho.Provider,{value:h,children:e})})});try{hs.displayName||(hs.displayName="TrackedByItemsContext")}catch{}try{ho.displayName||(ho.displayName="TrackedByItemsStableContext")}catch{}try{hd.displayName||(hd.displayName="TrackedByItemsStateProvider")}catch{}let hu=()=>{let e=(0,H.useContext)(hs);if(!e)throw Error("useTrackedByItemsContext must be used within a TrackedByItemsContext.Provider.");return e},hc=()=>{let{parentIssuesByIdRef:e}=hu(),t=(0,H.useCallback)(t=>{let r=[],a=new Set(t);for(let[t,n]of e.current)n?.items.some(({itemId:e})=>a.has(e))&&r.push(t);return r},[e]);return{getChildrenIssuesForParent:(0,H.useCallback)(t=>e.current.get(t)?.items??[],[e]),getParentIssuesFromChildren:t,getParentCompletion:(0,H.useCallback)(t=>e.current.get(t)?.parentCompletion,[e]),getParent:(0,H.useCallback)(t=>e.current.get(t),[e])}},hm=()=>{let{getAllProjectRelationships:e,removeParentIssues:t,setChildTrackedByParent:r}=hu(),{getParent:a,getParentIssuesFromChildren:n}=hc(),{findMemexItem:i}=hi(),l=(0,H.useCallback)(r=>{let a=n(r);if(a.length)return t(a);for(let[t,n]of e())n.some(e=>r.includes(e))&&a.push(t);return t(a)},[e,n,t]),s=(0,H.useCallback)(e=>{l([e])},[l]),o=(0,H.useCallback)(e=>{let[t]=n([e]);if(!t)return;let i=a(t);r(t,i?.items.map(({itemId:e})=>e)||[]),s(e)},[a,n,s,r]);return{removeParentFromChildren:l,removeParentFromChild:s,setChildParentRelationship:o,getIssuesIdsToRemove:(0,H.useCallback)(e=>e.reduce((e,t)=>{let r=i(t);return r?[...e,r.content.id]:e},[]),[i])}};function hp(e,t){let r={},a=new Set(t);for(let t in e)a.has(t)||(r[t]=e[t]);return r}async function hf({memexProjectItemId:e}){let t=new URL(aa("memex-item-suggested-assignees-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:r}=await ad(t);return r}async function hh(e){return hb(e,"milestones")}async function hg(e){return hb(e,"labels")}async function hy(e){return hb(e,"assignees")}async function hx(e){return hb(e,"issue_types")}async function hb(e,t){let r=new URL(aa("memex-sidepanel-item-suggestions-api-data").url,window.location.origin);switch(e.kind){case lC.ISSUE:r.searchParams.set("kind",e.kind),r.searchParams.set("item_id",`${e.itemId}`),r.searchParams.set("repository_id",`${e.repositoryId}`),r.searchParams.set("suggestions_type",t);break;case lC.PROJECT_DRAFT_ISSUE:r.searchParams.set("kind",e.kind),r.searchParams.set("project_item_id",`${e.projectItemId}`),r.searchParams.set("suggestions_type",t);break;default:ij(e)}let{data:a}=await ad(r);return a}let hv=(0,H.createContext)(null),hw=(0,H.createContext)(null),hj=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)({}),[a,n]=(0,H.useState)({}),[i,l]=(0,H.useState)({}),[s,o]=(0,H.useState)({}),d=(0,H.useCallback)(e=>a[e],[a]),u=(0,H.useCallback)(e=>t[e],[t]),c=(0,H.useCallback)(e=>i[e],[i]),m=(0,H.useCallback)(e=>s[e],[s]),p=(0,H.useCallback)((e,t)=>{n(r=>({...r,[e]:t}))},[n]),f=(0,H.useCallback)((e,t)=>{r(r=>({...r,[e]:t}))},[r]),h=(0,H.useCallback)((e,t)=>{l(r=>({...r,[e]:t}))},[l]),g=(0,H.useCallback)((e,t)=>{o(r=>({...r,[e]:t}))},[o]),y=(0,H.useCallback)(e=>{n(t=>hp(t,e)),r(t=>hp(t,e)),l(t=>hp(t,e)),o(t=>hp(t,e))},[]),x=(0,H.useMemo)(()=>({getSuggestedAssigneesForItem:d,getSuggestedLabelsForItem:u,getSuggestedMilestonesForItem:c,getSuggestedIssueTypesForItem:m,setSuggestedAssigneesForItem:p,setSuggestedLabelsForItem:f,setSuggestedMilestonesForItem:h,setSuggestedIssueTypesForItem:g,removeSuggestions:y}),[d,u,c,m,p,f,h,g,y]),b=(0,H.useMemo)(()=>({setSuggestedAssigneesForItem:p,setSuggestedLabelsForItem:f,setSuggestedMilestonesForItem:h,setSuggestedIssueTypesForItem:g,removeSuggestions:y}),[p,f,h,g,y]);return(0,O.jsx)(hv.Provider,{value:x,children:(0,O.jsx)(hw.Provider,{value:b,children:e})})});async function hC(e){let t,r;try{t=await e()}catch(e){e instanceof Error&&(r=Error(e.message),e instanceof api_error_ApiError&&e.code&&(r.name=e.code))}return{response:t,error:r}}try{hv.displayName||(hv.displayName="SuggestionsContext")}catch{}try{hw.displayName||(hw.displayName="SuggestionsStableContext")}catch{}try{hj.displayName||(hj.displayName="SuggestionsStateProvider")}catch{}let hI=()=>{let e=(0,H.useContext)(hw);if(!e)throw Error("useSuggestionsStableContext must be used within a SuggestionsStableContext.Provider.");return e},hS=()=>{let{findMemexItem:e}=hi(),{setColumnValue:t}=hr(),{setSuggestedAssigneesForItem:r}=hI();return{fetchSuggestedAssignees:(0,H.useCallback)(async a=>{r(a.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await hC(()=>{if(a.memexItemId?.())return hf({memexProjectItemId:a.memexItemId()});switch(a.contentType){case eL.DraftIssue:return hy({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:a.id});case eL.Issue:return hy({kind:lC.ISSUE,itemId:a.itemId(),repositoryId:a.ownerId()});default:throw Error(`Unsupported item type: ${a.contentType}`)}}),l=e(a.id);l&&!i&&t(l,{memexProjectColumnId:eM.Assignees,value:n?.suggestions?.filter(e=>e.selected).sort((e,t)=>e.login.localeCompare(t.login))||null});let s=n?.suggestions??i;return r(a.getSuggestionsCacheKey(),s),s},[r,t,e])}};async function hk({memexProjectItemId:e}){let t=new URL(aa("memex-item-suggested-labels-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:r}=await ad(t);return r}let hT=()=>{let e=(0,H.useContext)(hv);if(!e)throw Error("useSuggestionsContext must be used within a SuggestionsContext.Provider.");return e},hN=()=>{let{findMemexItem:e}=hi(),{setColumnValue:t}=hr(),{getSuggestedLabelsForItem:r,setSuggestedLabelsForItem:a}=hT();return{fetchSuggestedLabels:(0,H.useCallback)(async n=>{let i=n.getSuggestionsCacheKey(),l=r(i);if(!(l instanceof Error)&&l?.length)return l;let{response:s,error:o}=await hC(()=>{if(n.memexItemId?.())return hk({memexProjectItemId:n.memexItemId()});switch(n.contentType){case eL.DraftIssue:return hg({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:n.id});case eL.Issue:return hg({kind:lC.ISSUE,itemId:n.itemId(),repositoryId:n.ownerId()});default:throw Error(`Unsupported item type: ${n.contentType}`)}}),d=e(n.id);d&&!o&&t(d,{memexProjectColumnId:eM.Labels,value:s?.suggestions.filter(e=>e.selected).sort((e,t)=>e.name.localeCompare(t.name))||null});let u=s?.suggestions??o;return a(i,u),u},[r,a,e,t])}};async function h_({memexProjectItemId:e}){let t=new URL(aa("memex-item-suggested-milestones-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:r}=await ad(t);return r}let hR=()=>{let{findMemexItem:e}=hi(),{setColumnValue:t}=hr(),{setSuggestedMilestonesForItem:r}=hI();return{fetchSuggestedMilestones:(0,H.useCallback)(async a=>{r(a.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await hC(()=>{if(a.memexItemId?.())return h_({memexProjectItemId:a.memexItemId()});switch(a.contentType){case eL.DraftIssue:return hh({kind:lC.PROJECT_DRAFT_ISSUE,projectItemId:a.id});case eL.Issue:return hh({kind:lC.ISSUE,itemId:a.itemId(),repositoryId:a.ownerId()});default:throw Error(`Unsupported item type: ${a.contentType}`)}}),l=e(a.id);l&&!i&&t(l,{memexProjectColumnId:eM.Milestone,value:n?.suggestions.find(e=>e.selected)});let s=n?.suggestions??i;return r(a.getSuggestionsCacheKey(),s),s},[r,e,t])}},hP=()=>{let{fetchSuggestedAssignees:e}=hS(),{fetchSuggestedLabels:t}=hN(),{fetchSuggestedMilestones:r}=hR();return(0,H.useCallback)(async(a,n,i)=>{switch(n){case eM.Assignees:{let t=await e(a),r=await hD(t,i);if(!r)return;return{dataType:eA.Assignees,value:r}}case eM.Labels:{let e=await t(a),r=await hE(e,i);if(!r)return;return{dataType:eA.Labels,value:r}}case eM.Milestone:{let e=await r(a),t=await hA(e,i);if(!t)return;return{dataType:eA.Milestone,value:t}}}},[e,t,r])},hD=async(e,t)=>{if(e instanceof Error)throw e;return e?e.filter(e=>t&&of([t],e.login)||e.selected).map(e=>hp(e,["selected"])):null},hE=async(e,t)=>{if(e instanceof Error)throw e;return e?e.filter(e=>t&&of([t],e.name)||e.selected).map(e=>hp(e,["selected"])):null},hA=async(e,t)=>{if(e instanceof Error)throw e;if(!e)return null;let r=e.find(e=>t&&of([t],e.title));return r?hp(r,["selected"]):null},hM=(0,H.createContext)(null);function hL(){let e=(0,H.useContext)(hM);if(!e)throw Error("useViewType must be used inside a ViewTypeProvider");return e}let hF=[],hZ=({onAddItem:e,onAddDraftItem:t,onSave:r,updateActions:a=hF,previousItemId:n,keepSystemFields:i=!1,groupId:l})=>{let{fieldFilters:s,query:o,matchesSearchQuery:d,transientQuery:u}=dv(),{items:c}=dP(),{addToast:m}=e9(),{findColumnByName:p}=hn(),{updateMultipleSequentially:f}=ha(),h=hP(),{isKeywordQualifier:g}=od(),{postStats:y}=os(),{openProjectItemInPane:x,supportedItemTypes:b}=dq(),{setChildParentRelationship:v}=hm(),{tasklist_block:w,memex_table_without_limits:j}=n9(),{hasNextPage:C,hasNextPageForGroupedItems:I}=j?dR():{hasNextPage:!1,hasNextPageForGroupedItems:(0,H.useCallback)(()=>!1,[])},{viewType:S}=j?hL():{viewType:fQ.Table},k=(0,H.useCallback)(()=>{if(!s.length&&!u.fieldFilters.length)return;let{columnValuesForCreate:e,columnValuesFromSuggestions:t}=[...s,...u.fieldFilters].reduce((e,[t,r])=>{if(!r.length||o$(t)||g(t)||t===fz.FilterName&&!w)return e;let n=[...r],l=p(oK(t));if(!l||i&&!l.userDefined||a.find(e=>"memexProjectColumnId"in e?e.memexProjectColumnId===l.id:e.dataType===l.dataType))return e;if(n.length>1&&(n=[]),hO(l.id))return{...e,columnValuesFromSuggestions:[...e.columnValuesFromSuggestions,{memexProjectColumnId:l.id,filterValue:n[0]}]};let s=o1(c,l,n);return s?{...e,columnValuesForCreate:[...e.columnValuesForCreate,s]}:e},{columnValuesForCreate:[],columnValuesFromSuggestions:[]});return e.push(...a),{columnValuesForCreate:e,columnValuesFromSuggestions:t}},[s,u.fieldFilters,a,g,w,p,i,c]),{perform:T}=d1({request:(0,H.useCallback)(async i=>{let c=null,p=[],g=[],j=[];if(s.length||u.fieldFilters.length){let e=k();if(e){for(let t of e.columnValuesForCreate){let e=d4(t);e&&g.push(e);let r=d8(t);r&&p.push(r)}j=e.columnValuesFromSuggestions}}else for(let e of a){let t=d8(e),r=d4(e);t&&p.push(t),r&&g.push(r)}if("object"==typeof i){let{repositoryId:t,...r}=i;c=await e(r,t,p,g,n,l)}else c=await t(i,p,g,n,l);if(!c)return;r?.(),w&&v(c.content.id);let T=!1;if(j){let e=(await Promise.all(j.map(async({memexProjectColumnId:e,filterValue:t})=>{if(hV(c,e))try{return await h(c,e,t)}catch(e){T=!0}}))).filter(e=>!!e);await f(c,e)}if((!d(c)||T)&&(m({type:e$.warning,message:rI.newItemFilterWarning,action:b.has(c.contentType)?{handleClick:()=>c&&x(c),text:rI.viewItem}:void 0}),y({name:"item_added_does_not_match_filter",context:JSON.stringify({model:c,filter:o})})),l?I({groupId:l}):C){let e="";S===fQ.Table?e=rI.newItemAddedToBottomOfTable:S===fQ.Roadmap?e=rI.newItemAddedToBottomOfRoadmap:S===fQ.Board&&(e=rI.newItemAddedToBottomOfColumn),m({type:e$.warning,message:e,action:b.has(c.contentType)?{handleClick:()=>c&&x(c),text:rI.viewItem}:void 0})}},[s.length,u.fieldFilters.length,r,w,d,l,I,C,k,a,e,n,t,v,f,h,m,b,y,o,x,S])});return T},hO=e=>e===eM.Assignees||e===eM.Labels||e===eM.Milestone||e===eM.TrackedBy,hV=(e,t)=>!!e&&e.contentType!==eL.RedactedItem&&(e.contentType!==eL.DraftIssue||lK(t));function hB(e){let t=e.split("/");if(2===t.length)return{owner:t[0],name:t[1]}}function h$(e){let t=eb.matchFullPathOrChildPaths(window.location.pathname);return["projects-v2","session-store-v1",t?.params.ownerType,t?.params.ownerIdentifier,t?.params.projectNumber,e].join("/")}let hz=()=>{let{addLoadedFieldId:e}=cE();return{updateLoadedColumns:(0,H.useCallback)(t=>{e(t)},[e])}};var hW=r(25434);async function hG(e){let t=aa("memex-item-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}let hU=(0,hW.c)({mutationFn:hG}),hH=()=>{let{findMemexItemIndex:e}=hi(),{setColumnValue:t}=hr(),{addToast:r}=e9(),a=(0,W.NL)(),n=hU(),{memex_table_without_limits:i}=n9(),{updateLoadedColumns:l}=hz(),s=(0,H.useCallback)(t=>void 0===t?void 0:""===t?0:e(t)+1,[e]);return{createMemexItem:(0,H.useCallback)(async(e,o)=>{let d=s(e.previousMemexProjectItemId),u=e.localColumnValues;delete e.localColumnValues,f2();let c=await n.mutateAsync({memexProjectItem:e}),m=c.memexProjectItem,p=c.memexProjectColumn?.[0]?.partialFailures;p&&r({message:p.message,type:e$.warning,keepAlive:!0});let f=i6(m);for(let e of m.memexProjectColumnValues)l(e.memexProjectColumnId);if(f&&u)for(let e of u)t(f,e);return i&&null!=o?function(e,t,r){let a=sA(e),n=sN(e,a);if(!l1(n))return;let i=sd(r),l=n.groupedItems[i];if(!l)return;let s=l[l.length-1],o=sV(e,a,r,s);if(!o)return;let d={totalCount:sC(e,a,1),groups:{[i]:sI(e,a,i,1)}};if(o.pageInfo.hasNextPage){sj(e,a,d);return}let u=[l5,a,r,s];e.setQueryData(u,r=>{if(!sF(r))return sE(r);let n=[...r.nodes,t];return sj(e,a,d),{...r,nodes:n}})}(a,f,{groupId:o}):sq(a,f,d),f},[s,n,i,r,l,t,a]),createMemexItemOptimisitcally:(0,H.useCallback)((e,r,n)=>{let i=e.localColumnValues;delete e.localColumnValues;let{contentType:s,content:o}=e,d=null;if(s===eL.Issue&&(d={contentType:s,content:{...o,url:n||""},contentRepositoryId:o.repositoryId,memexProjectColumnValues:r,id:o.id,priority:null,updatedAt:Date.now().toString()}),d){let e=i6(d);for(let e of d.memexProjectColumnValues)l(e.memexProjectColumnId);for(let r=0;e&&i&&r<i.length;++r){let a=i[r];a&&t(e,a)}sq(a,e)}},[a,l,t])}},hq=(0,H.createContext)(null),hK=()=>(0,H.useContext)(hq),hQ=h$("issue-creator"),hX=(e="",t="")=>({owner:t,name:e,includeTemplates:!0}),hY=e=>void 0!==e.name&&void 0!==e.owner&&""!==e.name&&""!==e.owner,hJ=({onClose:e,prefill:t,newItemAttributes:r,returnFocusRef:a})=>{let{loggedInUser:n}=i5(),{addToast:i}=e9(),{projectOwner:l,themePreferences:s}=i5(),o=s.markdown_fixed_width_font,d=n?.paste_url_link_as_plain_text??!1,u=n?.use_single_key_shortcut??!1,{createMemexItem:c}=hH(),m=hZ({updateActions:r&&r.updateColumnActions||void 0,previousItemId:r?.previousItemId,onAddDraftItem:(0,H.useCallback)(()=>Promise.resolve(null),[]),onAddItem:(0,H.useCallback)((e,t,r,a,n,i)=>c({contentType:e.type,content:{id:e.id,repositoryId:t},memexProjectColumnValues:r,localColumnValues:a,previousMemexProjectItemId:n},i),[c])}),p={onCreateSuccess:(0,H.useCallback)(async({issue:t,createMore:r})=>{let{databaseId:a,repository:n}=t;if(r||e(),!a||!n.databaseId){i({message:"Could not add the new issue to the project: ID is missing",type:"error"});return}await m({type:"Issue",id:a,repositoryId:n.databaseId})},[e,m,i]),onCancel:e,navigate:fV.Z,isCreateDialogOpen:!0,setIsCreateDialogOpen:fV.Z},f={useMonospaceFont:o,pasteUrlsAsPlainText:d,singleKeyShortcutsEnabled:u,scopedOrganization:l?.login,scopedProjectTitle:t?.enforcedSelectedProjectTitle,scopedIssueType:t?.issueTypeName,scopedMilestone:t?.milestoneTitle,showFullScreenButton:!1,returnFocusRef:a,storageKeyPrefix:hQ,issueCreateArguments:{repository:t?.repo?.owner&&t?.repo?.name?{owner:t.repo.owner,name:t.repo.name}:void 0,initialValues:t?.issueTitle?{title:t.issueTitle}:void 0}};return(0,O.jsx)(fL.n,{appName:"memex",category:"Memex Project",metadata:{},children:(0,O.jsx)(fF.Q,{...p,optionConfig:f})})},h0=(0,H.memo)(function({children:e}){let{hasWritePermissions:t}=i4(),{title:r}=r8(),a=(0,uN.useRelayEnvironment)(),[n,i]=(0,H.useState)(),{suggestRepositories:l}=c7(),s=(0,H.useCallback)(async()=>{let e=(await l()).at(0)?.nameWithOwner;if(e)return hB(e)},[l]),o=(0,H.useCallback)(async({repo:e,issueTitle:t},a,n,l)=>{e||(e=await s()),(0,f$.X)((0,fZ.m)(hQ));let o=a?.updateColumnActions?.find(({dataType:e})=>e===eA.IssueType)?.value,d=a?.updateColumnActions?.find(({dataType:e})=>e===eA.Milestone)?.value;i({visible:!0,prefill:{issueTitle:t,repo:e,enforcedSelectedProjectTitle:r,issueTypeName:o?.name,milestoneTitle:d?.title},newItemAttributes:a,onClose:()=>{l?.(),i(void 0)},returnFocusRef:n})},[s,r]),d=(0,H.useCallback)(async e=>{if(e||(e=await s()),(0,fO.S0)(a,fZ.VALUES.repositoriesPreloadCount,!0),e&&hY(e)){let t=hX(e.name,e.owner);(0,fO.nE)(a,t.owner,t.name,t.includeTemplates)}},[a,s]);ep(()=>t?["i","Create issue","create_issue",()=>o({})]:null,[o,t]);let u=(0,H.useMemo)(()=>({start:o,prefetch:d}),[d,o]),c=n7();return t?(0,O.jsxs)(fB.O,{features:c,children:[(0,O.jsx)(hq.Provider,{value:u,children:e}),n&&(0,O.jsx)(hJ,{...n})]}):(0,O.jsx)(O.Fragment,{children:e})});try{hq.displayName||(hq.displayName="IssueCreatorContext")}catch{}try{hJ.displayName||(hJ.displayName="IssueCreator")}catch{}try{h0.displayName||(h0.displayName="IssueCreatorProvider")}catch{}function h1(e){return!!h5(e)&&"string"==typeof e.type&&"payload"in e}function h2(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function h5(e){return h2(e)&&Object.prototype.hasOwnProperty.call(e,"type")}function h3(e,t,r,a){let n=a||function(e){l||(l=eP("memex-alive"));let t=`${e}Channel`;return l?.[t]}(t),i=(0,e5.Z)(r),[s,o]=(0,H.useState)({});return(0,H.useEffect)(()=>{let r=e.current;if(!r||!n)return;let a=[`socket:${t}`,e=>{e instanceof CustomEvent&&e.detail&&"object"==typeof e.detail&&"data"in e.detail&&i.current(e.detail)}];return r.addEventListener(...a),()=>{r.removeEventListener(...a)}},[n,t,i,e]),(0,H.useEffect)(()=>{o({className:"js-socket-channel","data-channel":n})},[n]),[s]}function h4(e){return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}function h8(){return!document.hidden}function h6(){return!0}let h7=()=>(0,H.useSyncExternalStore)(h4,h8,h6),h9=(0,H.createContext)(null);function ge(){let e=(0,H.useContext)(h9);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let gt=()=>{let{allColumnsRef:e}=cE();return{findColumn:(0,H.useCallback)(t=>e.current.find(e=>`${e.id}`==`${t}`),[e]),findColumnIndex:(0,H.useCallback)(t=>e.current.findIndex(e=>`${e.id}`==`${t}`),[e])}},gr=()=>{let{setAllColumns:e,allColumnsRef:t}=cE(),{findColumnIndex:r}=gt();return{updateColumns:(0,H.useCallback)(t=>{e(dm(t))},[e]),updateColumnEntry:(0,H.useCallback)(a=>{let n=r(a.id);if(-1===n)return;let i=[...t.current];i[n]=a,e(i)},[t,r,e])}},ga=(0,H.createContext)(null),gn=e=>{let{createdWithTemplateMemex:t}=i5(),[r,a]=(0,H.useState)(t),n=(0,H.useMemo)(()=>({createdWithTemplateMemex:r,setCreatedWithTemplateMemex:a}),[r,a]);return(0,O.jsx)(ga.Provider,{value:n,children:e.children})},gi=()=>{let e=(0,H.useContext)(ga);if(!e)throw Error("useCreatedWithTemplateMemex can only be accessed from a CreatedWithTemplateMemexProvider component");return e};try{ga.displayName||(ga.displayName="CreatedWithTemplateMemexContext")}catch{}let gl=()=>{let e=(0,H.useContext)(r5);if(!e)throw Error("useSetProject must be used within a SetProjectContext.Provider");return e},gs=()=>{let e=dH(),t=(0,W.NL)();return{updateMemexItems:(0,H.useCallback)(r=>{!function(e,t,r){if(sP())e.setQueryData(sv(e),e=>{let a=sJ(e),n=[],i=(a||[]).reduce((e,t)=>(e[t.id]=t,e),{});for(let e of t){let t=i[e.id];if(t){var l;if(!t.skippingLiveUpdates&&(t.id!==r||(l=t).contentType===eL.Issue&&e.contentType===eL.Issue&&(l.state!==e.state||l.getRawTitle()!==i6(e).getRawTitle()))){let r=lJ(t,e);t=r?i6(r):t}}else t=i6(e);n.push(t)}return sL(n)});else{let a=(t||[]).reduce((e,t)=>(e[t.id]=t,e),{}),n=e.setQueriesData(sZ,e=>{if(!sF(e))return sE(e);let t=[...e.nodes];for(let[n,i]of e.nodes.entries()){let e=a[i.id];if(i.skippingLiveUpdates||i.id===r)delete a[i.id];else if(e){let r=lJ(i,e);r&&(t.splice(n,1,i6(r)),delete a[e.id])}}return{...e,nodes:t}}),i=n[n.length-1]?.[0];i&&Object.keys(a).length>0&&e.setQueryData(i,e=>{if(!e)return sx([]);let t=[...e.nodes];if(Object.keys(a).length>0)for(let e of Object.values(a))t.push(i6(e));return{...e,nodes:t}})}}(t,r,e)},[t,e])}},go=(0,lj.r)({queryKey:["memex-service"],fetcher:async()=>({betaSignupBanner:"hidden",killSwitchEnabled:!1,killSwitchRecentlyDisabled:!1}),enabled:!1,initialData:()=>eP("memex-service")||{betaSignupBanner:"hidden",killSwitchEnabled:!1,killSwitchRecentlyDisabled:!1}});function gd(e,t){e.setQueryData(go.getKey(),t)}let gu=()=>{let{setAllWorkflows:e}=uO(),{setProject:t}=gl(),{updateMemexItems:r}=gs(),{findLoadedFieldIds:a}=f7(),{updateColumns:n}=gr(),{updateViewServerStates:i}=oi(),{updateChartConfigurations:l}=ge(),{setCreatedWithTemplateMemex:s}=gi(),{updateMemexService:o}=function(){let e=(0,W.NL)(),{addToast:t}=e9(),{memex_table_without_limits:r}=n9(),a=(0,H.useCallback)(a=>{let n=e.getQueryData(go.getKey());n&&a&&n.killSwitchEnabled!==a.killSwitchEnabled&&(a.killSwitchEnabled||r?gd(e,a):gd(e,{...a,killSwitchRecentlyDisabled:!0}),t({message:a.killSwitchEnabled?rI.killSwitchEnabledToastMessage:rI.killSwitchDisabledToastMessage,type:a.killSwitchEnabled?"warning":"default"}))},[t,r,e]);return(0,H.useMemo)(()=>({updateMemexService:a}),[a])}(),{memex_table_without_limits:d}=n9(),{perform:u,status:c}=d1({request:(0,H.useCallback)(e=>(f2(),f5(e)),[]),showErrorToast:!1});return(0,H.useCallback)(async()=>{if(await u({visibleFields:[...a()]}),"succeeded"===c.current.status){let{memexProject:a,memexProjectItems:u,memexProjectAllColumns:m,memexViews:p,memexWorkflows:f,memexWorkflowConfigurations:h,memexCharts:g,createdWithTemplateMemex:y,memexService:x}=c.current.data;o(x),t(a),d||r(u),n(m),i(p),e(h,f),l(g),s(y)}},[a,d,u,c,e,t,l,n,r,o,i,s])};function gc(){let{setAllWorkflows:e}=uO(),{setProject:t}=gl(),{updateMemexItems:r}=gs(),{findLoadedFieldIds:a}=f7(),{updateColumns:n}=gr(),{updateViewServerStates:i}=oi(),{updateChartConfigurations:l}=ge(),{setCreatedWithTemplateMemex:s}=gi(),{perform:o,status:d}=d1({request:(0,H.useCallback)(e=>f3(e),[]),showErrorToast:!1});return(0,H.useCallback)(async()=>{if(await o({visibleFields:[...a()]}),"succeeded"===d.current.status){let{memexProject:a,memexProjectItems:o,memexProjectAllColumns:u,memexViews:c,memexWorkflows:m,memexWorkflowConfigurations:p,memexCharts:f,createdWithTemplateMemex:h}=d.current.data;t(a),r(o),n(u),i(c),e(p,m),l(f),s(h)}},[a,o,d,e,t,l,n,r,i,s])}async function gm(){let e=aa("memex-migration-get-api-data"),{data:t}=await ad(e.url);return t}let gp={pending:0,in_progress_project_details:3,in_progress_status_fields:6,in_progress_default_view:10,in_progress_permissions:30,in_progress_items:40,in_progress_workflows:90,completed:100,completion_acknowledged:100,error:25},gf=(0,H.createContext)(null),gh=(0,H.memo)(function({children:e}){let t=eP("memex-project-migration"),[r,a]=(0,H.useState)(t),[n,i]=(0,H.useState)(t?.status),l=(0,H.useMemo)(()=>({projectMigration:r,setProjectMigration:a,initialProjectMigrationStatus:n,setInitialProjectMigrationStatus:i}),[r,n]);return(0,O.jsx)(gf.Provider,{value:l,children:e})});try{gf.displayName||(gf.displayName="ProjectMigrationContext")}catch{}try{gh.displayName||(gh.displayName="ProjectMigrationStateProvider")}catch{}let gg=()=>{let e=(0,H.useContext)(gf);if(!e)throw Error("useProjectMigration must be used within a ProjectMigrationStateProvider");return e},gy={ERROR:"error",COMPLETED:"completed",COMPLETION_ACKNOWLEDGED:"completion_acknowledged"},gx=()=>{let[e,t]=(0,H.useState)(null),{projectMigration:r,setProjectMigration:a}=gg(),n=gu(),{items:i}=dP(),l=(0,H.useRef)(!1),s=(0,H.useCallback)((e,t=!0)=>(!l.current&&t&&(l.current=!0),e)?r?r.status===gy.ERROR?void 0:e.status===gy.ERROR?a(e):void(gp[r.status]<gp[e.status]&&a(e)):a(e):void 0,[r,a]),o=(0,H.useCallback)(async()=>{if(r&&!l.current&&r.status!==gy.COMPLETED&&r.status!==gy.COMPLETION_ACKNOWLEDGED)try{let e=await gm();s(e,!1)}catch{}},[r,s]),d=(0,H.useCallback)(()=>e?.status===gy.COMPLETED,[e?.status]),u=(0,H.useCallback)(async()=>{if(!r)return;let a=r.source_project,l=r.status;l!==gy.COMPLETED?t(r):a?.empty||l!==gy.COMPLETED?a?.empty&&e&&t({...e,status:gy.COMPLETED}):(i.length||e?.status===gy.COMPLETED||await n(),t(r))},[n,i.length,e,r]);return(0,H.useEffect)(()=>{u()}),{isMigrationComplete:d,processProjectMigrationState:s,processProjectMigrationOnPageVisibility:o,prevMigrationState:e,projectMigrationState:r}},gb=(0,H.memo)(function(){let{addToast:e}=e9(),t=e4(e),r=(0,H.useRef)(null),a=gu(),n=gc(),i=e4(a),{memex_table_without_limits:l}=n9(),o=(0,H.useCallback)(async e=>{await n(),t(2e3)(e)},[n,t]),d=l?f9().handleRefresh:fV.Z,u=h7(),c=cc(u),{processProjectMigrationState:m,processProjectMigrationOnPageVisibility:p,isMigrationComplete:f}=gx(),[h]=h3(r,"message",t=>{var r,a,n,l;if(h2(r=t.data)&&Object.prototype.hasOwnProperty.call(r,"project_migration")){m(t.data.project_migration),i(t.data.wait??0)();return}if(h2(a=t.data)&&"bulkUpdateSuccess"in a&&"actor"in a&&h2(a.actor)&&"id"in a.actor){let{loggedInUser:r}=i5(),{bulkUpdateSuccess:a,actor:n,bulkUpdateErrors:i}=t.data;n.id===r?.id&&e({type:a?e$.success:e$.error,message:a?rG.successMessage:rG.refreshPageMessage(i?.length||0)})}if(h1(t.data)){let{type:e}=t.data;s||(s={refreshEvents:new Set(eP("memex-refresh-events"))}),s.refreshEvents.has(e)&&i(t.data.wait??0)()}else h5(n=t.data)&&"memex_item_denormalized_to_elasticsearch"===n.type&&d(t.data.timestamp);if(h2(l=t.data)&&"bulkCopySuccess"in l&&"actor"in l&&h2(l.actor)&&"id"in l.actor){let{loggedInUser:e}=i5(),{bulkCopySuccess:r,actor:a}=t.data;a.id===e?.id&&o({type:r?e$.success:e$.error,message:r?rU.successMessage:rU.failureMessage})}});(0,H.useEffect)(()=>{u&&p(),u&&!c&&(d(),a())},[u,c,a,p,f,d]),(0,H.useEffect)(()=>()=>{f2()},[]);let g=u?h:void 0;return(0,O.jsx)("span",{...g,ref:r,hidden:!0,...(0,ef.f)("live-update-listener")})});try{gb.displayName||(gb.displayName="LiveUpdate")}catch{}let gv=e=>!!Array.isArray(e),gw=[],gj=e=>{let[t,r]=(0,H.useState)(gw),[a]=h3(e,"presence",e=>{gv(e.data)?r(e.data):r(gw)});return{presenceItems:t,attrs:a}},gC=()=>{let e=(0,H.useContext)(r2);if(!e)throw Error("useProjectState must be used within a ProjectStateContext.Provider");return e},gI=(0,Y.F4)(["from{opacity:0}to{opacity:1}"]),gS=(0,H.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"inline-flex",alignItems:"center",position:"relative",justifyContent:"flex-end",zIndex:"0",animationName:gI.getName(),overflow:"visible",verticalAlign:"text-bottom",...r};return(0,O.jsx)(eO.Z,{ref:t,sx:n,...a})});gS.displayName="MemexAvatarStackWrapper";let gk=(0,H.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",alignItems:"center",borderRadius:"100%",flexShrink:0,marginLeft:0,marginRight:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...r};return(0,O.jsx)(eO.Z,{ref:t,sx:n,...a})});gk.displayName="StyledAvatarBox";let gT=(0,H.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",alignItems:"center",transition:"opacity 0.5s ease-in-out",...r};return(0,O.jsx)(mo.O,{ref:t,sx:n,...a})});gT.displayName="StyledAvatar";let gN=(0,H.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={backgroundColor:"canvas.subtle",display:"flex",alignItems:"center",borderRadius:"20px",marginLeft:e=>`-${e.space[1]}`,animation:"fadeIn 0.5s ease-in-out",...r};return(0,O.jsx)(eO.Z,{ref:t,sx:n,...a})});gN.displayName="StyledCounter";let g_=({items:e,backgroundSx:t,size:r=24,maxVisible:a=5})=>{let n=e.length,{backgroundColor:i,boxShadow:l}=t,s=n-a;return(0,O.jsxs)(gS,{...(0,ef.f)("memex-avatar-stack"),children:[(0,O.jsx)(eO.Z,{sx:{display:"flex",mr:1},children:e.slice(0,a).map((e,t)=>(0,H.createElement)(gk,{...(0,ef.f)("memex-avatar-stack-item"),key:e.id,sx:{backgroundColor:i,boxShadow:l,zIndex:t}},(0,O.jsx)(gT,{...(0,ef.f)(`memex-avatar-state-${e.isIdle?"idle":"active"}`),sx:{opacity:e.isIdle?.3:1},size:r,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl})))}),n>a?(0,O.jsx)(eO.Z,{sx:{position:"relative",zIndex:a,display:"flex",alignItems:"center"},...(0,ef.f)("memex-avatar-stack-overflow"),children:(0,O.jsx)(gN,{sx:{boxShadow:l},children:(0,O.jsxs)(pm.Z,{sx:{height:r+1,width:r+1,fontSize:r<24?"9px":0,p:0,color:"fg.muted",lineHeight:0,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",overflow:"hidden"},children:["+",s>99?"\u221E":s]})})}):null]})};try{g_.displayName||(g_.displayName="MemexAvatarStack")}catch{}let gR=(0,H.createContext)(null),gP=()=>{let e=(0,H.useContext)(gR);if(null==e)throw Error("Cannot use usePresenceUsers outside of PresenceUsersProvider");return e},gD=[],gE=(0,H.memo)(function({children:e}){let t=(0,H.useRef)(null),{presenceItems:r,attrs:a}=gj(t),{isPublicProject:n}=gC(),i=(0,H.useMemo)(()=>{if(n)return gD;let{projectCreator:e,projectOwner:t}=i5(),a=(e||t)?.avatarUrl||"";return r.filter(e=>!e.isOwnUser).map(e=>{var t,r;return{...r={...e,avatarUrl:(t=e.userId,a.replace(/u\/[0-9]+/,`u/${t}`))},id:r.userId,hovercardUrl:`/hovercards?user_id=${r.userId}`}})},[r,n]);return(0,O.jsxs)(gR.Provider,{value:i,children:[(0,O.jsx)("span",{...(0,ef.f)("presence-avatars-listener"),...a,hidden:!0,ref:t}),e]})}),gA=()=>{let e=gP();return 0===e.length?null:(0,O.jsx)(eO.Z,{...(0,ef.f)("presence-avatars"),children:(0,O.jsx)(g_,{items:e,backgroundSx:{backgroundColor:"canvas.subtle",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.subtle} !important`}})})};try{gR.displayName||(gR.displayName="PresenceContext")}catch{}try{gE.displayName||(gE.displayName="PresenceUsersProvider")}catch{}try{gA.displayName||(gA.displayName="PresenceAvatars")}catch{}var gM=r(96604),gL=r(74092);async function gF(){let e=aa("memex-migration-acknowledge-completion-api-data");await ac(e.url,{method:"POST"})}async function gZ(){let e=aa("memex-migration-cancel-api-data"),{data:t}=await ac(e.url,{method:"DELETE"});return t}async function gO(){let e=aa("memex-migration-retry-api-data"),{data:t}=await ac(e.url,{method:"POST"});return{redirectUrl:t?.redirectUrl}}let gV=e=>"completion_acknowledged"===e.status||"completed"===e.status?"":rV.statuses[e.status],gB=({migration:e,closeOverlay:t})=>(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{justifyContent:"space-around"},children:e.source_project?.closed?(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{color:"success.fg"}}):(0,O.jsx)(eZ.Z,{icon:eF.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,O.jsx)(eO.Z,{sx:{ml:1},children:(0,O.jsx)("span",{...(0,ef.f)("migration-status"),children:e.source_project?.closed?(0,O.jsxs)(O.Fragment,{children:["\u2022 ",(0,O.jsx)(uB.Z,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:rV.yourClassicProject}),` ${rV.completedAndClosed1}`,(0,O.jsx)("br",{}),`\u{2022} ${rV.completedAndClosed2}`]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(uB.Z,{target:"_blank",rel:"noreferrer",href:e.source_project?.path,children:rV.yourClassicProject}),` ${rV.completedAndStillOpen}`]})})})]}),(0,O.jsx)(eO.Z,{sx:{mt:3,display:"flex"},children:(0,O.jsx)(cd.r,{variant:"primary",onClick:t,children:"Done"})})]}),g$=({migration:e,cancelMigration:t,tryAgain:r})=>(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{justifyContent:"space-around"},children:(0,O.jsx)(eZ.Z,{icon:eF.XIcon,sx:{color:"danger.fg"}})}),(0,O.jsx)(eO.Z,{...(0,ef.f)("migration-status"),sx:{ml:1},children:gV(e)})]}),(0,O.jsxs)(eO.Z,{sx:{mt:3,display:"flex",flexDirection:"row-reverse"},children:[(0,O.jsx)(cd.r,{variant:"primary",onClick:r,sx:{ml:2},children:"Try again"}),(0,O.jsx)(cd.r,{onClick:t,children:"Cancel"})]})]}),gz=({migration:e,closeOverlay:t,...r})=>"completed"===e.status?(0,O.jsx)(gB,{migration:e,closeOverlay:t}):"error"===e.status?(0,O.jsx)(g$,{migration:e,...r}):(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{justifyContent:"space-around",p:1},children:(0,O.jsx)(u$.Z,{size:"small"})}),(0,O.jsx)(eO.Z,{...(0,ef.f)("migration-status"),sx:{ml:1,mt:"3px"},children:gV(e)})]});try{gB.displayName||(gB.displayName="MigrationOverlayCompleted")}catch{}try{g$.displayName||(g$.displayName="MigrationOverlayError")}catch{}try{gz.displayName||(gz.displayName="MigrationOverlayDescription")}catch{}let gW=async()=>{let e=await gO();e.redirectUrl&&window.location.assign(e.redirectUrl)},gG=async()=>{let e=await gZ();e.redirectUrl&&window.location.assign(e.redirectUrl)},gU=()=>{let{projectMigration:e,initialProjectMigrationStatus:t,setInitialProjectMigrationStatus:r}=gg(),{prevMigrationState:a,isMigrationComplete:n}=gx(),{title:i}=r8();if(!e||!a||"completion_acknowledged"===t)return null;let l=async()=>{r("completion_acknowledged"),gF()},s=n()?gp[e.status]||0:gp[a.status??"pending"]||0,o=function(e,t){return"completed"===e.status?rV.migrationCompleteMessage:"error"===e.status?rV.somethingWentWrongMessage:rW.migratingTitle(t)}(a,i),d="error"===e.status?"danger.fg":"success.emphasis",u=a&&function(e){return"completed"===e.status||"error"===e.status}(a)?"200px":"125px";return(0,O.jsx)(gM.Z,{open:!0,caret:"bottom",sx:{position:"fixed",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,O.jsxs)(gM.Z.Content,{sx:{paddingTop:"25px",width:"480px",height:u,top:"20%","&::before":{content:"none !important"},"&::after":{content:"none !important"}},...(0,ef.f)("migration-popover"),children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:3,mb:2},children:o}),(0,O.jsx)(gL.k,{bg:d,progress:s,sx:{marginBottom:"15px"}}),(0,O.jsx)(gz,{migration:e,cancelMigration:gG,tryAgain:gW,closeOverlay:l})]})})};try{gU.displayName||(gU.displayName="ProjectMigrationOverlayView")}catch{}var gH=r(31511),gq=r(68777),gK=r(10791);let gQ=(e,t)=>{let r=(0,H.useRef)(!1);(0,H.useEffect)(()=>{r.current&&!e&&t?.current?.focus(),r.current=e},[e,t])},gX=(0,H.createContext)(void 0);function gY(){return(0,H.useContext)(gX)}let gJ=()=>{let e=gY();return e?e?.getBoundingClientRect().top:0},g0=()=>{let{clientHeight:e}=ma(document.body),t=gY(),{clientHeight:r}=ma(document.querySelector(".application-main")??t??null);return e&&r?e-r:void 0};var g1=r(81941);function g2(e){if(e){let t=e.style.scrollBehavior;e.style.scrollBehavior="auto",e.scrollTop=0,e.scrollLeft=0,e.style.scrollBehavior=t}}let g5=()=>{let{dirtyItems:e,setDirtyItems:t}=dq(),r=(0,H.useRef)(Symbol()).current,a=(0,H.useCallback)((e=!0)=>t(t=>{let a=new Set(t);return e?t.has(r)?t:a.add(r):a.delete(r)?a:t}),[r,t]);return[e.has(r),a]},g3={itemKey:{kind:lC.ISSUE,repositoryId:0,itemId:0},title:{raw:"",html:""},description:{body:"",bodyHtml:""},createdAt:"",updatedAt:"",user:{id:0,global_relay_id:"",login:"",name:"",avatarUrl:"",isSpammy:!1},state:{state:aj.Open},capabilities:[],liveUpdateChannel:"",url:"",issueNumber:0},g4=(0,H.createContext)(null),g8=class UnsupportedActionError extends TypeError{constructor(e){super(`Item does not support ${e}.`),Object.setPrototypeOf(this,new.target.prototype),this.name="UnsupportedActionError"}},g6=(0,H.memo)(function({children:e,contentType:t,itemId:r,memexItemId:a,repositoryId:n}){let{findMemexItem:i}=hi(),{setColumnValue:l}=hr(),{postStats:s}=os(),{data:o=g3,isInitialLoading:d}=lA({variables:{contentType:t,itemId:r,repositoryId:n,memexItemId:a}}),u=(0,e5.Z)(({name:e,context:r={}})=>{s({name:e,context:JSON.stringify({contentType:t,...r})})}),{mutate:c}=lM(),m=(0,e5.Z)(async(e=!1)=>{c({contentType:t,itemId:r,repositoryId:n,memexItemId:a},{onSuccess:()=>{u.current({name:"side_panel_metadata_refresh",context:{fromSocketEvent:e}})}})}),p=(0,H.useMemo)(()=>(0,s9.Z)((...e)=>m.current(...e),1250),[m]),{mutateAsync:f}=lL(),h=(0,H.useCallback)(async(e,s,o)=>f({contentType:t,itemId:r,memexItemId:a,repositoryId:n,update:e,tasklist_blocks_operation:s,tasklist_blocks_operation_tracker:o},{onSettled:()=>{u.current({name:"side_panel_edit_item",context:{updates:Object.keys(e)}})},onSuccess:e=>{if(a&&e){let t=i(a);if(t){let r=t.columns.Title?.value;if(r&&r.title!==e.title){let a=d4({dataType:eA.Title,value:{...r,title:e.title}});a&&l(t,a)}}}}}),[t,f,i,r,a,u,n,l]),g=(0,H.useCallback)(async e=>h({title:e}),[h]),y=(0,H.useCallback)(async e=>h({labels:e}),[h]),x=(0,H.useCallback)(async e=>h({assignees:e}),[h]),b=(0,H.useCallback)(async e=>h({milestone:e}),[h]),{mutateAsync:v}=lF(),w=(0,H.useCallback)(async(e,t,i)=>{if(!o.comments)throw new g8("comments");return v({kind:lC.ISSUE,itemId:r,repositoryId:n,comment:e,updateState:t,stateReason:i,memexItemId:a},{onSuccess:()=>{u.current({name:"side_panel_post_comment",context:{state:t,stateReason:i}})}})},[o.comments,v,r,n,a,u]),{mutateAsync:j}=lZ(),C=(0,H.useCallback)(async(e,t)=>{if(!o.comments)throw new g8("comments");return j({kind:lC.ISSUE,itemId:r,repositoryId:n,commentId:e,body:t,memexItemId:a},{onSuccess:()=>{u.current({name:"side_panel_edit_comment"})}})},[o.comments,j,r,n,a,u]),{mutate:I}=lO(),S=(0,H.useCallback)(async(e,t,i,l)=>{if(!o.reactions)throw new g8("reactions");return I({reaction:e,command:t?"unreact":"react",commentId:l,itemId:r,repositoryId:n,actor:i,memexItemId:a,kind:lC.ISSUE},{onSuccess:()=>{u.current({name:"side_panel_react",context:{command:t?"unreact":"react",subject:l?"comment":"issue"}})}})},[o.reactions,I,r,n,a,u]),{mutate:k}=lV(),T=(0,H.useCallback)(async(e,i)=>{if(t!==eL.Issue)throw new g8("state updates");return k({state:e,stateReason:i,itemId:r,repositoryId:n,memexItemId:a,kind:lC.ISSUE},{onSuccess:()=>{u.current({name:"side_panel_update_issue_state",context:{state:e,stateReason:i}})}})},[t,k,r,n,a,u]),N=(0,H.useMemo)(()=>({isLoading:d,sidePanelMetadata:o,editIssue:h,editIssueTitle:g,addIssueComment:w,editIssueComment:C,reactToSidePanelItem:S,updateSidePanelItemState:T,editIssueLabels:y,editIssueAssignees:x,editIssueMilestone:b,reloadSidePanelMetadata:p}),[d,o,h,g,w,C,y,x,b,S,T,p]);return(0,O.jsx)(g4.Provider,{value:N,children:e})});try{g4.displayName||(g4.displayName="IssueContext")}catch{}try{g6.displayName||(g6.displayName="IssueStateProvider")}catch{}let g7=()=>{let e=(0,H.useContext)(g4);if(!e)throw Error("useIssueContext must be used within a IssueContext.Provider.");return e};var g9=r(5992),ye=r(87250);async function yt(e){let t=aa("memex-preview-markdown-api-data");return(await ap(t.url,{method:"POST",body:as(e),headers:{Accept:"text/html","Content-Type":al.FormData}})).text()}let yr=e=>{let[t,r]=(0,H.useState)(""),[a,n]=(0,H.useState)(!1);return{html:t,isLoading:a,loadPreview:(0,H.useCallback)(async t=>{n(!0),r("");let a=await yt({text:t,...e});return n(!1),r(a),a},[e])}};async function ya(e){f2();let t=aa("memex-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}let yn=()=>{let e=r8(),{setProject:t}=gl();return{updateDescription:(0,H.useCallback)(async r=>{r=r.trim(),e.description!==r&&t((await ya({description:r})).memexProject)},[e.description,t])}},yi=e=>` ${e.split(" ").map(e=>`<${e.replaceAll("Mod",(0,te.eE)()?"Cmd":"Ctrl").replaceAll("Command","Cmd").replaceAll("Control","Ctrl").toLowerCase()}>`).join(" / ")}`,yl=e=>e.replaceAll("{CMD_CTRL}",(0,te.eE)()?"Command":"Control"),ys=(0,H.forwardRef)(({label:e,icon:t,shortcut:r,sx:a,tooltipDirection:n,...i},l)=>{let s=(0,H.useCallback)(()=>(0,O.jsx)(fC.Z,{"aria-label":`${e}${r?yi(r):""}`,className:"icon-button-with-tooltip__tooltip",direction:n,children:(0,O.jsx)(t,{})}),[e,r,t,n]);return(0,O.jsx)(mq.h,{ref:l,icon:s,"aria-keyshortcuts":r?yl(r):void 0,sx:{...a,"&:focus-visible, &:hover":{"& .icon-button-with-tooltip__tooltip":{"&::after, &::before":{display:"inline-block",textDecoration:"none",animationName:"tooltip-appear",animationDuration:"0.1s",animationFillMode:"forwards",animationTimingFunction:"ease-in"}}},"&:hover .icon-button-with-tooltip__tooltip":{"&::after, &::before":{animationDelay:"0.4s"}}},...i,"aria-label":e})});ys.displayName="IconButtonWithTooltip";try{(f=TooltippedIcon).displayName||(f.displayName="TooltippedIcon")}catch{}var yo=r(65913);function yd(e){var t;let r=(t=e.unverifiedHTML,u0.sanitize(t,uY).toString());return(0,O.jsx)(yo.a,{...e,verifiedHTML:r})}try{yd.displayName||(yd.displayName="SanitizedMarkdownViewer")}catch{}var yu=r(13985),yc=r(61511);let ym={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}",ab:"\u{1F18E}",abacus:"\u{1F9EE}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",adhesive_bandage:"\u{1FA79}",adult:"\u{1F9D1}",aerial_tramway:"\u{1F6A1}",afghanistan:"\u{1F1E6}\u200D\u{1F1EB}",airplane:"\u2708",aland_islands:"\u{1F1E6}\u200D\u{1F1FD}",alarm_clock:"\u23F0",albania:"\u{1F1E6}\u200D\u{1F1F1}",alembic:"\u2697",algeria:"\u{1F1E9}\u200D\u{1F1FF}",alien:"\u{1F47D}",ambulance:"\u{1F691}",american_samoa:"\u{1F1E6}\u200D\u{1F1F8}",amphora:"\u{1F3FA}",anchor:"\u2693",andorra:"\u{1F1E6}\u200D\u{1F1E9}",angel:"\u{1F47C}",anger:"\u{1F4A2}",angola:"\u{1F1E6}\u200D\u{1F1F4}",angry:"\u{1F620}",anguilla:"\u{1F1E6}\u200D\u{1F1EE}",anguished:"\u{1F627}",ant:"\u{1F41C}",antarctica:"\u{1F1E6}\u200D\u{1F1F6}",antigua_barbuda:"\u{1F1E6}\u200D\u{1F1EC}",apple:"\u{1F34E}",aquarius:"\u2652",argentina:"\u{1F1E6}\u200D\u{1F1F7}",aries:"\u2648",armenia:"\u{1F1E6}\u200D\u{1F1F2}",arrow_backward:"\u25C0",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6",arrow_heading_down:"\u2935",arrow_heading_up:"\u2934",arrow_left:"\u2B05",arrow_lower_left:"\u2199",arrow_lower_right:"\u2198",arrow_right:"\u27A1",arrow_right_hook:"\u21AA",arrow_up:"\u2B06",arrow_up_down:"\u2195",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196",arrow_upper_right:"\u2197",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",artist:"\u{1F9D1}\u200D\u{1F3A8}",aruba:"\u{1F1E6}\u200D\u{1F1FC}",ascension_island:"\u{1F1E6}\u200D\u{1F1E8}",asterisk:"*\u200D\u20E3",astonished:"\u{1F632}",astronaut:"\u{1F9D1}\u200D\u{1F680}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B",australia:"\u{1F1E6}\u200D\u{1F1FA}",austria:"\u{1F1E6}\u200D\u{1F1F9}",auto_rickshaw:"\u{1F6FA}",avocado:"\u{1F951}",axe:"\u{1FA93}",azerbaijan:"\u{1F1E6}\u200D\u{1F1FF}",b:"\u{1F171}",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badger:"\u{1F9A1}",badminton:"\u{1F3F8}",bagel:"\u{1F96F}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",bahamas:"\u{1F1E7}\u200D\u{1F1F8}",bahrain:"\u{1F1E7}\u200D\u{1F1ED}",balance_scale:"\u2696",bald_man:"\u{1F468}\u200D\u{1F9B2}",bald_woman:"\u{1F469}\u200D\u{1F9B2}",ballet_shoes:"\u{1FA70}",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C",bangladesh:"\u{1F1E7}\u200D\u{1F1E9}",banjo:"\u{1FA95}",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barbados:"\u{1F1E7}\u200D\u{1F1E7}",barber:"\u{1F488}",baseball:"\u26BE",basket:"\u{1F9FA}",basketball:"\u{1F3C0}",basketball_man:"\u26F9\u200D\u2642",basketball_woman:"\u26F9\u200D\u2640",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bearded_person:"\u{1F9D4}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",belarus:"\u{1F1E7}\u200D\u{1F1FE}",belgium:"\u{1F1E7}\u200D\u{1F1EA}",belize:"\u{1F1E7}\u200D\u{1F1FF}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",benin:"\u{1F1E7}\u200D\u{1F1EF}",bento:"\u{1F371}",bermuda:"\u{1F1E7}\u200D\u{1F1F2}",beverage_box:"\u{1F9C3}",bhutan:"\u{1F1E7}\u200D\u{1F1F9}",bicyclist:"\u{1F6B4}",bike:"\u{1F6B2}",biking_man:"\u{1F6B4}\u200D\u2642",biking_woman:"\u{1F6B4}\u200D\u2640",bikini:"\u{1F459}",billed_cap:"\u{1F9E2}",biohazard:"\u2623",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B",black_medium_small_square:"\u25FE",black_medium_square:"\u25FC",black_nib:"\u2712",black_small_square:"\u25AA",black_square_button:"\u{1F532}",blond_haired_man:"\u{1F471}\u200D\u2642",blond_haired_person:"\u{1F471}",blond_haired_woman:"\u{1F471}\u200D\u2640",blonde_woman:"\u{1F471}\u200D\u2640",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blue_square:"\u{1F7E6}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5",bolivia:"\u{1F1E7}\u200D\u{1F1F4}",bomb:"\u{1F4A3}",bone:"\u{1F9B4}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bosnia_herzegovina:"\u{1F1E7}\u200D\u{1F1E6}",botswana:"\u{1F1E7}\u200D\u{1F1FC}",bouncing_ball_man:"\u26F9\u200D\u2642",bouncing_ball_person:"\u26F9",bouncing_ball_woman:"\u26F9\u200D\u2640",bouquet:"\u{1F490}",bouvet_island:"\u{1F1E7}\u200D\u{1F1FB}",bow:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_man:"\u{1F647}\u200D\u2642",bowing_woman:"\u{1F647}\u200D\u2640",bowl_with_spoon:"\u{1F963}",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",brain:"\u{1F9E0}",brazil:"\u{1F1E7}\u200D\u{1F1F7}",bread:"\u{1F35E}",breast_feeding:"\u{1F931}",bricks:"\u{1F9F1}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",british_indian_ocean_territory:"\u{1F1EE}\u200D\u{1F1F4}",british_virgin_islands:"\u{1F1FB}\u200D\u{1F1EC}",broccoli:"\u{1F966}",broken_heart:"\u{1F494}",broom:"\u{1F9F9}",brown_circle:"\u{1F7E4}",brown_heart:"\u{1F90E}",brown_square:"\u{1F7EB}",brunei:"\u{1F1E7}\u200D\u{1F1F3}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bulgaria:"\u{1F1E7}\u200D\u{1F1EC}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burkina_faso:"\u{1F1E7}\u200D\u{1F1EB}",burrito:"\u{1F32F}",burundi:"\u{1F1E7}\u200D\u{1F1EE}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butter:"\u{1F9C8}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",cambodia:"\u{1F1F0}\u200D\u{1F1ED}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",cameroon:"\u{1F1E8}\u200D\u{1F1F2}",camping:"\u{1F3D5}",canada:"\u{1F1E8}\u200D\u{1F1E6}",canary_islands:"\u{1F1EE}\u200D\u{1F1E8}",cancer:"\u264B",candle:"\u{1F56F}",candy:"\u{1F36C}",canned_food:"\u{1F96B}",canoe:"\u{1F6F6}",cape_verde:"\u{1F1E8}\u200D\u{1F1FB}",capital_abcd:"\u{1F520}",capricorn:"\u2651",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",caribbean_netherlands:"\u{1F1E7}\u200D\u{1F1F6}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cartwheeling:"\u{1F938}",cat:"\u{1F431}",cat2:"\u{1F408}",cayman_islands:"\u{1F1F0}\u200D\u{1F1FE}",cd:"\u{1F4BF}",central_african_republic:"\u{1F1E8}\u200D\u{1F1EB}",ceuta_melilla:"\u{1F1EA}\u200D\u{1F1E6}",chad:"\u{1F1F9}\u200D\u{1F1E9}",chains:"\u26D3",chair:"\u{1FA91}",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chess_pawn:"\u265F",chestnut:"\u{1F330}",chicken:"\u{1F414}",child:"\u{1F9D2}",children_crossing:"\u{1F6B8}",chile:"\u{1F1E8}\u200D\u{1F1F1}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",chopsticks:"\u{1F962}",christmas_island:"\u{1F1E8}\u200D\u{1F1FD}",christmas_tree:"\u{1F384}",church:"\u26EA",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",climbing:"\u{1F9D7}",climbing_man:"\u{1F9D7}\u200D\u2642",climbing_woman:"\u{1F9D7}\u200D\u2640",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clipperton_island:"\u{1F1E8}\u200D\u{1F1F5}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663",cn:"\u{1F1E8}\u200D\u{1F1F3}",coat:"\u{1F9E5}",cocktail:"\u{1F378}",coconut:"\u{1F965}",cocos_islands:"\u{1F1E8}\u200D\u{1F1E8}",coffee:"\u2615",coffin:"\u26B0",cold_face:"\u{1F976}",cold_sweat:"\u{1F630}",collision:"\u{1F4A5}",colombia:"\u{1F1E8}\u200D\u{1F1F4}",comet:"\u2604",comoros:"\u{1F1F0}\u200D\u{1F1F2}",compass:"\u{1F9ED}",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congo_brazzaville:"\u{1F1E8}\u200D\u{1F1EC}",congo_kinshasa:"\u{1F1E8}\u200D\u{1F1E9}",congratulations:"\u3297",construction:"\u{1F6A7}",construction_worker:"\u{1F477}",construction_worker_man:"\u{1F477}\u200D\u2642",construction_worker_woman:"\u{1F477}\u200D\u2640",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cook:"\u{1F9D1}\u200D\u{1F373}",cook_islands:"\u{1F1E8}\u200D\u{1F1F0}",cookie:"\u{1F36A}",cool:"\u{1F192}",cop:"\u{1F46E}",copyright:"\xa9",corn:"\u{1F33D}",costa_rica:"\u{1F1E8}\u200D\u{1F1F7}",cote_divoire:"\u{1F1E8}\u200D\u{1F1EE}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}\u200D\u2764\u200D\u{1F468}",couple_with_heart_woman_man:"\u{1F469}\u200D\u2764\u200D\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}\u200D\u2764\u200D\u{1F469}",couplekiss:"\u{1F48F}",couplekiss_man_man:"\u{1F468}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F468}",couplekiss_man_woman:"\u{1F469}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F468}",couplekiss_woman_woman:"\u{1F469}\u200D\u2764\u200D\u{1F48B}\u200D\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F997}",cricket_game:"\u{1F3CF}",croatia:"\u{1F1ED}\u200D\u{1F1F7}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cuba:"\u{1F1E8}\u200D\u{1F1FA}",cucumber:"\u{1F952}",cup_with_straw:"\u{1F964}",cupcake:"\u{1F9C1}",cupid:"\u{1F498}",curacao:"\u{1F1E8}\u200D\u{1F1FC}",curling_stone:"\u{1F94C}",curly_haired_man:"\u{1F468}\u200D\u{1F9B1}",curly_haired_woman:"\u{1F469}\u200D\u{1F9B1}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",cursing_face:"\u{1F92C}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cut_of_meat:"\u{1F969}",cyclone:"\u{1F300}",cyprus:"\u{1F1E8}\u200D\u{1F1FE}",czech_republic:"\u{1F1E8}\u200D\u{1F1FF}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancers:"\u{1F46F}",dancing_men:"\u{1F46F}\u200D\u2642",dancing_women:"\u{1F46F}\u200D\u2640",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",de:"\u{1F1E9}\u200D\u{1F1EA}",deaf_man:"\u{1F9CF}\u200D\u2642",deaf_person:"\u{1F9CF}",deaf_woman:"\u{1F9CF}\u200D\u2640",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",denmark:"\u{1F1E9}\u200D\u{1F1F0}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",detective:"\u{1F575}",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666",diego_garcia:"\u{1F1E9}\u200D\u{1F1EC}",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",diving_mask:"\u{1F93F}",diya_lamp:"\u{1FA94}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",djibouti:"\u{1F1E9}\u200D\u{1F1EF}",dna:"\u{1F9EC}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",dominica:"\u{1F1E9}\u200D\u{1F1F2}",dominican_republic:"\u{1F1E9}\u200D\u{1F1F4}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",drop_of_blood:"\u{1FA78}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dumpling:"\u{1F95F}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",ear_with_hearing_aid:"\u{1F9BB}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",ecuador:"\u{1F1EA}\u200D\u{1F1E8}",egg:"\u{1F95A}",eggplant:"\u{1F346}",egypt:"\u{1F1EA}\u200D\u{1F1EC}",eight:"8\u200D\u20E3",eight_pointed_black_star:"\u2734",eight_spoked_asterisk:"\u2733",eject_button:"\u23CF",el_salvador:"\u{1F1F8}\u200D\u{1F1FB}",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",elf:"\u{1F9DD}",elf_man:"\u{1F9DD}\u200D\u2642",elf_woman:"\u{1F9DD}\u200D\u2640",email:"\u2709",end:"\u{1F51A}",england:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0065}\u200D\u{E006E}\u200D\u{E0067}\u200D\u{E007F}",envelope:"\u2709",envelope_with_arrow:"\u{1F4E9}",equatorial_guinea:"\u{1F1EC}\u200D\u{1F1F6}",eritrea:"\u{1F1EA}\u200D\u{1F1F7}",es:"\u{1F1EA}\u200D\u{1F1F8}",estonia:"\u{1F1EA}\u200D\u{1F1EA}",ethiopia:"\u{1F1EA}\u200D\u{1F1F9}",eu:"\u{1F1EA}\u200D\u{1F1FA}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",european_union:"\u{1F1EA}\u200D\u{1F1FA}",evergreen_tree:"\u{1F332}",exclamation:"\u2757",exploding_head:"\u{1F92F}",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}\u200D\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",facepalm:"\u{1F926}",facepunch:"\u{1F44A}",factory:"\u{1F3ED}",factory_worker:"\u{1F9D1}\u200D\u{1F3ED}",fairy:"\u{1F9DA}",fairy_man:"\u{1F9DA}\u200D\u2642",fairy_woman:"\u{1F9DA}\u200D\u2640",falafel:"\u{1F9C6}",falkland_islands:"\u{1F1EB}\u200D\u{1F1F0}",fallen_leaf:"\u{1F342}",family:"\u{1F46A}",family_man_boy:"\u{1F468}\u200D\u{1F466}",family_man_boy_boy:"\u{1F468}\u200D\u{1F466}\u200D\u{1F466}",family_man_girl:"\u{1F468}\u200D\u{1F467}",family_man_girl_boy:"\u{1F468}\u200D\u{1F467}\u200D\u{1F466}",family_man_girl_girl:"\u{1F468}\u200D\u{1F467}\u200D\u{1F467}",family_man_man_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}",family_man_man_boy_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}",family_man_man_girl:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}",family_man_man_girl_boy:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}",family_man_man_girl_girl:"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}",family_man_woman_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}",family_man_woman_boy_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_man_woman_girl:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}",family_man_woman_girl_boy:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_man_woman_girl_girl:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",family_woman_boy:"\u{1F469}\u200D\u{1F466}",family_woman_boy_boy:"\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_woman_girl:"\u{1F469}\u200D\u{1F467}",family_woman_girl_boy:"\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_woman_girl_girl:"\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",family_woman_woman_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}",family_woman_woman_girl:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}",farmer:"\u{1F9D1}\u200D\u{1F33E}",faroe_islands:"\u{1F1EB}\u200D\u{1F1F4}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\u200D\u2640",female_sign:"\u2640",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",fiji:"\u{1F1EB}\u200D\u{1F1EF}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",finland:"\u{1F1EB}\u200D\u{1F1EE}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fire_extinguisher:"\u{1F9EF}",firecracker:"\u{1F9E8}",firefighter:"\u{1F9D1}\u200D\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist:"\u270A",fist_left:"\u{1F91B}",fist_oncoming:"\u{1F44A}",fist_raised:"\u270A",fist_right:"\u{1F91C}",five:"5\u200D\u20E3",flags:"\u{1F38F}",flamingo:"\u{1F9A9}",flashlight:"\u{1F526}",flat_shoe:"\u{1F97F}",fleur_de_lis:"\u269C",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",flipper:"\u{1F42C}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",flying_disc:"\u{1F94F}",flying_saucer:"\u{1F6F8}",fog:"\u{1F32B}",foggy:"\u{1F301}",foot:"\u{1F9B6}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fortune_cookie:"\u{1F960}",fountain:"\u26F2",fountain_pen:"\u{1F58B}",four:"4\u200D\u20E3",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",fr:"\u{1F1EB}\u200D\u{1F1F7}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",french_guiana:"\u{1F1EC}\u200D\u{1F1EB}",french_polynesia:"\u{1F1F5}\u200D\u{1F1EB}",french_southern_territories:"\u{1F1F9}\u200D\u{1F1EB}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639",frowning_man:"\u{1F64D}\u200D\u2642",frowning_person:"\u{1F64D}",frowning_woman:"\u{1F64D}\u200D\u2640",fu:"\u{1F595}",fuelpump:"\u26FD",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1",gabon:"\u{1F1EC}\u200D\u{1F1E6}",gambia:"\u{1F1EC}\u200D\u{1F1F2}",game_die:"\u{1F3B2}",garlic:"\u{1F9C4}",gb:"\u{1F1EC}\u200D\u{1F1E7}",gear:"\u2699",gem:"\u{1F48E}",gemini:"\u264A",genie:"\u{1F9DE}",genie_man:"\u{1F9DE}\u200D\u2642",genie_woman:"\u{1F9DE}\u200D\u2640",georgia:"\u{1F1EC}\u200D\u{1F1EA}",ghana:"\u{1F1EC}\u200D\u{1F1ED}",ghost:"\u{1F47B}",gibraltar:"\u{1F1EC}\u200D\u{1F1EE}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",giraffe:"\u{1F992}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",gloves:"\u{1F9E4}",goal_net:"\u{1F945}",goat:"\u{1F410}",goggles:"\u{1F97D}",golf:"\u26F3",golfing:"\u{1F3CC}",golfing_man:"\u{1F3CC}\u200D\u2642",golfing_woman:"\u{1F3CC}\u200D\u2640",gorilla:"\u{1F98D}",grapes:"\u{1F347}",greece:"\u{1F1EC}\u200D\u{1F1F7}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_circle:"\u{1F7E2}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",green_square:"\u{1F7E9}",greenland:"\u{1F1EC}\u200D\u{1F1F1}",grenada:"\u{1F1EC}\u200D\u{1F1E9}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guadeloupe:"\u{1F1EC}\u200D\u{1F1F5}",guam:"\u{1F1EC}\u200D\u{1F1FA}",guard:"\u{1F482}",guardsman:"\u{1F482}\u200D\u2642",guardswoman:"\u{1F482}\u200D\u2640",guatemala:"\u{1F1EC}\u200D\u{1F1F9}",guernsey:"\u{1F1EC}\u200D\u{1F1EC}",guide_dog:"\u{1F9AE}",guinea:"\u{1F1EC}\u200D\u{1F1F3}",guinea_bissau:"\u{1F1EC}\u200D\u{1F1FC}",guitar:"\u{1F3B8}",gun:"\u{1F52B}",guyana:"\u{1F1EC}\u200D\u{1F1FE}",haircut:"\u{1F487}",haircut_man:"\u{1F487}\u200D\u2642",haircut_woman:"\u{1F487}\u200D\u2640",haiti:"\u{1F1ED}\u200D\u{1F1F9}",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",hand_over_mouth:"\u{1F92D}",handbag:"\u{1F45C}",handball_person:"\u{1F93E}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hash:"#\u200D\u20E3",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",health_worker:"\u{1F9D1}\u200D\u2695",hear_no_evil:"\u{1F649}",heard_mcdonald_islands:"\u{1F1ED}\u200D\u{1F1F2}",heart:"\u2764",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665",heavy_check_mark:"\u2714",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_exclamation_mark:"\u2757",heavy_heart_exclamation:"\u2763",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716",heavy_plus_sign:"\u2795",hedgehog:"\u{1F994}",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hiking_boot:"\u{1F97E}",hindu_temple:"\u{1F6D5}",hippopotamus:"\u{1F99B}",hocho:"\u{1F52A}",hole:"\u{1F573}",honduras:"\u{1F1ED}\u200D\u{1F1F3}",honey_pot:"\u{1F36F}",honeybee:"\u{1F41D}",hong_kong:"\u{1F1ED}\u200D\u{1F1F0}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_face:"\u{1F975}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668",hourglass:"\u231B",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hungary:"\u{1F1ED}\u200D\u{1F1FA}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_cube:"\u{1F9CA}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",iceland:"\u{1F1EE}\u200D\u{1F1F8}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",india:"\u{1F1EE}\u200D\u{1F1F3}",indonesia:"\u{1F1EE}\u200D\u{1F1E9}",infinity:"\u267E",information_desk_person:"\u{1F481}",information_source:"\u2139",innocent:"\u{1F607}",interrobang:"\u2049",iphone:"\u{1F4F1}",iran:"\u{1F1EE}\u200D\u{1F1F7}",iraq:"\u{1F1EE}\u200D\u{1F1F6}",ireland:"\u{1F1EE}\u200D\u{1F1EA}",isle_of_man:"\u{1F1EE}\u200D\u{1F1F2}",israel:"\u{1F1EE}\u200D\u{1F1F1}",it:"\u{1F1EE}\u200D\u{1F1F9}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",jamaica:"\u{1F1EF}\u200D\u{1F1F2}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",jersey:"\u{1F1EF}\u200D\u{1F1EA}",jigsaw:"\u{1F9E9}",jordan:"\u{1F1EF}\u200D\u{1F1F4}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",jp:"\u{1F1EF}\u200D\u{1F1F5}",judge:"\u{1F9D1}\u200D\u2696",juggling_person:"\u{1F939}",kaaba:"\u{1F54B}",kangaroo:"\u{1F998}",kazakhstan:"\u{1F1F0}\u200D\u{1F1FF}",kenya:"\u{1F1F0}\u200D\u{1F1EA}",key:"\u{1F511}",keyboard:"\u2328",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiribati:"\u{1F1F0}\u200D\u{1F1EE}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kite:"\u{1FA81}",kiwi_fruit:"\u{1F95D}",kneeling_man:"\u{1F9CE}\u200D\u2642",kneeling_person:"\u{1F9CE}",kneeling_woman:"\u{1F9CE}\u200D\u2640",knife:"\u{1F52A}",koala:"\u{1F428}",koko:"\u{1F201}",kosovo:"\u{1F1FD}\u200D\u{1F1F0}",kr:"\u{1F1F0}\u200D\u{1F1F7}",kuwait:"\u{1F1F0}\u200D\u{1F1FC}",kyrgyzstan:"\u{1F1F0}\u200D\u{1F1EC}",lab_coat:"\u{1F97C}",label:"\u{1F3F7}",lacrosse:"\u{1F94D}",lantern:"\u{1F3EE}",laos:"\u{1F1F1}\u200D\u{1F1E6}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D",latvia:"\u{1F1F1}\u200D\u{1F1FB}",laughing:"\u{1F606}",leafy_green:"\u{1F96C}",leaves:"\u{1F343}",lebanon:"\u{1F1F1}\u200D\u{1F1E7}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194",left_speech_bubble:"\u{1F5E8}",leftwards_arrow_with_hook:"\u21A9",leg:"\u{1F9B5}",lemon:"\u{1F34B}",leo:"\u264C",leopard:"\u{1F406}",lesotho:"\u{1F1F1}\u200D\u{1F1F8}",level_slider:"\u{1F39A}",liberia:"\u{1F1F1}\u200D\u{1F1F7}",libra:"\u264E",libya:"\u{1F1F1}\u200D\u{1F1FE}",liechtenstein:"\u{1F1F1}\u200D\u{1F1EE}",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lithuania:"\u{1F1F1}\u200D\u{1F1F9}",lizard:"\u{1F98E}",llama:"\u{1F999}",lobster:"\u{1F99E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",lotion_bottle:"\u{1F9F4}",lotus_position:"\u{1F9D8}",lotus_position_man:"\u{1F9D8}\u200D\u2642",lotus_position_woman:"\u{1F9D8}\u200D\u2640",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",love_you_gesture:"\u{1F91F}",low_brightness:"\u{1F505}",luggage:"\u{1F9F3}",luxembourg:"\u{1F1F1}\u200D\u{1F1FA}",lying_face:"\u{1F925}",m:"\u24C2",macau:"\u{1F1F2}\u200D\u{1F1F4}",macedonia:"\u{1F1F2}\u200D\u{1F1F0}",madagascar:"\u{1F1F2}\u200D\u{1F1EC}",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mage:"\u{1F9D9}",mage_man:"\u{1F9D9}\u200D\u2642",mage_woman:"\u{1F9D9}\u200D\u2640",magnet:"\u{1F9F2}",mahjong:"\u{1F004}",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",malawi:"\u{1F1F2}\u200D\u{1F1FC}",malaysia:"\u{1F1F2}\u200D\u{1F1FE}",maldives:"\u{1F1F2}\u200D\u{1F1FB}",male_detective:"\u{1F575}\u200D\u2642",male_sign:"\u2642",mali:"\u{1F1F2}\u200D\u{1F1F1}",malta:"\u{1F1F2}\u200D\u{1F1F9}",man:"\u{1F468}",man_artist:"\u{1F468}\u200D\u{1F3A8}",man_astronaut:"\u{1F468}\u200D\u{1F680}",man_cartwheeling:"\u{1F938}\u200D\u2642",man_cook:"\u{1F468}\u200D\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}\u200D\u2642",man_factory_worker:"\u{1F468}\u200D\u{1F3ED}",man_farmer:"\u{1F468}\u200D\u{1F33E}",man_firefighter:"\u{1F468}\u200D\u{1F692}",man_health_worker:"\u{1F468}\u200D\u2695",man_in_manual_wheelchair:"\u{1F468}\u200D\u{1F9BD}",man_in_motorized_wheelchair:"\u{1F468}\u200D\u{1F9BC}",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}\u200D\u2696",man_juggling:"\u{1F939}\u200D\u2642",man_mechanic:"\u{1F468}\u200D\u{1F527}",man_office_worker:"\u{1F468}\u200D\u{1F4BC}",man_pilot:"\u{1F468}\u200D\u2708",man_playing_handball:"\u{1F93E}\u200D\u2642",man_playing_water_polo:"\u{1F93D}\u200D\u2642",man_scientist:"\u{1F468}\u200D\u{1F52C}",man_shrugging:"\u{1F937}\u200D\u2642",man_singer:"\u{1F468}\u200D\u{1F3A4}",man_student:"\u{1F468}\u200D\u{1F393}",man_teacher:"\u{1F468}\u200D\u{1F3EB}",man_technologist:"\u{1F468}\u200D\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_probing_cane:"\u{1F468}\u200D\u{1F9AF}",man_with_turban:"\u{1F473}\u200D\u2642",mandarin:"\u{1F34A}",mango:"\u{1F96D}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",manual_wheelchair:"\u{1F9BD}",maple_leaf:"\u{1F341}",marshall_islands:"\u{1F1F2}\u200D\u{1F1ED}",martial_arts_uniform:"\u{1F94B}",martinique:"\u{1F1F2}\u200D\u{1F1F6}",mask:"\u{1F637}",massage:"\u{1F486}",massage_man:"\u{1F486}\u200D\u2642",massage_woman:"\u{1F486}\u200D\u2640",mate:"\u{1F9C9}",mauritania:"\u{1F1F2}\u200D\u{1F1F7}",mauritius:"\u{1F1F2}\u200D\u{1F1FA}",mayotte:"\u{1F1FE}\u200D\u{1F1F9}",meat_on_bone:"\u{1F356}",mechanic:"\u{1F9D1}\u200D\u{1F527}",mechanical_arm:"\u{1F9BE}",mechanical_leg:"\u{1F9BF}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",medical_symbol:"\u2695",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}\u200D\u2642",menorah:"\u{1F54E}",mens:"\u{1F6B9}",mermaid:"\u{1F9DC}\u200D\u2640",merman:"\u{1F9DC}\u200D\u2642",merperson:"\u{1F9DC}",metal:"\u{1F918}",metro:"\u{1F687}",mexico:"\u{1F1F2}\u200D\u{1F1FD}",microbe:"\u{1F9A0}",micronesia:"\u{1F1EB}\u200D\u{1F1F2}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",middle_finger:"\u{1F595}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",moldova:"\u{1F1F2}\u200D\u{1F1E9}",monaco:"\u{1F1F2}\u200D\u{1F1E8}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",mongolia:"\u{1F1F2}\u200D\u{1F1F3}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monocle_face:"\u{1F9D0}",monorail:"\u{1F69D}",montenegro:"\u{1F1F2}\u200D\u{1F1EA}",montserrat:"\u{1F1F2}\u200D\u{1F1F8}",moon:"\u{1F314}",moon_cake:"\u{1F96E}",morocco:"\u{1F1F2}\u200D\u{1F1E6}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",mosquito:"\u{1F99F}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorized_wheelchair:"\u{1F9BC}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_bicyclist:"\u{1F6B5}",mountain_biking_man:"\u{1F6B5}\u200D\u2642",mountain_biking_woman:"\u{1F6B5}\u200D\u2640",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mozambique:"\u{1F1F2}\u200D\u{1F1FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",myanmar:"\u{1F1F2}\u200D\u{1F1F2}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",namibia:"\u{1F1F3}\u200D\u{1F1E6}",national_park:"\u{1F3DE}",nauru:"\u{1F1F3}\u200D\u{1F1F7}",nauseated_face:"\u{1F922}",nazar_amulet:"\u{1F9FF}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nepal:"\u{1F1F3}\u200D\u{1F1F5}",nerd_face:"\u{1F913}",netherlands:"\u{1F1F3}\u200D\u{1F1F1}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_caledonia:"\u{1F1F3}\u200D\u{1F1E8}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",new_zealand:"\u{1F1F3}\u200D\u{1F1FF}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",ng_man:"\u{1F645}\u200D\u2642",ng_woman:"\u{1F645}\u200D\u2640",nicaragua:"\u{1F1F3}\u200D\u{1F1EE}",niger:"\u{1F1F3}\u200D\u{1F1EA}",nigeria:"\u{1F1F3}\u200D\u{1F1EC}",night_with_stars:"\u{1F303}",nine:"9\u200D\u20E3",niue:"\u{1F1F3}\u200D\u{1F1FA}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4",no_entry_sign:"\u{1F6AB}",no_good:"\u{1F645}",no_good_man:"\u{1F645}\u200D\u2642",no_good_woman:"\u{1F645}\u200D\u2640",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",norfolk_island:"\u{1F1F3}\u200D\u{1F1EB}",north_korea:"\u{1F1F0}\u200D\u{1F1F5}",northern_mariana_islands:"\u{1F1F2}\u200D\u{1F1F5}",norway:"\u{1F1F3}\u200D\u{1F1F4}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55",o2:"\u{1F17E}",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",office_worker:"\u{1F9D1}\u200D\u{1F4BC}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}\u200D\u2642",ok_person:"\u{1F646}",ok_woman:"\u{1F646}\u200D\u2640",old_key:"\u{1F5DD}",older_adult:"\u{1F9D3}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",oman:"\u{1F1F4}\u200D\u{1F1F2}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",one:"1\u200D\u20E3",one_piece_swimsuit:"\u{1FA71}",onion:"\u{1F9C5}",open_book:"\u{1F4D6}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602",ophiuchus:"\u26CE",orange:"\u{1F34A}",orange_book:"\u{1F4D9}",orange_circle:"\u{1F7E0}",orange_heart:"\u{1F9E1}",orange_square:"\u{1F7E7}",orangutan:"\u{1F9A7}",orthodox_cross:"\u2626",otter:"\u{1F9A6}",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",oyster:"\u{1F9AA}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",pakistan:"\u{1F1F5}\u200D\u{1F1F0}",palau:"\u{1F1F5}\u200D\u{1F1FC}",palestinian_territories:"\u{1F1F5}\u200D\u{1F1F8}",palm_tree:"\u{1F334}",palms_up_together:"\u{1F932}",panama:"\u{1F1F5}\u200D\u{1F1E6}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",papua_new_guinea:"\u{1F1F5}\u200D\u{1F1EC}",parachute:"\u{1FA82}",paraguay:"\u{1F1F5}\u200D\u{1F1FE}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}",parrot:"\u{1F99C}",part_alternation_mark:"\u303D",partly_sunny:"\u26C5",partying_face:"\u{1F973}",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",paw_prints:"\u{1F43E}",peace_symbol:"\u262E",peach:"\u{1F351}",peacock:"\u{1F99A}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil:"\u{1F4DD}",pencil2:"\u270F",penguin:"\u{1F427}",pensive:"\u{1F614}",people_holding_hands:"\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_bald:"\u{1F9D1}\u200D\u{1F9B2}",person_curly_hair:"\u{1F9D1}\u200D\u{1F9B1}",person_fencing:"\u{1F93A}",person_in_manual_wheelchair:"\u{1F9D1}\u200D\u{1F9BD}",person_in_motorized_wheelchair:"\u{1F9D1}\u200D\u{1F9BC}",person_red_hair:"\u{1F9D1}\u200D\u{1F9B0}",person_white_hair:"\u{1F9D1}\u200D\u{1F9B3}",person_with_probing_cane:"\u{1F9D1}\u200D\u{1F9AF}",person_with_turban:"\u{1F473}",peru:"\u{1F1F5}\u200D\u{1F1EA}",petri_dish:"\u{1F9EB}",philippines:"\u{1F1F5}\u200D\u{1F1ED}",phone:"\u260E",pick:"\u26CF",pie:"\u{1F967}",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pilot:"\u{1F9D1}\u200D\u2708",pinching_hand:"\u{1F90F}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pirate_flag:"\u{1F3F4}\u200D\u2620",pisces:"\u2653",pitcairn_islands:"\u{1F1F5}\u200D\u{1F1F3}",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",pleading_face:"\u{1F97A}",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D",point_up_2:"\u{1F446}",poland:"\u{1F1F5}\u200D\u{1F1F1}",police_car:"\u{1F693}",police_officer:"\u{1F46E}",policeman:"\u{1F46E}\u200D\u2642",policewoman:"\u{1F46E}\u200D\u2640",poodle:"\u{1F429}",poop:"\u{1F4A9}",popcorn:"\u{1F37F}",portugal:"\u{1F1F5}\u200D\u{1F1F9}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",pout:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_face:"\u{1F64E}",pouting_man:"\u{1F64E}\u200D\u2642",pouting_woman:"\u{1F64E}\u200D\u2640",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",pretzel:"\u{1F968}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",probing_cane:"\u{1F9AF}",puerto_rico:"\u{1F1F5}\u200D\u{1F1F7}",punch:"\u{1F44A}",purple_circle:"\u{1F7E3}",purple_heart:"\u{1F49C}",purple_square:"\u{1F7EA}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",qatar:"\u{1F1F6}\u200D\u{1F1E6}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",raccoon:"\u{1F99D}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622",rage:"\u{1F621}",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\u200D\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_eyebrow:"\u{1F928}",raised_hand:"\u270B",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand:"\u{1F64B}",raising_hand_man:"\u{1F64B}\u200D\u2642",raising_hand_woman:"\u{1F64B}\u200D\u2640",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",razor:"\u{1FA92}",receipt:"\u{1F9FE}",record_button:"\u23FA",recycle:"\u267B",red_car:"\u{1F697}",red_circle:"\u{1F534}",red_envelope:"\u{1F9E7}",red_haired_man:"\u{1F468}\u200D\u{1F9B0}",red_haired_woman:"\u{1F469}\u200D\u{1F9B0}",red_square:"\u{1F7E5}",registered:"\xae",relaxed:"\u263A",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",reunion:"\u{1F1F7}\u200D\u{1F1EA}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",ringed_planet:"\u{1FA90}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roll_of_paper:"\u{1F9FB}",roller_coaster:"\u{1F3A2}",romania:"\u{1F1F7}\u200D\u{1F1F4}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowboat:"\u{1F6A3}",rowing_man:"\u{1F6A3}\u200D\u2642",rowing_woman:"\u{1F6A3}\u200D\u2640",ru:"\u{1F1F7}\u200D\u{1F1FA}",rugby_football:"\u{1F3C9}",runner:"\u{1F3C3}",running:"\u{1F3C3}",running_man:"\u{1F3C3}\u200D\u2642",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}\u200D\u2640",rwanda:"\u{1F1F7}\u200D\u{1F1FC}",sa:"\u{1F202}",safety_pin:"\u{1F9F7}",safety_vest:"\u{1F9BA}",sagittarius:"\u2650",sailboat:"\u26F5",sake:"\u{1F376}",salt:"\u{1F9C2}",samoa:"\u{1F1FC}\u200D\u{1F1F8}",san_marino:"\u{1F1F8}\u200D\u{1F1F2}",sandal:"\u{1F461}",sandwich:"\u{1F96A}",santa:"\u{1F385}",sao_tome_principe:"\u{1F1F8}\u200D\u{1F1F9}",sari:"\u{1F97B}",sassy_man:"\u{1F481}\u200D\u2642",sassy_woman:"\u{1F481}\u200D\u2640",satellite:"\u{1F4E1}",satisfied:"\u{1F606}",saudi_arabia:"\u{1F1F8}\u200D\u{1F1E6}",sauna_man:"\u{1F9D6}\u200D\u2642",sauna_person:"\u{1F9D6}",sauna_woman:"\u{1F9D6}\u200D\u2640",sauropod:"\u{1F995}",saxophone:"\u{1F3B7}",scarf:"\u{1F9E3}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scientist:"\u{1F9D1}\u200D\u{1F52C}",scissors:"\u2702",scorpion:"\u{1F982}",scorpius:"\u264F",scotland:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0073}\u200D\u{E0063}\u200D\u{E0074}\u200D\u{E007F}",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",senegal:"\u{1F1F8}\u200D\u{1F1F3}",serbia:"\u{1F1F7}\u200D\u{1F1F8}",service_dog:"\u{1F415}\u200D\u{1F9BA}",seven:"7\u200D\u20E3",seychelles:"\u{1F1F8}\u200D\u{1F1E8}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shit:"\u{1F4A9}",shoe:"\u{1F45E}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shorts:"\u{1FA73}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",shrug:"\u{1F937}",shushing_face:"\u{1F92B}",sierra_leone:"\u{1F1F8}\u200D\u{1F1F1}",signal_strength:"\u{1F4F6}",singapore:"\u{1F1F8}\u200D\u{1F1EC}",singer:"\u{1F9D1}\u200D\u{1F3A4}",sint_maarten:"\u{1F1F8}\u200D\u{1F1FD}",six:"6\u200D\u20E3",six_pointed_star:"\u{1F52F}",skateboard:"\u{1F6F9}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620",skunk:"\u{1F9A8}",sled:"\u{1F6F7}",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",sloth:"\u{1F9A5}",slovakia:"\u{1F1F8}\u200D\u{1F1F0}",slovenia:"\u{1F1F8}\u200D\u{1F1EE}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_face_with_three_hearts:"\u{1F970}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744",snowman:"\u26C4",snowman_with_snow:"\u2603",soap:"\u{1F9FC}",sob:"\u{1F62D}",soccer:"\u26BD",socks:"\u{1F9E6}",softball:"\u{1F94E}",solomon_islands:"\u{1F1F8}\u200D\u{1F1E7}",somalia:"\u{1F1F8}\u200D\u{1F1F4}",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",south_africa:"\u{1F1FF}\u200D\u{1F1E6}",south_georgia_south_sandwich_islands:"\u{1F1EC}\u200D\u{1F1F8}",south_sudan:"\u{1F1F8}\u200D\u{1F1F8}",space_invader:"\u{1F47E}",spades:"\u2660",spaghetti:"\u{1F35D}",sparkle:"\u2747",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",sponge:"\u{1F9FD}",spoon:"\u{1F944}",squid:"\u{1F991}",sri_lanka:"\u{1F1F1}\u200D\u{1F1F0}",st_barthelemy:"\u{1F1E7}\u200D\u{1F1F1}",st_helena:"\u{1F1F8}\u200D\u{1F1ED}",st_kitts_nevis:"\u{1F1F0}\u200D\u{1F1F3}",st_lucia:"\u{1F1F1}\u200D\u{1F1E8}",st_martin:"\u{1F1F2}\u200D\u{1F1EB}",st_pierre_miquelon:"\u{1F1F5}\u200D\u{1F1F2}",st_vincent_grenadines:"\u{1F1FB}\u200D\u{1F1E8}",stadium:"\u{1F3DF}",standing_man:"\u{1F9CD}\u200D\u2642",standing_person:"\u{1F9CD}",standing_woman:"\u{1F9CD}\u200D\u2640",star:"\u2B50",star2:"\u{1F31F}",star_and_crescent:"\u262A",star_of_david:"\u2721",star_struck:"\u{1F929}",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stethoscope:"\u{1FA7A}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",student:"\u{1F9D1}\u200D\u{1F393}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sudan:"\u{1F1F8}\u200D\u{1F1E9}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",superhero:"\u{1F9B8}",superhero_man:"\u{1F9B8}\u200D\u2642",superhero_woman:"\u{1F9B8}\u200D\u2640",supervillain:"\u{1F9B9}",supervillain_man:"\u{1F9B9}\u200D\u2642",supervillain_woman:"\u{1F9B9}\u200D\u2640",surfer:"\u{1F3C4}",surfing_man:"\u{1F3C4}\u200D\u2642",surfing_woman:"\u{1F3C4}\u200D\u2640",suriname:"\u{1F1F8}\u200D\u{1F1F7}",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",svalbard_jan_mayen:"\u{1F1F8}\u200D\u{1F1EF}",swan:"\u{1F9A2}",swaziland:"\u{1F1F8}\u200D\u{1F1FF}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweden:"\u{1F1F8}\u200D\u{1F1EA}",sweet_potato:"\u{1F360}",swim_brief:"\u{1FA72}",swimmer:"\u{1F3CA}",swimming_man:"\u{1F3CA}\u200D\u2642",swimming_woman:"\u{1F3CA}\u200D\u2640",switzerland:"\u{1F1E8}\u200D\u{1F1ED}",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syria:"\u{1F1F8}\u200D\u{1F1FE}",syringe:"\u{1F489}","t-rex":"\u{1F996}",taco:"\u{1F32E}",tada:"\u{1F389}",taiwan:"\u{1F1F9}\u200D\u{1F1FC}",tajikistan:"\u{1F1F9}\u200D\u{1F1EF}",takeout_box:"\u{1F961}",tanabata_tree:"\u{1F38B}",tangerine:"\u{1F34A}",tanzania:"\u{1F1F9}\u200D\u{1F1FF}",taurus:"\u2649",taxi:"\u{1F695}",tea:"\u{1F375}",teacher:"\u{1F9D1}\u200D\u{1F3EB}",technologist:"\u{1F9D1}\u200D\u{1F4BB}",teddy_bear:"\u{1F9F8}",telephone:"\u260E",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA",test_tube:"\u{1F9EA}",thailand:"\u{1F1F9}\u200D\u{1F1ED}",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",thread:"\u{1F9F5}",three:"3\u200D\u20E3",thumbsdown:"\u{1F44E}",thumbsup:"\u{1F44D}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",timor_leste:"\u{1F1F9}\u200D\u{1F1F1}",tipping_hand_man:"\u{1F481}\u200D\u2642",tipping_hand_person:"\u{1F481}",tipping_hand_woman:"\u{1F481}\u200D\u2640",tired_face:"\u{1F62B}",tm:"\u2122",togo:"\u{1F1F9}\u200D\u{1F1EC}",toilet:"\u{1F6BD}",tokelau:"\u{1F1F9}\u200D\u{1F1F0}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tonga:"\u{1F1F9}\u200D\u{1F1F4}",tongue:"\u{1F445}",toolbox:"\u{1F9F0}",tooth:"\u{1F9B7}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",tr:"\u{1F1F9}\u200D\u{1F1F7}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",trinidad_tobago:"\u{1F1F9}\u200D\u{1F1F9}",tristan_da_cunha:"\u{1F1F9}\u200D\u{1F1E6}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tshirt:"\u{1F455}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",tunisia:"\u{1F1F9}\u200D\u{1F1F3}",turkey:"\u{1F983}",turkmenistan:"\u{1F1F9}\u200D\u{1F1F2}",turks_caicos_islands:"\u{1F1F9}\u200D\u{1F1E8}",turtle:"\u{1F422}",tuvalu:"\u{1F1F9}\u200D\u{1F1FB}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two:"2\u200D\u20E3",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}",u6708:"\u{1F237}",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",uganda:"\u{1F1FA}\u200D\u{1F1EC}",uk:"\u{1F1EC}\u200D\u{1F1E7}",ukraine:"\u{1F1FA}\u200D\u{1F1E6}",umbrella:"\u2614",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",united_arab_emirates:"\u{1F1E6}\u200D\u{1F1EA}",united_nations:"\u{1F1FA}\u200D\u{1F1F3}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",uruguay:"\u{1F1FA}\u200D\u{1F1FE}",us:"\u{1F1FA}\u200D\u{1F1F8}",us_outlying_islands:"\u{1F1FA}\u200D\u{1F1F2}",us_virgin_islands:"\u{1F1FB}\u200D\u{1F1EE}",uzbekistan:"\u{1F1FA}\u200D\u{1F1FF}",v:"\u270C",vampire:"\u{1F9DB}",vampire_man:"\u{1F9DB}\u200D\u2642",vampire_woman:"\u{1F9DB}\u200D\u2640",vanuatu:"\u{1F1FB}\u200D\u{1F1FA}",vatican_city:"\u{1F1FB}\u200D\u{1F1E6}",venezuela:"\u{1F1FB}\u200D\u{1F1EA}",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",vietnam:"\u{1F1FB}\u200D\u{1F1F3}",violin:"\u{1F3BB}",virgo:"\u264D",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vomiting_face:"\u{1F92E}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",waffle:"\u{1F9C7}",wales:"\u{1F3F4}\u200D\u{E0067}\u200D\u{E0062}\u200D\u{E0077}\u200D\u{E006C}\u200D\u{E0073}\u200D\u{E007F}",walking:"\u{1F6B6}",walking_man:"\u{1F6B6}\u200D\u2642",walking_woman:"\u{1F6B6}\u200D\u2640",wallis_futuna:"\u{1F1FC}\u200D\u{1F1EB}",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0",wastebasket:"\u{1F5D1}",watch:"\u231A",water_buffalo:"\u{1F403}",water_polo:"\u{1F93D}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030",waxing_crescent_moon:"\u{1F312}",waxing_gibbous_moon:"\u{1F314}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting:"\u{1F3CB}",weight_lifting_man:"\u{1F3CB}\u200D\u2642",weight_lifting_woman:"\u{1F3CB}\u200D\u2640",western_sahara:"\u{1F1EA}\u200D\u{1F1ED}",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638",wheelchair:"\u267F",white_check_mark:"\u2705",white_circle:"\u26AA",white_flag:"\u{1F3F3}",white_flower:"\u{1F4AE}",white_haired_man:"\u{1F468}\u200D\u{1F9B3}",white_haired_woman:"\u{1F469}\u200D\u{1F9B3}",white_heart:"\u{1F90D}",white_large_square:"\u2B1C",white_medium_small_square:"\u25FD",white_medium_square:"\u25FB",white_small_square:"\u25AB",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}\u200D\u{1F3A8}",woman_astronaut:"\u{1F469}\u200D\u{1F680}",woman_cartwheeling:"\u{1F938}\u200D\u2640",woman_cook:"\u{1F469}\u200D\u{1F373}",woman_dancing:"\u{1F483}",woman_facepalming:"\u{1F926}\u200D\u2640",woman_factory_worker:"\u{1F469}\u200D\u{1F3ED}",woman_farmer:"\u{1F469}\u200D\u{1F33E}",woman_firefighter:"\u{1F469}\u200D\u{1F692}",woman_health_worker:"\u{1F469}\u200D\u2695",woman_in_manual_wheelchair:"\u{1F469}\u200D\u{1F9BD}",woman_in_motorized_wheelchair:"\u{1F469}\u200D\u{1F9BC}",woman_judge:"\u{1F469}\u200D\u2696",woman_juggling:"\u{1F939}\u200D\u2640",woman_mechanic:"\u{1F469}\u200D\u{1F527}",woman_office_worker:"\u{1F469}\u200D\u{1F4BC}",woman_pilot:"\u{1F469}\u200D\u2708",woman_playing_handball:"\u{1F93E}\u200D\u2640",woman_playing_water_polo:"\u{1F93D}\u200D\u2640",woman_scientist:"\u{1F469}\u200D\u{1F52C}",woman_shrugging:"\u{1F937}\u200D\u2640",woman_singer:"\u{1F469}\u200D\u{1F3A4}",woman_student:"\u{1F469}\u200D\u{1F393}",woman_teacher:"\u{1F469}\u200D\u{1F3EB}",woman_technologist:"\u{1F469}\u200D\u{1F4BB}",woman_with_headscarf:"\u{1F9D5}",woman_with_probing_cane:"\u{1F469}\u200D\u{1F9AF}",woman_with_turban:"\u{1F473}\u200D\u2640",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}\u200D\u2640",womens:"\u{1F6BA}",woozy_face:"\u{1F974}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",wrestling:"\u{1F93C}",writing_hand:"\u270D",x:"\u274C",yarn:"\u{1F9F6}",yawning_face:"\u{1F971}",yellow_circle:"\u{1F7E1}",yellow_heart:"\u{1F49B}",yellow_square:"\u{1F7E8}",yemen:"\u{1F1FE}\u200D\u{1F1EA}",yen:"\u{1F4B4}",yin_yang:"\u262F",yo_yo:"\u{1FA80}",yum:"\u{1F60B}",zambia:"\u{1F1FF}\u200D\u{1F1F2}",zany_face:"\u{1F92A}",zap:"\u26A1",zebra:"\u{1F993}",zero:"0\u200D\u20E3",zimbabwe:"\u{1F1FF}\u200D\u{1F1FC}",zipper_mouth_face:"\u{1F910}",zombie:"\u{1F9DF}",zombie_man:"\u{1F9DF}\u200D\u2642",zombie_woman:"\u{1F9DF}\u200D\u2640",zzz:"\u{1F4A4}"},yp=RegExp(Object.keys(ym).map(e=>`:${(0,ou.Z)(e)}:`).join("|"),"g"),yf=e=>yp.test(e)?e.replace(yp,e=>ym[e.substring(1,e.length-1)]??e):e,yh=(e,{isPropUpdateDisabled:t=!1,isEqual:r=Object.is}={})=>{let[a,n]=(0,H.useState)(e),[i,l]=(0,H.useState)(e),s=e instanceof Function?e():e;return t||r(i,s)||(l(s),n(s)),[a,n]},yg={None:"none",Successful:"successful",Failed:"failed"},yy=({initialValue:e,commitFn:t})=>{let[r,a]=yh(e),[n,i]=(0,H.useState)(!1),[l,s]=(0,H.useState)(yg.None),o=(0,H.useCallback)(()=>{a(e),i(!1)},[a,i,e]),d=(0,H.useCallback)(async()=>{if(!n)return;let e=r.trim();if(0===e.length){s(yg.Failed);return}a(e);try{await t(yf(e)),s(yg.Successful)}catch{s(yg.Failed)}i(!1)},[n,r,a,t]),u=(0,H.useCallback)(e=>{i(!0),s(yg.None),a(yf(e.target.value))},[a,i]),c=(0,H.useCallback)(e=>{switch(s(yg.None),e.key){case"Enter":d();break;case"Escape":n&&e.stopPropagation(),o()}},[d,o,n]),m=(0,yc.u)(c),p=(0,H.useCallback)(()=>{document.hasFocus()&&d()},[d]);return{localValue:r,setLocalValue:a,isSuccess:l===yg.Successful,isError:l===yg.Failed,inputProps:{onChange:u,onBlur:p,...m}}},yx={bg:"danger.subtle",borderColor:"danger.fg",color:"danger.fg"},yb=e=>(0,O.jsx)(eO.Z,{sx:{padding:"8px 16px",borderWidth:"1px",borderStyle:"solid",borderRadius:"6px",fontSize:"14px",lineHeight:"20px",...yx},...e}),yv=e=>(0,O.jsx)(yu.Z,{sx:{marginTop:"16px",padding:"8px 6px",borderRadius:"6px",fontSize:"12px",lineHeight:"18px",...yx},...e}),yw=({message:e=rI.genericErrorMessage,caret:t,testId:r="error-state-message-box"})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{sx:{flexBasis:"100%"}}),(0,O.jsx)(t?yv:yb,{caret:t,...(0,ef.f)(r),children:e}),(0,O.jsx)(eO.Z,{sx:{flexBasis:"100%"}})]}),yj=()=>(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{ml:3,color:"success.fg"}}),yC=({status:e})=>{switch(e){case"idle":case yg.None:return(0,O.jsx)(O.Fragment,{});case"failed":case yg.Failed:return(0,O.jsx)(eZ.Z,{icon:eF.XIcon,sx:{color:"danger.fg"}});case"loading":return(0,O.jsx)(u$.Z,{size:"small"});case"succeeded":case yg.Successful:return(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{color:"success.fg"}})}},yI={borderColor:"#CB2431 !important"};try{yb.displayName||(yb.displayName="AlertStyledBox")}catch{}try{yv.displayName||(yv.displayName="ErrorStyledPointerBox")}catch{}try{yw.displayName||(yw.displayName="ErrorState")}catch{}try{yj.displayName||(yj.displayName="SuccessState")}catch{}try{yC.displayName||(yC.displayName="RequestStateIcon")}catch{}function yS({setProjectDescription:e,onSaveStats:t,editModeOff:r=!1,setHasUnsavedChanges:a,hideLabel:n}){let{hasWritePermissions:i}=i4(),{description:l,descriptionHtml:s,setDescriptionHtml:o}=r8(),{updateDescription:d}=yn(),{projectData:u}=i5(),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(l),[h,g]=(0,H.useState)(!1),[y,x]=(0,H.useState)(!1),[b,v]=(0,H.useState)(r),{isLoading:w,loadPreview:j}=yr({project:u?.id,subject_type:"Project"}),C=(0,H.useRef)(null),I=(0,H.useRef)(null),S=(0,H.useCallback)(async e=>{l?o(await j(e)):o("")},[l,j,o]),k=(0,H.useCallback)(t=>{a&&a(t!==l),f(t),e?.(t)},[l,a,e]);(0,H.useEffect)(()=>{!s&&l&&S(l)},[l,s,S]),(0,H.useEffect)(()=>{k(l)},[l,k]);let T=(0,H.useCallback)(()=>{r||((0,uU.flushSync)(()=>{v(!1)}),I.current?.focus())},[r]),N=(0,H.useCallback)(async()=>{if(!l&&!p||l===p)return T(),null;try{m(!0),g(!1),t?.(!!l),await d(p),S(p),x(!0),T(),setTimeout(()=>{x(!1)},1800)}catch(e){g(!0)}finally{m(!1)}},[l,p,T,t,d,S]),_=(0,H.useCallback)(()=>{k(l),T()},[k,l,T]),R=(0,H.useCallback)(e=>{e.target instanceof HTMLAnchorElement||((0,uU.flushSync)(()=>{v(!0)}),C.current?.focus())},[]),P=(0,H.useMemo)(()=>i&&(b||r)?y&&r?(0,O.jsxs)(eO.Z,{sx:{minHeight:"30px",display:"flex","& > svg":{ml:"auto"}},children:[(0,O.jsx)(yj,{})," ",(0,O.jsx)(eB.Z,{sx:{ml:1},children:"Saved"})]}):p===l&&r?void 0:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ye.n,{variant:"invisible",sx:{color:"fg.muted"},onClick:_,children:rL.cancelButton}),(0,O.jsx)(ye.n,{variant:"primary",onClick:N,children:rL.saveButton})]}):void 0,[i,b,r,y,p,l,_,N]);return(0,O.jsxs)(O.Fragment,{children:[r?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mb:1},children:[(0,O.jsxs)(eO.Z,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,O.jsx)(eZ.Z,{icon:eF.BookIcon,sx:{color:"fg.subtle"}}),(0,O.jsx)(eB.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:rL.readmeTitle})]}),!b&&i&&(0,O.jsx)(ys,{variant:"invisible",onClick:R,sx:{color:"fg.muted"},icon:eF.PencilIcon,label:"Edit README",tooltipDirection:"sw",ref:I,...(0,ef.f)("pencil-editor-button")})]}),!b&&!p&&(0,O.jsx)(eO.Z,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:rL.readmePlaceholder})]}),b?(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",mb:4},children:[(0,O.jsx)(g9.q,{value:p,onChange:k,disabled:!i||!b||c,placeholder:rL.readmePlaceholder,maxLength:1e4,ref:C,label:rL.readmeTitle,showLabel:!n,onPrimaryAction:N,actions:e?void 0:P,subject:u?{type:"project",id:{databaseId:u.id}}:void 0,...(0,ef.f)("markdown-editor")}),h&&(0,O.jsx)(yw,{caret:"top-left",message:rL.errorMessage})]}):!i||s||w?(0,O.jsx)(yd,{unverifiedHTML:s,loading:w}):null]})}try{yS.displayName||(yS.displayName="DescriptionEditor")}catch{}var yk=r(25132),yT=r(17791),yN=r(2214);let y_=Object.entries(ym).map(([e,t])=>({name:e,character:t})),yR=()=>{let{calculateSuggestions:e,trigger:t}=(0,yN.c)(y_??[]),r=(0,H.useMemo)(()=>[t],[t]),[a,n]=(0,H.useState)(null);return{triggers:r,suggestions:a,onShowSuggestions:async({query:t})=>{n("loading"),n(await e(t))},onHideSuggestions:()=>n(null)}},yP=()=>{let e=r8(),{setProject:t}=gl();return{updateShortDescription:(0,H.useCallback)(async r=>{r=r.trim(),e.shortDescription!==r&&t((await ya({shortDescription:r})).memexProject)},[e.shortDescription,t])}},yD=({setProjectShortDescription:e,onSaveStats:t,editModeOff:r=!1,setHasUnsavedChanges:a,hideLabel:n})=>{let{hasWritePermissions:i}=i4(),{shortDescription:l,shortDescriptionHtml:s}=r8(),{updateShortDescription:o}=yP(),[d,u]=(0,H.useState)(l),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(r),[h,g]=(0,H.useState)(!1),[y,x]=(0,H.useState)(!1),b=(0,H.useRef)(null),v=(0,H.useRef)(null);(0,H.useEffect)(()=>{u(l),a&&a(!1)},[l,a]);let w=(0,H.useCallback)(async()=>{try{g(!0),m(!1),t?.(!!l),await o(d),r||f(!1),a&&a(!1),x(!0),setTimeout(()=>{x(!1)},1800)}catch(e){m(!0)}finally{g(!1)}},[t,l,r,a,d,o]),j=(0,H.useCallback)(()=>{u(l),r||f(!1),a&&a(!1)},[a,l,r]),C=(0,H.useCallback)(()=>f(!0),[]);(0,H.useEffect)(()=>{p&&b.current&&!r&&(b.current.focus(),b.current.selectionStart=b.current.selectionEnd=b.current.value.length)},[p,r]);let I=(0,H.useCallback)(t=>{let r=t.currentTarget.value.replace(RegExp("\\s+","gs")," ");a&&a(r!==l),u(r),e?.(r)},[a,l,e]),S=yR();return(0,O.jsxs)(O.Fragment,{children:[!r&&(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",color:"fg.muted",fontSize:1,width:"100%",fontWeight:"normal",mt:3,mb:1},children:[(0,O.jsxs)(eO.Z,{sx:{width:"100%",display:"flex",alignItems:"center",minHeight:32,gap:2},children:[(0,O.jsx)(eZ.Z,{icon:eF.NoteIcon,sx:{color:"fg.subtle"}}),(0,O.jsx)(eB.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:rL.shortDescriptionTitle})]}),!p&&i&&(0,O.jsx)(ys,{variant:"invisible",onClick:C,sx:{color:"fg.muted"},icon:eF.PencilIcon,label:"Edit short description",ref:v,tooltipDirection:"sw",...(0,ef.f)("description-editor-edit")})]}),p?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{visuallyHidden:n,children:rL.shortDescriptionTitle}),(0,O.jsx)(yk.F,{...S,sx:{width:r?415:"100%"},children:(0,O.jsx)(yT.ZP,{ref:b,placeholder:rL.shortDescriptionPlaceholder,onChange:I,maxLength:300,value:d,...(0,ef.f)("description-editor")})})]}),!e&&(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"row-reverse",mt:2,width:r?415:"100%",minHeight:"30px"},...(0,ef.f)("readme-editor-buttons"),children:y&&r?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{sx:{ml:1},children:"Saved"})," ",(0,O.jsx)(yj,{})]}):d===l&&r?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cd.r,{variant:"primary",size:"small",sx:{ml:2},onClick:w,disabled:h,children:rL.saveButton}),(0,O.jsx)(cd.r,{variant:"invisible",size:"small",sx:{color:"fg.muted"},onClick:j,disabled:h,children:rL.cancelButton})]})}),c&&(0,O.jsx)(yw,{caret:"top-left",message:rL.errorMessage})]}):(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",mb:4},children:s?(0,O.jsx)(u5,{children:s}):(0,O.jsx)(eO.Z,{sx:{wordBreak:"break-word",whiteSpace:"normal",textAlign:"start",fontSize:12},children:rL.shortDescriptionPlaceholder})})]})};try{yD.displayName||(yD.displayName="ShortDescriptionEditor")}catch{}let yE=(0,H.createContext)(null);function yA(){let e=(0,H.useContext)(yE);if(!e)throw Error("useStatusUpdates must be used within a StatusUpdatesContext.Provider.");return e}let yM=(0,H.createContext)(null);function yL(){let e=(0,H.useContext)(yM);if(!e)throw Error("useStatusUpdatesEditorState must be used within a StatusUpdatesEditorStateContext.Provider.");return e}let yF={UPDATE_STATUS:"UPDATE_STATUS",UPDATE_BODY:"UPDATE_BODY",UPDATE_START_DATE:"UPDATE_START_DATE",UPDATE_TARGET_DATE:"UPDATE_TARGET_DATE",SET_STATUS_UPDATE:"SET_STATUS_UPDATE",CLEAR_STATUS_UPDATE:"CLEAR_STATUS_UPDATE"},yZ=(e,{type:t,payload:r})=>{let a=e[r.id];switch(t){case yF.UPDATE_BODY:if(!a)return e;return{...e,[r.id]:{...a,body:r.body}};case yF.UPDATE_START_DATE:if(!a)return e;return{...e,[r.id]:{...a,startDate:r.date}};case yF.UPDATE_STATUS:if(!a)return e;return{...e,[r.id]:{...a,status:r.status}};case yF.UPDATE_TARGET_DATE:if(!a)return e;return{...e,[r.id]:{...a,targetDate:r.date}};case yF.SET_STATUS_UPDATE:return{...e,[r.id]:r};case yF.CLEAR_STATUS_UPDATE:{let{[r.id]:t,...a}=e;return a}}},yO=()=>{let[e,t]=(0,H.useReducer)(yZ,{});return{statusUpdateDrafts:e,statusUpdateDraftsDispatch:t}};var yV=r(40210),yB=r(53534);let y$={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},yz=({defaultStatus:e,onChange:t,options:r})=>{let[a,n]=(0,H.useState)(""),[i,l]=(0,H.useState)(e??null),s=r.filter(e=>e.name.toLowerCase().indexOf(a.toLowerCase())>=0),o=(0,H.useCallback)(e=>e.id,[]),d=(0,H.useCallback)(([e])=>{l(e??null),t(e??null)},[t]),u=(0,H.useCallback)(e=>({id:e.id,description:e.description,descriptionVariant:"block",text:e.name,source:e,leadingVisual:()=>(0,O.jsx)(mu,{color:e.color})}),[]),c=(0,H.useRef)(null),m=(0,H.useCallback)(e=>(0,O.jsx)(yB.J,{anchorProps:e,readonly:!1,anchorText:rK.statusFieldLabel,sharedPickerMainValue:i?i.name:null,leadingIconElement:i?(0,O.jsx)(mu,{color:i.color}):null,ariaLabel:rK.statusPickerAriaLabel,ref:c,leadingIcon:eF.SingleSelectIcon}),[i]);return(0,O.jsx)(eO.Z,{sx:y$,...(0,ef.f)("status-updates-status-picker"),children:(0,O.jsx)(yV.H,{items:s,initialSelectedItems:i?[i]:[],filterItems:n,getItemKey:o,convertToItemProps:u,placeholderText:rK.statusPickerFilterPlaceholderText,selectionVariant:"single",onSelectionChange:d,renderAnchor:m,resultListAriaLabel:rK.statusPickerResultsAriaLabel,title:rK.statusPickerTitle,selectPanelRef:c})})};try{yz.displayName||(yz.displayName="StatusPicker")}catch{}var yW=r(686);let yG=({leadingIcon:e,hotKey:t,label:r,anchorProps:a,readonly:n,nested:i,ariaLabelledBy:l})=>{let s={"aria-disabled":n,disabled:n,"aria-labelledby":l};return i?(0,O.jsxs)(mx.S.Item,{...a,...s,role:"menuitem",children:[e&&(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e,{})}),r]}):(0,O.jsx)(cd.r,{sx:{borderStyle:"dashed",fontWeight:"normal",color:"fg.muted"},size:"small",leadingVisual:e,trailingVisual:t?()=>(0,O.jsx)(eO.Z,{sx:{color:"fg.muted",borderWidth:1,borderStyle:"solid",borderColor:"border.default",p:"0px 4px",borderRadius:"6px"},children:t}):void 0,...s,...a,children:r})};try{yG.displayName||(yG.displayName="SharedEmptyPicker")}catch{}var yU=r(80803);let yH={display:"flex",flexDirection:"row",flexWrap:"wrap",gap:1},yq=({defaultDate:e,onChange:t,testId:r,icon:a,label:n,ariaLabel:i})=>{let[l,s]=(0,H.useState)(e??null),o=(0,H.useCallback)(e=>{s(e?new Date((0,yU.c)(e,{representation:"date"})):null),t(e)},[t]),d=(0,H.useCallback)(e=>l?(0,O.jsx)(cd.r,{size:"small",...e,"aria-label":i,"aria-disabled":!1,disabled:!1,children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[(0,O.jsx)(eO.Z,{sx:{color:"fg.muted",fontWeight:"normal"},children:n}),(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center","> *:not(:last-child)":{mr:"-3px"}},children:(0,O.jsx)(eZ.Z,{icon:a})}),(0,O.jsx)(eO.Z,{sx:{fontWeight:"bold"},children:tX(l)})]})}):(0,O.jsx)(yG,{label:n,leadingIcon:a,anchorProps:e}),[i,a,n,l]);return(0,O.jsx)(eO.Z,{sx:yH,...(0,ef.f)(r),children:(0,O.jsx)(yW.DatePicker,{onChange:o,value:l,showClearButton:!0,showTodayButton:!1,anchor:d})})};try{yq.displayName||(yq.displayName="StatusUpdateDatePicker")}catch{}let yK=e=>({status:e.statusValue.statusId,startDate:e.statusValue.startDate,targetDate:e.statusValue.targetDate,body:e.body.trim()?e.body:null}),yQ=(e,t)=>{let r=[];for(let a of["status","startDate","targetDate","body"])t[a]!==e[a]&&r.push(a);return r},yX=({statusUpdate:e})=>{let{hasWritePermissions:t}=i4(),{memexStatusItems:r,statusOptions:a,addStatusUpdate:n,updateStatusUpdate:i}=yA(),{projectData:l}=i5(),{statusUpdateDraftsDispatch:s}=yL(),{postStats:o}=os(),[d,u]=(0,H.useState)(""),{addToast:c}=e9(),m=(0,H.useRef)(null);(0,H.useEffect)(()=>{d&&m.current&&m.current.focus()},[d]);let p=(0,H.useCallback)(async()=>{if(t){u("");try{let t={id:e.id,status:e.status?.name,hasStartDate:!!e.startDate,hasTargetDate:!!e.targetDate,hasBody:!!e.body.trim(),modifiedFields:{}};if(0===e.id)await n(e),o({name:"status_update_create",context:JSON.stringify(t)});else{let a=await i(e),n=yK(a),l=r.find(t=>t.id===e.id),s=l?yK(l):{};t.modifiedFields=yQ(n,s),o({name:"status_update_update",context:JSON.stringify(t)})}s({type:yF.CLEAR_STATUS_UPDATE,payload:{id:e.id}})}catch(e){e instanceof api_error_ApiError&&422===e.status?u(e.message):c({type:"error",message:"Unable to save. Something went wrong."})}}},[n,c,t,o,e,s,i,r]),f=(0,H.useCallback)(()=>{s({type:yF.CLEAR_STATUS_UPDATE,payload:{id:e.id}})},[e.id,s]),h=(0,H.useCallback)(t=>{s({type:yF.UPDATE_BODY,payload:{id:e.id,body:t}})},[e.id,s]),g=(0,H.useCallback)(t=>{s({type:yF.UPDATE_STATUS,payload:{id:e.id,status:t}})},[e.id,s]),y=(0,H.useCallback)(t=>{s({type:yF.UPDATE_START_DATE,payload:{id:e.id,date:t}})},[e.id,s]),x=(0,H.useCallback)(t=>{s({type:yF.UPDATE_TARGET_DATE,payload:{id:e.id,date:t}})},[e.id,s]);return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[d&&(0,O.jsxs)(ut.Z,{variant:"danger",sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},"aria-live":"polite",children:[(0,O.jsxs)("span",{children:["Unable to save: ",d]}),(0,O.jsx)(mq.h,{icon:eF.XIcon,"aria-label":"Dismiss flash message",ref:m,variant:"invisible",onClick:()=>{u("")}})]}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,O.jsx)(yz,{defaultStatus:e.status,onChange:g,options:a}),(0,O.jsx)(yq,{ariaLabel:rK.startDatePickerAriaLabel,defaultDate:e.startDate,icon:eF.CalendarIcon,label:rK.startDateFieldLabel,onChange:y,testId:"status-updates-start-date-picker"}),(0,O.jsx)(yq,{ariaLabel:rK.targetDatePickerAriaLabel,defaultDate:e.targetDate,icon:eF.RocketIcon,label:rK.targetDateFieldLabel,onChange:x,testId:"status-updates-target-date-picker"})]}),(0,O.jsx)(eO.Z,{sx:{width:"100%"},...(0,ef.f)("status-updates-markdown-editor"),children:(0,O.jsx)(g9.q,{value:e.body,onChange:h,subject:l?{type:"project",id:{databaseId:l.id}}:void 0})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,O.jsx)(ye.n,{size:"medium",onClick:f,...(0,ef.f)("status-update-cancel-button"),children:rK.cancelUpdateButtonText}),(0,O.jsx)(ye.n,{size:"medium",variant:"primary",onClick:p,...(0,ef.f)("status-update-save-button"),children:rK.saveUpdateButtonText})]})]})};try{yX.displayName||(yX.displayName="StatusUpdateEditor")}catch{}var yY=r(24178),yJ=r(84817);let y0=(0,H.forwardRef)(({option:e,onClick:t,sx:r,...a},n)=>{let i=!!t,l=(0,tt.L7)(e.color),s="nameHtml"in e?e.nameHtml:e.name;return(0,O.jsx)(yJ.Z,{sx:{bg:l.bg,color:l.fg,borderColor:l.border,cursor:i?"pointer":"default",":hover":{bg:l.bg,color:i?l.accent:l.fg,borderColor:l.border,boxShadow:i?void 0:"none"},...r},ref:n,onClick:e=>{e.target instanceof HTMLAnchorElement?e.stopPropagation():t?.(e)},text:(0,O.jsx)(u5,{children:s}),...(0,ef.f)("single-select-token"),...a})});y0.displayName="SingleSelectToken";let y1={display:"flex",flexDirection:"row",alignItems:"center",gap:3,width:"100%",lineHeight:"32px"},y2=({label:e,icon:t,children:r,testId:a})=>(0,O.jsxs)(eO.Z,{sx:y1,children:[(0,O.jsxs)(eB.Z,{as:"p",sx:{fontSize:14,marginBottom:0,wordBreak:"break-word",width:"122px",flexShrink:0,ml:3,color:"fg.muted"},children:[(0,O.jsx)(eZ.Z,{icon:t,sx:{color:"fg.subtle",mr:2}}),e,":"]}),(0,O.jsx)(eO.Z,{...(0,ef.f)(`status-update-item-value-${a}`),sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,fontSize:14},children:r})]}),y5={flexGrow:1,width:"100%",minWidth:0,my:2},y3=({status:e})=>{let{startDate:t,targetDate:r,status:a}=e.statusValue,{bodyHtml:n}=e,i=!!t||!!r||!!a;return(0,O.jsxs)(eO.Z,{sx:y5,children:[t&&(0,O.jsx)(y2,{label:"Start date",icon:eF.CalendarIcon,testId:"start-date",children:tY(new Date(t))}),r&&(0,O.jsx)(y2,{label:"Target date",icon:eF.RocketIcon,testId:"target-date",children:tY(new Date(r))}),e&&a&&(0,O.jsx)(y2,{label:"Status",icon:eF.SingleSelectIcon,testId:"status",children:(0,O.jsx)(y0,{option:a})}),n&&(0,O.jsx)(eO.Z,{sx:{px:3,pt:i?2:1,pb:1},...(0,ef.f)("status-update-item-value-body"),children:(0,O.jsx)(yd,{unverifiedHTML:n,loading:!1})})]})};try{y2.displayName||(y2.displayName="ItemDetailsRow")}catch{}try{y3.displayName||(y3.displayName="StatusUpdateItemBody")}catch{}var y4=r(22326),y8=r(63309),y6=r(47001);let y7=({creator:e,children:t})=>(0,O.jsx)(uB.Z,{href:`/${e.login}`,"data-hovercard-url":(0,y4.zP)({owner:e.login}),sx:{color:"fg.default",fontWeight:500},children:t}),y9=({status:e,handleOnEditClick:t})=>{let{deleteStatusUpdate:r}=yA(),{hasWritePermissions:a}=i4(),n=(0,H.useRef)(null),i=(0,at.N)(),{postStats:l}=os(),{loggedInUser:s}=i5(),o=(0,H.useCallback)(async()=>{a&&await i({title:rK.confirmDeleteTitle,content:rK.confirmDeleteBody,confirmButtonType:"danger",confirmButtonContent:"Delete"})&&(r(e.id),l({name:"status_update_destroy",context:JSON.stringify({id:e.id})}))},[i,r,a,l,e.id]),d=(0,H.useCallback)(()=>{t()},[t]),u=(0,H.useCallback)(()=>{try{let{origin:t,pathname:r}=window.location,a=`${t}${r}?pane=info&statusUpdateId=${e.id}`;navigator.clipboard.writeText(a)}catch(e){}},[e.id]);return(0,O.jsx)(eO.Z,{sx:{gap:1,pl:[0,3,3],pr:2,display:"flex",flexGrow:1,flexDirection:"row",justifyContent:"flex-end"},children:(0,O.jsxs)(fj.P,{anchorRef:n,children:[(0,O.jsx)(fj.P.Anchor,{...(0,ef.f)("status-updates-item-options-menu-button"),children:(0,O.jsx)(mq.h,{variant:"invisible","aria-label":"Status update options",icon:eF.KebabHorizontalIcon,size:"medium"})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsxs)(mx.S,{...(0,ef.f)("status-updates-item-options-menu"),children:[(0,O.jsxs)(mx.S.Item,{role:"menuitem",as:"button",onSelect:u,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.LinkIcon,{})}),"Copy link"]},"statusUpdateItemOptionCopy"),a&&(!s?.isSpammy||s?.isSpammy&&e.creator.login===s?.login)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(mx.S.Item,{role:"menuitem",as:"button",onClick:d,...(0,ef.f)("status-update-menu-edit-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PencilIcon,{})}),"Edit"]},"statusUpdateItemOptionEdit"),(0,O.jsxs)(mx.S.Item,{role:"menuitem",as:"button",variant:"danger",onSelect:o,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete"]},"statusUpdateItemOptionDelete")]})]})})]},"status-option-menu")})},xe={backgroundColor:"canvas.subtle",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottom:"1px solid",borderBottomColor:"border.muted",color:"fg.muted",display:"flex",flexDirection:"row",flex:1,fontSize:1,gap:0,py:1,flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:"41px"},xt=({status:e,handleOnEditClick:t})=>{let{creator:r,updatedAt:a}=e,{loggedInUser:n}=i5();return(0,O.jsxs)(eO.Z,{sx:xe,children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",px:2,flexGrow:1,flexShrink:1,flexDirection:"row",gap:2,alignItems:"center",overflow:"hidden",textOverflow:"ellipsis"},children:[(0,O.jsx)(eO.Z,{sx:{display:"block"},children:(0,O.jsx)(y7,{creator:r,children:(0,O.jsx)(mo.O,{src:r.avatarUrl,size:24,sx:{mr:1},alt:`@${r.login}`})})}),(0,O.jsxs)(eO.Z,{as:"h3",sx:{display:"flex",flexDirection:["column","column","row","row"],flexWrap:"wrap",columnGap:1,overflow:"hidden",fontSize:"unset",fontWeight:"unset",margin:"unset"},children:[(0,O.jsx)(y7,{creator:r,children:r.login}),e.userHidden&&n?.login!==r.login&&(0,O.jsx)(y8.Z,{variant:"danger",children:"Spammy"}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:1,fontSize:[0,1,1,1],overflow:"hidden",textOverflow:"ellipsis"},children:[(0,O.jsx)(eB.Z,{sx:{fontSize:"inherit",whiteSpace:"nowrap",display:["none","inline","inline","inline"]},children:"updated"}),(0,O.jsx)(uB.Z,{href:`?pane=info&statusUpdateId=${e.id}`,sx:{color:"fg.muted"},children:(0,O.jsx)(y6.Z,{sx:{fontSize:"inherit"},datetime:a})})]})]})]}),(0,O.jsx)(y9,{status:e,handleOnEditClick:t})]})};try{y7.displayName||(y7.displayName="CreatorLink")}catch{}try{y9.displayName||(y9.displayName="ItemOptions")}catch{}try{xt.displayName||(xt.displayName="StatusUpdateItemHeader")}catch{}let xr={border:"1px solid",borderColor:"border.muted",boxShadow:"shadow.small",borderRadius:2,flexGrow:1,width:"100%",minWidth:0,mt:3},xa={borderColor:"accent.fg",boxShadow:e=>`0 0 0 1px ${e.colors.accent.fg}`},xn={mt:3},xi=({status:e})=>{let{statusUpdateDrafts:t,statusUpdateDraftsDispatch:r}=yL(),{statusUpdateIdParam:a}=yA(),[n,i]=lG(),[l,s]=(0,H.useState)(a===String(e.id)),o=(0,H.useRef)(null),d=t[e.id],u=(0,H.useCallback)(()=>{l&&(s(!1),i(e=>(e.get(lv)&&e.delete(lv),e)))},[l,i]);return(0,yY.t)({onClickOutside:u,containerRef:o}),(0,H.useEffect)(()=>{l&&o.current&&o?.current?.scrollIntoView()},[l,o]),(0,O.jsx)("div",{children:d?(0,O.jsx)(eO.Z,{role:"listitem",sx:xn,ref:o,...(0,ef.f)("status-updates-item-container"),children:(0,O.jsx)(yX,{statusUpdate:d})}):(0,O.jsxs)(eO.Z,{role:"listitem",ref:o,sx:{...xr,...l?xa:{}},"aria-current":l,...(0,ef.f)(`status-update-item-${e.id}`),children:[(0,O.jsx)(xt,{status:e,handleOnEditClick:()=>{let{startDate:t,targetDate:a,status:n}=e.statusValue;r({type:yF.SET_STATUS_UPDATE,payload:{...e,startDate:t?new Date(t):null,targetDate:a?new Date(a):null,status:n}})}}),(0,O.jsx)(y3,{status:e})]})})};try{xi.displayName||(xi.displayName="StatusUpdateItem")}catch{}let xl=(0,H.createContext)(null);function xs(){let e=(0,H.useContext)(xl);if(!e)throw Error("useNotificationSubscriptions must be used within a StatusUpdatesContext.Provider.");return e}let xo=()=>{let{viewerIsSubscribed:e,subscribe:t,unsubscribe:r,isLoading:a}=xs(),n=e?rK.unsubscribeFromUpdates:rK.subscribeToUpdates,i=(0,H.useCallback)(async()=>{e?r():t()},[t,r,e]),l=e?eF.BellSlashIcon:eF.BellIcon;return(0,O.jsx)(fC.Z,{...(0,ef.f)("notification-subscriptions-toggle-tooltip"),"aria-label":n,direction:"s",children:(0,O.jsx)(cd.r,{...(0,ef.f)("notification-subscriptions-toggle"),disabled:a,onClick:i,leadingVisual:l,children:e?"Unsubscribe":"Subscribe"})})};try{xo.displayName||(xo.displayName="NotificationSubscriptionsToggle")}catch{}let xd={width:"100%",display:"flex",minHeight:32,justifyContent:"space-between"},xu={display:"flex",flexDirection:"column",gap:2,alignItems:"center",border:e=>`1px solid ${e.colors.border.default}`,padding:"32px 16px",borderRadius:2};function xc(){let{memexStatusItems:e,isLoading:t}=yA(),{statusUpdateDraftsDispatch:r}=yL(),{hasWritePermissions:a,isLoggedIn:n}=i4(),{memex_status_updates_notifications:i}=n9(),l=0!==e.length,s=(0,H.useCallback)(()=>{let[t]=e;if(!t)return r({type:yF.SET_STATUS_UPDATE,payload:{id:0,body:"",startDate:null,targetDate:null,status:null}});let a=t.statusValue.startDate?new Date(t.statusValue.startDate):null,n=t.statusValue.targetDate?new Date(t.statusValue.targetDate):null;r({type:yF.SET_STATUS_UPDATE,payload:{id:0,body:"",startDate:a,targetDate:n,status:t.statusValue?.status??null}})},[e,r]);return l||t?(0,O.jsxs)(eO.Z,{...(0,ef.f)("status-updates-default-state-header"),sx:xd,children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,O.jsx)(eZ.Z,{icon:eF.PulseIcon,sx:{color:"fg.subtle"}}),(0,O.jsx)(eB.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:rK.title})]}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:2},children:[i&&n&&(0,O.jsx)(xo,{}),a&&(0,O.jsx)(cd.r,{variant:"primary",onClick:s,...(0,ef.f)("status-updates-create-button"),children:rK.addUpdateButtonText})]})]}):a?(0,O.jsxs)(eO.Z,{...(0,ef.f)("status-updates-empty-state-header"),sx:xu,children:[(0,O.jsx)(eZ.Z,{icon:eF.PulseIcon,size:"medium"}),(0,O.jsx)(eB.Z,{as:"h3",sx:{fontSize:20,fontWeight:"bold",color:"fg.default"},children:rK.nullStateTitle}),(0,O.jsx)(eB.Z,{sx:{fontSize:14,color:"fg.muted",textAlign:"center"},children:rK.description}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",marginTop:3,gap:3},children:[(0,O.jsx)(cd.r,{variant:"primary",onClick:s,...(0,ef.f)("status-updates-create-button"),children:rK.addUpdateButtonText}),(0,O.jsx)(uB.Z,{href:"https://gh.io/status-updates-learn-more",style:{cursor:"pointer",marginLeft:"8px"},tabIndex:0,target:"_blank",...(0,ef.f)("status-updates-learn-more-link"),children:rK.learnMoreLinkText})]})]}):null}try{xc.displayName||(xc.displayName="StatusUpdatesHeader")}catch{}let xm={display:"flex",flexDirection:"column",flex:"auto",borderTop:"1px solid",borderColor:"border.muted",pt:4,mt:3,width:"100%"},xp=(0,H.memo)(function(){let{memexStatusItems:e,isLoading:t}=yA(),{statusUpdateDrafts:r}=yL(),a=r[0],n=!!a;return(0,O.jsxs)(eO.Z,{...(0,ef.f)("status-updates-container"),sx:xm,children:[n&&a?(0,O.jsxs)(eO.Z,{...(0,ef.f)("status-updates-create-container"),sx:{display:"flex",flexDirection:"column",width:"100%",gap:3},children:[(0,O.jsx)(eB.Z,{as:"h3",sx:{fontSize:14,fontWeight:"bold",color:"fg.default"},children:rK.addUpdateTitle}),(0,O.jsx)(yX,{statusUpdate:a})]}):(0,O.jsx)(xc,{}),t?(0,O.jsx)(cQ.o,{sx:{width:"100%",height:"32px",mb:3,mt:3},variant:"rounded",height:"md"}):(0,O.jsx)(eO.Z,{as:"section",role:"list",sx:{listStyleType:"none",mb:3},...(0,ef.f)("status-updates-item-list"),children:e.map(e=>(0,O.jsx)(xi,{status:e},e.id))})]})});try{xp.displayName||(xp.displayName="StatusUpdates")}catch{}var xf=r(14643),xh=r(44459),xg=r(10818);let xy="- [ ] Add a draft title or issue reference here",xx=(e,t=!0)=>`\`\`\`[tasklist]
${t?"### Tasks":""}${e?"\n":""}${e}
\`\`\``,xb=({editedBody:e,onChangeBody:t,isTextButton:r=!1,loading:a=!1,tasklistContent:n=xy})=>{let i=()=>{let r=n,a=!0,i=document.activeElement;if(!i||!(i instanceof HTMLTextAreaElement)){let a=xx(r);t(`${e?`${e}
`:""}${a}`);return}let l=i.selectionStart||0,s=i.selectionEnd||0;l!==s&&(r=e.slice(l,s),a=!(0,xg.I)(r),r=(0,xg.t)(r));let o=e&&l?`${e.slice(0,l)}
`:"",d=e?`
${e.slice(s)}`:"",u=xx(r,a);(0,uU.flushSync)(()=>{t(`${o}${u}${d}`)});let c=l+u.length+1;i.selectionStart=c,i.selectionEnd=c};return(0,O.jsx)(eO.Z,{sx:{position:"relative"},children:r?a?(0,O.jsx)(cd.r,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2,display:"flex",alignItems:"center"},disabled:!0,children:(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",display:"flex"},children:[(0,O.jsx)(u$.Z,{size:"small",sx:{marginRight:1}}),"Adding tasklist..."]})}):(0,O.jsx)(cd.r,{size:"small",sx:{borderRadius:20,px:2,boxShadow:"none",marginRight:2},className:"js-add-tasklist-button",leadingVisual:eF.PlusIcon,onClick:i,...(0,ef.f)("add-tasklist-text-button"),children:"Add tasklist"}):(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(mq.h,{size:"small",icon:eF.ChecklistIcon,"aria-label":"Add a tasklist",onClick:i,...(0,ef.f)("add-tasklist-button")})})})};var xv=r(26935),xw=r(17840),xj=r(2708);let xC=({reactions:e,onReact:t})=>{let{loggedInUser:r}=i5(),a=r?.login||"",n=Object.values(lI).map(t=>[t,e[t]??[]]),i=new Set(n.filter(([,e])=>e?.includes(a)??!1).map(([e])=>e)),l=void 0===t,s=e=>t?.(e,i.has(e),a),{containerRef:o}=(0,xw.v)({bindKeys:xv.Qw.HomeAndEnd|xv.Qw.ArrowHorizontal,focusOutBehavior:"wrap"});return(0,O.jsxs)(eO.Z,{role:"toolbar","aria-label":"Reactions",ref:o,sx:{display:"flex",gap:1,flexWrap:"wrap"},...(0,ef.f)("reactions-toolbar"),children:[!l&&(0,O.jsx)(xI,{onReact:s,reactedReactions:i}),n.map(([e,t])=>(0,O.jsx)(xS,{reaction:e,reactedUsers:t,reacted:i.has(e),onClick:()=>s(e),disabled:l},e))]})},xI=({onReact:e,reactedReactions:t})=>{let[r,a]=(0,H.useState)(!1),{containerRef:n}=(0,xw.v)(),i=t=>{a(!1),e(t)};return(0,O.jsx)(xj.w,{open:r,onOpen:()=>a(!0),onClose:()=>a(!1),anchorRef:n,focusZoneSettings:{bindKeys:xv.Qw.ArrowAll|xv.Qw.HomeAndEnd,focusOutBehavior:"wrap"},renderAnchor:e=>(0,O.jsx)(mq.h,{size:"small",sx:{borderRadius:"50%",height:28,width:28,"& > span":{ml:"-1px"}},icon:eF.SmileyIcon,...(0,ef.f)("all-reactions-button"),...e,"aria-label":"All reactions","aria-labelledby":void 0}),children:(0,O.jsx)(mx.S,{sx:{display:"flex",flexDirection:"row",p:1,gap:1},role:"menu","aria-orientation":"horizontal",...(0,ef.f)("reactions-overlay"),children:Object.values(lI).map(e=>(0,O.jsx)(mx.S.Item,{sx:{"&:hover":{backgroundColor:"accent.emphasis"},py:1,px:2,m:0,backgroundColor:t.has(e)?"accent.subtle":"transparent"},role:"menuitemcheckbox","aria-checked":t.has(e),onClick:()=>i(e),onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.stopPropagation(),i(e))},...(0,ef.f)(`all-reactions-${e}-reaction-button`),children:xT(e)},e))})})},xS=({reaction:e,reactedUsers:t,disabled:r,reacted:a,onClick:n})=>{if(0===t.length)return null;let i=`${a?"React":"Unreact"} with ${xT(e)} (${t.length} ${xT(e)} reaction${1===t.length?"":"s"} so far, including ${xk(t)})`;return(0,O.jsx)(fC.Z,{"aria-label":xk(t),sx:{maxWidth:"100%"},wrap:!0,direction:"ne",align:"left",children:(0,O.jsx)(cd.r,{size:"small",sx:{"&:hover:not([disabled])":{backgroundColor:"accent.muted"},backgroundColor:a?"accent.subtle":"transparent",borderColor:a?"accent.emphasis":"border.default",borderRadius:20,px:2,boxShadow:"none"},"aria-label":i,role:"switch","aria-checked":a,leadingVisual:()=>(0,O.jsx)(O.Fragment,{children:xT(e)}),...(0,ef.f)(`${e}-reaction-button`),onClick:n,disabled:r,children:t.length})})};function xk(e){let t=e.slice(0,5);return(e.length>5&&t.push(`${e.length-5} more`),1===t.length)?t[0]:2===t.length?t.join(" and "):(t.push(`and ${t.pop()}`),t.join(", "))}function xT(e){switch(e){case lI.THUMBS_UP:return"\u{1F44D}";case lI.THUMBS_DOWN:return"\u{1F44E}";case lI.SMILE:return"\u{1F604}";case lI.TADA:return"\u{1F389}";case lI.THINKING_FACE:return"\u{1F615}";case lI.HEART:return"\u2764\uFE0F";case lI.ROCKET:return"\u{1F680}";case lI.EYES:return"\u{1F440}";default:throw Error(`${e} must be handled`)}}function xN(){let e=g7().sidePanelMetadata,{projectData:t}=i5();return"issue"===e.itemKey.kind&&e.repository?{type:"issue",repository:{databaseId:e.itemKey.repositoryId,nwo:e.repository.nameWithOwner,slashCommandsEnabled:void 0!==e.slashCommandsSubjectGid},id:{databaseId:e.itemKey.itemId,id:e.slashCommandsSubjectGid??""}}:t?{type:"project",id:{databaseId:t.id}}:void 0}let x_=({url:e,onEdit:t})=>(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(ys,{icon:eF.KebabHorizontalIcon,variant:"invisible",size:"small",label:"Comment actions",sx:{color:"fg.default"},...(0,ef.f)("comment-overflow-menu-button")})}),(0,O.jsx)(fj.P.Overlay,{align:"end",children:(0,O.jsxs)(mx.S,{children:[(0,O.jsx)(mx.S.Item,{onSelect:()=>navigator.clipboard.writeText(e),children:"Copy link"}),t&&(0,O.jsx)(mx.S.Item,{onSelect:t,...(0,ef.f)("overflow-menu-edit-button"),children:"Edit"})]})})]}),xR=({url:e,onEdit:t})=>e?(0,O.jsx)(x_,{url:e,onEdit:t}):t?(0,O.jsx)(cd.r,{size:"small",variant:"invisible",sx:{color:"fg.default"},onClick:t,"aria-label":"Edit comment",...(0,ef.f)("edit-comment-button"),children:"Edit"}):null,xP=({createdAt:e,editedAt:t})=>{let r=t??e;return(0,ti.J)(r)?(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},...(0,ef.f)("edit-timestamp"),children:[(0,O.jsx)(y6.Z,{date:r}),r===t&&" (edited)"]}):null},xD=({author:e,createdAt:t,editedAt:r,authorAssociation:a,url:n,onStartEdit:i})=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"space-between",gap:2},as:"header",children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.avatarUrl&&(0,O.jsx)(mo.O,{loading:"lazy",size:24,alt:"",src:e.avatarUrl,...(0,ef.f)("author-avatar"),sx:{flexShrink:0}},e.id),(0,O.jsx)(eB.Z,{sx:{fontWeight:600,fontStyle:"normal"},...(0,ef.f)("author-login"),as:"address",children:e.login}),n?(0,O.jsx)(uB.Z,{href:n,target:"_blank",...(0,ef.f)("edit-timestamp-link"),children:(0,O.jsx)(xP,{createdAt:t,editedAt:r})}):(0,O.jsx)(xP,{createdAt:t,editedAt:r}),a&&a!==lS.NONE&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:"\xb7"}),(0,O.jsx)(y8.Z,{sx:{fontWeight:600,alignSelf:"center"},...(0,ef.f)("author-association"),children:t9(a)})]})]}),(0,O.jsx)(xR,{url:n,onEdit:i})]}),xE=({onCancel:e,onSave:t,updateButtonDisabled:r})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ye.n,{variant:"invisible",sx:{color:"fg.muted"},onClick:e,...(0,ef.f)("cancel-button"),children:"Cancel"}),(0,O.jsx)(ye.n,{variant:"primary",onClick:t,...(0,ef.f)("save-button"),disabled:r,children:"Update comment"})]}),xA=({allowEmptyBody:e,author:t,authorAssociation:r,createdAt:a,editedAt:n,url:i,description:l,onEdit:s,onEditTasklistBlock:o,reactions:d,onReact:u,showAddTasklistButton:c})=>{let[,m]=g5(),[p,f]=(0,H.useState)(!1),[h,g]=(0,H.useState)(!1),[y,x]=(0,H.useState)(!1),[b,v]=(0,H.useState)(l.body||""),w=(0,H.useRef)(null),j=(0,H.useRef)(null),C=(0,H.useRef)(null),I=(0,H.useRef)([]),S=(0,xh.Z)(),{openPaneHistoryItem:k,sidePanelState:T}=dq(),{items:N}=dP(),[_,R]=(0,H.useState)(!1),{postStats:P}=os(),{memex_disable_draft_issue_file_upload:D}=n9(),E=xN(),A=!!(T?.type==="issue"&&T.item.isDraft())&&D,M=(0,H.useRef)(!1),L=(0,H.useRef)(null),F=(0,H.useRef)(null),Z=e||""!==b.trim(),[V,B]=(0,H.useState)(l.bodyHtml??""),$=(0,H.useCallback)(()=>{p||y||M.current&&!F.current||j.current?.querySelector(".is-dirty, .js-tasklist-dragging")||j.current?.contains(document.activeElement)||B((M.current&&L.current?L.current:l.bodyHtml)??"")},[l.bodyHtml,p,y]),z=(0,H.useCallback)(()=>{!p&&F.current&&v(F.current)},[p]);(0,uG.b)(()=>{(p?!y:y)||M.current||v(l.body||"")},[l.body,p,y]),(0,uG.b)(()=>{$(),z()},[$,z]);let W=(0,H.useCallback)(async()=>{let e=j.current?.querySelector("tracking-block:first-of-type");if(!e)return;let t=e?.closest(".markdown-body");L.current=t?.innerHTML??""},[]);(0,H.useEffect)(()=>{let e=j.current||C.current;if(!e||!s||!o)return;let t=async e=>{let{detail:t}=e;e.preventDefault(),M.current=!1,F.current=null,x(!0);try{if("string"==typeof t)await o(t);else{let{payload:e,resolve:r,reject:a}=t,n=JSON.stringify(I.current);e?await o(e,b,n).then(r,a):await s(b,n).then(r,a)}}finally{x(!1),I.current=[]}},r=async e=>{let{detail:t}=e,{payload:r,resolve:a,reject:n}=t;try{let e=await (0,xf.fp)(b,r),t=!1,n={name:r.operation};(0,xf.C9)(r)&&(n.value=r.value),I.current.push(n),null!=e?(t=!0,v(e),F.current=e):(v(b),F.current=b),M.current=!0,a(t)}catch(e){n(e)}},a=()=>{m(null!=e.querySelector(".is-dirty"))};return e.addEventListener("tracking-block:update",t),e.addEventListener("tracking-block:operation",r),e.addEventListener("tracking-block:dirty-change",a),()=>{e.removeEventListener("tracking-block:update",t),e.removeEventListener("tracking-block:operation",r),e.removeEventListener("tracking-block:dirty-change",a)}},[s,o,h,p,l.bodyHtml,b,m,W]);let G=(0,H.useCallback)(e=>{v(e),m(!0)},[v,m]),{perform:U}=d1({request:async e=>{s&&(e||g(!0),await s(e||b),L.current=null,S()&&g(!1))},rollback:()=>{g(!1),$()},showErrorToast:!0}),q=(0,fu.N)(U,1e3),K=(0,H.useCallback)(e=>{v(e),q(void 0)},[q]),Q=s?()=>{(0,uU.flushSync)(()=>{W(),f(!0)}),w.current?.focus()}:void 0,X=async()=>{Z&&(await U(void 0),S()&&(f(!1),m(!1),M.current=!1))},Y=(0,H.useCallback)((e,t)=>N.find(r=>r.contentRepositoryId===e&&r.content.id===t),[N]),J=e=>{let t=e.closest("[data-issue]");if(!t)return{};let r=t.getAttribute("data-repository-id"),a=t.getAttribute("data-item-id"),n=t.getAttribute("data-repository-name"),i=t.getAttribute("data-display-number"),l=t.getAttribute("data-item-title"),s={repoId:parseInt(r??"0"),issueId:parseInt(a??"0")},o=Y(s.repoId,s.issueId);if(o)return{item:o};let d=e.closest("a");return{item:new HierarchySidePanelItem({key:s,title:l,url:d?.getAttribute("href")??"",state:"open",repoName:n??"",number:parseInt(i??""),assignees:[],labels:[]},{completed:0,total:0,percent:0})}};return p?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g9.q,{label:"Edit comment",showLabel:!1,ref:w,value:b,onChange:G,onPrimaryAction:X,sx:{border:"none"},fileUploadsEnabled:!A,subject:E,actions:(0,O.jsx)(xE,{onSave:X,onCancel:()=>{f(!1),v(l.body||""),m(!1)},updateButtonDisabled:!Z}),...(0,ef.f)("markdown-editor")}),A&&(0,O.jsx)(eB.Z,{as:"p",sx:{fontStyle:"italic",fontSize:0,color:"fg.muted",px:3},children:"File uploads have been disabled for draft issues in this organization."})]}):(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",p:3,gap:3},as:"article",children:[(0,O.jsx)(xD,{author:t,createdAt:a,editedAt:n,url:i,onStartEdit:Q,authorAssociation:r}),l.bodyHtml?(0,O.jsx)("div",{...(0,ef.f)("comment-body"),ref:j,children:(0,O.jsx)(yd,{unverifiedHTML:V,onChange:K,markdownValue:l.body||"",disabled:h||!s,onLinkClick:e=>{if(e.metaKey||e.shiftKey||1===e.button)return;let t=J(e.target);t.item&&(e.preventDefault(),k(t))}})}):(0,O.jsx)(eB.Z,{className:"js-comment",sx:{color:"fg.muted",m:0,fontStyle:"italic"},as:"p",ref:C,...(0,ef.f)("empty-body-placeholder"),children:rI.noDescriptionProvided}),(0,O.jsx)("footer",{children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[c&&Q?(0,O.jsx)("tasklist-block-add-tasklist",{onClick:()=>{P({name:"add_tasklist_button_click"})},children:(0,O.jsx)(xb,{editedBody:b,onChangeBody:async()=>{let e=j.current?.querySelector(".js-comment, .markdown-body")||C.current;if(e){R(!0);try{await new Promise((t,r)=>{e.dispatchEvent(new CustomEvent("tracking-block:add-tasklist",{bubbles:!0,cancelable:!0,detail:{resolve:t,reject:r}}))&&t()})}finally{R(!1)}}},isTextButton:!0,loading:_,tasklistContent:""})}):null,(0,O.jsx)(xC,{reactions:d,onReact:u})]})})]})};try{xP.displayName||(xP.displayName="Timestamp")}catch{}let xM=(0,H.memo)(function(){let e=(0,H.useRef)(null),t=(0,H.useRef)(null),r=h7(),a=cc(r),{sidePanelMetadata:n,reloadSidePanelMetadata:i}=g7(),{reloadPaneItem:l,sidePanelState:s}=dq(),o=e4(i),d=e4(l),u=(0,H.useRef)(null),c=e=>n.itemKey.kind===lC.ISSUE&&!!(h2(e)&&Object.prototype.hasOwnProperty.call(e,"reason"))&&"string"==typeof e.reason,m=e=>n.itemKey.kind===lC.PROJECT_DRAFT_ISSUE&&h1(e)&&e.payload.item_id===n.itemKey.projectItemId,[p]=h3(e,"message",e=>{(c(e.data)||m(e.data))&&o(e.data.wait??0)(!0)},n.liveUpdateChannel),[f]=h3(t,"message",e=>{h1(e.data)&&s?.type===aR.ISSUE&&e.data.payload&&(s.item.memexItemId?.()===e.data.payload.memex_project_item_id||s.item.memexItemId?.()===e.data.payload.item_id)&&(u.current?.cancel(),u.current=d(e.data.wait??0)())});(0,H.useEffect)(()=>{r&&!a&&(i(!1),l())},[r,a,i,l]);let h=r?p:void 0,g=r?f:void 0;return(0,O.jsxs)(O.Fragment,{children:[n.liveUpdateChannel&&(0,O.jsx)("span",{...h,ref:e,hidden:!0,...(0,ef.f)("side-panel-item-live-update-listener")}),(0,O.jsx)("span",{...g,ref:t,hidden:!0,...(0,ef.f)("side-panel-pane-item-live-update-listener")})]})});try{xM.displayName||(xM.displayName="SidePanelLiveUpdate")}catch{}let xL=({editedBody:e,issueId:t,repositoryId:r,projectNumber:a})=>(0,O.jsxs)("form",{id:"tasklist-form",...(0,ef.f)("tasklist-form"),children:[(0,O.jsx)("input",{type:"hidden",name:"body",value:e}),(0,O.jsx)("input",{type:"hidden",name:"item-id",value:t}),(0,O.jsx)("input",{type:"hidden",name:"repository-id",value:r}),(0,O.jsx)("input",{type:"hidden",name:"kind",value:"issue"}),(0,O.jsx)("input",{type:"hidden",name:"project-id",value:a})]}),xF=({item:e,isLoading:t,fullHeight:r})=>{let{sidePanelMetadata:a,editIssue:n,reactToSidePanelItem:i,reloadSidePanelMetadata:l}=g7(),{projectNumber:s}=d5(),{tasklist_block:o}=n9(),{postStats:d}=os(),u=(0,H.useMemo)(()=>new Set(a.capabilities),[a]),c=u.has("react")?(e,t,r)=>i(e,t,r):void 0,m=(0,H.useMemo)(()=>u.has("editDescription")?async(t,r)=>{await n({body:t},null,r),e.contentType===eL.DraftIssue&&d({name:"draft_edit",memexProjectItemId:e.id})}:void 0,[u,n,e.contentType,d,e.id]),p=(0,H.useMemo)(()=>u.has("editDescription")?async(e,t,r)=>{if(e&&a.description){let i=t||a.description.body||"";await n({body:i},e,r)}else l(!1)}:void 0,[u,n,l,a.description]),f=o&&e.contentType!==eL.DraftIssue;return(0,O.jsxs)(eO.Z,{sx:{flex:r?"auto":void 0,px:2},children:[(0,O.jsx)(xM,{}),t?(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"row",py:6,justifyContent:"center"},children:(0,O.jsx)(u$.Z,{"aria-label":"Loading"})}):(0,O.jsxs)(eO.Z,{as:"section",sx:{height:r?"100%":void 0},children:[(0,O.jsx)("h3",{style:{position:"absolute",clipPath:"circle(0)"},children:"Description"}),(0,O.jsx)(xA,{allowEmptyBody:!0,author:a.user,createdAt:new Date(a.createdAt),editedAt:a.description.editedAt?new Date(a.description.editedAt):void 0,reactions:a.reactions??{},description:a.description,onEdit:m,onEditTasklistBlock:p,onReact:c,showAddTasklistButton:f},e.itemId()),"issue"===a.itemKey.kind&&(0,O.jsx)(eO.Z,{sx:{display:"none"},children:(0,O.jsx)(xL,{editedBody:a.description.body||"",issueId:a.itemKey.itemId,repositoryId:a.itemKey.repositoryId,projectNumber:s})})]})]})};try{xF.displayName||(xF.displayName="SidePanelBody")}catch{}var xZ=r(37030),xO=r(98641);let xV=({items:e,onClick:t})=>{let r=(0,O.jsx)(xO.Z,{children:e.map(({url:r,repoName:a,repoIcon:n,issueNumber:i,id:l},s)=>(0,O.jsxs)(xO.Z.Item,{sx:{color:"fg.muted",fontSize:"fontSizes.1"},"data-id":l,href:r,selected:s===e.length-1,target:"_blank","data-hovercard-type":"issue","data-hovercard-url":`${r}/hovercard`,onClick:t??void 0,children:[n&&(0,O.jsx)(eB.Z,{sx:{mr:1},children:n}),(0,O.jsx)(md.Z,{inline:!0,as:"span",title:`${a} ${i}`,sx:{maxWidth:s===e.length-1?"none":"150px",textDecoration:"inherit"},children:a}),(0,O.jsx)(eB.Z,{children:a?` ${i}`:i})]},s))});return(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{ml:-3,mr:1,mt:"2px"},children:e.length>1?(0,O.jsx)(mq.h,{...(0,ef.f)("side-panel-nav-button-up"),"aria-label":"Navigate up one level",disabled:1===e.length||!t,icon:eF.ChevronLeftIcon,onClick:t,variant:"invisible",sx:{color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"},":disabled":{color:"fg.muted"},display:"flex",alignItems:"center",justifyContent:"center",pr:2,py:0,pt:"4px",pl:"8px",height:18,width:18,"& svg":{verticalAlign:"top!important"}}}):(0,O.jsx)(eO.Z,{sx:{ml:"10px",mt:"2px"}})}),r]})},xB=()=>{let{openPaneHistoryItem:e}=dq(),t=dU(),r=[...t],a=r.map((e,t)=>{let a=e.getExtendedRepository(),n=a?.name||e.getRepositoryName()||"",i=a?.url?(0,O.jsx)(c9,{repository:a}):void 0,l=t===r.length-5||r.length<5&&0===t,s=r[t-1],o=s&&s.getRepositoryName()||"";return!l&&o&&o===n&&(n="",i=void 0),{url:e.getUrl(),repoName:n,repoIcon:i,issueNumber:`#${e.getItemNumber()}`,id:t}});return(0,O.jsx)(xV,{items:a.slice(-5),onClick:r=>{if(r.metaKey||r.shiftKey||1===r.button)return;r.preventDefault();let a=parseInt(r.currentTarget.getAttribute("data-id")??(t.length-2).toString());e({historyIdx:a,item:t[a]})}})};try{xB.displayName||(xB.displayName="SidePanelBreadcrumbsWrapper")}catch{}var x$=r(21364);let xz=({itemType:e,state:t})=>{let r=null;return e===lC.PROJECT_DRAFT_ISSUE&&(r=(0,O.jsx)(xW,{})),e===lC.ISSUE&&(r=(0,O.jsx)(xG,{state:t.state,reason:t.stateReason})),r?(0,O.jsxs)(eO.Z,{as:"figure",sx:{m:0},children:[(0,O.jsx)("figcaption",{style:{position:"absolute",clipPath:"circle(0)"},children:"Item status"}),r]}):null},xW=()=>(0,O.jsx)(x$.Z,{status:"issueDraft",variant:"small",children:"Draft"}),xG=({state:e,reason:t})=>e===ab.Open?(0,O.jsx)(x$.Z,{status:"issueOpened",variant:"small",className:"prc-StateLabel--open",children:"Open"}):e===ab.Closed&&t===av.NotPlanned?(0,O.jsxs)(x$.Z,{status:"draft",variant:"small",sx:{"& > svg:first-child":{visibility:"hidden",position:"absolute"}},children:[(0,O.jsx)(eF.SkipIcon,{}),(0,O.jsx)(eB.Z,{sx:{pl:1},children:"Closed"})]}):e===ab.Closed?(0,O.jsx)(x$.Z,{status:"issueClosed",variant:"small",children:"Closed"}):null;try{xz.displayName||(xz.displayName="ItemStateLabel")}catch{}try{xW.displayName||(xW.displayName="DraftIssueState")}catch{}try{xG.displayName||(xG.displayName="IssueState")}catch{}let xU=({onResize:e}={})=>{let[t,r]=(0,H.useState)(()=>document.getElementById("memex-project-view-root")),a=ma(t);(0,uG.b)(()=>{t||r(document.getElementById("memex-project-view-root"))},[t]);let n=(0,e5.Z)(e);return(0,uG.b)(()=>{n.current?.(a)},[a,n]),a},xH={completed:0,total:0,percent:0};function xq(e){if(!e)return{};let{repositoryId:t,itemId:r,title:a,url:n,state:i,stateReason:l,repositoryName:s,displayNumber:o,assignees:d,labels:u}=e;return{item:new HierarchySidePanelItem({key:{repoId:t,issueId:r},title:a,url:n,state:i,stateReason:l,repoName:s,number:o,assignees:d,labels:u},xH)}}let xK={position:"relative"},xQ=[],xX=({currentValue:e=xQ})=>{let[t,r]=(0,H.useState)(!1),[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useState)(null),{openPaneHistoryItem:s}=dq(),o=ma(i),d=(0,H.useRef)(null),u=(0,H.useRef)(null),c=()=>r(!t),m=e.length>2&&!t||a,p=t&&!a,f=e.slice(0,2),h=p?e:f,{clientHeight:g}=xU({onResize:()=>{a&&((0,uU.flushSync)(()=>{n(!1)}),n(!0))}});return(0,H.useEffect)(()=>{if(!d.current)return;let e=d.current.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth);a||n(e)},[a,t]),e.length?(0,O.jsx)("div",{ref:u,children:(0,O.jsxs)(eO.Z,{sx:xK,ref:l,style:{width:o.clientWidth},children:[(0,O.jsx)(y8.Z,{as:"div",onMouseEnter:c,onMouseLeave:c,ref:d,size:"large",sx:t&&!a?{...x5,...x3}:x5,...(0,ef.f)("tracked-by-label"),children:(0,O.jsx)(x2,{showElipsis:m,children:(0,O.jsx)(xJ,{items:h})})}),(0,O.jsx)(fj.P,{anchorRef:u,open:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{width:"353px",maxHeight:g,overflow:"auto"},onEscape:()=>n(!1),onClickOutside:()=>n(!1),children:(0,O.jsx)(mx.S,{children:(0,O.jsx)(mx.S.Group,{children:e.map(e=>(0,O.jsx)(mx.S.LinkItem,{href:e.url,onClick:xY(e,s),rel:"noreferer",role:"button",target:"_blank",children:(0,O.jsx)(x1,{title:`Tracking: ${e.title}`,displayNumber:e.displayNumber,state:e.state,stateReason:e.stateReason,url:e.url})},e.itemId))})})})})]})}):null},xY=(e,t)=>{let r=xq(e);return e=>{e.ctrlKey||e.metaKey||!r.item||(e.preventDefault(),t(r))}},xJ=({items:e})=>{let{openPaneHistoryItem:t}=dq();return(0,O.jsx)(O.Fragment,{children:e.map((r,a)=>(0,O.jsx)(x0,{onClick:xY(r,t),title:`#${r.displayNumber}${e.length>1&&a!==e.length-1?",":""}`,state:r.state,stateReason:r.stateReason,url:r.url,itemId:r.itemId},r.itemId))})},x0=({title:e,state:t,stateReason:r,url:a,itemId:n,...i})=>(0,O.jsxs)(uB.Z,{...i,target:"_blank",rel:"noreferer",href:a,role:"button","data-hovercard-type":"issue","data-hovercard-url":`${a}/hovercard`,...(0,ef.f)(`tracked-by-label-${n}`),children:[(0,O.jsx)(u7,{state:t,stateReason:r,type:"Issue",isDraft:!1}),(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mx:1},children:e})]}),x1=({displayNumber:e,title:t,state:r,stateReason:a,url:n,...i})=>(0,O.jsxs)(eO.Z,{sx:{display:"flex"},...i,children:[(0,O.jsx)(u7,{state:r,stateReason:a,type:"Issue",isDraft:!1}),(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.default",fontSize:0,mx:1},children:t}),(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mx:1,flexGrow:1,textAlign:"end"},children:`#${e}`})]}),x2=({showElipsis:e,children:t})=>{let{trackedBy:r}=r$;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.muted",fontSize:0,mr:1},children:r}),t,e&&(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.muted"},children:"..."})]})},x5={backgroundColor:"canvas.subtle",color:"fg.muted",cursor:"pointer",display:"flex",justifyContent:"center",p:"4px 12px",overflow:"hidden",textAlign:"left"},x3={position:"absolute",zIndex:1,top:0,bottom:0,margin:"-12px 0"};try{xX.displayName||(xX.displayName="TrackedByLabel")}catch{}try{xJ.displayName||(xJ.displayName="TrackedByItems")}catch{}try{x0.displayName||(x0.displayName="TrackedByLink")}catch{}try{x1.displayName||(x1.displayName="TrackedByMenuItem")}catch{}try{x2.displayName||(x2.displayName="TrackedByLabelContent")}catch{}var x4=r(72725);let x8=({issueId:e,items:t,url:r})=>t.length?(0,O.jsx)(y8.Z,{as:"div",size:"large",sx:br,...(0,ef.f)("tracked-by-label"),children:(0,O.jsx)(bt,{children:(0,O.jsx)(x7,{issueId:e,items:t,url:r})})}):null,x6=(e,t)=>{let r=xq(e);return e=>{e.ctrlKey||e.metaKey||!r.item||(e.preventDefault(),t(r))}},x7=({issueId:e,items:t,url:r})=>{let{openPaneHistoryItem:a}=dq();if(!t.length||!t[0])return null;if(t.length>1)return(0,O.jsx)(x9,{items:t,url:r});let n=t[0];return(0,O.jsx)(be,{onClick:x6(n,a),title:`${n.title}`,displayNumber:n.displayNumber,trackedByTitle:n.trackedByTitle,state:n.state,stateReason:n.stateReason,url:n.url,issueId:e,itemId:n.itemId})},x9=({items:e,url:t})=>{let{openPaneHistoryItem:r}=dq(),a=`${t}/tracked_in/hovercard`;return(0,x4.g)((t,n)=>{if(t!==a)return;let i=n.target.closest("a");if(!i)return;let l=e.find(e=>new URL(e.url).pathname===i.pathname);l&&x6(l,r)(n)}),(0,O.jsxs)(eB.Z,{as:"span","data-hovercard-type":"tracked_in","data-hovercard-url":a,sx:ba,children:[(0,O.jsx)(eZ.Z,{icon:eF.IssueTrackedByIcon,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:"span",sx:{...bn,color:"fb.muted"},children:`${e.length} ${r$.trackingIssues}`})]})},be=({trackedByTitle:e,displayNumber:t,title:r,state:a,stateReason:n,url:i,issueId:l,itemId:s,...o})=>(0,O.jsxs)(uB.Z,{...o,target:"_blank",rel:"noreferer",href:i,role:"button","data-hovercard-type":"tracking","data-hovercard-url":i&&l?`${i}/tracking/${l}/hovercard`:void 0,sx:ba,...(0,ef.f)(`tracked-by-label-${s}`),children:[(0,O.jsx)(u7,{state:a,stateReason:n,type:"Issue",isDraft:!1}),(0,O.jsx)(eB.Z,{as:"span",sx:bn,children:r}),(0,O.jsxs)(eB.Z,{as:"span",sx:{...bn,color:"fg.muted",fontWeight:"400",px:0},children:[t,(0,O.jsx)(eF.ChevronRightIcon,{size:12}),e]})]}),bt=({children:e})=>(0,O.jsx)(O.Fragment,{children:e}),br={backgroundColor:"canvas.subtle",color:"fg.muted",cursor:"pointer",display:"flex",justifyContent:"center",maxWidth:"350px",p:"4px 6px",overflow:"hidden",textAlign:"left"},ba={display:"flex",alignItems:"center",maxWidth:"100%",textUnderlineOffset:"2px"},bn={color:"fg.default",fontSize:0,fontWeight:"600",px:1,py:"2px",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"};try{x8.displayName||(x8.displayName="RestyledTrackedByLabel")}catch{}try{x7.displayName||(x7.displayName="TrackedByItems")}catch{}try{x9.displayName||(x9.displayName="TrackedByAnchor")}catch{}try{be.displayName||(be.displayName="TrackedByLink")}catch{}try{bt.displayName||(bt.displayName="TrackedByLabelContent")}catch{}function bi({progress:e}){let{theme:t}=(0,$.Fg)();return(0,O.jsxs)("svg",{"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 14 14","data-target":"tracked-issues-progress.progress","data-circumference":"38",style:{transform:"rotate(-90deg)",display:"inline-block",overflow:"visible",verticalAlign:"text-bottom"},children:[e<1?null:(0,O.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0206 11.1074C9.68518 11.3949 9.18014 11.3561 8.8926 11.0206L5.8926 7.52061C5.62055 7.20322 5.63873 6.72989 5.93432 6.4343L7.43432 4.9343C7.74674 4.62188 8.25327 4.62188 8.56569 4.9343C8.87811 5.24672 8.87811 5.75325 8.56569 6.06567L7.58953 7.04182L10.1074 9.97935C10.3949 10.3148 10.3561 10.8198 10.0206 11.1074Z",fill:t?.colors.done.fg}),(0,O.jsx)("circle",{stroke:t?.colors.border.default,strokeWidth:"2",fill:"transparent",cx:"50%",cy:"50%",r:"6"}),(0,O.jsx)("circle",{style:{transition:"stroke-dashoffset 0.35s"},stroke:t?.colors.done.fg,strokeWidth:"2",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",fill:"transparent",cx:"50%",cy:"50%",r:"6"})]})}let bl=(0,H.forwardRef)(({progress:{percent:e,total:t,completed:r},description:a,constantWidth:n,...i},l)=>{let s=("button"===i.as&&!i.disabled||"a"===i.as)&&!n;return(0,O.jsx)(yJ.Z,{ref:l,leadingVisual:()=>(0,O.jsx)(bi,{progress:e/100}),text:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{...(0,ef.f)("progress-text"),children:a??`${r} of ${t}`}),s&&(0,O.jsx)(eZ.Z,{icon:eF.TriangleRightIcon,className:"triangle",sx:{opacity:"0 !important",transitionProperty:"transform, opacity",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out",position:"absolute",right:0,paddingRight:0,transform:"translateX(-12px) translateY(-50%)",top:"50%"}})]}),...i,sx:{pl:1,bg:"canvas.default",transitionProperty:"background-color, padding-right",transitionDuration:"0.2s",transitionTimingFunction:"ease-in-out","&:hover, &:focus":s?{pr:3,".triangle":{opacity:"1 !important",transform:"translateX(0) translateY(-50%)"}}:{},...i.sx}})});bl.displayName="TracksToken";try{bi.displayName||(bi.displayName="ProgressIcon")}catch{}let bs=({completion:e})=>{if(!e||0===e.total)return null;let{completed:t,total:r}=e,{tasks:a}=rB,n=a(t,r);return t?(0,O.jsx)(bl,{progress:e,description:n,size:"large"}):(0,O.jsxs)(y8.Z,{size:"large",variant:"secondary",sx:{display:"flex",height:"25.5px",p:"5px 12px"},children:[(0,O.jsx)(eF.ChecklistIcon,{size:16}),(0,O.jsx)(eB.Z,{as:"div",sx:{m:"0 4px"},children:n})]})};try{bs.displayName||(bs.displayName="TracksLabel")}catch{}let bo=()=>{let{sidePanelMetadata:e}=g7(),{completion:t,itemKey:r,trackedBy:a,url:n}=e,i="issue"===r.kind?r.itemId:void 0,{tasklist_tracked_by_redesign:l}=n9();return(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:"8px"},...(0,ef.f)("tracking-fields"),children:[(0,O.jsx)(bs,{completion:t}),a?.length?l?(0,O.jsx)(x8,{issueId:i,items:a,url:n}):(0,O.jsx)(xX,{currentValue:a}):null]})};try{bo.displayName||(bo.displayName="TrackingFields")}catch{}let bd=(0,H.memo)(function({item:e,isLoading:t,selectedTab:r,onTabChange:a,showBreadcrumbs:n,showTabs:i}){let{sidePanelMetadata:l}=g7(),{title:s,createdAt:o,user:d,state:u,itemKey:c}=l,m=!n&&e.contentType===eL.Issue;return(0,O.jsxs)(eO.Z,{as:"header",sx:{backgroundColor:"canvas.default",zIndex:1},children:[(0,O.jsx)(eO.Z,{sx:{px:[3,"",4],pt:3},children:(0,O.jsx)(eO.Z,{sx:{display:"flex"},children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",flex:"auto"},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:[(0,O.jsx)(bc,{showCloseButton:!0}),n&&(0,O.jsx)(eO.Z,{...(0,ef.f)("side-panel-breadcrumbs"),sx:{flexGrow:1},children:(0,O.jsx)(xB,{})}),m&&(0,O.jsx)(eO.Z,{sx:{flex:1},children:(0,O.jsx)(bu,{item:e})})]}),(0,O.jsx)(bm,{item:e,title:s,isLoading:t}),!t&&o&&d.login?(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:2,mt:1},children:[(0,O.jsx)(xz,{itemType:c.kind,state:u}),(0,O.jsx)(bo,{}),(0,O.jsxs)(eB.Z,{sx:{fontSize:1,fontStyle:"normal"},as:"address",children:[(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:d.login}),(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:[" opened ",(0,O.jsx)(y6.Z,{datetime:o})]})]})]}):null]})})}),i?(0,O.jsx)(bp,{selectedTab:r,onTabChange:a}):(0,O.jsx)(eO.Z,{sx:{borderBottom:"1px solid",borderColor:"border.muted",pb:4}})]})});bd.displayName="SidePanelHeader";let bu=({item:e})=>{let t=e.getExtendedRepository(),r=t?.name||e.getRepositoryName()||"",a=t?.url?(0,O.jsx)(c9,{repository:t}):void 0;return(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[a&&(0,O.jsx)(eB.Z,{sx:{mr:1},children:a}),(0,O.jsx)(eB.Z,{children:`${r} #${e.getItemNumber()}`})]})},bc=({children:e,showCloseButton:t})=>{let{pinButtonRef:r,closePane:a,pinned:n,setPinned:i}=dq();return(0,O.jsxs)(eO.Z,{role:"group","aria-label":rI.sidePanelToolbarLabel,sx:{display:"flex",flexDirection:"row-reverse"},children:[t&&(0,O.jsx)(mq.h,{variant:"invisible","aria-label":"Close panel",icon:eF.XIcon,onClick:()=>a(),...(0,ef.f)("side-panel-button-close")}),(0,O.jsx)(ys,{variant:"invisible",label:n?rI.sidePanelUnpinLabel:rI.sidePanelPinLabel,icon:n?eF.PinSlashIcon:eF.PinIcon,onClick:()=>i(!n),ref:r,tooltipDirection:"sw"}),e]})},bm=(0,H.memo)(function({item:e,title:t,isLoading:r}){let[a,n]=g5(),[i,l]=(0,H.useState)(""),s=(0,H.useRef)(null),{hasWritePermissions:o}=i4(),{postStats:d}=os(),{addToast:u}=e9(),{editIssueTitle:c,sidePanelMetadata:{capabilities:m,itemKey:p,issueNumber:f,url:h}}=g7(),g=(0,H.useMemo)(()=>m?.includes("editTitle"),[m]),y=(0,H.useCallback)(()=>{a||l(t.raw)},[t,a]);(0,H.useEffect)(()=>y(),[y]);let x=d1({request:(0,H.useCallback)(async t=>{let r=yf(t);e&&(await c(r),d({name:aU,ui:aP,memexProjectItemId:e.id}))},[c,e,d]),rollback:y}),b=(0,H.useCallback)(async()=>{if(s.current&&s.current instanceof HTMLInputElement){let e=s.current.value.trim();if(""===e){u({message:rI.titleCannotBeBlank,type:e$.warning});return}await x.perform(e)}n(!1)},[x,u,n]),v=(0,H.useCallback)(e=>{l(e.target.value)},[l]),w=(0,H.useCallback)(e=>{switch(e.key){case mV.ENTER:b(),e.preventDefault();break;case mV.ESCAPE:y(),n(!1),e.preventDefault()}},[b,y,n]),j=(0,yc.u)(w),C=(0,H.useCallback)(()=>{o&&(y(),n(!0))},[o,y,n]);(0,H.useEffect)(()=>{a?s.current?.focus():setTimeout(()=>{document.activeElement===document.body&&s.current?.focus()})},[a]);let I=yR();return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexGrow:1,justifyContent:"space-between",alignItems:"center",gap:2,pt:a?1:0,mb:a?1:0},children:[(0,O.jsx)(eO.Z,{sx:{flexGrow:1},...(0,ef.f)("side-panel-title"),children:a?(0,O.jsx)(yk.F,{...I,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{"aria-label":"Item title",sx:{lineHeight:"18px"},ref:s,value:i,onChange:v,...j,size:"small",...(0,ef.f)("side-panel-title-input")})}):(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(eB.Z,{sx:{fontSize:4,fontWeight:"bold",maxWidth:"100%",display:"inline",wordBreak:"break-word"},as:"h2",...(0,ef.f)("side-panel-title-content"),children:r?(0,O.jsx)(eB.Z,{sx:{fontWeight:"normal",fontSize:3},children:"Loading..."}):p.kind===lC.ISSUE&&f&&h?(0,O.jsxs)(uB.Z,{href:h,target:"_blank",sx:{color:"fg.default"},onClick:()=>d({name:ni}),children:[(0,O.jsx)(u5,{as:"bdi",children:t.html}),(0,O.jsxs)(eB.Z,{sx:{ml:2,color:"fg.muted",fontWeight:"normal"},children:["#",f]})]}):(0,O.jsx)(u5,{as:"bdi",children:t.html})})})}),(0,O.jsxs)(eO.Z,{sx:{mt:a?0:1},children:[!a&&!r&&g&&(0,O.jsx)(cd.r,{size:"small",onClick:C,variant:"invisible",...(0,ef.f)("side-panel-title-edit-button"),sx:{color:"fg.default"},children:rI.editTitle}),a&&(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:2},children:[(0,O.jsx)(cd.r,{size:"small",variant:"primary",onClick:b,...(0,ef.f)("side-panel-title-save-button"),children:"Save"}),(0,O.jsx)(cd.r,{size:"small",onClick:()=>{y(),n(!1)},...(0,ef.f)("side-panel-title-revert-button"),children:"Cancel"})]})]})]})}),bp=({selectedTab:e,onTabChange:t})=>(0,O.jsxs)(xZ.Z,{sx:{pl:3,flexShrink:0,cursor:"pointer",borderBottom:0},children:[(0,O.jsx)(xZ.Z.Link,{onClick:()=>t("details"),selected:"details"===e,sx:{"&:hover":{outline:"none"}},children:"Details"}),(0,O.jsx)(xZ.Z.Link,{onClick:()=>t("tracks"),selected:"tracks"===e,sx:{"&:hover":{outline:"none"}},children:"Tracks"})]});try{bc.displayName||(bc.displayName="SidePanelToolbar")}catch{}try{bm.displayName||(bm.displayName="SidePanelTitle")}catch{}let bf=({targetRepository:e,sx:t})=>{let r=(0,H.useRef)(null),a=(0,H.useRef)(null),[n,i]=(0,H.useState)(""),[l,s]=(0,H.useState)(!1),[o,d]=(0,H.useState)(!1),[u,c]=(0,H.useState)(void 0),[m,p]=(0,H.useState)([]),[f,h]=(0,H.useState)([]),g=(0,H.useRef)(),{suggestRepositories:y,clearCachedSuggestions:x}=c7(),{postStats:b}=os(),v=(0,H.useRef)(f),{hasFetchedRepos:w,setSelectedRepo:j,setHasFetchedRepos:C}=d9();(0,c0.P)({restoreFocusOnCleanUp:!0,initialFocusRef:r,containerRef:a});let I=(0,H.useCallback)(()=>{s(!1)},[]),S=(0,H.useCallback)(async()=>{v.current.length||(d(!0),x(),h(await y({repositoryId:e?.id})??[]),C(!0),d(!1))},[x,C,y,e?.id]),k=(0,H.useCallback)(e=>(""!==n?m:f).find(t=>t.id===e),[n,m,f]);(0,H.useEffect)(()=>{S()},[S,C]),(0,H.useEffect)(()=>{if(w&&!u){let t=f.find(t=>t.id===e?.id)??f[0];t&&c({id:t.id,text:t.name,leadingVisual:()=>c9({repository:t})}),C(!0),j(t||null)}},[j,C,f,u,w,e?.id]);let T=(0,H.useCallback)(async e=>{if(""!==e){d(!0);let{repositories:t}=await c2({query:e});p(t),d(!1)}else p(f??[])},[f]),N=(0,H.useCallback)(()=>{g.current&&g.current.cancel(),g.current=(0,s9.Z)(()=>T(n),200),g.current()},[T,n]),_=e=>{if(e?.id){let t=k(e.id);t&&(c({id:t.id,text:t.name,leadingVisual:()=>c9({repository:t})}),j(t),b({name:"bulk_add_side_panel_repo_switched",context:JSON.stringify({repo:t.name})}))}},R=(""!==n?m:f).map(e=>{let{projectOwner:t}=i5(),r=e.nameWithOwner.split("/")[0],a=r?.toLowerCase()!==t?.login.toLowerCase()?e.nameWithOwner:e.name;return{...e,text:a,leadingVisual:()=>c9({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),_(e),I()}}});return(0,O.jsx)(c1.b,{placeholderText:rI.repoPickerFilterPlaceholder,open:l,renderAnchor:({children:e,...r})=>(0,O.jsx)(cd.r,{leadingVisual:u?.leadingVisual,trailingVisual:eF.TriangleDownIcon,sx:t,...r,...(0,ef.f)("repo-suggestions-button"),children:e||rI.selectRepo}),onOpenChange:()=>s(!0),loading:o,selected:u,filterValue:n,items:R,showItemDividers:!0,onFilterChange:e=>{i(e),N()},onSelectedChange:_,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"auto",onClickOutside:I,...(0,ef.f)("repo-picker-repo-list")}})};bf.displayName="RepoSuggestions";let bh=(0,H.memo)(function({onClick:e,disabled:t}){return(0,O.jsx)(cd.r,{variant:"invisible",size:"small",onClick:e,"aria-label":"Search",disabled:t,sx:{margin:"0 2px",color:t?"accent.muted":"accent.fg",border:"none",height:"24px"},...(0,ef.f)("bulk-add-search-button"),children:"Search \u23CE"})}),bg=({targetRepository:e,newItemAttributes:t})=>{let{postStats:r}=os(),{isPaneOpened:a}=dq(),{addSelectedItemsRequest:n,selectedItems:i,hasFetchedRepos:l,selectedRepo:s,setSelectedRepo:o,setHasFetchedRepos:d,loading:u,addingItems:c,items:m,searchQuery:p,setSearchQuery:f,setAreAllItemsAdded:h,setUpdateColumnsAction:g,MAX_ITEM_NUM:y}=d9(),[x,b]=(0,H.useState)(!1),[v,w]=(0,H.useState)(!1),[j,C]=(0,H.useState)(p),I=(0,H.useRef)(null),S=(0,H.useRef)(a);(0,H.useEffect)(function(){S.current&&!a&&(o(null),f(""),g([]),d(!1)),S.current=a},[d,f,o,g,a]);let k=(0,H.useCallback)(e=>{let t=mz(e),r=e.currentTarget.value.trim();t===mV.ENTER&&f(r)},[f]),T=(0,yc.u)(k),N=(0,H.useCallback)(e=>{C(e.currentTarget.value),w(e.currentTarget.value.trim().length>0)},[]),_=(0,H.useCallback)(()=>{f(I.current?.value??"")},[f]),R=(0,H.useCallback)(()=>{b(!0)},[]),P=(0,H.useCallback)(()=>{b(!1)},[]);(0,H.useEffect)(()=>{g(t?.updateColumnActions??[])},[g,t]);let D=(0,H.useCallback)(async()=>{await n.perform(i),r({name:"bulk_add_side_panel_add_items",context:i.length.toString()}),i.length===y&&h(!0)},[n,i,r,y,h]),E=v||x||p!==j;return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",height:"100%",overflow:"auto",justifyContent:"space-between"},...(0,ef.f)("bulk-add-view"),children:[(0,O.jsxs)(eO.Z,{sx:{mt:4,mx:[3,"",4]},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",mb:3,flexDirection:"row-reverse"},children:[(0,O.jsx)(bc,{showCloseButton:!0}),(0,O.jsx)(eO.Z,{sx:{flex:1}}),(0,O.jsx)(eB.Z,{sx:{fontWeight:"600",fontSize:3},as:"h2",children:rI.sidePanelBulkAddLabel})]}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-start"},children:[(0,O.jsx)(bf,{targetRepository:e},"repoSuggestions"),(0,O.jsx)(pw.Z,{sx:{flex:1,ml:2},disabled:!(l&&s),leadingVisual:eF.SearchIcon,"aria-label":"Search for issues and pull requests",ref:I,type:"text",placeholder:"Search for issues and pull requests",onChange:N,onFocus:R,onBlur:P,...T,size:"small",value:j,trailingAction:E?(0,O.jsx)(bh,{onClick:_,disabled:!v&&!p||p===j}):void 0,...(0,ef.f)("suggested-items-search-input")})]}),(0,O.jsx)(co,{})]}),(0,O.jsx)(eO.Z,{sx:{position:"sticky",zIndex:"1",display:"flex",justifyContent:"flex-end",bottom:"0",backgroundColor:"canvas.default",borderTop:"1px solid",borderColor:"border.default",width:"100%"},children:(0,O.jsx)(cd.r,{variant:"primary",onClick:D,...(0,ef.f)("bulk-add-button"),disabled:u||c||m?.length===0||0===i.length,sx:{my:3,mr:4},children:c?1===i.length?"Adding item...":"Adding items...":"Add selected items"})})]})};try{bh.displayName||(bh.displayName="SearchButton")}catch{}try{bg.displayName||(bg.displayName="BulkAddView")}catch{}var by=r(33831);let bx=(0,H.forwardRef)((e,t)=>{let[r,a]=g5(),[n,i]=(0,H.useState)(""),[l,s]=(0,H.useState)(!1),[o,d]=(0,H.useState)(!1);(0,H.useEffect)(()=>a(""!==n.trim()),[n,a]);let[u,c]=(0,H.useState)("edit"),m=()=>{i(""),c("edit"),s(!1)};(0,H.useEffect)(()=>{if(m$())return;let e=e=>{let r="r"===e.key,a=window.getSelection()?.toString(),n=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey,l=document.activeElement instanceof HTMLTextAreaElement||document.activeElement instanceof HTMLInputElement;r&&a&&!n&&!l&&((0,uU.flushSync)(()=>{i(e=>e.length?`${e}

> ${a}

`:`> ${a}

`)}),t&&"current"in t&&(t?.current?.scrollIntoView(),t?.current?.focus())),d((e.ctrlKey||e.metaKey)&&e.shiftKey)},r=()=>d(!1);return window.addEventListener("keydown",e),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",r)}},[t]);let{addIssueComment:p,sidePanelMetadata:f,updateSidePanelItemState:h}=g7(),g=(0,H.useMemo)(()=>new Set(f.capabilities),[f]),y=d1({request:async()=>{s(!0),await p(n),m()},rollback:i,showErrorToast:!0}),x=()=>r&&!l&&y.perform(void 0,n),b=d1({request:async({state:e,stateReason:t})=>{s(!0),r?await p(n,e,t):await h(e,t),m()},rollback:i,showErrorToast:!0}),v=(e,t)=>!l&&b.perform({state:e,stateReason:t},n),w=g.has("reopen")?()=>v(aj.Open,aC.Reopened):void 0,j=g.has("close")?e=>v(aj.Closed,e):void 0,C=xN();return f.itemKey.kind!==lC.ISSUE?null:(0,O.jsx)(g9.q,{label:"Add new comment",showLabel:!1,disabled:l,value:n,onChange:i,placeholder:"Leave a comment",subject:C,onPrimaryAction:()=>{if(o)return f.state.state===aj.Closed?w?.():j?.();x()},viewMode:u,onChangeViewMode:c,ref:t,sx:{mb:2,boxShadow:"shadow.small"},actions:(0,O.jsx)(bC,{disabled:l,isCommentEmpty:!r,currentIssueState:f.state.state,currentIssueStateReason:f.state.stateReason,onSaveComment:x,onClose:j,onReopen:w}),...(0,ef.f)("markdown-editor")})});function bb(e,t,r){return e===aj.Open?r?rI.issueButtonLabel.closeWithComment:rI.issueButtonLabel.closeIssue:t===aC.NotPlanned?rI.issueButtonLabel.closeAsNotPlanned:rI.issueButtonLabel.closeAsCompleted}bx.displayName="SidePanelAddComment";let bv=({selectedStateReason:e,issueState:t,onClose:r,onReopen:a,hasComment:n,disabled:i})=>{switch(e){case aC.Completed:return(0,O.jsx)(cd.r,{size:"small",onClick:()=>r?.(),leadingVisual:eF.IssueClosedIcon,sx:{color:"done.fg",display:"inline-block"},disabled:!r||i,...(0,ef.f)("sidepanel-close-issue-as-completed-button"),children:(0,O.jsx)(eB.Z,{sx:{color:"fg.default"},children:bb(t,e,n)})});case aC.Reopened:return(0,O.jsx)(cd.r,{size:"small",onClick:a,leadingVisual:eF.IssueReopenedIcon,sx:{color:"open.fg"},disabled:!a||i,...(0,ef.f)("sidepanel-reopen-issue-button"),children:(0,O.jsx)(eB.Z,{sx:{color:"fg.default"},children:n?rI.issueButtonLabel.reopenWithComment:rI.issueButtonLabel.reopenIssue})});case aC.NotPlanned:return(0,O.jsx)(cd.r,{size:"small",onClick:()=>r?.(aC.NotPlanned),leadingVisual:eF.SkipIcon,sx:{color:"fg.muted"},disabled:!r||i,...(0,ef.f)("sidepanel-close-issue-as-not-planned-button"),children:(0,O.jsx)(eB.Z,{sx:{color:"fg.default"},children:bb(t,e,n)})});default:return null}},bw=({selectedStateReason:e,setSelectedStateReason:t,issueState:r,issueStateReason:a,canClose:n,canReopen:i})=>{let l=(0,O.jsxs)(mx.S.Item,{onSelect:()=>t(aC.Completed),selected:e===aC.Completed,disabled:!n,children:[(0,O.jsx)(mx.S.LeadingVisual,{sx:{color:"done.fg"},children:(0,O.jsx)(eF.IssueClosedIcon,{})}),rI.issueButtonLabel.closeAsCompleted,(0,O.jsx)(mx.S.Description,{variant:"block",children:rI.issueButtonLabel.closeAsCompletedDescription})]},"close-issue-as-completed-option"),s=(0,O.jsxs)(mx.S.Item,{onSelect:()=>t(aC.NotPlanned),selected:e===aC.NotPlanned,disabled:!n,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.SkipIcon,{})}),rI.issueButtonLabel.closeAsNotPlanned,(0,O.jsx)(mx.S.Description,{variant:"block",children:rI.issueButtonLabel.closeAsNotPlannedDescription})]},"close-issue-as-not-planned-option"),o=(0,O.jsxs)(mx.S.Item,{onSelect:()=>t(aC.Reopened),selected:e===aC.Reopened,disabled:!i,children:[(0,O.jsx)(mx.S.LeadingVisual,{sx:{color:"open.fg"},children:(0,O.jsx)(eF.IssueReopenedIcon,{})}),rI.issueButtonLabel.reopenIssue]},"reopen-issue-option");return(0,O.jsxs)(mx.S,{selectionVariant:"single",role:"listbox","aria-roledescription":"update issue state options menu",sx:{display:"flex",flexDirection:"column"},children:[r===aj.Open&&(0,O.jsxs)(O.Fragment,{children:[l,s]}),r===aj.Closed&&(a===aC.Completed||!a)&&(0,O.jsxs)(O.Fragment,{children:[o,s]}),r===aj.Closed&&a===aC.NotPlanned&&(0,O.jsxs)(O.Fragment,{children:[o,l]})]})};function bj(e){return e===aj.Open?aC.Completed:aC.Reopened}let bC=({isCommentEmpty:e,onSaveComment:t,currentIssueState:r,currentIssueStateReason:a,disabled:n,onClose:i,onReopen:l})=>{let[s,o]=(0,H.useState)(bj(r));(0,uG.b)(()=>o(bj(r)),[r,a]);let[d,u]=(0,H.useState)(!1);return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:2},children:[(i||l)&&(0,O.jsxs)(by.Z,{sx:{display:"flex"},children:[(0,O.jsx)(bv,{disabled:n,issueState:r,hasComment:!e,selectedStateReason:s,onClose:i,onReopen:l}),(0,O.jsxs)(fj.P,{open:d,onOpenChange:u,children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{size:"small",icon:eF.TriangleDownIcon,"aria-label":rI.issueSideButtonMoreOptionsLabel})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(bw,{selectedStateReason:s,setSelectedStateReason:o,canClose:void 0!==i,canReopen:void 0!==l,issueState:r,issueStateReason:a})})]})]}),(0,O.jsx)(ye.n,{variant:"primary",className:"prc-Button--primary",disabled:e||n,onClick:t,...(0,ef.f)("add-comment-button"),children:"Comment"})]})};try{(h=CloseAsCompleted).displayName||(h.displayName="CloseAsCompleted")}catch{}try{(g=CloseAsNotPlanned).displayName||(g.displayName="CloseAsNotPlanned")}catch{}try{(y=Reopen).displayName||(y.displayName="Reopen")}catch{}let bI=({itemURL:e})=>{let{sidePanelMetadata:{comments:t,capabilities:r},editIssueComment:a,reactToSidePanelItem:n}=g7(),[i,l]=(0,H.useState)(null),s=(0,H.useRef)(null),o=ma(i).offsetHeight??0;return t?(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",px:2,backgroundColor:"canvas.subtle",borderTop:"1px solid",borderColor:"border.muted",flex:"auto"},as:"section",ref:l,...(0,ef.f)("all-comments-box"),children:[(0,O.jsx)("h3",{style:{clipPath:"circle(0)",position:"absolute"},children:"Comments"}),(0,O.jsx)(bS,{onClick:()=>{s.current?.scrollIntoView({behavior:"smooth",block:"end"}),s.current?.focus({preventScroll:!0})},visible:o>=1e4}),(0,O.jsx)("ul",{style:{listStyle:"none"},children:t.map(t=>(0,O.jsx)(bT,{comment:t,editIssueComment:a,reactToSidePanelItem:n,itemURL:e},t.id))}),r?.includes("comment")&&(0,O.jsx)(bx,{ref:s})]}):null},bS=({onClick:e,visible:t})=>(0,O.jsx)(bk,{sx:{display:"flex",justifyContent:"flex-end",px:3},children:(0,O.jsx)(cd.r,{variant:"invisible",size:"small",onClick:e,trailingVisual:eF.ArrowDownIcon,sx:{px:2,position:t?"unset":"absolute",clipPath:t?"unset":"Circle(0)",":focus":{position:"unset",clipPath:"unset"}},"aria-label":"Jump to 'add comment' input",...(0,ef.f)("jump-to-bottom-button"),children:rI.jumpToBottom})}),bk=({children:e,sx:t})=>(0,O.jsx)(eO.Z,{sx:{borderLeft:"1px solid",borderColor:"border.muted",py:2,ml:4,...t},children:e}),bT=({comment:e,editIssueComment:t,reactToSidePanelItem:r,itemURL:a})=>{let n=`${a}#issuecomment-${e.id}`,i=e.capabilities?.includes("editDescription")?async r=>{await t(e.id,r)}:void 0,l=e.capabilities?.includes("react")?(t,a,n)=>r(t,a,n,e.id):void 0;return(0,O.jsxs)(eO.Z,{as:"li",...(0,ef.f)(`comments-box-${e.id}`),children:[(0,O.jsx)(eO.Z,{sx:{border:"1px solid",borderColor:"border.muted",backgroundColor:"canvas.default",borderRadius:2,boxShadow:"shadow.small"},children:(0,O.jsx)(xA,{author:e.user,authorAssociation:e.authorAssociation,createdAt:new Date(e.createdAt),editedAt:e.description.editedAt?new Date(e.description.editedAt):void 0,description:e.description,reactions:e.reactions,onEdit:i,onReact:l,url:n})}),(0,O.jsx)(bk,{})]})};try{bI.displayName||(bI.displayName="SidePanelComments")}catch{}try{bS.displayName||(bS.displayName="JumpToBottomButton")}catch{}try{bk.displayName||(bk.displayName="TimelineSpacer")}catch{}var bN=r(6457),b_=r(87251);let bR=e=>e!==eL.RedactedItem;async function bP(e){let t=aa("memex-item-archive-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function bD(e){let t=aa("memex-item-unarchive-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}function bE(e){let t=(0,H.useCallback)((t,r)=>e.mutateAsync(t,r).catch(fV.Z),[e]);return{mutation:e,mutateAsync:t}}let bA=(0,H.createContext)(null),bM=(e,t)=>{switch(t.type){case"removeLast":return e.slice(1);case"register":return[t.data,...e].slice(0,5)}},bL=({children:e})=>{let[[t],r]=(0,H.useReducer)(bM,[]),{postStats:a}=os(),n=(0,H.useMemo)(()=>t&&{...t,revert:e=>{t.revert(),r({type:"removeLast"}),a({name:"undo",ui:e,context:t.description})}},[t,a]),i=(0,H.useMemo)(()=>({lastAction:n,registerAction:e=>r({type:"register",data:e})}),[n]);return ep(()=>n?["z",`Undo ${n.description}`,"undo",()=>n.revert("command_palette_command")]:null,[n]),(0,H.useEffect)(()=>{let e=e=>{let t=mz(e)===mV.META_Z,r=document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement;t&&!r&&n&&!e.defaultPrevented&&(e.preventDefault(),n.revert("keyboard_shortcut"))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,a]),(0,O.jsx)(bA.Provider,{value:i,children:e})},bF=()=>(0,H.useContext)(bA);try{bA.displayName||(bA.displayName="HistoryContext")}catch{}try{bL.displayName||(bL.displayName="HistoryProvider")}catch{}let bZ=()=>{let e=hI(),{findMemexItem:t}=hi();return{removeSuggestions:(0,H.useCallback)(r=>{e.removeSuggestions(r.map(e=>"number"==typeof e?t(e)?.getSuggestionsCacheKey():e.getSuggestionsCacheKey()).filter(e=>e?.length))},[e,t])}},bO=()=>{let{removeSuggestions:e}=bZ(),{setArchiveStatus:t}=uo(),{getIssuesIdsToRemove:r,removeParentFromChildren:a}=hm(),{tasklist_block:n}=n9(),i=(0,W.NL)(),{addToast:l}=e9(),s=bF(),o=(0,lw.D)({mutationFn:e=>bP(e),onMutate:e=>{let t=r(e.memexProjectItemIds),a=sW(i);return sK(i,e.memexProjectItemIds),f2(),{originalQueryData:a,issueIdsToRemove:t}},onSuccess:(r,i,l)=>{let o=n&&l?.issueIdsToRemove?a(l.issueIdsToRemove):void 0;e(i.memexProjectItemIds),t(),l&&s&&s.registerAction({description:rS.archive(i.memexProjectItemIds.length),revert:()=>d.mutateAsync({archivedItemIds:i.memexProjectItemIds,originalItemModels:sJ(l.originalQueryData),rollbackRemoveParentFromChildren:o})})},onError:(e,t,r)=>{r?.originalQueryData&&sG(i,r?.originalQueryData),l({type:"error",message:e instanceof api_error_ApiError?e.message:rI.genericErrorMessage})}}),d=(0,lw.D)({mutationFn:({archivedItemIds:e})=>bD({memexProjectItemIds:e}),onMutate:({archivedItemIds:e,originalItemModels:t})=>{for(let r of e){let e=t?.findIndex(e=>e.id===r)??-1,a=t?.[e];a&&sq(i,a,e)}f2()},onSuccess:(e,{rollbackRemoveParentFromChildren:r})=>{r?.(),t()},onError:(e,{archivedItemIds:t})=>{sK(i,t),l({type:"error",message:`Failed to undo archive. ${e instanceof api_error_ApiError?e.message:rI.genericErrorMessage}`})}});return bE(o)},bV=()=>{let{findMemexItem:e}=hi(),{mutateAsync:t}=bO();return{archiveMemexItems:(0,H.useCallback)(async r=>{let a=r.filter(t=>{let r=e(t);return!!r&&bR(r.contentType)});if(0!==a.length)return t({memexProjectItemIds:a})},[e,t])}},bB=(e,t,r,a)=>({title:r||rI.defaultArchiveConfirmationTitle(e),content:a||rI.defaultArchiveConfirmationMessage(e,t),confirmButtonContent:"Archive"}),b$=(e,t,r,a)=>{let{postStats:n}=os(),i=(0,at.N)(),{archiveMemexItems:l}=bV();return{openArchiveConfirmationDialog:(0,H.useCallback)(async(s,o,d,u)=>{let c=s.length>1;e?.();let m=async()=>{a?.(),await l(s),t?.(s),n({name:"item_archive",ui:o,numberOfRows:s.length})};await i(bB(c,s.length,d,u))?m():r?.()},[e,i,a,l,t,n,r])}};async function bz(e){let t=aa("memex-item-delete-api-data"),{data:r}=await ac(t.url,{method:"DELETE",body:e});return r}let bW=()=>{let{removeSuggestions:e}=bZ(),{setArchiveStatus:t}=uo(),{getIssuesIdsToRemove:r,removeParentFromChildren:a}=hm(),{tasklist_block:n}=n9(),i=(0,W.NL)(),{addToast:l}=e9();return bE((0,hW.c)({mutationFn:e=>bz(e),onMutate:t=>{let a=r(t.memexProjectItemIds);e(t.memexProjectItemIds);let n=sW(i),l=sK(i,t.memexProjectItemIds);return f2(),{originalQueryData:n,rollbackData:l,issueIdsToRemove:a}},onSuccess:(e,r,i)=>{n&&i?.issueIdsToRemove&&a(i.issueIdsToRemove),t()},onError:(e,t,r)=>{r?.originalQueryData?sG(i,r.originalQueryData):r?.rollbackData&&sQ(i,r.rollbackData),l({type:"error",message:e instanceof api_error_ApiError?e.message:rI.genericErrorMessage})}})())},bG=()=>{let{mutateAsync:e}=bW();return{removeMemexItems:(0,H.useCallback)(async t=>{if(t.length)return e({memexProjectItemIds:t})},[e])}},bU=(e,t,r,a)=>{let{postStats:n}=os(),{removeMemexItems:i}=bG(),{confirmRemoveItems:l}=bH();return{openRemoveConfirmationDialog:(0,H.useCallback)(async(s,o,d={})=>{e?.(),await l(s,d)?(a?.(),(0,uU.flushSync)(()=>{i(s)}),(0,uU.flushSync)(()=>{t?.(s)}),n({name:"item_delete",ui:o,numberOfRows:s.length})):r?.()},[e,l,a,n,i,t,r])}};function bH(){let e=(0,at.N)();return{confirmRemoveItems:(0,H.useCallback)(async(t,r={})=>{let a=t.length>1;return e({title:`Delete item${a?"s":""}?`,content:`Are you sure you want to delete ${a?`these ${t.length} items`:"this item"} from this project?`,confirmButtonContent:"Delete",confirmButtonType:"danger",...r})},[e])}}function bq(e){let{loggedInUser:t,themePreferences:r,relayIds:a,projectOwner:n}=i5(),{graphql_subscriptions:i}=n9(),l=n7(),[s,o]=(0,H.useState)(e);(0,H.useEffect)(()=>{o(e)},[e]);let{hasWritePermissions:d}=i4(),{items:u}=dP(),c=(0,W.NL)(),{openProjectItemInPane:m,reloadPaneItem:p,pinned:f}=dq(),h=(0,H.useCallback)(e=>u.find(t=>{let r=t.getItemIdentifier();return!!r&&r.owner===e.owner&&r.repo===e.repo&&r.number===e.number}),[u]),g=(0,H.useCallback)((e,t)=>{let r=e&&h(e);if(!r||!e){window.open(t,"_blank");return}m(r),o({owner:e.owner,repo:e.repo,number:e.number,url:t,itemId:r.id})},[h,m]),y=(0,H.useCallback)(e=>{if(e.metaKey||e.shiftKey||1===e.button||!e.target||!(e.target instanceof HTMLElement))return;let t=e.target.closest("a")?.href;t&&(e.preventDefault(),g(ay(t),t))},[g]),x=(0,H.useCallback)((e,t)=>{let r=h(e);r&&m(r),o({owner:e.owner,repo:e.repo,number:e.number,url:t,itemId:r?.id})},[h,m]),{closePane:b}=dq(),v={pasteUrlsAsPlainText:t?.paste_url_link_as_plain_text??!1,useMonospaceFont:r.markdown_fixed_width_font},{openArchiveConfirmationDialog:w}=b$(void 0,void 0,void 0,()=>b({force:!0})),{openRemoveConfirmationDialog:j}=bU(void 0,void 0,void 0,()=>b({force:!0})),C=(0,H.useCallback)(()=>{window.open(s.url)},[s.url]),I=(0,H.useCallback)(()=>{navigator.clipboard.writeText(window.location.toString())},[]),S=(0,H.useCallback)(()=>{s.itemId&&w([s.itemId],aP)},[s.itemId,w]),k=(0,H.useCallback)(()=>{s.itemId&&j([s.itemId],aP)},[s.itemId,j]),T=[(0,O.jsxs)(mx.S.Item,{onSelect:C,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.LinkExternalIcon,{})}),rq.openInNewTab]},"open-in-new-tab")].concat(s.itemId?[(0,O.jsxs)(mx.S.Item,{onSelect:I,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ProjectSymlinkIcon,{})}),rq.copyLinkInProject]},"copy-link-in-project")]:[],s.itemId&&d?[(0,O.jsxs)(mx.S.Item,{onSelect:S,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),rq.archiveInProject]},"archive-in-project"),(0,O.jsxs)(mx.S.Item,{variant:"danger",onSelect:k,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),rq.deleteFromProject]},"delete-from-project")]:[]),N=(0,H.useCallback)(()=>{p()},[p]),_=(0,H.useCallback)(async()=>{s.itemId&&sK(c,[s.itemId]),b({force:!0})},[b,s.itemId,c]),R=(0,H.useCallback)(()=>{b({force:!0}),p()},[b,p]),[P,D]=(0,H.useState)({}),[,E]=g5(),[,A]=g5();(0,H.useEffect)(()=>{E(Object.values(P).some(e=>e))},[P,E]);let{owner:M,repo:L,number:F}=s,Z={withLiveUpdates:i,commentBoxConfig:v,onLinkClick:y,selectedProjectId:a?.memexProject,allowedProjectOwner:n?.login,customEditMenuEntries:T,issueQueriesFetchingPolicy:{fetchPolicy:"store-and-network"},onIssueUpdate:N,timelineEventBaseUrl:`/${M}/${L}/issues`,onIssueDelete:_,onClose:R,showRepositoryPill:!0,navigateBack:R,navigate:fV.Z,titleAs:"h2",innerSx:{pl:3,pr:3},additionalHeaderActions:(0,O.jsx)(bc,{showCloseButton:!1}),onCommentEditStart(e){D(t=>t[e]?t:{...t,[e]:!0})},onCommentEditCancel(e){D(t=>t[e]?{...t,[e]:!1}:t)},onIssueEditStateChange:A,useViewportQueries:!1,onSubIssueClick:x};return(0,O.jsx)(eO.Z,{sx:{position:"relative",height:"100%",overflowY:f?void 0:"auto"},children:(0,O.jsx)(eO.Z,{sx:{m:0,height:"100%"},children:(0,O.jsx)(b_.q,{children:(0,O.jsx)(fB.O,{features:l,children:(0,O.jsx)(fL.n,{appName:"memex",category:"Memex Project",metadata:{},children:(0,O.jsx)(bN.E4,{itemIdentifier:{owner:M,repo:L,number:F,type:"Issue"},optionConfig:Z})})})})})})}try{bq.displayName||(bq.displayName="SharedIssueViewer")}catch{}let bK=(0,H.forwardRef)(({issueType:e,...t},r)=>(0,O.jsx)(yJ.Z,{text:e.name,ref:r,...t,...(0,ef.f)("issue-type-token")}));bK.displayName="IssueTypeToken";let bQ=(e="medium")=>"small"===e?10:"medium"===e?14:"large"===e?16:24,bX=(0,H.forwardRef)(({avatars:e,...t},r)=>(0,O.jsx)(yJ.Z,{leadingVisual:()=>(0,O.jsx)(g_,{backgroundSx:{backgroundColor:"canvas.default",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.default} !important`},items:e,size:bQ(t.size)-1,maxVisible:3}),ref:r,...t}));bX.displayName="AvatarsToken";let bY=(0,H.forwardRef)(({linkedPullRequest:e,sx:t,...r},a)=>(0,O.jsx)(yJ.Z,{ref:a,as:"a",href:e.url,target:"_blank",rel:"noreferrer","data-hovercard-url":`${e.url}/hovercard`,leadingVisual:()=>(0,O.jsx)(u7,{isDraft:e.isDraft,state:e.state,type:eL.PullRequest,size:bQ(r.size)}),sx:{"&, &:hover":{bg:"canvas.default"},...t},text:`#${e.number}`,...(0,ef.f)("linked-pr-token"),...r}));bY.displayName="LinkedPullRequestToken";let bJ=(0,H.forwardRef)(({repository:e,withOwner:t,...r},a)=>(0,O.jsx)(yJ.Z,{leadingVisual:()=>(0,O.jsx)(c9,{repository:e,size:bQ(r.size)}),text:t?e.nameWithOwner:e.name,ref:a,...r,...(0,ef.f)("repository-token")}));bJ.displayName="RepositoryToken";let b0=(e,t)=>{let r=(0,pr.Gs)(e,t);return r===pr.DU&&t.toLocaleLowerCase()!==e.toLocaleLowerCase()&&(r=0),r};let ScoringCache=class ScoringCache{sortByWithCache(e,t){var r;let a=this.scoreCache.get(e)||0,n=this.scoreCache.get(t)||0,i=this.textCache.get(e)||"";return r=this.textCache.get(t)||"",a>n?-1:a<n?1:i<r?-1:i>r?1:0}getText(e){return this.textCache.get(e)}setText(e,t){null==this.scoreCache.get(e)&&this.textCache.set(e,t)}getScore(e){return this.scoreCache.get(e)}setScore(e,t){this.scoreCache.set(e,t)}constructor(){this.textCache=new WeakMap,this.scoreCache=new WeakMap}};function b1(e,t,r,a,n,i=5){let l=t;if(e){for(let n of(l=[],t)){let t=r(n);a.setText(n,t);let i=b0(e,t);a.setScore(n,i),i>0&&l.push(n)}l.sort(n)}null!==i&&(l=l.slice(0,i));let s=new WeakMap;for(let t of l){let a=r(t);s.set(t,{chunks:function(e,t){let r=(0,pr.m7)(e,t),a=-1,n=0,i=[];for(let e of r)e-1!==a&&(-1===a?i.push({startIndex:n,endIndex:e,highlight:!1}):(i.push({startIndex:n,endIndex:a+1,highlight:!0}),i.push({startIndex:a+1,endIndex:e,highlight:!1})),n=e),a=e;return a===t.length-1?i.push({startIndex:n,endIndex:t.length,highlight:!0}):-1===a?i.push({startIndex:n,endIndex:t.length,highlight:!1}):(i.push({startIndex:n,endIndex:a+1,highlight:!0}),i.push({startIndex:a+1,endIndex:t.length,highlight:!1})),i}(e,a)})}return{filteredItems:l,positionData:s}}let b2=new ScoringCache,b5=b2.sortByWithCache.bind(b2);function b3(e,t,r){return b1(e,t,e=>e.login+(e.name?` ${e.name}`:""),b2,b5,r)}var b4=r(30738);let b8={BEFORE:"before",AFTER:"after"},b6=(e,t)=>{let r=e?.rect?.current?.translated?.top,a=t?.rect.top;return"number"!=typeof r||"number"!=typeof a?null:r<=a?b8.BEFORE:b8.AFTER};function b7(e){let t=e.over?.rect;if(!t)return b8.BEFORE;if(e.activatorEvent instanceof KeyboardEvent)return e.active.rect.current?.translated?.top===t.top?b8.BEFORE:b8.AFTER;{let r=function(e){if(!(e.activatorEvent instanceof PointerEvent||e.activatorEvent instanceof MouseEvent))return null;let t=e.active.rect.current?.initial,r=e.active.rect.current?.translated;if(!t||!r)return null;let a={x:e.activatorEvent.clientX-t.left,y:e.activatorEvent.clientY-t.top};return{x:r.left+a.x,y:r.top+a.y}}(e);if(!r)return b8.BEFORE;let a=t.top+t.height/2;return r.y>a?b8.AFTER:b8.BEFORE}}let b9=()=>{let e=(0,W.NL)();return{setNewRowPosition:(0,H.useCallback)((t,r)=>(function(e,t,r){if(sP()){let a=sH(e,t),n=sJ(e.getQueryData(sv(e)))||[],i=n[a];if(!i)return{previousItemId:-1};let l="";if(r>0){let e=a<r?n[r]:n[r-1];e&&(l=e.id)}let s=[...n];return s.splice(a,1),s.splice(r,0,i),e.setQueryData(sv(e),sL(s)),{previousItemId:l,previousMovingItemIndex:a}}{let a=sH(e,t),n=sU(e,t);if(!n)return{previousItemId:-1};let i="",l=0;return e.setQueriesData(sZ,e=>{if(!sF(e))return sE(e);let t=l;l+=e.nodes.length;let s=a>=t&&a<l,o=r>=t&&r<l;if(!s&&!o)return e;if(o&&r>0){let n=a<r?r-t:r-t-1,l=e.nodes[n];l&&(i=l.id)}let d=[...e.nodes];return s&&d.splice(d.indexOf(n),1),o&&d.splice(a<r?r-t-(s?0:1):r-t,0,n),{...e,nodes:d}}),{previousItemId:i,previousMovingItemIndex:a}}})(e,t,r),[e]),setNewPositionForMWL:(0,H.useCallback)((t,r)=>(function(e,t,r){var a;let n;let i=sA(e),l={queryData:[],totalCounts:sS(e,i)},s=sM(e,t),o="overItemId"in r?sM(e,r.overItemId):(a={groupId:r.overGroupId},[...sb(e),a,sc]);if(!o||!s)return;let d="";e.setQueryData(s,e=>{if(!sF(e))return sE(e);l.queryData.push({queryKey:s,queryData:e});let r=e.nodes,a=r.findIndex(e=>e.id===t);n=r[a];let i=[...r];return i.splice(a,1),{...e,nodes:i}}),e.setQueryData(o,e=>{if(!sF(e))return sE(e);if(!n)return e;if(o!==s&&l.queryData.push({queryKey:o,queryData:e}),"overGroupId"in r)return{...e,nodes:[...e.nodes,n]};let{overItemId:t,side:a}=r,i=e.nodes,u=i.findIndex(e=>e.id===t),c="before"===a?u:u+1;if(c>0){let e=i[c-1];e&&(d=e.id)}else d="";let m=[...i];return m.splice(c,0,n),{...e,nodes:m}});let u=sa(s),c="overItemId"in r?sa(o):{groupId:r.overGroupId};if(sl(u)&&sl(c)&&u.groupId!==c.groupId){let t=sd(u),r=sd(c),a={groups:{[t]:sI(e,i,t,-1),[r]:sI(e,i,r,1)}};sj(e,i,a)}return"overItemId"in r?{previousItemId:d,rollbackData:l}:{previousItemId:void 0,rollbackData:l}})(e,t,r),[e])}};function ve(){let{updateColumnValueAndPriority:e}=ha(),t=(0,b4.U)(e,!0),{addToast:r}=e9(),{findMemexItem:a}=hi(),n=(0,b4.U)(a,!0),i=bF();return{updateItem:(0,H.useCallback)(async(e,a,l=rS.updateItem,s)=>{if(!e)return Promise.resolve();if(void 0!==s)try{vn([e],a,s)}catch(e){if(e instanceof UpdateValidationError){r({message:e.message,type:"warning"});return}throw e}let o=lH(a,e);await t(e,{columnValues:[a]}),i?.registerAction({description:l,revert:async()=>{let r=n(e.id);"object"==typeof r&&await t(r,{columnValues:[o]})}})},[t,n,r,i])}}function vt(e,t,r,a){let n=e.findIndex(e=>e.id===t);if(n<0)return -1;let i=e.findIndex(e=>e.id===r);return i<0?-1:i>n?a===b8.BEFORE?i-1:i:a===b8.BEFORE?i:i+1}function vr(){let{memex_table_without_limits:e}=n9(),{postStats:t}=os(),{setNewRowPosition:r,setNewPositionForMWL:a}=b9(),{findMemexItem:n}=hi(),{updateColumnValueAndPriority:i}=ha(),l=(0,W.NL)(),s=bF(),o=(0,H.useCallback)(async(n,{reorderData:s,updateColumnActions:o},{visibleItems:d})=>{let u,c,m,p;if(s){if(e){let e=a(n.id,s);m=e?.previousItemId,p=e?.rollbackData}else if("overItemId"in s){u=vt(sz(l),n.id,s.overItemId,s.side);let e=r(n.id,u);m=e.previousItemId,c=e.previousMovingItemIndex}}let f=function(e,t){if(e?.length||null!=t)return{columnValues:e,previousMemexProjectItemId:t}}(o,m);if(f){try{await i(n,f)}catch(e){throw void 0!==c&&c>=0?r(n.id,c):p&&sQ(l,p),e}return s&&"overItemId"in s&&d&&(u=vt(d,n.id,s.overItemId,s.side)),t({name:"item_order",context:`position: ${u}`,memexProjectItemId:n.id}),{newIndexForRow:u,prevIndexForRow:c}}},[e,t,l,a,r,i]),d=(0,b4.U)(o,!0),u=(0,b4.U)(n,!0),c=(0,H.useCallback)(e=>{let t=sz(l),r=t.findIndex(t=>t.id===e.id),a=t[r-1];if(a)return{overItemId:a.id,side:b8.AFTER};let n=t[0];if(n)return{overItemId:n.id,side:b8.BEFORE}},[l]);return{updateAndReorderItem:(0,H.useCallback)(async(e,t,r)=>{let a=n(e);if(!a)return;let i=t.updateColumnActions?.map(e=>lH(e,a)),l=c(a),m=async()=>{let t=u(e);t&&t!==b4.x&&(i||l)&&await d(t,{updateColumnActions:i,reorderData:l},{})},p=await o(a,t,r);return s?.registerAction({description:rS.moveItem,revert:m}),p},[n,c,o,s,u,d])}}function va(e,t){return e?.length&&t?{reorderData:t,updateColumnActions:e}:e?.length?{updateColumnActions:e}:t?{reorderData:t}:void 0}let UpdateValidationError=class UpdateValidationError extends Error{};function vn(e,t,r){switch(t.dataType){case eA.Assignees:for(let t of e)if((t.contentType===eL.Issue||t.contentType===eL.PullRequest)&&r!==t.contentRepositoryId)throw new UpdateValidationError(rI.unableToPasteAssigneesBetweensRepos);break;case eA.Milestone:for(let t of e){if(t.contentType===eL.DraftIssue)throw new UpdateValidationError(rI.unableToPasteMilestonesOnDraftIssue);if(r!==t.contentRepositoryId)throw new UpdateValidationError(rI.unableToPasteMilestonesBetweensRepos)}break;case eA.IssueType:for(let t of e){if(t.contentType===eL.DraftIssue)throw new UpdateValidationError(rI.unableToPasteIssueTypesOnDraftIssue);if(t.contentType===eL.PullRequest)throw new UpdateValidationError(rI.unableToPasteIssueTypesOnPullRequest)}break;case eA.ParentIssue:for(let t of e){if(t.contentType===eL.DraftIssue)throw new UpdateValidationError(rI.unableToPasteParentIssueOnDraftIssue);if(t.contentType===eL.PullRequest)throw new UpdateValidationError(rI.unableToPasteParentIssueOnPullRequest)}break;case eA.Labels:for(let t of e){if(t.contentType===eL.DraftIssue)throw new UpdateValidationError(rI.unableToPasteLabelsOnDraftIssue);if(r!==t.contentRepositoryId)throw new UpdateValidationError(rI.unableToPasteLabelsBetweensRepos)}}}let vi=e=>e.login,vl=(e,t)=>{let r=t.find(t=>t.id===e.id);return{...e,leadingVisual:()=>(0,O.jsx)(mo.O,{alt:e.login,src:e.avatarUrl,sx:{mr:1}}),text:e.login,description:e.name??void 0,descriptionVariant:"inline",groupId:r?"assigned":"suggestions",...(0,ef.f)("table-cell-editor-row")}};var vs=r(90836);let vo=(0,H.forwardRef)(({children:e,dangerousHtml:t,sx:r,...a},n)=>{let i={textAlign:"left",whiteSpace:"nowrap",color:"fg.muted",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",code:{fontFamily:"fonts.mono",fontSize:0},...r};return t?(0,O.jsx)(u5,{...a,ref:n,sx:i,children:t}):(0,O.jsx)(eB.Z,{...a,ref:n,sx:i,children:e})});function vd(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}function vu(e){return{...e,name:e.login}}vo.displayName="TextCell";let vc=({user:e,isDisabled:t})=>(0,O.jsxs)(eO.Z,{sx:{mr:2,alignItems:"center",overflow:"hidden",display:"flex"},children:[(0,O.jsx)(mo.O,{loading:"lazy",alt:e.name,src:e.avatarUrl,sx:{minWidth:"20px",mr:1},"data-hovercard-url":e.hovercardUrl}),(0,O.jsx)(vo,{sx:{fontSize:1},isDisabled:t,children:e.name})]}),vm=({users:e,isDisabled:t})=>e?e.length>1?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(vs.Z,{sx:{zIndex:0,mr:1},children:e.map(e=>(0,O.jsx)(mo.O,{loading:"lazy",alt:e.name,src:e.avatarUrl,"data-hovercard-url":e.hovercardUrl},e.id))}),(0,O.jsx)(vo,{sx:{fontSize:1,textOverflow:"ellipsis"},isDisabled:t,children:re(e.map(e=>e.name))})]}):(0,O.jsx)(O.Fragment,{children:e.map(e=>(0,O.jsx)(vc,{user:e,isDisabled:t},e.id))}):null;try{vc.displayName||(vc.displayName="AvatarWithLogin")}catch{}try{vm.displayName||(vm.displayName="UserGroup")}catch{}let vp=({children:e,listRef:t,onKeyDown:r})=>(0,O.jsx)(eO.Z,{as:"dl",ref:t,onKeyDown:r,children:e}),vf=({label:e,children:t,...r})=>(0,O.jsxs)(eO.Z,{as:"div",sx:{px:2,py:1,display:"flex",gap:1,flexDirection:"row",flexWrap:"wrap"},...r,children:[(0,O.jsx)(vh,{children:e}),(0,O.jsx)(eO.Z,{as:"dd",sx:{flexBasis:"65%",flexGrow:1,overflow:"hidden",minWidth:"200px"},children:t})]}),vh=({children:e})=>(0,O.jsx)(eB.Z,{as:"dt",sx:{px:2,pt:"6px",flexBasis:"33%",flexGrow:1,flexShrink:0,fontSize:0,fontWeight:"bold",color:"fg.muted"},children:e}),vg=(0,H.forwardRef)(({interactable:e=!1,children:t,sx:r,...a},n)=>{let i=e?{cursor:"pointer",backgroundColor:"canvas.subtle"}:{};return(0,O.jsx)(eO.Z,{...a,sx:{px:2,py:1,background:"transparent",border:"none",borderRadius:1,":hover":i,":focus":i,width:"100%",textAlign:"left",...r},ref:n,...(0,ef.f)("field-value"),children:t})});vg.displayName="FieldValue";try{vf.displayName||(vf.displayName="Field")}catch{}try{vh.displayName||(vh.displayName="FieldLabel")}catch{}let vy=({model:e,columnModel:t,content:r,onSaved:a,renderer:n,editor:i})=>{let{hasWritePermissions:l}=i4();return l?(0,O.jsx)(i,{model:e,columnModel:t,content:r,onSaved:a}):(0,O.jsx)(vg,{children:(0,O.jsx)(n,{model:e,columnModel:t,content:r})})};try{vy.displayName||(vy.displayName="SidebarField")}catch{}let vx={position:"relative",p:"32px",textAlign:"center"},vb={mx:1,mb:2,color:"fg.muted"},vv={color:"fg.muted",mt:2};function vw(e){let t,r;switch(e.error.name){case"RepoArchived":r=rI.repoArchivedErrorMessage,t=(0,O.jsx)(eF.ArchiveIcon,{size:26});break;case"Forbidden":r=rI.forbiddenErrorMessage,t=(0,O.jsx)(eF.LockIcon,{size:26});break;case"IssueTypesDisabledForRepo":case"IssueTypesDisabledForRepoOwner":r=e.error.message,t=(0,O.jsx)(eF.AlertIcon,{size:26});break;default:r=rI.genericErrorMessage,t=(0,O.jsx)(eF.AlertIcon,{size:26})}return(0,O.jsxs)(eO.Z,{sx:vx,children:[(0,O.jsx)(eO.Z,{sx:vb,children:t}),(0,O.jsx)(eB.Z,{as:"p",sx:vv,children:r})]})}try{vw.displayName||(vw.displayName="SelectMenuError")}catch{}let vj=(e,t,r)=>{let a;let n=hT();if(r)return{suggestions:r,error:void 0};let i=e.getSuggestionsCacheKey();switch(t){case eM.Assignees:a=n.getSuggestedAssigneesForItem(i);break;case eM.Labels:a=n.getSuggestedLabelsForItem(i);break;case eM.Milestone:a=n.getSuggestedMilestonesForItem(i);break;case eM.IssueType:a=n.getSuggestedIssueTypesForItem(i)}return a instanceof Error?{suggestions:void 0,error:a}:{suggestions:a,error:void 0}},vC=({fetchSuggestions:e,memexItemModel:t,columnId:r,filterSuggestions:a,maxSuggestions:n,options:i,initialFilterValue:l=""})=>{let[s,o]=(0,H.useState)(l),{suggestions:d,error:u}=vj(t,r,i),c=(0,H.useMemo)(()=>d?a(s,d,n).filteredItems:void 0,[a,s,d,n]);return{onOpen:()=>{(t.contentType!==eL.DraftIssue||lK(r))&&e&&e()},setFilterValue:o,filterValue:s,suggestions:d,filteredSuggestions:c,error:u}},vI={leadingVisual:eF.CircleSlashIcon,text:"No matches",disabled:!0,selected:void 0,key:"no-matches",...(0,ef.f)("table-cell-editor-empty-row")},vS={leadingVisual:void 0,text:"Nothing to show",disabled:!0,selected:void 0,key:"blankslate",...(0,ef.f)("table-cell-editor-blankslate-row")};function vk({model:e,selected:t,initialFilterValue:r,blankslateText:a,saveSelected:n,onOpenChange:i,open:l,fetchOptions:s,options:o,filterOptions:d,getOptionMatchingFilterValue:u,columnId:c,getSortAttribute:m,convertOptionToItem:p,renderCreateNewOption:f,singleSelect:h=!1,groupMetadata:g,placeholderText:y,renderAnchor:x}){let{projectLimits:b}=i5(),{postStats:v}=os(),[w,j]=yh(t),C=tZ(c);(0,J.Z)(C,"systemColumnId must be defined");let{onOpen:I,setFilterValue:S,filterValue:k,suggestions:T,filteredSuggestions:N,error:_}=vC({initialFilterValue:r,memexItemModel:e,columnId:C,fetchSuggestions:s,filterSuggestions:d,maxSuggestions:h?b.singleSelectColumnOptionsLimit:12,options:o}),R=(0,e5.Z)(I);(0,H.useEffect)(()=>{R.current()},[e,R]);let P=(0,H.useCallback)(t=>{n(t),v({name:w.length>0?a0:a1,memexProjectColumnId:tZ(c),memexProjectItemId:e.itemId()})},[c,e,v,n,w.length]),D=(0,xh.Z)();(0,H.useEffect)(()=>()=>{void 0!==l||h||D()||P(w)},[l,D,w,h,P]);let E=(0,H.useRef)(l);(0,H.useEffect)(()=>{!E.current||l||h||P(w),E.current=l},[l,w,h,P]);let A=(0,H.useCallback)(e=>{let t=(Array.isArray(e)?e:[e].filter(e=>e)).sort((e,t)=>m(e).localeCompare(m(t)));j(t),h&&P(t)},[j,h,m,P]),M=(0,H.useMemo)(()=>new WeakMap,[p]),L=(0,H.useMemo)(()=>new Set(w.map(e=>e.id)),[w]),F=(0,H.useCallback)(e=>{let t=M.get(e);return t||(t=p(e,w),M.set(e,t)),t},[M,p,w]),Z=(0,H.useMemo)(()=>(N??[]).map(F),[N,F]),V=(0,H.useMemo)(()=>h?(N||T||[]).filter(e=>L.has(e.id)).map(F)[0]:(T??[]).filter(e=>L.has(e.id)).map(F),[N,T,F,h,L]),B=k&&N&&u&&!N.some(e=>u(k,e)),$=(0,H.useMemo)(()=>({...vS,text:a??vS.text}),[a]),z=[...Z.map(e=>(h&&(e.children&&(e.children=(0,O.jsx)(eB.Z,{sx:{wordBreak:"break-all"},children:e.children})),e.onAction=(t,r)=>{r.preventDefault(),A(V===e?void 0:e),i(!1,"selection",r)}),e)),...k||Z.length||!a?[]:[$],...!k||Z.length||f?[]:[vI],...B&&f?[f(k)]:[]],W=(0,H.useCallback)(()=>_?(0,O.jsx)(vw,{error:_}):(0,O.jsx)(O.Fragment,{}),[_]),G={open:l??!0,showItemDividers:!0,onSelectedChange:A,selected:V,filterValue:k,onFilterChange:S,onOpenChange:i,items:z,loading:!N&&!_,placeholderText:y,renderAnchor:x};return(g&&(G.groupMetadata=g.filter(e=>z.some(t=>"groupId"in t&&t.groupId===e.groupId))),_)?(G.renderItem=W,G.textInputProps={disabled:!0},G.items=[{}],{...G,...(0,ef.f)("table-cell-editor-error")}):G}function vT({displayValue:e,saveSelected:t,selected:r,...a}){let[n,i]=(0,H.useState)(!1),l=(0,H.useCallback)(e=>i(e),[]),[s,o]=(0,H.useState)(!1),d=(0,H.useRef)(!0),u=(0,xh.Z)(),{perform:c}=d1({request:async e=>{o(!0),d.current=!1,await t(e),d.current=!0,o(!1)},rollback:()=>{d.current=!0,u()&&o(!1)}});(0,H.useEffect)(()=>{d.current&&o(!1)},[r]);let m=vk({...a,open:n,onOpenChange:l,selected:r,renderAnchor:t=>(0,O.jsx)(vg,{interactable:!0,as:"button",...t,children:s?(0,O.jsx)(u$.Z,{size:"small"}):e}),saveSelected:c});return(0,O.jsx)(c1.b,{...m,overlayProps:{width:"small",height:"auto",maxHeight:"large",...m.overlayProps}})}vT.displayName="SidebarSelectPanelFunc";let vN=(0,H.memo)(vT);try{vN.displayName||(vN.displayName="SidebarSelectPanel")}catch{}let v_=({columnName:e,columnType:t,...r})=>"dangerousHtml"in r&&r.dangerousHtml?(0,O.jsx)(u5,{...hp(r,["dangerousHtml"]),children:r.dangerousHtml}):"text"in r&&r.text?(0,O.jsx)(eB.Z,{...hp(r,["text"]),children:r.text}):(0,O.jsx)(vP,{columnName:e,columnType:t,...r}),vR={},vP=({columnName:e,columnType:t,sx:r=vR,...a})=>{let n;let{hasWritePermissions:i}=i4();if(!i)return(0,O.jsx)(eB.Z,{sx:{color:"fg.subtle",...r},...a,children:rI.noPermissionEmptyColumnValue(e)});switch(t){case eA.Number:n=rI.emptyColumnNameValue.number;break;case eA.Date:n=rI.emptyColumnNameValue.date;break;case eA.Text:n=rI.emptyColumnNameValue.text;break;case eA.SingleSelect:n=rI.emptyColumnNameValue.singleSelect;break;case eA.Iteration:n=rI.emptyColumnNameValue.iteration;break;default:n=rI.addColumnNameValue(e)}return(0,O.jsxs)(eO.Z,{children:[(0,O.jsx)(eB.Z,{sx:{color:"fg.subtle",...r},...a,children:n}),(t===eA.Iteration||t===eA.SingleSelect)&&(0,O.jsx)(eZ.Z,{icon:eF.TriangleDownIcon,size:"small",sx:{verticalAlign:"middle",color:"fg.muted",opacity:.3,".is-focused &":{opacity:1},ml:2}})]})};try{v_.displayName||(v_.displayName="TextValueWithFallback")}catch{}try{vP.displayName||(vP.displayName="FallbackText")}catch{}let vD=()=>{let{setColumnValue:e}=hr(),{findMemexItem:t}=hi();return{updateLocalMemexItem:(0,H.useCallback)((r,a)=>{let n=t(r);n&&e(n,a,!0)},[t,e])}},vE=e=>(0,O.jsx)(vy,{...e,renderer:vM,editor:vA}),vA=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueAssignees:n}=g7(),{fetchSuggestedAssignees:i}=hS(),{updateLocalMemexItem:l}=vD(),s=(0,H.useMemo)(()=>r?.map(e=>({selected:!0,...e}))??[],[r]);return(0,O.jsx)(vN,{model:e,columnId:t.id.toString(),getSortAttribute:vi,convertOptionToItem:vl,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&l(e.memexItemId?.(),{memexProjectColumnId:eM.Assignees,value:t}),a()},fetchOptions:()=>i(e),filterOptions:b3,placeholderText:"Search people",displayValue:(0,O.jsx)(vM,{model:e,columnModel:t,content:r}),groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}]})},vM=({columnModel:e,content:t})=>t?.length?(0,O.jsx)(eO.Z,{sx:{display:"flex"},children:(0,O.jsx)(vm,{users:t.map(vu),isDisabled:!0})}):(0,O.jsx)(v_,{columnName:e.name});try{vE.displayName||(vE.displayName="AssigneeField")}catch{}try{vA.displayName||(vA.displayName="AssigneeEditor")}catch{}try{vM.displayName||(vM.displayName="AssigneeRenderer")}catch{}let vL=e=>(0,O.jsx)(vy,{...e,renderer:vO,editor:vZ}),vF=e=>e?{value:new Date((0,yU.c)(e,{representation:"date"}))}:void 0,vZ=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=ve(),{postStats:i}=os(),l=(0,H.useCallback)(async r=>{if(nK(t)){let l=e.getCustomField(t.id);await n(e,{dataType:eA.Date,memexProjectColumnId:t.id,value:vF(r)}),i({name:l?.value?a0:a1,memexProjectColumnId:t.id,memexProjectItemId:e.id}),a()}},[t,e,a,i,n]),s=(0,H.useMemo)(()=>r?.value?new Date(r.value.slice(0,16)):null,[r]);return(0,O.jsx)(yW.DatePicker,{onChange:l,value:s,showClearButton:!0,showTodayButton:!1,anchor:a=>(0,O.jsx)(vg,{interactable:!0,as:"button",...a,children:(0,O.jsx)(vO,{content:r,columnModel:t,model:e})})})},vO=({content:e,columnModel:t})=>{let r=tH(e)||"";return(0,O.jsx)(v_,{text:r,columnName:t.name,columnType:t.dataType})};try{vL.displayName||(vL.displayName="DateField")}catch{}try{vZ.displayName||(vZ.displayName="DateEditor")}catch{}try{vO.displayName||(vO.displayName="DateRenderer")}catch{}let vV={borderColor:"border.default",pt:"1px",color:"fg.muted"},vB={...vV,borderColor:"accent.emphasis",color:"accent.fg"},v$={...vV,color:"fg.subtle"};function vz({sx:e}){return(0,O.jsx)(y8.Z,{sx:{...vB,...e},children:rI.iterationLabel.current})}function vW({labelType:e,sx:t}){let r=rI.iterationLabel[e];return(0,O.jsx)(eO.Z,{sx:{mr:3,width:"5.5rem",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:1,...t??{}},children:(0,O.jsx)(y8.Z,{sx:{mt:.75,textDecoration:"inherit",..."current"===e?vB:"break"===e?v$:vV},as:"span",children:r})})}try{vz.displayName||(vz.displayName="CurrentIterationLabel")}catch{}try{vW.displayName||(vW.displayName="IterationRowLabel")}catch{}let vG=new ScoringCache,vU=vG.sortByWithCache.bind(vG),vH=e=>{let t=(0,O.jsx)(u5,{sx:{display:"block"},children:e.titleHtml});return{...e,children:t,...(0,ef.f)("table-cell-editor-row")}},vq=e=>e.title,vK=(e,t)=>t.title.toLowerCase()!==e.toLowerCase()?null:t;function vQ({model:e,iteration:t,columnModel:r,onSaved:a}){let{updateItem:n}=ve(),i=l$(),{settings:l}=r,s=t?.id,o=(0,H.useMemo)(()=>{let e=l.configuration.iterations;if(e.length>0){let t=new Date;return e.map(e=>{let r=nN(e),a=nj(t,e);return{...e,title:e.title,titleHtml:e.titleHtml,description:r,descriptionVariant:"block",selected:s===e.id,groupId:"active",trailingIcon:a?vz:null}})}return[{id:"create-iteration",title:"Create an Iteration",titleHtml:"Create an iteration",startDate:"",duration:0,selected:!1,groupId:"active"}]},[l,s]),d=(0,H.useMemo)(()=>{let e=l.configuration.completedIterations;return e.length>0?e.map(e=>{let t=nN(e);return{...e,title:e.titleHtml,description:t,descriptionVariant:"block",selected:s===e.id,groupId:"completed"}}):[]},[l,s]),u=(0,H.useMemo)(()=>[...o,...d].filter(e=>e.selected),[o,d]),c=ur(),m=(0,H.useCallback)(async t=>{t[0]?.id==="create-iteration"?i({pathname:eI.generatePath({...c,fieldId:r.id})}):(await n(e,{memexProjectColumnId:r.id,dataType:eA.Iteration,value:{id:t[0]?.id??null}}),a&&a())},[i,r.id,n,e,a,c]),p=(0,H.useCallback)((e,t,r)=>{let a=e.length>0?[...o,...d]:t;return b1(e,a,e=>`${e.title} ${nN(e)}`,vG,vU,r)},[o,d]);return{activeOptions:o,completedOptions:d,selected:u,saveSelected:m,filterChange:p}}let vX=(0,H.forwardRef)(({iteration:e,...t},r)=>(0,O.jsx)(yJ.Z,{leadingVisual:()=>(0,O.jsx)(eF.IterationsIcon,{size:bQ(t.size)}),text:(0,O.jsx)(u5,{children:e.titleHtml}),ref:r,...t}));vX.displayName="IterationToken";let vY=e=>(0,O.jsx)(vy,{...e,renderer:v0,editor:vJ}),vJ=({model:e,columnModel:t,content:r,onSaved:a})=>{let{activeOptions:n,completedOptions:i,saveSelected:l,filterChange:s,selected:o}=vQ({model:e,iteration:r??null,columnModel:t,onSaved:a});return(0,O.jsx)(vN,{model:e,columnId:t.id.toString(),getSortAttribute:vq,convertOptionToItem:vH,initialFilterValue:"",selected:o,options:[...n,...i.slice(0,3)],saveSelected:l,fetchOptions:fV.Z,filterOptions:s,placeholderText:"Filter options",displayValue:(0,O.jsx)(v0,{model:e,columnModel:t,content:r}),getOptionMatchingFilterValue:vK,singleSelect:!0,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}]})},v0=({content:e})=>(function(e){return e?(0,O.jsx)(vX,{iteration:e}):(0,O.jsx)(v_,{columnName:"Iteration",columnType:eA.Iteration})})(e);try{vY.displayName||(vY.displayName="IterationField")}catch{}try{vJ.displayName||(vJ.displayName="IterationEditor")}catch{}try{v0.displayName||(v0.displayName="IterationRenderer")}catch{}let v1=new ScoringCache,v2=v1.sortByWithCache.bind(v1);function v5(e,t,r){return b1(e,t,e=>e.nameHtml,v1,v2,r)}let v3=e=>e.nameHtml,v4=e=>{let t=(0,O.jsx)(u5,{sx:{display:"block"},children:e.nameHtml}),r=`#${e.color}`;return{...e,leadingVisual:()=>(0,O.jsx)(eO.Z,{sx:{bg:r,borderColor:r,width:14,height:14,borderRadius:10,borderWidth:"1px",borderStyle:"solid"}}),children:t,...(0,ef.f)("table-cell-editor-row")}};var v8=r(84648);let v6=(0,H.forwardRef)(({label:e,...t},r)=>(0,O.jsx)(v8.Z,{text:(0,O.jsx)(u5,{children:e.nameHtml}),fillColor:`#${e.color}`,ref:r,...t}));v6.displayName="LabelToken";let v7=({color:e})=>(0,O.jsx)(eO.Z,{sx:{width:16,height:16,borderRadius:8,flexShrink:0,bg:`#${e}`,borderColor:`#${e}`}});try{v7.displayName||(v7.displayName="LabelDecorator")}catch{}let v9=e=>(0,O.jsx)(vy,{...e,renderer:wt,editor:we}),we=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueLabels:n}=g7(),{fetchSuggestedLabels:i}=hN(),{updateLocalMemexItem:l}=vD(),s=(0,H.useMemo)(()=>r?.map(e=>({...e,selected:!0}))??[],[r]);return(0,O.jsx)(vN,{model:e,columnId:t.id.toString(),getSortAttribute:v3,convertOptionToItem:v4,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t.map(e=>e.id)),e.memexItemId?.()&&l(e.memexItemId?.(),{memexProjectColumnId:eM.Labels,value:t}),a()},fetchOptions:()=>i(e),filterOptions:v5,placeholderText:"Search labels",displayValue:(0,O.jsx)(wt,{model:e,columnModel:t,content:r})})},wt=({columnModel:e,content:t})=>t?.length?(0,O.jsx)(eO.Z,{as:"ul",sx:{display:"flex",gap:1,flexWrap:"wrap",listStyle:"none"},children:t?.map(e=>O.jsx("li",{children:O.jsx(v6,{label:e})},e.id))}):(0,O.jsx)(v_,{columnName:e.name});try{v9.displayName||(v9.displayName="LabelField")}catch{}try{we.displayName||(we.displayName="LabelEditor")}catch{}try{wt.displayName||(wt.displayName="LabelRenderer")}catch{}let wr=new ScoringCache,wa=wr.sortByWithCache.bind(wr);function wn(e,t,r){return b1(e,t,e=>e.title,wr,wa,r)}let wi=e=>e.title,wl=e=>{let t=e.state===ax.Open;return{...e,leadingVisual:()=>(0,O.jsx)(eZ.Z,{icon:eF.MilestoneIcon,"aria-label":t?"Open milestone":"Closed milestone",sx:{color:"fg.muted"}}),text:e.title,description:function(e){if(e.state===ax.Closed)return rN.closed;if(!e.dueDate)return rN.noDueDate;let t=new Date(`${e.dueDate}T23:59:59`);return t<new Date?rN.pastDueBy(new Date(`${e.dueDate}T00:00:00`)):rN.dueOn(t)}(e),descriptionVariant:"block",groupId:t?"open":"closed",...(0,ef.f)("table-cell-editor-row")}},ws=(0,H.forwardRef)(({milestone:e,...t},r)=>(0,O.jsx)(yJ.Z,{leadingVisual:()=>(0,O.jsx)(eF.MilestoneIcon,{size:bQ(t.size)}),text:e.title,ref:r,...(0,ef.f)("milestone-token"),...t}));ws.displayName="MilestoneToken";let wo=e=>(0,O.jsx)(vy,{...e,renderer:wu,editor:wd}),wd=({model:e,columnModel:t,content:r,onSaved:a})=>{let{editIssueMilestone:n}=g7(),{fetchSuggestedMilestones:i}=hR(),{updateLocalMemexItem:l}=vD(),s=(0,H.useMemo)(()=>r?[{selected:!0,...r}]:[],[r]);return(0,O.jsx)(vN,{model:e,columnId:t.id.toString(),getSortAttribute:wi,convertOptionToItem:wl,initialFilterValue:"",selected:s,saveSelected:async t=>{await n(t[0]?.id??"clear"),e.memexItemId?.()&&l(e.memexItemId(),{memexProjectColumnId:eM.Milestone,value:t[0]}),a()},fetchOptions:()=>i(e),filterOptions:wn,placeholderText:"Search milestones",blankslateText:"No milestones to show.",displayValue:(0,O.jsx)(wu,{model:e,columnModel:t,content:r}),singleSelect:!0,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}]})},wu=({content:e})=>e?(0,O.jsx)(ws,{milestone:e}):(0,O.jsx)(v_,{columnName:"Milestone"});try{wo.displayName||(wo.displayName="MilestoneField")}catch{}try{wd.displayName||(wd.displayName="MilestoneEditor")}catch{}try{wu.displayName||(wu.displayName="MilestoneRenderer")}catch{}var wc=r(25748);let wm=({submitValue:e,defaultValue:t,validationFn:r,type:a="text",withEmojiPicker:n=!1,placeholder:i})=>{let l=(0,H.useRef)(null),[s,o]=(0,H.useState)(void 0),[d,u]=(0,H.useState)(t);(0,H.useEffect)(()=>{l.current&&l.current===document.activeElement||u(t)},[t]);let c=e=>{let t=r?.(e);return o(t),!t},m=t=>{c(t)&&e(t)},p=(0,H.useCallback)(()=>u(t),[t]),f=(0,O.jsx)(vg,{interactable:!0,as:pT,ref:l,onBlur:()=>{d!==t&&c(d)?e(d):p()},onChange:e=>{let t=e.currentTarget.value;u(t),c(t)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),m(d)):"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),p())},type:a,value:d,placeholder:i,"aria-label":"Edit value"}),h=yR();return(0,O.jsxs)(O.Fragment,{children:[n?(0,O.jsx)(yk.F,{...h,sx:{width:"100%"},children:f}):f,s?(0,O.jsx)(yu.Z,{sx:{position:"absolute",zIndex:100,fontSize:0,mt:"12px",py:1,px:2,bg:"danger.subtle",color:"fg.default",borderColor:"danger.muted"},caret:"top-left",children:(0,O.jsx)("span",{children:s})}):null]})};try{wm.displayName||(wm.displayName="SidebarTextInput")}catch{}let wp=e=>(0,O.jsx)(vy,{...e,renderer:wh,editor:wf}),wf=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=ve(),i=(0,H.useCallback)(async r=>{t.dataType===eA.Number&&(await n(e,{dataType:eA.Number,memexProjectColumnId:t.id,value:""!==r?{value:tO(r)}:void 0}),a())},[t,e,a,n]);return(0,O.jsx)(wm,{submitValue:i,validationFn:wc.jg,defaultValue:r?.value?.toString()||"",placeholder:rI.emptyColumnNameValue.number})},wh=({columnModel:e,content:t})=>(0,O.jsx)(v_,{text:t?.value.toString(),columnName:e.name,columnType:e.dataType});try{wp.displayName||(wp.displayName="NumberField")}catch{}try{wf.displayName||(wf.displayName="NumberEditor")}catch{}try{wh.displayName||(wh.displayName="NumberRenderer")}catch{}function wg(e){return e.filter(e=>e.name.length>0)}let wy={color:"GRAY",description:"",name:""},wx=new ScoringCache,wb=wx.sortByWithCache.bind(wx);function wv(e,t,r){return b1(e,t,e=>e.name,wx,wb,r)}let ww=(e,t)=>t.name.toLowerCase()!==e.toLowerCase()?null:t,wj=e=>e.name,wC=(e,t)=>({...e,...(0,ef.f)("table-cell-editor-row"),children:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u5,{sx:{display:"block"},children:e.nameHtml}),(0,O.jsx)(u5,{sx:{display:"block",color:"fg.muted",fontSize:"12px",lineHeight:"16px",wordBreak:"break-word"},children:t3(e.descriptionHtml)})]}),description:"",leadingVisual:t?()=>(0,O.jsx)(mu,{color:e.color,sx:{height:"14px",width:"14px"}}):void 0,descriptionVariant:"block"});function wI({model:e,columnModel:t,selectedValueId:r,onSaved:a}){let{updateItem:n}=ve(),i=(0,H.useCallback)(async r=>{await n(e,{memexProjectColumnId:t.id,dataType:eA.SingleSelect,value:{id:r[0]?.id??null}}),a?.()},[t.id,e,a,n]),l=(0,H.useMemo)(()=>t.settings.options.map(e=>({...e,selected:e.id===r})),[t.settings,r]),s=(0,H.useMemo)(()=>l.filter(e=>e.selected),[l]);return{saveSelected:i,options:l,selected:s}}async function wS(e){let t=aa("memex-column-option-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function wk(e){let t=aa("memex-column-option-delete-api-data"),{data:r}=await ac(t.url,{method:"DELETE",body:e});return r}async function wT(e){let t=aa("memex-column-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}async function wN(e){let t=aa("memex-column-option-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}let w_=()=>{let{updateLoadedColumns:e}=hz(),{findMemexItem:t}=hi(),{setColumnValue:r}=hr(),a=(0,W.NL)();return{updateColumnValues:(0,H.useCallback)(a=>{if(e(a.id),a.memexProjectColumnValues)for(let e of a.memexProjectColumnValues){let n=t(e.memexProjectItemId);n&&r(n,{memexProjectColumnId:a.id,value:e.value})}},[t,r,e]),updateAllColumnValues:(0,H.useCallback)(t=>{e(t.id),function(e,t){if(sP()){let r={};if(t.memexProjectColumnValues)for(let e of t.memexProjectColumnValues)r[e.memexProjectItemId]={memexProjectColumnId:t.id,value:e.value};e.setQueryData(sv(e),e=>{let a=[...sJ(e)||[]];for(let e of a){let a=r[e.id];a?.value||(a={memexProjectColumnId:t.id,value:null}),e.setColumnValueForItemColumnType(a)}return sL(a)})}else{let r={};if(t.memexProjectColumnValues)for(let e of t.memexProjectColumnValues)r[e.memexProjectItemId]={memexProjectColumnId:t.id,value:e.value};e.setQueriesData(sZ,e=>{if(!sF(e))return sE(e);let a=[...e.nodes];for(let e of a){let a=r[e.id];a?.value||(a={memexProjectColumnId:t.id,value:null}),e.setColumnValueForItemColumnType(a)}return{...e,nodes:a}})}}(a,t)},[a,e])}},wR=()=>{let{updateColumnEntry:e}=gr(),{updateColumnValues:t}=w_(),r=(0,H.useCallback)(async(r,a)=>{let n={...r.settings,options:wg(a).map(({id:e,color:t,description:r,name:a})=>({id:ra(e)?"":e,color:t,description:r,name:a}))};f2();let{memexProjectColumn:i}=await wT({memexProjectColumnId:r.id,settings:n});if(i?.settings){let{settings:t}=i;e(ds({...r,settings:t}))}i&&t(i)},[e,t]),a=(0,H.useCallback)((t,r)=>{let{options:a}=r.settings??{};if(a){let r={...t.settings,options:a};e(ds({...t,settings:r}))}},[e]),n=(0,H.useCallback)(async(e,t)=>{if(!t.name)return;let r=crypto.randomUUID(),n=[...e.settings.options,{id:r,...t,nameHtml:t.name,descriptionHtml:t.description}];a(e,{settings:{options:n}});try{let{memexProjectColumn:r}=await wS({memexProjectColumnId:e.id,option:t});a(e,r)}catch(t){throw a(e,{settings:{options:e.settings.options.filter(e=>e.id!==r)}}),t}},[a]),i=(0,H.useCallback)(async(e,t,r=!1)=>{if(void 0!==t.name&&""===t.name.trim()||!e.settings.options.find(e=>e.id===t.id))return;let n=e.settings.options.map(e=>e.id===t.id?{...e,...t,nameHtml:t.name??e.nameHtml,descriptionHtml:t.description??e.descriptionHtml}:e);if(a(e,{settings:{options:n}}),r)return;let i={id:t.id,color:t.color,description:t.description,name:t.name},{memexProjectColumn:l}=await wN({memexProjectColumnId:e.id,option:i});a(e,l)},[a]);return{addColumnOption:n,moveColumnOption:(0,H.useCallback)(async(e,t)=>{let r=e.settings.options.findIndex(e=>e.id===t.id),n=e.settings.options[r];if(null!=t.position&&n&&e.settings.options){let i=[...e.settings.options];i.splice(r,1),i.splice(t.position-1,0,n),a(e,{settings:{options:i}})}let{memexProjectColumn:i}=await wN({memexProjectColumnId:e.id,option:t});a(e,i)},[a]),updateOptions:r,updateColumnOption:i,destroyColumnOption:(0,H.useCallback)(async(e,t)=>{let{memexProjectColumn:r}=await wk({memexProjectColumnId:e.id,option:t});a(e,r)},[a])}};var wP=r(16937),wD=r(65233),wE=r(59148);let wA={display:"flex",flexDirection:"column",overflow:"hidden"},wM={display:"flex",flexDirection:"column",gap:3,overflowY:"auto"},wL=e=>{"Enter"===e.key&&rc(e)&&e.currentTarget.requestSubmit()},wF=({name:e,color:t,description:r})=>({name:e,color:t,description:r}),wZ=({initialOption:e,onSave:t,onCancel:r})=>{let[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useReducer)((e,t)=>(n(!1),{...e,...t}),wF(e)),s=e=>{e.preventDefault(),t({...i,name:yf(i.name),description:yf(i.description)})},o=e=>{e.preventDefault(),n(!0)},d=(0,H.useRef)(null);return(0,yY.t)({containerRef:d,onClickOutside:e=>e.preventDefault()}),(0,O.jsx)(wE.V,{title:e.name?"Edit option":"New option",onClose:r,width:"medium",ref:d,"aria-label":e.name?"Edit option dialog":"New option dialog",renderBody:()=>(0,O.jsxs)(eO.Z,{as:"form",onSubmit:s,onInvalid:o,onKeyDown:wL,onBlur:e=>e.stopPropagation(),sx:wA,children:[(0,O.jsxs)(wE.V.Body,{sx:wM,children:[(0,O.jsx)(wB,{option:i}),(0,O.jsx)(wO,{value:i.name,onChange:e=>l({name:e}),showValidation:a}),(0,O.jsx)(wP.z,{value:i.color,onChange:e=>l({color:e}),label:"Color"}),(0,O.jsx)(wV,{value:i.description,onChange:e=>l({description:e}),showValidation:a})]}),(0,O.jsxs)(wE.V.Footer,{children:[(0,O.jsx)(cd.r,{onClick:r,sx:{marginRight:1},children:"Cancel"}),(0,O.jsx)(cd.r,{type:"submit",variant:"primary",children:"Save"})]})]})})},wO=(0,H.forwardRef)(function({value:e,onChange:t,showValidation:r},a){let n=r&&""===e.trim(),i=yR();return(0,O.jsxs)(cX.Z,{required:!0,children:[(0,O.jsx)(cX.Z.Label,{children:"Label text"}),(0,O.jsx)(yk.F,{...i,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{ref:a,value:e,onChange:e=>t(e.target.value),block:!0,name:"Label text",validationStatus:n?"error":void 0,"aria-invalid":n?"true":void 0,pattern:".*\\S+.*",...(0,ef.f)("single-select-option-text-input")})}),n&&(0,O.jsx)(cX.Z.Validation,{variant:"error",children:"Label text is required"})]})}),wV=({value:e,onChange:t})=>{let r=i5().projectLimits.singleSelectDescriptionMaxLength,a=(0,H.useRef)(null),n=(0,wD.A)({minHeightLines:0,maxHeightLines:12,elementRef:a,value:e}),i=yR();return(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{children:"Description"}),(0,O.jsx)(yk.F,{...i,sx:{width:"100%"},children:(0,O.jsx)(yT.ZP,{ref:a,value:e,onChange:e=>t(e.target.value),block:!0,name:"Description",maxLength:r,sx:{"& textarea":{...n,resize:"vertical"}}})}),(0,O.jsx)(cX.Z.Caption,{children:"Visible in group headers and value pickers"})]})},wB=({option:e})=>(0,O.jsxs)(eO.Z,{as:"figure",sx:{p:3,borderRadius:2,m:0,display:"flex",alignItems:"center",justifyContent:"center",bg:"canvas.subtle"},children:[(0,O.jsx)(mg.T,{as:"figcaption",children:"Preview"}),(0,O.jsx)(y0,{option:e})]});try{wZ.displayName||(wZ.displayName="SingleSelectOptionModal")}catch{}try{wO.displayName||(wO.displayName="NameInput")}catch{}try{wV.displayName||(wV.displayName="DescriptionInput")}catch{}try{wB.displayName||(wB.displayName="LabelPreview")}catch{}let w$=e=>(0,O.jsx)(vy,{...e,renderer:wW,editor:wz}),wz=({model:e,columnModel:t,content:r,onSaved:a})=>{let{saveSelected:n,options:i,selected:l}=wI({columnModel:t,model:e,selectedValueId:r?r.id:null,onSaved:a}),{addColumnOption:s}=wR(),{findColumn:o}=gt(),{navigationDispatch:d}=i$(),[u,c]=(0,H.useState)(null),{projectLimits:{singleSelectColumnOptionsLimit:m}}=i5(),p=i.every(e=>"GRAY"===e.color),f=(0,H.useCallback)(e=>wC(e,!p),[p]),h=i3(i),g=(0,H.useCallback)(async e=>{c(null),await s(t,e);let r=o(t.id),a=nq(r)?r.settings.options.find(({name:t})=>t===e.name):void 0;a&&n([{...a,selected:!0}]),d(ir({focusType:is.Focus}))},[s,t,o,n,d]),y=(0,H.useCallback)(e=>{let t=yf(e);return h?{...(0,ef.f)("table-cell-editor-max-options-length-row"),text:rI.singleSelectOptionLimitWarning(m),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:eF.PlusIcon,children:(0,O.jsx)(eB.Z,{sx:{color:"accent.emphasis",wordBreak:"break-all"},children:(0,O.jsx)("strong",{children:t})}),onAction:async(e,r)=>{r.preventDefault(),c({...wy,name:t})},...(0,ef.f)("add-column-option")}},[h,m]);return u?(0,O.jsx)(wZ,{initialOption:u,onSave:g,onCancel:()=>c(null)}):(0,O.jsx)(vN,{model:e,columnId:t.id.toString(),getSortAttribute:wj,convertOptionToItem:f,initialFilterValue:"",selected:l,saveSelected:n,fetchOptions:fV.Z,options:i,filterOptions:wv,placeholderText:"Filter options",displayValue:(0,O.jsx)(wW,{model:e,columnModel:t,content:r}),singleSelect:!0,renderCreateNewOption:y,getOptionMatchingFilterValue:ww})},wW=({columnModel:e,content:t})=>t?(0,O.jsx)(y0,{option:t}):(0,O.jsx)(v_,{columnName:e.name,columnType:e.dataType});try{w$.displayName||(w$.displayName="SingleSelectField")}catch{}try{wz.displayName||(wz.displayName="SingleSelectEditor")}catch{}try{wW.displayName||(wW.displayName="SingleSelectRenderer")}catch{}let wG=e=>(0,O.jsx)(vy,{...e,renderer:wH,editor:wU}),wU=({model:e,columnModel:t,content:r,onSaved:a})=>{let{updateItem:n}=ve(),i=(0,H.useCallback)(async r=>{t.dataType===eA.Text&&(await n(e,{dataType:eA.Text,memexProjectColumnId:t.id,value:yf(r)}),a&&a())},[t,e,a,n]);return(0,O.jsx)(wm,{withEmojiPicker:!0,submitValue:i,defaultValue:r?.raw||"",placeholder:rI.emptyColumnNameValue.text})},wH=({columnModel:e,content:t})=>(0,O.jsx)(v_,{dangerousHtml:t?.html,columnName:e.name,columnType:e.dataType});try{wG.displayName||(wG.displayName="TextField")}catch{}try{wU.displayName||(wU.displayName="TextEditor")}catch{}try{wH.displayName||(wH.displayName="TextRenderer")}catch{}let wq=({item:e,content:t,field:r,metadata:a})=>{let n=(0,O.jsx)(vg,{sx:{color:"fg.subtle"},children:rI.noneYet});switch(r.dataType){case eA.Assignees:n=(0,O.jsx)(vE,{model:e,columnModel:r,content:a.assignees,onSaved:fV.Z});break;case eA.Labels:n=(0,O.jsx)(v9,{model:e,columnModel:r,content:a.labels,onSaved:fV.Z});break;case eA.Milestone:n=(0,O.jsx)(wo,{model:e,columnModel:r,content:a.milestone,onSaved:fV.Z});break;case eA.Iteration:n=(0,O.jsx)(vY,{model:e,columnModel:r,content:t,onSaved:fV.Z});break;case eA.SingleSelect:n=(0,O.jsx)(w$,{model:e,columnModel:r,content:t,onSaved:fV.Z});break;case eA.Text:n=(0,O.jsx)(wG,{model:e,columnModel:r,content:t,onSaved:fV.Z});break;case eA.Date:n=(0,O.jsx)(vL,{model:e,columnModel:r,content:t,onSaved:fV.Z});break;case eA.Number:n=(0,O.jsx)(wp,{model:e,columnModel:r,content:t,onSaved:fV.Z});break;case eA.LinkedPullRequests:n=t?.length?(0,O.jsx)(vg,{children:(0,O.jsx)(eO.Z,{sx:{display:"flex",gap:1,flexDirection:"column",alignItems:"flex-start"},children:t?.slice(0,10).map(e=>O.jsx(bY,{linkedPullRequest:e},e.id))})}):(0,O.jsx)(vg,{sx:{color:"fg.subtle"},children:rI.emptyColumnNameValue.linkedPullRequest});break;case eA.IssueType:t&&(n=(0,O.jsx)(vg,{children:(0,O.jsx)(bK,{issueType:t})}));break;case eA.Repository:t&&(n=(0,O.jsx)(vg,{children:(0,O.jsx)(bJ,{repository:t})}));break;default:t&&(n=(0,O.jsx)(vg,{children:t}))}return(0,O.jsx)(vf,{label:r.name,...(0,ef.f)(`sidebar-field-${r.name}`),children:n})};var wK=r(66044);async function wQ(e){let t=aa("memex-item-convert-issue-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}let wX=()=>{let{setItemData:e}=dA();return(0,hW.c)({mutationFn:wQ,onSuccess:t=>{e(t.memexProjectItem)}})()},wY=()=>{let e=wX();return{convertToIssue:(0,H.useCallback)(async(t,r)=>(f2(),e.mutateAsync({repositoryId:r,memexProjectItemId:t})),[e])}},wJ=e=>{let{addToast:t}=e9(),{postStats:r}=os(),{convertToIssue:a}=wY(),{perform:n,status:i}=d1({request:(0,H.useCallback)(async({memexProjectItem:n,repositoryId:i})=>{if(n.contentType===eL.DraftIssue){let{memexProjectItem:l,warnings:s}=await a(n.id,i),o=s?.invalidAssigneeLogins??[];o.length>0&&(t({message:rI.unableToAssignUsersToConvertedIssue(o),type:e$.error}),r({name:"draft_convert_dropped_assignee",context:o.length,memexProjectItemId:l.id}));let d=function(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===eM.Title);return!t||t.memexProjectColumnId!==eM.Title||"isDraft"in t.value?null:"number"in t.value?t.value.number:null}(l),u=function(e){let t=e.memexProjectColumnValues.find(e=>e.memexProjectColumnId===eM.Repository);return t&&t.memexProjectColumnId===eM.Repository&&t.value?t.value.nameWithOwner:null}(l);d&&u&&e?.()}},[a,t,r,e])});return{start:(0,H.useCallback)(async(e,t)=>{await n({memexProjectItem:e,repositoryId:t.id})},[n]),status:i}},w0=({isOpen:e,anchorRef:t,renderAnchor:r=()=>(0,O.jsx)("div",{}),showPrompt:a=!1,onOpenChange:n,onSuccess:i,item:l,promptOptions:s={title:rI.draftConvertPromptTitle,description:rI.draftConvertPromptDescription}})=>{let o=(0,H.useRef)(null),d=(0,H.useRef)(null),[u,c]=(0,H.useState)(""),[m,p]=(0,H.useState)(!1),[f,h]=(0,H.useState)(a),[g,y]=(0,H.useState)([]),[x,b]=(0,H.useState)([]),v=(0,H.useRef)(),{suggestRepositories:w}=c7(),{start:j}=wJ(),C=(0,wK.i)(t);(0,c0.P)({restoreFocusOnCleanUp:!0,initialFocusRef:o,containerRef:d});let I=(0,H.useCallback)(e=>{n(!1,e)},[n]),S=(0,H.useCallback)(async e=>{await j(l,e)},[j,l]),k=(0,H.useCallback)(async()=>{x.length||(p(!0),b(await w()??[]),p(!1))},[]),T=(0,H.useCallback)(e=>(""!==u?g:x).find(t=>t.id===e),[u,g,x]);(0,H.useEffect)(()=>{e&&(c(""),y([]),k())},[k,e]);let N=(0,H.useCallback)(async e=>{if(""!==e){p(!0);let{repositories:t}=await c2({query:e});y(t),p(!1)}else y(x??[])},[x]),_=(0,H.useCallback)(e=>{v.current&&v.current.cancel(),v.current=(0,s9.Z)(()=>N(e),200),v.current()},[N]),R=e=>{if(e?.id){let t=T(e.id);t&&(S(t),i?.(t))}},P=()=>{I("click-outside")},D=(""!==u?g:x).filter(e=>!e.isArchived&&e.hasIssues).map(e=>({...e,text:e.name,leadingVisual:()=>c9({repository:e}),selectionVariant:"single",descriptionVariant:"block",selected:void 0,onAction:(t,r)=>{r.preventDefault(),R(e),n(!1,"convert-confirmation")}}));return f?(0,O.jsx)(xj.w,{anchorRef:C,renderAnchor:r,open:e,overlayProps:{onEscape:P,onClickOutside:P},width:"small",children:(0,O.jsx)(eO.Z,{onClick:e=>e.stopPropagation(),children:(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"stretch",m:2},children:(0,O.jsxs)(mx.S.Item,{onSelect:()=>h(!1),...(0,ef.f)("draft-prompt-convert-to-issue"),children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,O.jsx)(eB.Z,{sx:{display:"flex",fontSize:14,fontWeight:"bold",p:0},children:s.title}),(0,O.jsx)(eB.Z,{sx:{display:"flex",fontSize:12,p:0,color:"fg.muted"},children:s.description})]}),(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(eF.ArrowRightIcon,{})})]})})})}):(0,O.jsx)(c1.b,{placeholderText:rI.repoPickerFilterPlaceholder,open:e,anchorRef:C,renderAnchor:r,onOpenChange:n,loading:m,selected:void 0,filterValue:u,items:D,showItemDividers:!0,onFilterChange:e=>{c(e),_(e)},onSelectedChange:R,overlayProps:{width:"small",onMouseDown:e=>e.stopPropagation(),height:"small",onClickOutside:P,...(0,ef.f)("repo-picker-repo-list")}})};w0.displayName="RepoPicker";let w1=({item:e})=>{let{tasklist_block:t}=n9(),{closePane:r,hasUnsavedChanges:a}=dq(),{postStats:n}=os(),{addToast:i}=e9(),{items:l}=dP(),{removeChildIssues:s}=hu(),{createMemexItem:o}=hH(),{reloadSidePanelMetadata:d}=g7(),[u,c]=lG(),{hasWritePermissions:m}=i4(),p=i5().projectLimits.projectItemLimit,f=e.getUrl(),[h,g]=(0,H.useState)(!1),y=(0,at.N)(),x=async()=>!a||await y({...rI.sidePanelCloseConfirmation,confirmButtonType:"danger"}),[b,v]=(0,H.useState)(!1),w=(0,H.useRef)(null),j=(0,H.useMemo)(()=>l.find(t=>t.itemId()===e.itemId()&&t.contentType===e.contentType),[l,e]),C=!!j,I=(0,H.useRef)(!1);(0,uG.b)(()=>{let t=document.querySelector(`[data-hovercard-subject-tag="issue:${e.itemId()}"]`)||document.querySelector(`[data-board-card-id="${e.itemId()}"]`);I.current&&t&&(I.current=!1,"scrollIntoViewIfNeeded"in t&&"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!1):t.scrollIntoView({block:"nearest",behavior:"smooth"}),j&&c(e=>(e.set(ly,aR.ISSUE),e.set(lx,j.id.toString()),e)))});let S=(0,H.useCallback)(async()=>{if(l.length+1>p){i({message:`Adding this item will exceed the ${p} project item limit`,type:e$.error});return}g(!0);try{await o({contentType:eL.DraftIssue,content:{title:f}}),s([e.itemId()]),d(),I.current=!0}catch(e){i({message:"An error has occurred when trying to 'Add to project'",type:e$.error})}g(!1)},[l.length,p,i,o,f,s,e,d]),{openArchiveConfirmationDialog:k}=b$(void 0,void 0,void 0,()=>r({force:!0})),{openRemoveConfirmationDialog:T}=bU(void 0,void 0,void 0,()=>r({force:!0})),N=[],_=e instanceof DraftIssueModel&&m;return _&&N.push((0,O.jsx)(w2,{onConvert:()=>{x()&&v(!0)},ref:w},"convert")),t&&m&&f&&!C&&e.isHierarchy&&N.push((0,O.jsx)(w5,{onAddToProject:S,loading:h},"addToProject")),f&&N.push((0,O.jsx)(w3,{itemUrl:f,onClick:()=>n({name:ni})},"open"),(0,O.jsx)(w4,{itemUrl:f},"copy")),C&&(N.push((0,O.jsx)(w8,{inProjectUrl:window.location.href},"copyInProjectLink")),m&&N.push((0,O.jsx)(w6,{onArchive:()=>{x()&&C&&k([j.id],aP)}},"archive"),(0,O.jsx)(w7,{onDelete:()=>{C&&T([j.id],aP)}},"delete"))),N.length>0?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(mx.S,{"aria-label":"Actions",children:[(0,O.jsx)(mx.S.Divider,{}),N]}),_?(0,O.jsx)(w0,{anchorRef:w,isOpen:b,item:e,onOpenChange:v,onSuccess:()=>{n({name:aD,ui:aP,memexProjectItemId:e.id})}},"repoPicker"):null]}):null},w2=(0,H.forwardRef)(({onConvert:e},t)=>(0,O.jsxs)(mx.S.Item,{onSelect:e,ref:t,...(0,ef.f)("side-pane-convert-to-issue"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.IssueOpenedIcon,{})}),"Convert to issue"]}));w2.displayName="ConvertToIssueAction";let w5=({onAddToProject:e,loading:t})=>(0,O.jsxs)(mx.S.Item,{onSelect:e,disabled:t,...(0,ef.f)("side-pane-add-to-project-action"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PlusCircleIcon,{})}),"Add to project"]});w5.displayName="AddToProjectAction";let w3=({itemUrl:e,onClick:t})=>(0,O.jsxs)(mx.S.LinkItem,{target:"_blank",href:e,onClick:t,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.LinkExternalIcon,{})}),"Open in new tab"]}),w4=({itemUrl:e})=>{let[t,r]=(0,H.useState)(!1),a=e3(()=>r(!1),2e3);return(0,O.jsxs)(mx.S.Item,{onSelect:()=>{navigator.clipboard.writeText(e),r(!0),a()},...(0,ef.f)("copy-link-action"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:t?(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{color:"success.fg"}}):(0,O.jsx)(eF.CopyIcon,{})}),t?(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link"]})},w8=({inProjectUrl:e})=>{let[t,r]=(0,H.useState)(!1),a=e3(()=>r(!1),2e3);return(0,O.jsxs)(mx.S.Item,{onSelect:()=>{navigator.clipboard.writeText(e),r(!0),a()},...(0,ef.f)("copy-in-project-link-action"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:t?(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{color:"success.fg"}}):(0,O.jsx)(eF.CopyIcon,{})}),t?(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold",color:"success.fg"},children:"Copied!"}):"Copy link in project"]})},w6=({onArchive:e})=>(0,O.jsxs)(mx.S.Item,{onSelect:e,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),"Archive"]}),w7=({onDelete:e})=>(0,O.jsxs)(mx.S.Item,{onSelect:e,variant:"danger",...(0,ef.f)("side-pane-delete-action"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete from project"]});try{w1.displayName||(w1.displayName="SidePanelSidebarActions")}catch{}try{w3.displayName||(w3.displayName="OpenInNewTabAction")}catch{}try{w4.displayName||(w4.displayName="CopyUrlAction")}catch{}try{w8.displayName||(w8.displayName="CopyInProjectUrlAction")}catch{}try{w6.displayName||(w6.displayName="ArchiveAction")}catch{}try{w7.displayName||(w7.displayName="DeleteAction")}catch{}let w9=({item:e,breakpoint:t})=>(0,O.jsxs)(eO.Z,{sx:{borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:t(["0","0","1px","1px"]),borderTopWidth:t(["1px","1px","0","0"]),borderStyle:"solid",borderColor:"border.muted",width:t(["100%","100%","33%","33%"]),maxWidth:t(["","","300px","400px"]),minWidth:t(["","","280px","400px"])},children:[(0,O.jsx)(jr,{item:e}),(0,O.jsx)(w1,{item:e})]}),je=new Set([eM.Labels,eM.Assignees,eM.Milestone]),jt=e=>"number"!=typeof e&&je.has(e),jr=({item:e})=>{let t=(0,H.useRef)(null),{allColumns:r}=df(),{sidePanelMetadata:a}=g7(),n=(0,H.useMemo)(()=>{let t=new Map;return(function(e,t){switch(e){case eL.DraftIssue:return t.filter(e=>e.id!==eM.Title&&lK(e.id)&&!lX(e));case eL.Issue:return t.filter(e=>e.id!==eM.Title&&e.id!==eM.Reviewers&&!lX(e));default:return[]}})(e.contentType,r).map(r=>({content:function(e,t,r){let a=t.get(e.id);switch(e.dataType){case eA.Assignees:return a||r.getAssignees();case eA.Labels:return a||r.getLabels();case eA.Iteration:{let t=a||r.getCustomField(e.id);if(!t)return;return(e.settings.configuration?nP(e.settings.configuration):[]).find(e=>e.id===t.id)}case eA.Tracks:return a||r.getCompletion();case eA.SingleSelect:{let t=a||(e.id===eM.Status?r.getStatus():r.getCustomField(e.id));if(!t)return;return e.settings?.options?.find(e=>e.id===t.id)}case eA.Text:return a||r.getCustomField(e.id);case eA.Milestone:return a||r.getMilestone();case eA.LinkedPullRequests:return a||r.getLinkedPullRequests();case eA.Date:case eA.Number:return a||r.getCustomField(e.id);case eA.Repository:return a||r.getExtendedRepository();case eA.TrackedBy:return a||r.getTrackedBy();case eA.IssueType:return a||r.getIssueType()}}(r,t,e),field:r}))},[r,e]),i=(0,H.useMemo)(()=>n.reduce((e,t)=>(jt(t.field.id)?e[0].push(t):a.projectItemId&&e[1].push(t),e),[[],[]]).flat(),[n,a.projectItemId]),l=(0,H.useCallback)(e=>{if("Enter"===e.key){e.stopPropagation();let r=t.current?.querySelectorAll("button, input");if(!r?.length)return;let a=Array.from(r).indexOf(e.target),n=r[a+1];n?.focus()}},[]);return(0,O.jsxs)("section",{children:[(0,O.jsx)(mg.T,{as:"h3",children:"Properties"}),(0,O.jsx)(vp,{listRef:t,onKeyDown:l,children:i.map(t=>(0,O.jsx)(wq,{metadata:a,item:e,content:t.content,field:t.field},t.field.id))})]})};try{w9.displayName||(w9.displayName="SidePanelSidebar")}catch{}try{je.displayName||(je.displayName="UNIVERSAL_FIELDS")}catch{}try{jr.displayName||(jr.displayName="SidePanelSidebarContent")}catch{}let ja=(0,H.memo)(function({sidePanelState:e}){let{memex_new_issue_viewer:t}=n9();switch(e.type){case aR.ISSUE:if(t&&"Issue"===e.item.contentType){let t=e.item.getItemIdentifier();return t?(0,O.jsx)(bq,{...t,url:e.item.getUrl(),itemId:e.item.id}):null}return(0,O.jsx)(g6,{contentType:e.item.contentType,repositoryId:e.item.ownerId(),itemId:e.item.itemId(),memexItemId:e.item.memexItemId?.(),children:(0,O.jsx)(jl,{item:e.item})});case aR.INFO:return(0,O.jsx)(jn,{});case aR.BULK_ADD:return(0,O.jsx)(js,{targetRepository:e.targetRepository,query:e.query,newItemAttributes:e.newItemAttributes});default:ij(e)}}),jn=(0,H.memo)(function(){let{postStats:e}=os(),{titleHtml:t}=r8(),[,r]=g5(),[,a]=g5(),{isTemplate:n}=gC(),i=(0,H.useCallback)(t=>{e({name:t?"description_update":"description_add",ui:a6})},[e]),l=(0,H.useCallback)(t=>{e({name:"readme_add",ui:a9})},[e]);return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",backgroundColor:"canvas.default",width:"100%",overflowY:"auto",height:"100%",alignItems:"center",px:"20px"},...(0,ef.f)("side-panel-info-content"),children:[(0,O.jsxs)(eO.Z,{sx:{width:"100%",mt:4},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"},children:[(0,O.jsx)(bc,{showCloseButton:!0}),(0,O.jsx)(eO.Z,{sx:{flex:1}}),(0,O.jsx)(u5,{sx:{fontWeight:"600",fontSize:2,wordBreak:"break-word"},as:"h2",children:t})]}),(0,O.jsx)(yD,{onSaveStats:i,setHasUnsavedChanges:r,hideLabel:!0})]}),(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",flex:"auto",flexGrow:0,width:"100%"},children:(0,O.jsx)(yS,{onSaveStats:l,setHasUnsavedChanges:a,hideLabel:!0})}),!n&&(0,O.jsx)(xp,{})]})}),ji=(0,H.memo)(function({item:e,isLoading:t}){let r=(0,H.useRef)(null),a=e.itemId();(0,uG.b)(()=>{r.current&&g2(r.current)},[a]);let n=(0,pu.F)(r.current);return(0,O.jsxs)(eO.Z,{ref:r,sx:{display:"flex",flex:"auto",flexDirection:n(["column","column","row","row"]),backgroundColor:"canvas.default",justifyContent:"stretch",overflowY:"auto"},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flex:"auto",flexDirection:"column",width:n(["100%","100%","66%","66%"]),mx:"auto"},children:[(0,O.jsx)(xF,{item:e,isLoading:t}),(0,O.jsx)(bI,{itemURL:e.getUrl()})]}),(0,O.jsx)(w9,{item:e,breakpoint:n})]})}),jl=(0,H.memo)(function({item:e}){let[t,r]=(0,H.useState)(!0),[a,n]=(0,H.useState)("details"),{tasklist_block:i,memex_new_issue_viewer:l}=n9(),{isLoading:s}=g7(),o=i&&e.contentType===eL.Issue;return(0,O.jsxs)(eO.Z,{sx:{position:"relative",backgroundColor:"canvas.default",height:"100%",width:"100%",flexGrow:1,zIndex:2,display:"flex",flexDirection:"column"},children:[!l&&!1,(0,O.jsx)(bd,{item:e,isLoading:s,showBreadcrumbs:o,showTabs:!1,selectedTab:a,onTabChange:n}),(0,O.jsx)(ji,{item:e,isLoading:s})]})}),js=(0,H.memo)(function({targetRepository:e,query:t,newItemAttributes:r}){return(0,O.jsx)(d7,{query:t,selectedRepository:e,children:(0,O.jsx)(bg,{targetRepository:e,newItemAttributes:r})})}),jo={position:"relative",backgroundColor:"canvas.default",height:"100%",width:"100%",flexGrow:1,zIndex:2,display:"flex",flexDirection:"column"},jd={margin:"auto"},ju={width:"400px"},jc=(0,H.memo)(function(){return(0,O.jsx)(eO.Z,{...(0,ef.f)("new-issue-viewer-development-warning"),sx:jo,children:(0,O.jsx)(g1.Z.Item,{sx:jd,children:(0,O.jsxs)(ut.Z,{sx:ju,variant:"warning",children:[(0,O.jsxs)("p",{children:["We decided not to render the new issue viewer in standalone development environment."," ",(0,O.jsx)(uB.Z,{href:"https://github.com/github/memex/blob/main/docs/adr/2024-05-10-issue-viewer-testing.md",target:"_blank",inline:!0,children:"Learn more"}),"."]}),(0,O.jsxs)("p",{children:["E2E tests for the new issue viewer should be added to"," ",(0,O.jsx)(uB.Z,{href:"https://github.com/github/github/blob/master/test/e2e/spec/hyperlist-web/memex-issue-viewer.spec.ts",target:"_blank",children:(0,O.jsx)("code",{children:"/test/e2e/spec/hyperlist-web/memex-issue-viewer.spec.ts"})}),"."," "]})]})})})});try{ja.displayName||(ja.displayName="SidePanelContent")}catch{}try{jn.displayName||(jn.displayName="SidePanelMemexInfoContent")}catch{}try{ji.displayName||(ji.displayName="SidePanelItemDetails")}catch{}try{jl.displayName||(jl.displayName="SidePanelItemContent")}catch{}try{js.displayName||(js.displayName="SidePanelMemexBulkAddContent")}catch{}try{jc.displayName||(jc.displayName="NewIssueViewerDevelopmentWarning")}catch{}let jm=(0,H.memo)(function({mainAppContent:e}){let{closePane:t,sidePanelState:r,isPaneOpened:a,supportedItemTypes:n,pinned:i,containerRef:l,initialFocusRef:s}=dq(),o=(a&&r&&(r.type!==aR.ISSUE||n.has(r.item.contentType)))??!1,d=r&&(0,O.jsxs)(eO.Z,{ref:l,sx:{display:"contents"},children:[(0,O.jsx)("span",{tabIndex:-1,ref:s,...(0,ef.f)("side-panel-focus-target")}),(0,O.jsx)(ja,{sidePanelState:r})]}),u=function(e){let t=[rI.sidePanelRegionNameLabel];switch(e?.type){case aR.INFO:t.push(rI.sidePanelProjectInfoLabel);break;case aR.BULK_ADD:t.push(rI.sidePanelBulkAddLabel);break;case aR.ISSUE:t.push(rI.itemType(e.item.contentType),e.item.getRawTitle())}return t.join(": ")}(r),c=(0,H.useCallback)(e=>{let r=!1;e.target&&e.target instanceof Element&&(r=e.target.classList.contains("js-site-search-field")),0!==document.querySelectorAll(".omnibar-picker.visible").length||r||t()},[t]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(jf,{open:o&&i,mainAppContent:e,label:u,initialFocusRef:s,onEscape:c,children:o&&i&&d}),(0,O.jsx)(jh,{open:o&&!i,label:u,onEscape:c,contentType:r?.type,initialFocusRef:s,children:o&&!i&&d})]})}),jp=(...e)=>{for(let{current:t}of e)if(t&&document.body.contains(t)){t.focus();return}},jf=(0,H.memo)(function({mainAppContent:e,children:t,open:r,label:a,initialFocusRef:n,onEscape:i}){let{postStats:l}=os(),s=gJ(),o=(0,H.useRef)(null),d=(0,H.useRef)(null),u=(0,H.useRef)(null),c=(0,H.useCallback)(e=>{let t=e.relatedTarget,r=e.currentTarget,a=e.target;a instanceof HTMLElement&&(d.current=a),!r.contains(t)&&t instanceof HTMLElement&&(o.current=t,jp(d))},[]);gQ(r,o),(0,gq.Kr)(["F6"],e=>{e.preventDefault(),u.current?.contains(document.activeElement)?(jp(o),l({name:"region_focus",context:"target: main"})):(jp(d,n),l({name:"region_focus",context:"target: side panel"}))},{ctrlKey:!0,triggerWhenInputElementHasFocus:!0,triggerWhenPortalIsActive:!1});let m=(0,H.useRef)(null);(0,gK.I)({overlayRef:m,returnFocusRef:m,onEscape:i,onClickOutside:fV.Z});let{memex_new_issue_viewer:p}=n9();return(0,O.jsxs)(ue.X,{containerWidth:"full",padding:"none",columnGap:"none",rowGap:"none",sx:{width:"100%",isolation:"isolate",height:`calc(100vh - ${s}px)`,"& > div":{height:"100%"}},children:[(0,O.jsx)(ue.X.Content,{sx:{isolation:"isolate",minHeight:"50vh"},children:(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:e})}),(0,O.jsx)(ue.X.Pane,{sticky:!0,resizable:!0,hidden:!r,width:"large",widthStorageKey:"projects.sidePanelWidth","aria-label":p?a:void 0,sx:{"& > :nth-child(2)":{"--pane-min-width":"clamp(350px, 33vw, 500px)","--pane-max-width-diff":"clamp(350px, 33vw, 1000px)"},"& > :nth-child(3)":{width:"3px",zIndex:5,"& > [role='slider']":{inset:"0 -3px"}}},divider:"line",children:(0,O.jsx)(eO.Z,{as:"aside","aria-label":a,sx:{overflow:p?void 0:"hidden",isolation:"isolate"},onFocus:c,tabIndex:-1,ref:u,children:t})})]})}),jh=(0,H.memo)(function({children:e,open:t,label:r,onEscape:a,contentType:n,initialFocusRef:i}){let l=g0(),s=(0,H.useRef)(null),o=(0,H.useRef)(),d=(0,H.useMemo)(()=>{switch(n){case aR.ISSUE:return o.current="min(90%, 1280px)";case aR.INFO:return o.current="580px";case aR.BULK_ADD:return o.current="60%";default:return o.current}},[n]),u=(0,H.useCallback)(e=>{let t=mz(e);t!==mV.ESCAPE&&Object.values(mV).includes(t)&&e.stopPropagation()},[]);return(0,O.jsx)(gH.h,{open:t,onClose:a,returnFocusRef:s,topOffset:l,onKeyDown:u,width:d,"aria-label":r,initialFocusRef:i,defaultCloseElement:"first-child",children:e})});try{jm.displayName||(jm.displayName="SidePanel")}catch{}try{jf.displayName||(jf.displayName="DockedSidePanel")}catch{}try{jh.displayName||(jh.displayName="OverlaySidePanel")}catch{}var jg=r(80810),jy=r(50295);async function jx(e){let t=aa("memex-template-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function jb(e){let t=aa("memex-view-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function jv(e){let t=aa("memex-view-delete-api-data");await ac(t.url,{method:"DELETE",body:e})}async function jw(e){let t=aa("memex-view-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}let jj=({setCurrentViewNumber:e,addView:t})=>d1({request:(0,H.useCallback)(async r=>{f2();let a=await jb(r);return t(a.view),e(a.view.number),a.view},[t,e])}),jC=()=>d1({request:(0,H.useCallback)(async e=>(f2(),(await jw(e)).view),[])}),jI=({setCurrentViewNumber:e,updateView:t})=>d1({request:(0,H.useCallback)(async r=>{f2();let{sliceValue:a,...n}=r.view;r.view=n;let i=await jw(r);return a&&(i.view.sliceValue=a),t(i.view),e(i.view.number),i.view},[t,e])}),jS=({deleteView:e})=>d1({request:(0,H.useCallback)(async t=>{f2(),await jv(t),e(t.viewNumber)},[e])}),jk=()=>{let e=r8(),{setProject:t}=gl();return{updateTitle:(0,H.useCallback)(async r=>{r=r.trim(),e.title!==r&&0!==r.length&&t((await ya({title:r})).memexProject)},[e.title,t])}};function jT(e,t){let r=function(){let{resolvedColorScheme:e}=(0,$.Fg)();return e?.startsWith("dark")?"Dark":"Light"}(),a=i5().mediaUrls,n=a?.[e]?.[`${t}${r}`];return n?encodeURI(n.toString()):""}async function jN(){let e=aa("memex-custom-templates-api-data"),{data:t}=await ad(e.url);return t}let j_=(0,lj.r)({queryKey:["org-templates"],fetcher:()=>jN()}),jR=(0,H.createContext)(null),jP=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(!0),[a,n]=(0,H.useState)(!1),{showTemplateDialog:i}=i5(),l=(0,H.useMemo)(()=>({showTemplateDialog:i,isTemplatesDialogOpen:t,setIsTemplatesDialogOpen:r,shouldOpenDiscoveryMenu:a,setShouldOpenDiscoveryMenu:n}),[a,i,t]);return(0,O.jsx)(jR.Provider,{value:l,children:e})});try{jR.displayName||(jR.displayName="TemplateDialogContext")}catch{}try{jP.displayName||(jP.displayName="TemplateDialogStateProvider")}catch{}let jD=()=>{let e=(0,H.useContext)(jR);if(!e)throw Error("useTemplateDialog must be used within a TemplateDialogStateProvider");return e},jE={[eA.Assignees]:{icon:eF.PeopleIcon,text:"Assignees"},[eA.SingleSelect]:{icon:eF.SingleSelectIcon,text:"Single select",sortedAscendingDescription:rI.sortSingleSelectAscending,sortedDescendingDescription:rI.sortSingleSelectDescending},[eA.Title]:{icon:eF.ListUnorderedIcon,text:"Title"},[eA.Number]:{icon:eF.NumberIcon,text:"Number",sortedAscendingDescription:rI.sortNumbersAscending,sortedDescendingDescription:rI.sortNumbersDescending},[eA.Labels]:{icon:eF.TagIcon,text:"Labels"},[eA.Repository]:{icon:eF.RepoIcon,text:"Repository"},[eA.Iteration]:{icon:eF.IterationsIcon,text:"Iteration"},[eA.Milestone]:{icon:eF.MilestoneIcon,text:"Milestone"},[eA.Date]:{icon:eF.CalendarIcon,text:"Date",sortedAscendingDescription:rI.sortDatesAscending,sortedDescendingDescription:rI.sortDatesDescending},[eA.LinkedPullRequests]:{icon:eF.GitPullRequestIcon,text:"Linked pull requests"},[eA.Reviewers]:{icon:eF.PeopleIcon,text:"Reviewers"},[eA.Text]:{icon:eF.TypographyIcon,text:"Text"},[eA.Tracks]:{icon:eF.IssueTracksIcon,text:"Tracks"},[eA.TrackedBy]:{icon:eF.IssueTrackedByIcon,text:"Tracked by"},[eA.IssueType]:{icon:eF.IssueOpenedIcon,text:"Type"},[eA.ParentIssue]:{icon:eF.IssueTrackedByIcon,text:"Parent issue"},[eA.SubIssuesProgress]:{icon:eF.IssueTracksIcon,text:"Sub-issues progress"}},jA=e=>jE[e].icon,jM=e=>jE[e].text,jL=e=>jE[e].sortedAscendingDescription??rI.sortStringsAscending,jF=e=>jE[e].sortedDescendingDescription??rI.sortStringsDescending,jZ="custom_template",jO="system_template",jV="layout_template";function jB(e){let[t]=lG();return"custom"===e.type&&t.set(jZ,String(e.template.projectNumber)),"system"===e.type&&t.set(jO,e.template.id),"layout"===e.type&&t.set(jV,e.viewType),{search:t.toString()}}let j$={display:"flex",flexDirection:"column",borderWidth:1,borderStyle:"solid",borderColor:"border.default",borderRadius:2,"&:hover":{textDecoration:"none"}},jz={display:"flex",justifyContent:"center",alignItems:"flex-end",backgroundColor:"canvas.subtle",borderTopLeftRadius:2,borderTopRightRadius:2,pt:"12px",pl:"12px",pr:"12px",overflow:"hidden"},jW={width:"100%",borderWidth:1,borderStyle:"solid",borderColor:"border.default",borderBottom:0,borderTopLeftRadius:2,borderTopRightRadius:2,boxShadow:"shadow.large",aspectRatio:"1440 / 750"},jG={p:2,borderTopWidth:1,borderTopStyle:"solid",borderTopColor:"border.default"};function jU({template:e}){let{resolvedColorScheme:t}=(0,$.Fg)(),r=jB({type:"system",template:e}),a="dark"===t?e.imageUrl.dark:e.imageUrl.light;return(0,O.jsxs)(eO.Z,{sx:j$,as:lz,to:r,children:[(0,O.jsx)(eO.Z,{sx:jz,children:(0,O.jsx)(eO.Z,{as:"img",src:a,alt:"",sx:jW})}),(0,O.jsx)(eO.Z,{sx:jG,children:(0,O.jsxs)(eO.Z,{children:[(0,O.jsx)(eO.Z,{as:"span",sx:{color:"fg.default",fontWeight:"semibold"},children:e.title}),(0,O.jsxs)(eO.Z,{as:"span",sx:{color:"fg.muted"},children:[" ","\u2022 ","GitHub"]}),e.shortDescription&&(0,O.jsx)(eO.Z,{as:"p",sx:{color:"fg.muted",m:0},children:e.shortDescription})]})})]})}try{jU.displayName||(jU.displayName="FeaturedTemplateCard")}catch{}var jH=r(43573),jq=r(58732),jK=r(87218),jQ=r(78664),jX=r(2779),jY=r(94795),jJ=r(95874);function j0({template:e}){let t=jB({type:"custom",template:e});return(0,O.jsxs)(jq.H,{sx:{columnGap:2,rowGap:0,pl:2,"&:hover":{backgroundColor:"transparent"}},title:(0,O.jsx)(jY.h,{value:u1(e.projectTitle),href:"#",linkProps:{as:lz,to:t},headerSx:{fontSize:1,mt:1}}),children:[(0,O.jsx)(jQ.Q,{icon:eF.ProjectTemplateIcon,color:"fg.muted"}),(0,O.jsx)(jX.V,{children:e.projectShortDescription&&(0,O.jsx)(jK.z,{children:e.projectShortDescription})})]})}function j1({title:e,templates:t,metadata:r}){return(0,O.jsx)(eO.Z,{sx:{borderWidth:1,borderStyle:"solid",borderRadius:2,borderColor:"border.default"},children:(0,O.jsx)(jH.B,{title:e,metadata:(0,O.jsx)(jJ.K,{title:(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold",color:"fg.muted"},children:e}),sx:{backgroundColor:"canvas.subtle",pl:"12px",fontSize:0,py:2,borderBottomColor:"border.default"},children:r}),children:t.map(e=>(0,O.jsx)(j0,{template:e},e.projectNumber))})})}try{j0.displayName||(j0.displayName="TemplateListItem")}catch{}try{j1.displayName||(j1.displayName="TemplateList")}catch{}let j2="template_dialog_tab",j5={ALL:"all",FEATURED:"featured",ORG:"organization"};function j3(){let{isOrganization:e}=i5(),t=lG()[0].get(j2)??j5.ALL;return e?t===j5.ALL||t===j5.FEATURED||t===j5.ORG?t:j5.ALL:j5.FEATURED}function j4({organizationTemplates:e,systemTemplates:t,previewTemplateCount:r=6,hideViewAll:a=!1}){let n=e?(e.recommendedTemplates&&e.recommendedTemplates.length>0?e.recommendedTemplates:e.templates).slice(0,r):[],i=t.slice(0,2);return(0,O.jsxs)(eO.Z,{children:[i.length>0&&(0,O.jsxs)(eO.Z,{sx:{mb:5},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:0,mb:2,color:"fg.muted"},children:"Featured"}),!a&&t.length>=2&&(0,O.jsx)(eO.Z,{as:lz,to:`?${j2}=${j5.FEATURED}`,sx:{fontSize:0},children:"View all"})]}),(0,O.jsx)(eO.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"minmax(250px, auto)",gap:3},children:i.map(e=>(0,O.jsx)(jU,{template:e},e.id))})]}),n.length>0&&(0,O.jsx)(j1,{title:"From your organization",templates:n,metadata:a?void 0:(0,O.jsx)(lz,{to:`?${j2}=${j5.ORG}`,children:"View all"})})]})}function j8({systemTemplates:e,hideHeading:t=!1}){return(0,O.jsxs)(eO.Z,{children:[!t&&(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:0,mb:2,color:"fg.muted"},children:"Featured"}),(0,O.jsx)(eO.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gridAutoRows:"minmax(250px, auto)",gap:3},children:e.map(e=>(0,O.jsx)(jU,{template:e},e.id))})]})}function j6({organizationTemplates:e,hideBlankslate:t=!1}){return 0===e.templates.length?t?null:(0,O.jsxs)(jy.Z,{children:[(0,O.jsx)(jy.Z.Visual,{children:(0,O.jsx)(eF.ProjectTemplateIcon,{})}),(0,O.jsx)(jy.Z.Heading,{children:"No templates yet"}),(0,O.jsx)(jy.Z.Description,{children:"Templates can be used to quickly get started with a new project."}),(0,O.jsx)(eO.Z,{sx:{mt:3,mb:2,textAlign:"center"},children:(0,O.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.github.com/issues/planning-and-tracking-with-projects/managing-your-project/managing-project-templates-in-your-organization",children:"Learn more"})})]}):(0,O.jsxs)(eO.Z,{children:[e.recommendedTemplates&&e.recommendedTemplates.length>0&&(0,O.jsx)(eO.Z,{sx:{mb:5},children:(0,O.jsx)(j1,{title:"Recommended",templates:e.recommendedTemplates})}),(0,O.jsx)(eO.Z,{sx:{mb:5},children:(0,O.jsx)(j1,{title:"All",templates:e.templates})})]})}let j7={display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"48px",gap:2,py:2},j9={flexShrink:0},Ce={display:"flex",gap:1,flexWrap:"wrap",justifyContent:"flex-end"},Ct={borderRadius:3,borderWidth:1,borderStyle:"solid",borderColor:"border.default",py:1,px:2},Cr={color:"fg.muted",mr:1},Ca={width:"100%",my:3,borderWidth:1,borderStyle:"solid",borderColor:"border.muted",borderRadius:2,aspectRatio:"1440 / 750"};function Cn({title:e,template:t}){let r=jT("projectTemplateDialog","layout"===t.type?t.viewType:""),{resolvedColorScheme:a}=(0,$.Fg)(),n="layout"===t.type?r:"dark"===a?t.template.imageUrl.dark:t.template.imageUrl.light;return(0,O.jsx)(eO.Z,{as:"img",src:n,alt:`Preview screenshot for template ${e}`,sx:Ca})}function Ci({template:e,onChangeProjectName:t,projectName:r}){let a=yR(),n=(0,H.useMemo)(()=>"system"===e.type?[]:"custom"===e.type?e.template.projectFields.filter(({customField:e})=>e):(e.type,[]),[e]),{title:i,description:l,updatedAt:s}=(0,H.useMemo)(()=>{if("layout"===e.type){var t;return"table"===(t=e.viewType)?{title:"New table",description:"Start with a powerful spreadsheet style table to filter, sort and group your issues and pull requests. Easily switch to a board or roadmap layout at any time."}:"board"===t?{title:"New board",description:"Start with a board to spread your issues and pull requests across customizable columns. Easily switch to a table or roadmap layout at any time."}:"roadmap"===t?{title:"New roadmap",description:"Start with a roadmap for a high-level visualization of your project over time. Easily switch to a table or board layout at any time."}:{title:"",description:""}}return"system"===e.type?{title:e.template.title,description:e.template.shortDescription}:{title:e.template.projectTitle,description:e.template.projectShortDescription,updatedAt:e.template.projectUpdatedAt}},[e]);return(0,O.jsxs)(eO.Z,{sx:{display:"grid",gridTemplateColumns:"minmax(auto, 250px) 1fr",columnGap:4},children:[(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:1,mb:2,display:"inline-block"},children:i}),"system"===e.type&&(0,O.jsxs)(eO.Z,{as:"span",sx:{color:"fg.muted"},children:[" ","\u2022 ","GitHub"]})]}),l&&(0,O.jsx)(eO.Z,{as:"p",sx:{color:"fg.muted"},children:l}),s&&(0,O.jsxs)(eO.Z,{as:"p",sx:{color:"fg.muted"},children:["Updated"," ",(0,eD.Q)(new Date(s),{addSuffix:!0})," "]})]}),(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{children:"Project name"}),(0,O.jsx)(yk.F,{...a,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{sx:{width:"100%"},autoComplete:"off",placeholder:i,value:r,onChange:e=>t(e.target.value)})})]}),"system"===e.type||"layout"===e.type?(0,O.jsx)(Cn,{title:i,template:e}):null,"custom"===e.type&&(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column","> * + *":{borderTopStyle:"solid",borderTopWidth:"1px",borderTopColor:"border.default"},py:3},children:[(0,O.jsxs)(eO.Z,{sx:j7,children:[(0,O.jsxs)(eO.Z,{sx:j9,children:[(0,O.jsx)(pm.Z,{sx:{mr:2},children:e.template.projectViews.length}),"Views"]}),(0,O.jsx)(eO.Z,{sx:Ce,children:e.template.projectViews.map(e=>(0,O.jsxs)(eO.Z,{sx:Ct,children:[(0,O.jsx)(eZ.Z,{icon:function(e){let t=fJ[e];if(!t)throw new EnumValueError("getViewIcons",e,fJ);return t}(e.viewType),sx:Cr}),e.name]},e.name))})]}),(0,O.jsxs)(eO.Z,{sx:j7,children:[(0,O.jsxs)(eO.Z,{sx:j9,children:[(0,O.jsx)(pm.Z,{sx:{mr:2},children:n.length}),"Fields"]}),(0,O.jsx)(eO.Z,{sx:Ce,children:n.map(e=>(0,O.jsxs)(eO.Z,{sx:Ct,children:[(0,O.jsx)(eZ.Z,{icon:jA(e.dataType),sx:Cr}),e.name]},e.name))})]}),(0,O.jsxs)(eO.Z,{sx:j7,children:[(0,O.jsxs)(eO.Z,{sx:j9,children:[(0,O.jsx)(pm.Z,{sx:{mr:2},children:e.template.projectWorkflows.length}),"Workflows"]}),(0,O.jsx)(eO.Z,{sx:Ce,children:e.template.projectWorkflows.map(e=>(0,O.jsxs)(eO.Z,{sx:Ct,children:[(0,O.jsx)(eZ.Z,{icon:eF.WorkflowIcon,sx:Cr}),e.name]},e.name))})]}),(0,O.jsxs)(eO.Z,{sx:j7,children:[(0,O.jsxs)(eO.Z,{sx:j9,children:[(0,O.jsx)(pm.Z,{sx:{mr:2},children:e.template.projectCharts.length}),"Insights"]}),(0,O.jsx)(eO.Z,{sx:Ce,children:e.template.projectCharts.map(e=>(0,O.jsxs)(eO.Z,{sx:Ct,children:[(0,O.jsx)(eZ.Z,{icon:eF.GraphIcon,sx:Cr}),e.name]},e.name))})]})]})]})]})}function Cl(){let{postStats:e}=os(),[,t]=lG(),{setIsTemplatesDialogOpen:r,setShouldOpenDiscoveryMenu:a}=jD(),n=(0,H.useCallback)((e=!0)=>{e&&a(!0),t(e=>(e.delete(j2),e.delete(jZ),e.delete(jO),e.delete(jV),e)),r(!1)},[r,a,t]),i=j3(),{isOrganization:l}=i5(),{data:s=null}=j_({enabled:l}),o=function({organizationTemplates:e}){let[t]=lG(),r=t.get(jZ),a=t.get(jO),n=t.get(jV);return(0,H.useMemo)(()=>{if(a){let e=i5().systemTemplates?.find(e=>e.id.toLowerCase()===a.toLowerCase());if(e)return{type:"system",template:e}}if(r){let t=e.find(e=>e.projectNumber===Number(r));if(t)return{type:"custom",template:t}}if(n&&(n===fQ.Table||n===fQ.Board||n===fQ.Roadmap))return{type:"layout",viewType:n}},[r,n,e,a])}({organizationTemplates:s?.templates??[]}),[d,u]=(0,H.useState)(r8().title),c=!!o,{applyTemplate:m,isApplyingTemplate:p,copyingDraftsAsync:f}=function(){let e=gc(),{addToast:t}=e9(),r=(0,H.useRef)(!1),{viewsMap:a}=oi(),n=jC(),{updateTitle:i}=jk(),l=d1({request:async e=>{(await jx({template:e})).copyingDraftsAsync&&(t({message:rU.copyingDraftsMessage,type:"default",keepAlive:!1}),r.current=!0)},rollback:e=>{e?.()},showErrorToast:!0});return{applyTemplate:(0,H.useCallback)(async function({template:t,title:r,rollback:s}){let o=[i(r)];if("layout"===t.type){let e=a[1];if(!e)return;o.push(n.perform({viewNumber:e.number,view:hp({...e.serverViewState,layout:f1(t.viewType)},fU)}))}else{let e="custom"===t.type?String(t.template.projectNumber):t.template.id;o.push(l.perform(e,s))}await Promise.all(o),await e()},[l,e,i,n,a]),isApplyingTemplate:"loading"===l.status.current.status,copyingDraftsAsync:r}}(),h=(0,H.useCallback)(async t=>{await m({template:t,title:d,rollback:fV.Z}),"custom"===t.type?e({name:nl,context:JSON.stringify({template:"org_templates",template_project_title:t.template?.projectTitle,template_project_number:t.template?.projectNumber}),ui:"template_dialog"}):e({name:nl,context:JSON.stringify({template:"layout"===t.type?t.viewType:t.template.id}),ui:"template_dialog"}),n(!f.current)},[m,f,n,e,d]),g=jB({type:"layout",viewType:fQ.Table}),y=jB({type:"layout",viewType:fQ.Board}),x=jB({type:"layout",viewType:fQ.Roadmap}),[b,v]=(0,H.useState)(""),{totalCount:w,showSearchResults:j,filteredTemplates:C}=function({searchQuery:e,organizationTemplates:t}){let r=j3(),a=(0,H.useMemo)(()=>{let r=i5().systemTemplates?.filter(t=>t.title.toLowerCase().includes(e.toLowerCase()))??[];return{organizationTemplates:t?.templates.filter(t=>t.projectTitle.toLowerCase().includes(e.toLowerCase()))??[],systemTemplates:r}},[t,e]),n=r===j5.ALL||r===j5.ORG,i=r===j5.ALL||r===j5.FEATURED;return{totalCount:(n?a.organizationTemplates.length:0)+(i?a.systemTemplates.length:0),filteredTemplates:a,showSearchResults:e.length>0}}({searchQuery:b,organizationTemplates:s}),I=i5().systemTemplates??[],S=0===w?"No results":1===w?"1 result":`${w} results`,k=(0,s9.Z)(e=>{(0,jg.x)(e,{assertive:!0})},100);return(0,H.useEffect)(()=>{b&&k(S)},[k,b,S]),(0,O.jsx)(wE.V,{title:"Create project",height:"large",sx:{width:["100%","960px"]},onClose:()=>{e({name:"templates_cancel"}),n()},renderHeader:({dialogLabelId:e,onClose:t})=>(0,O.jsx)(wE.V.Header,{children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:2},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:1},children:[c&&(0,O.jsx)(lz,{to:{search:`?${j2}=${i}`},"aria-label":"Back",children:(0,O.jsx)(eZ.Z,{icon:eF.ArrowLeftIcon,sx:{color:"fg.muted"}})}),(0,O.jsx)(wE.V.Title,{id:e,children:"Create project"})]}),(0,O.jsx)(wE.V.CloseButton,{onClose:()=>t("close-button")})]})}),renderBody:()=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(wE.V.Body,{children:c&&o?(0,O.jsx)(Ci,{template:o,projectName:d,onChangeProjectName:u}):(0,O.jsxs)(eO.Z,{sx:{display:"grid",gridTemplateColumns:"minmax(250px, auto) 1fr",columnGap:4},children:[(0,O.jsxs)(fb.$,{sx:{ml:-2,mt:-4},children:[(0,O.jsxs)(fb.$.Group,{title:"Project templates",children:[l&&(0,O.jsx)(fb.$.Item,{as:lz,"aria-current":i===j5.ALL&&"page",to:`?${j2}=${j5.ALL}`,children:"All templates"}),(0,O.jsx)(fb.$.Item,{as:lz,"aria-current":i===j5.FEATURED&&"page",to:`?${j2}=${j5.FEATURED}`,children:"Featured"}),l&&(0,O.jsx)(fb.$.Item,{as:lz,"aria-current":i===j5.ORG&&"page",to:`?${j2}=${j5.ORG}`,children:"From your organization"})]}),(0,O.jsxs)(fb.$.Group,{title:"Start from scratch",children:[(0,O.jsx)(fb.$.Item,{as:lz,to:g,children:"Table"}),(0,O.jsx)(fb.$.Item,{as:lz,to:y,children:"Board"}),(0,O.jsx)(fb.$.Item,{as:lz,to:x,children:"Roadmap"})]})]}),(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(cX.Z,{sx:{mb:3},children:[(0,O.jsx)(cX.Z.Label,{visuallyHidden:!0,children:"Search templates"}),(0,O.jsx)(pw.Z,{block:!0,leadingVisual:eF.SearchIcon,placeholder:"Search templates",value:b,onChange:e=>v(e.target.value),trailingAction:b.length>0?(0,O.jsx)(pw.Z.Action,{onClick:()=>v(""),icon:eF.XCircleFillIcon,"aria-label":"Clear search",sx:{color:"fg.subtle"}}):void 0})]}),(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:0,mb:2},children:j?S:""}),i===j5.ALL&&(0,O.jsx)(j4,{organizationTemplates:j?{templates:C.organizationTemplates}:s,systemTemplates:j?C.systemTemplates:I,previewTemplateCount:j?100:void 0,hideViewAll:j}),i===j5.FEATURED&&(0,O.jsx)(j8,{systemTemplates:j?C.systemTemplates:I,hideHeading:j}),i===j5.ORG&&s&&(0,O.jsx)(j6,{organizationTemplates:j?{templates:C.organizationTemplates}:s,hideBlankslate:j})]})]})}),(0,O.jsx)(wE.V.Footer,{sx:{display:c&&o?void 0:"none"},children:c&&o?(0,O.jsx)(cd.r,{variant:"primary",disabled:p,onClick:()=>h(o),children:"Create project"}):null})]})})}function Cs(){let{showTemplateDialog:e}=i5(),{isTemplatesDialogOpen:t}=jD();return e&&t?(0,O.jsx)(Cl,{}):null}try{j4.displayName||(j4.displayName="AllTemplatesTab")}catch{}try{j8.displayName||(j8.displayName="FeaturedTemplatesTab")}catch{}try{j6.displayName||(j6.displayName="OrganizationTemplatesTab")}catch{}try{Cn.displayName||(Cn.displayName="DefaultTemplateImage")}catch{}try{Ci.displayName||(Ci.displayName="TemplateDetails")}catch{}try{Cl.displayName||(Cl.displayName="TemplateDialog")}catch{}try{Cs.displayName||(Cs.displayName="TemplateDialogWrapper")}catch{}var Co=r(41905);let Cd=["business","business_plus"];function Cu(){let{isDotcomRuntime:e,isBillingEnabled:t,projectOwner:r}=i5(),{isPublicProject:a}=gC(),{isOrganization:n,projectLimits:i}=i5(),{memex_insights:l,memex_charts_basic_public:s,memex_charts_basic_private:o,memex_charts_basic_allow:d,memex_insights_basic_private:u,memex_insights_basic_public:c,memex_table_without_limits:m}=n9(),{hasWritePermissions:p}=i4(),f=!m&&(!1===t||l&&n&&e||n&&e&&!!r&&Cd.includes(r.planName||"")),h=f||d||a?s:o,g=h?Number.MAX_VALUE:i.limitedChartsLimit;return{isInsightsEnabled:f,isInsightsChartViewEnabled:!m&&p,hasUnlimitedSavedCharts:h,savedChartsLimit:g,isInsightsEligible:a?c:u}}let Cc=()=>(0,H.useContext)(r3),Cm={color:"fg.muted",fontSize:1,fontWeight:"normal",display:"flex",alignContent:"center"},Cp=()=>{let{latestStatusItem:e}=yA(),{openPaneInfo:t}=dq(),{hasWritePermissions:r}=i4(),{postStats:a}=os(),[n,i]=(0,H.useState)(!1),l=e?.statusValue.status,s=(0,H.useCallback)(()=>{t(e?.id),a({name:"status_update_open_current",context:JSON.stringify(e?{id:e.id,status:e.statusValue.status?.name,startDate:e.statusValue.startDate,targetDate:e.statusValue.targetDate}:{})})},[e,t,a]);return r||l?(0,O.jsx)(eO.Z,{...(0,ef.f)("latest-status-update"),children:l?(0,O.jsxs)(cd.r,{variant:"invisible",onClick:s,onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1),sx:Cm,"aria-label":`View latest ${l.name} status updated ${tX(new Date(e.updatedAt))}`,children:[n&&(0,O.jsxs)("span",{...(0,ef.f)("latest-status-update-token-button-text"),children:["Updated ",(0,O.jsx)(y6.Z,{sx:{fontSize:"inherit"},datetime:e.updatedAt})," "]}),(0,O.jsx)(y0,{...(0,ef.f)("latest-status-update-token-button"),as:"span",option:l,sx:{cursor:"pointer"}})]}):(0,O.jsx)(cd.r,{variant:"invisible",onClick:s,children:(0,O.jsx)(yJ.Z,{...(0,ef.f)("latest-status-update-null-button"),text:"Add status update",sx:{cursor:"pointer"}})})}):null};try{Cp.displayName||(Cp.displayName="LatestStatusUpdate")}catch{}let Cf=(0,H.memo)(function(){let{getChartLinkTo:e}=ge(),{postStats:t}=os(),r=(0,H.useCallback)(()=>{t({name:"insights_view_open"})},[t]),a=(0,H.useRef)(null),[n,i]=(0,mH.g)({contentRef:a,"aria-label":rT.insightsButton,direction:"sw",anchorSide:"outside-bottom"});return(0,O.jsxs)(cd.r,{ref:a,to:e(0).url,onClick:r,sx:{px:2},...(0,ef.f)("project-insights-button"),"aria-label":rT.insightsButton,as:lz,...n,children:[(0,O.jsx)(eZ.Z,{icon:eF.GraphIcon}),i]})}),Ch=(0,H.memo)(function(){let{openPaneInfo:e}=dq(),{postStats:t}=os(),r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":rT.projectDetailsButton,direction:"sw",anchorSide:"outside-bottom"});return(0,O.jsxs)(cd.r,{ref:r,onClick:()=>{t({name:"description_show",ui:a6}),e()},sx:{px:2},"aria-label":rT.projectDetailsButton,...(0,ef.f)("project-memex-info-button"),...a,children:[(0,O.jsx)(eZ.Z,{icon:eF.SidebarExpandIcon}),n]},"project-details-button")}),Cg=(0,H.memo)(function(){let{projectNumber:e}=d5(),{feedbackLink:t,copyProjectPartialUrl:r}=i5(),{memex_automation_enabled:a}=n9(),n=ur(),[i,l]=(0,H.useState)(!1),{postStats:s}=os(),{hasWritePermissions:o,isLoggedIn:d,canCopyAsTemplate:u}=i4(),c=(0,H.useCallback)(()=>{l(e=>!e)},[]),m=(0,H.useCallback)(()=>{c(),s({name:"feedback_open",ui:a7})},[s,c]),p=(0,H.useCallback)(()=>{c(),s({name:"docs_open",ui:a7})},[s,c]),f=(0,H.useCallback)(()=>{c(),s({name:"changelog_open",ui:a7})},[s,c]),h=(0,H.useCallback)(()=>{c(),s({name:"workflows_open"})},[s,c]),g=(0,H.useCallback)(()=>{s({name:ns,ui:a7})},[s]),y=(0,H.useCallback)(()=>{s({name:no,ui:a7})},[s]),x=d&&u,b=(0,H.useMemo)(()=>{let r=[];o&&r.push(a&&(0,O.jsx)(Cw,{to:ew.generatePath(n),icon:eF.WorkflowIcon,text:"Workflows",onClick:h,testId:"automation-settings-button"},"workflows"),(0,O.jsx)(Cw,{to:eN.generatePath(n),icon:eF.ArchiveIcon,text:"Archived items",onClick:c,testId:"archive-navigation-button"},"archive"),(0,O.jsx)(Cw,{to:eC.generatePath(n),icon:eF.GearIcon,text:"Settings",onClick:c,testId:"project-settings-button"},"settings")),d&&r.push((0,O.jsxs)(mx.S.Item,{role:"menuitem",as:"button",id:`topmenu-copy-project-dialog-${e}`,"data-show-dialog-id":`copy-project-dialog-${e}`,onSelect:g,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.CopyIcon,{})}),"Make a copy"]},"topMenuCopyProjectButton")),x&&r.push((0,O.jsxs)(mx.S.Item,{role:"menuitem",as:"button",id:`topmenu-copy-as-template-dialog-${e}`,"data-show-dialog-id":`copy-as-template-dialog-${e}`,onClick:y,...(0,ef.f)("copy-as-template-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.DuplicateIcon,{})}),"Copy as template"]},"topMenuCopyAsTemplateButton")),r.length&&r.push((0,O.jsx)(fj.P.Divider,{},"divider-write-permissions"));let i=eP("github-runtime")??"dotcom",l=eP("github-version-number"),s="enterprise"===i?`https://docs.github.com/enterprise-server@${"unknown"===l?"latest":l}/issues/planning-and-tracking-with-projects`:"https://docs.github.com/issues/planning-and-tracking-with-projects";return r.push((0,O.jsxs)(mx.S.Group,{variant:"subtle",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"GitHub Projects"}),(0,O.jsx)(Cv,{href:"https://github.blog/changelog/label/projects/",icon:eF.RocketIcon,text:"What\u2019s new",onClick:f,testId:"whats-new-link"},"new"),(0,O.jsx)(Cv,{href:t,icon:eF.CommentIcon,text:"Give feedback",onClick:m,testId:"feedback-link"},"feedback"),(0,O.jsx)(Cv,{href:s,icon:eF.BookIcon,text:"GitHub Docs",onClick:p,testId:"docs-link"},"docs")]},"title-github-projects")),r},[o,d,x,f,t,m,p,a,h,c,e,g,y,n]),v=(0,H.useRef)(null),[w,j]=(0,mH.g)({contentRef:v,"aria-label":rT.viewMoreOptions,direction:"sw",anchorSide:"outside-bottom",open:!i&&void 0});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(cd.r,{ref:v,...(0,ef.f)("project-menu-button"),sx:{px:2},...w,onClick:()=>l(e=>!e),"aria-label":rT.viewMoreOptions,children:[(0,O.jsx)(eZ.Z,{icon:eF.KebabHorizontalIcon}),j]}),(0,O.jsx)(fj.P,{anchorRef:v,open:i,onOpenChange:l,children:(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(mx.S,{children:b})})},"project-menu"),(0,O.jsx)(Co.h,{children:(0,O.jsxs)("div",{children:[d&&(0,O.jsx)("include-fragment",{src:encodeURI(r)}),x&&(0,O.jsx)("include-fragment",{src:encodeURI(`${r}?copy_as_template=true`)})]})})]})}),Cy={flexShrink:0},Cx=(0,H.memo)(function({isProjectPath:e}){let{isInsightsChartViewEnabled:t}=Cu();return(0,O.jsxs)(by.Z,{sx:Cy,children:[t?(0,O.jsx)(Cf,{}):null,e?(0,O.jsx)(Ch,{}):null,(0,O.jsx)(Cg,{})]})}),Cb=(0,H.memo)(function(){let{copyProjectPartialUrl:e}=i5(),{isLoggedIn:t}=i4(),{projectNumber:r}=d5(),{postStats:a}=os(),n=Cc(),i=(0,H.useCallback)(()=>{a({name:ns,ui:"use_this_template_ui"})},[a]);return(0,O.jsxs)(eO.Z,{...(0,ef.f)("use-this-template-form"),sx:{justifyItems:"center",display:"flex",alignItems:"center",gap:2},children:[(0,O.jsx)(cd.r,{size:"medium",variant:"primary",...(0,ef.f)("use-this-template-button"),"aria-label":"Use this template","data-show-dialog-id":`copy-from-template-dialog-${r}`,onClick:i,children:"Use this template"}),(0,O.jsx)(Co.h,{children:(0,O.jsx)("div",{children:t&&(0,O.jsx)("include-fragment",{src:encodeURI(`${e}?template_id=${n}`)})})})]})}),Cv=({text:e,icon:t,testId:r,onClick:a,href:n})=>(0,O.jsxs)(mx.S.LinkItem,{role:"menuitem",href:n,target:"_blank",onClick:a,...(0,ef.f)(r),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(t,{})}),e]}),Cw=({text:e,icon:t,testId:r,onClick:a,to:n})=>(0,O.jsxs)(mx.S.LinkItem,{role:"menuitem",as:lz,to:n,onClick:a,...(0,ef.f)(r),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(t,{})}),e]}),Cj={display:"flex",flexShrink:0,mt:0,px:[3,4,5],py:2,bg:"canvas.inset",alignItems:"flex-start",position:"relative",justifyContent:"flex-end",borderBottom:"none",flexWrap:"wrap-reverse"},CC={...Cj,borderBottom:"1px solid",borderColor:"border.subtle"},CI={justifyItems:"center",display:"flex",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",gap:2},CS=(0,H.memo)(function({children:e,isProjectPath:t=!1}){let{isTemplate:r}=gC(),{isOrganization:a}=i5();return(0,O.jsxs)(eO.Z,{role:"navigation","aria-label":"Project",sx:t?Cj:CC,children:[e,(0,O.jsx)("div",{style:{flex:1}}),(0,O.jsxs)(eO.Z,{sx:CI,children:[t&&!r&&(0,O.jsx)(Cp,{}),(0,O.jsx)(gA,{}),(0,O.jsx)(Cx,{isProjectPath:t}),a&&r?(0,O.jsx)(Cb,{}):null]})]})});try{Cf.displayName||(Cf.displayName="InsightsNavigationButton")}catch{}try{Ch.displayName||(Ch.displayName="ProjectDetailsButton")}catch{}try{Cg.displayName||(Cg.displayName="SettingsOverflowMenu")}catch{}try{Cx.displayName||(Cx.displayName="ProjectNavigationButtons")}catch{}try{Cb.displayName||(Cb.displayName="UseTemplateButton")}catch{}try{Cv.displayName||(Cv.displayName="ExternalLink")}catch{}try{Cw.displayName||(Cw.displayName="InternalLink")}catch{}try{CS.displayName||(CS.displayName="TopBar")}catch{}let Ck="settings-project-name",CT=()=>{let{memex_table_without_limits:e}=n9(),{hasWritePermissions:t}=i4(),{shortDescriptionHtml:r,titleHtml:a}=r8(),{isPublicProject:n,isClosed:i,isTemplate:l}=gC(),s=l$(),o=ur(),{data:d}=go(),u=()=>{s(eC.generatePath(o)),setTimeout(()=>document.getElementById(Ck)?.focus())},c=d?.killSwitchEnabled;return(0,O.jsxs)(eO.Z,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:0,gap:1,pr:2,cursor:"default"},children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",gap:1,'&:not(:focus-within):not(:hover) > [aria-label="Edit project name"]':{clipPath:"circle(0)",width:l?0:"auto"},cursor:t?"pointer":"default"},onClick:t?u:void 0,children:[i?(0,O.jsx)(CN,{}):null,(0,O.jsx)(eZ.Z,{icon:n&&l?eF.ProjectTemplateIcon:n?eF.GlobeIcon:eF.LockIcon,sx:{color:"fg.muted"}}),(0,O.jsx)(u5,{as:"h1",sx:{fontSize:3,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",my:0},children:a}),t&&(0,O.jsx)(mq.h,{icon:eF.PencilIcon,variant:"invisible",size:"small",onClick:u,"aria-label":"Edit project name",sx:{color:"fg.default"}})]}),(e||c)&&(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(y8.Z,{variant:"success","data-testid":"memex_without_limits_beta_label",tabIndex:0,children:"Unlimited items beta"}),(0,O.jsx)(uB.Z,{sx:{paddingLeft:2,fontSize:0},href:i5().pwlBetaFeedbackLink,children:"Feedback"})]}),l?(0,O.jsxs)(y8.Z,{variant:"secondary",children:[" ",n?"Public":"Private"," template "]}):null]}),l&&(0,O.jsx)(eO.Z,{children:(0,O.jsx)(u5,{as:"div",className:"color-fg-muted",children:r})})]})},CN=()=>(0,O.jsx)(y8.Z,{variant:"done",...(0,ef.f)("closed-project-label"),sx:{color:"fg.onEmphasis",backgroundColor:"done.emphasis"},children:"Closed"});try{CT.displayName||(CT.displayName="MemexTitle")}catch{}try{CN.displayName||(CN.displayName="ClosedLabel")}catch{}let C_=({title:e})=>{let{returnToViewLinkTo:t}=oi();return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"center"},children:[(0,O.jsx)(lz,{to:t,"aria-label":"Return to project view",children:(0,O.jsx)(eZ.Z,{icon:eF.ArrowLeftIcon,sx:{color:"fg.muted",verticalAlign:"middle",mr:2},size:24})}),(0,O.jsx)(cG.Z,{as:"h1",sx:{fontSize:3,color:"fg.default"},children:e})]})};try{C_.displayName||(C_.displayName="RouteTitle")}catch{}let CR=(0,H.memo)(function(){let{postStats:e}=os(),t=(0,K.TH)(),r=(0,H.useRef)(null),a=t.pathname;return(0,H.useEffect)(()=>{let t=r.current;if(a!==t){let r=eR(a);e({name:"path_change",context:JSON.stringify({currentPath:a,previousPath:t,currentBestMatchRoute:r?r.path:"<unknown_route>"})})}r.current=a},[a,e]),null});try{CR.displayName||(CR.displayName="TrackPathChanges")}catch{}let CP=ui(async()=>{let e=aa("memex-notification-subscription-create-api-data");await ac(e.url,{method:"POST"})},500),CD=ui(async()=>{let e=aa("memex-notification-subscription-destroy-api-data");await ac(e.url,{method:"DELETE"})},500),CE=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(eP("memex-viewer-subscribed")??!1),[a,n]=(0,H.useState)(!1),i=(0,H.useCallback)(async()=>{n(!0),r(!0);try{await CP()}catch(e){throw r(t),e}finally{n(!1)}},[t]),l=(0,H.useCallback)(async()=>{n(!0),r(!1);try{await CD()}catch(e){throw r(t),e}finally{n(!1)}},[t]);return(0,O.jsx)(xl.Provider,{value:(0,H.useMemo)(()=>({subscribe:i,unsubscribe:l,viewerIsSubscribed:t,isLoading:a,setViewerIsSubscribed:r}),[a,i,l,t,r]),children:e})});try{CE.displayName||(CE.displayName="NotificationSubscriptionsProvider")}catch{}async function CA(e){let t=aa("memex-status-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function CM(e){let t=aa("memex-status-destroy-api-data");await ac(`${t.url}/${e}`,{method:"DELETE"})}async function CL(){let e=aa("memex-statuses-api-data"),{data:t}=await ad(e.url);return t}async function CF(e){let t=aa("memex-status-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}let CZ=(0,H.memo)(function({children:e}){let{loggedInUser:t}=i5(),{sidePanelState:r}=dq(),{statusUpdateDrafts:a,statusUpdateDraftsDispatch:n}=yO(),{setViewerIsSubscribed:i}=xs(),[l,s]=(0,H.useState)([]),[o,d]=(0,H.useState)([]),[u,c]=(0,H.useState)(!0),[m,p]=(0,H.useState)(eP("latest-memex-project-status")),f=(0,H.useRef)(!1),[h]=lG(),g=h.get(lv),y=r?.type==="info";(0,H.useEffect)(()=>{!f.current&&y&&(f.current=!0,c(!0),CL().then(e=>{s(e.statuses),d(e.form.status.options),f.current=!1,c(!1)}))},[s,y]),(0,H.useEffect)(()=>{y&&!u&&p(l[0])},[u,l,y]);let x=(0,H.useCallback)(async({body:e,startDate:r,targetDate:a,status:n})=>{if(!t)throw Error("Must be logged in to create a status update");let{status:l,viewerIsSubscribed:o}=await CA({body:e,startDate:r?tY(r):"",targetDate:a?tY(a):"",statusId:n?.id??null});i(o),s(e=>[l,...e])},[t,i]),b=(0,H.useCallback)(async e=>{s(t=>t.filter(t=>t.id!==e));try{await CM(e)}catch{s(l)}},[l]),v=(0,H.useCallback)(async({id:e,body:r,startDate:a,targetDate:n,status:o})=>{if(!e)throw Error("Unable to determine id of status");if(!t)throw Error("Must be logged in to update a status update");let d=l.findIndex(t=>t.id===e);if(!l[d])throw Error("Unable to find memex status");let u=[...l],{status:c,viewerIsSubscribed:m}=await CF({id:e,body:r,startDate:a?tY(a):"",targetDate:n?tY(n):"",statusId:o?.id??null});return u[d]=c,i(m),s(u),c},[t,l,i]);return(0,O.jsx)(yM.Provider,{value:(0,H.useMemo)(()=>({statusUpdateDrafts:a,statusUpdateDraftsDispatch:n}),[a,n]),children:(0,O.jsx)(yE.Provider,{value:(0,H.useMemo)(()=>({memexStatusItems:l,statusOptions:o,addStatusUpdate:x,deleteStatusUpdate:b,updateStatusUpdate:v,isLoading:u,statusUpdateIdParam:g,latestStatusItem:m}),[l,o,x,b,v,u,g,m]),children:e})})});try{CZ.displayName||(CZ.displayName="MemexStatusItemsProvider")}catch{}let CO=(0,H.createContext)(null),CV=()=>{let e=(0,H.useContext)(CO);if(!e)throw Error("useAggregationSettings must be used within a AggregationSettingsContext");return e},CB=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),{allColumns:a}=df(),n=(0,H.useCallback)((e,t,a)=>{r({type:dy.AddFieldAggregation,viewNumber:e,fieldOperation:t,column:a})},[r]),i=(0,H.useCallback)((e,t,a)=>{r({type:dy.RemoveFieldAggregation,viewNumber:e,fieldOperation:t,column:a})},[r]),l=(0,H.useCallback)(e=>{r({type:dy.ToggleItemsCount,viewNumber:e})},[r]),s=(0,H.useCallback)(e=>{let r=[],n=a.filter(e=>e.dataType===eA.Number).map(e=>e.id),i={};for(let a of t?.localViewStateDeserialized.aggregationSettings.sum??[]){let t={name:a.name,sum:0,maxDecimalPlaces:0};for(let r of e){let e=r.columns[a.id],l=n.indexOf(a.id);i[a.name]=l,t.sum+=e?.value??0,t.maxDecimalPlaces=Math.max(t.maxDecimalPlaces,function(e){if(Number.isNaN(e)||!Number.isFinite(e)||Number.isInteger(e))return 0;let t=e.toString().split(".")[1]?.replace(/0+$/,"");return t?t.length:0}(e?.value??0))}r.push(t)}return r.sort((e,t)=>(i[e.name]??0)-(i[t.name]??0))},[t?.localViewStateDeserialized.aggregationSettings.sum,a]);return(0,O.jsx)(CO.Provider,{value:(0,H.useMemo)(()=>({hideItemsCount:!!t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,sum:t?.localViewStateDeserialized.aggregationSettings.sum??[],toggleItemsCount:l,addFieldAggregation:n,removeFieldAggregation:i,isAggregationSettingsDirty:t?.isAggregationSettingsDirty??!1,getAggregatesForItems:s}),[t?.localViewStateDeserialized.aggregationSettings.hideItemsCount,t?.localViewStateDeserialized.aggregationSettings.sum,t?.isAggregationSettingsDirty,l,n,i,s]),children:e})});try{CB.displayName||(CB.displayName="AggregationSettingsProvider")}catch{}var C$=r(66501),Cz=r(56363);let CW=(0,Cz.Z)("localStorage"),CG="projects.collapsedGroups",CU=()=>{let e=CW.getItem(CG);if(!e)return{};try{let t=JSON.parse(e);if("object"==typeof t&&null!==t)return t;return CW.removeItem(CG),{}}catch(e){return CW.removeItem(CG),{}}},CH=e=>{let t=(0,C$.Z)(e,e=>0!==Object.keys((0,C$.Z)(e,e=>0!==e.length)).length);0===Object.keys(t).length?CW.removeItem(CG):CW.setItem(CG,JSON.stringify(t))},Cq=()=>{let{projectNumber:e}=d5(),[t,r]=(0,H.useState)(()=>CU()[e]??{});return(0,H.useEffect)(()=>{CH({...CU(),[e]:t})},[e,t]),[t,r]},CK=[],CQ=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),[a,n]=Cq(),i=t?.number??-1,l=(0,H.useCallback)((e,t)=>{r({type:dy.SetHorizontalGroupedBy,viewNumber:e,column:t}),n(e=>({...e,[i]:[]}))},[r,n,i]),s=(0,H.useCallback)(e=>{r({type:dy.ClearHorizontalGroupedBy,viewNumber:e})},[r]),o=(0,H.useCallback)(e=>{n(t=>{let r=t[i]??[];return r.includes(e)?{...t,[i]:r.filter(t=>t!==e)}:{...t,[i]:[...r,e]}})},[i,n]);return(0,O.jsx)(dC.Provider,{value:(0,H.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.horizontalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.horizontalGroupByColumns[0],setGroupedBy:l,clearGroupedBy:s,isGroupedByDirty:t?.isHorizontalGroupedByDirty??!1,collapsedGroups:a[i]??CK,toggleGroupCollapsed:o}),[s,t?.isHorizontalGroupedByDirty,t?.localViewStateDeserialized.horizontalGroupByColumns,l,a,o,i]),children:e})});try{CQ.displayName||(CQ.displayName="HorizontalGroupedByProvider")}catch{}function CX(e){return e===fQ.Roadmap||e===fQ.Table}function CY(e){return e===fW.Roadmap||e===fW.Table}function CJ(e,t){let r=f0(e);if(!CX(r))throw Error("Column widths can only be applied to table or roadmap views");return t[r]?.columnWidths??{}}function C0(e,t,r){let a=f0(t);if(!CX(a))throw Error("Column widths can only be applied to table or roadmap views");return{...e,layoutSettings:{...e.layoutSettings,[a]:{...e.layoutSettings[a],columnWidths:{...r}}}}}function C1(e){return e!==fH&&(nK(e)||nH(e))}function C2(e){return"none"!==e&&"number"==typeof e}function C5(e){return!!(e&&e.dateFields&&e.dateFields.length>0)}let C3=fq.Month;function C4(e){return e?.roadmap?.zoomLevel??C3}function C8(e){return[e[0]||fH,e[1]||fH]}function C6(e){return e.map(t=>{let{startDate:r,endDate:a}=nk({startDate:t.startDate,duration:t.duration});return`${t.title}: ${rw(r,a,e.length>1?"MMM d":"EEE, MMM d")}`}).join(", ")}let C7=(0,H.createContext)(null),C9=(0,H.createContext)(null),Ie=()=>{let e=(0,H.useContext)(C7);if(!e)throw Error("useRoadmapSettings must be used within a RoadmapSettingsContext");return e},It=()=>{let e=(0,H.useContext)(C9);if(!e)throw Error("useRoadmapSessionSettings must be used within a RoadmapSessionSettingsContext");return e},Ir=(0,H.createContext)(null),Ia=()=>{let e=(0,H.useContext)(Ir);return(0,J.Z)(null!=e,"useRoadmapTableWidth must be used within a RoadmapTableWidthContext"),e},In=(0,H.createContext)(null),Ii=()=>{let e=(0,H.useContext)(In);return(0,J.Z)(null!=e,"useRoadmapTotalFixedColumnWidth must be used within a RoadmapTotalFixedColumnWidthContext"),e},Il=(0,H.createContext)(null),Is=()=>{let e=(0,H.useContext)(Il);return(0,J.Z)(null!=e,"useRoadmapZoomLevel must be used within a RoadmapZoomLevelContext"),e},Io=(0,H.createContext)(null),Id=()=>{let e=(0,H.useContext)(Io);return(0,J.Z)(null!=e,"useRoadmapSetZoomLevel must be used within a RoadmapSetZoomLevelContext"),e},Iu="row-drag-handle",Ic="add-column";function Im(e){return e.id===Iu}var Ip=r(96567);let If=()=>(0,O.jsx)(Ip.u,{keys:"delete"}),Ih=()=>m$()?null:(0,O.jsx)(Ip.u,{keys:"e"}),Ig=(0,H.createContext)(null),Iy=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(void 0),a=(0,H.useCallback)((e,t,a)=>{let n={validationMessage:e,rowId:t,colId:a};r(e=>void 0!==e&&rt(e,n)?e:n)},[]),n=(0,H.useCallback)(()=>{r(void 0)},[]),i=(0,H.useMemo)(()=>({validationState:t,setValidationMessage:a,clearValidationMessage:n}),[n,a,t]);return(0,O.jsx)(Ig.Provider,{value:i,children:e})});function Ix(e,t){let r;let a=(0,H.useContext)(Ig);if(!a)throw Error("Wrap use of `useCellValidationMessage` in `CellValidationContext` provider");return a.validationState&&a.validationState.rowId===e&&a.validationState.colId===t&&(r=a.validationState.validationMessage),{validationMessage:r,setValidationMessage:a.setValidationMessage,clearValidationMessage:a.clearValidationMessage,validationMessageId:r&&"table-cell-validation-message"}}try{Ig.displayName||(Ig.displayName="CellValidationContext")}catch{}try{Iy.displayName||(Iy.displayName="CellValidationContextProvider")}catch{}let Ib=(0,H.createContext)(null),Iv=(0,H.createContext)(null),Iw=(0,H.createContext)(null),Ij=(0,H.createContext)(void 0),IC=(0,H.createContext)(null),II=(0,H.createContext)(null),IS=(0,H.createContext)(null),Ik=(0,H.createContext)(null),IT=(0,H.createContext)(0),IN=e=>(0,O.jsx)(Ib.Provider,{value:e.table.state,children:(0,O.jsx)(Iw.Provider,{value:e.table.state.overColumn,children:(0,O.jsx)(Ij.Provider,{value:e.table.state.selectedRowIds,children:(0,O.jsx)(IC.Provider,{value:e.table.state.sortBy,children:(0,O.jsx)(II.Provider,{value:e.table.state.rowMenuShortcutOrigin,children:(0,O.jsx)(IS.Provider,{value:e.table.state.columnResizing,children:(0,O.jsx)(Ik.Provider,{value:e.table,children:(0,O.jsx)(Iv.Provider,{value:e.table.dispatch,children:(0,O.jsx)(Iy,{children:(0,O.jsx)(IT.Provider,{value:e.cellHeight,children:e.children})})})})})})})})})});function I_(){let e=(0,H.useContext)(Ib);if(!e)throw Error("Must use `useTableState` in child of `<TableStateProvider>");return e}function IR(){let e=(0,H.useContext)(Iv);if(!e)throw Error("Must use `useTableDispatch` in child of `<TableDispatchProvider>");return e}function IP(){return(0,H.useContext)(Ij)}function ID(){let e=(0,H.useContext)(Ik);if(!e)throw Error("Must use `useTableInstance` in child of `<TableProvider>");return e}try{Ib.displayName||(Ib.displayName="TableStateContext")}catch{}try{Iv.displayName||(Iv.displayName="TableDispatchContext")}catch{}try{Iw.displayName||(Iw.displayName="TableStateOverColumnContext")}catch{}try{Ij.displayName||(Ij.displayName="TableStateSelectedRowIdsContext")}catch{}try{IC.displayName||(IC.displayName="TableStateSortByContext")}catch{}try{II.displayName||(II.displayName="TableStateRowMenuShortcutOriginContext")}catch{}try{IS.displayName||(IS.displayName="TableStateColumnResizingContext")}catch{}try{Ik.displayName||(Ik.displayName="TableInstanceContext")}catch{}try{IT.displayName||(IT.displayName="TableCellHeightContext")}catch{}let IE={paddingLeft:"12px"},IA={display:"flex",alignItems:"center",flexGrow:1,overflow:"hidden",padding:"12px",position:"relative"},IM=(0,H.forwardRef)((e,t)=>{let{sx:r,editing:a,disallowSelection:n,...i}=e,l=(0,H.useContext)(IT),s={...IA,height:`${l}px`,...r,userSelect:n?"none":"auto",...a?IE:{}};return(0,O.jsx)(eO.Z,{ref:t,sx:s,...i})});IM.displayName="BaseCell";var IL=r(86010);let IF=Math.floor(14.8);var IZ=r(65089),IO=r(77226);let IV=(0,H.createContext)(null);try{IV.displayName||(IV.displayName="DroppedItemIdContext")}catch{}let IB={is:e=>(0,IO.Z)(e)&&"sortable"in e&&(0,IO.Z)(e.sortable)&&"containerId"in e.sortable&&"string"==typeof e.sortable.containerId},I$=e=>`reorderable_table-row-${e.id}`,Iz=e=>{let t=(0,IZ.nB)({id:I$(e),data:{originalItemId:e.original.id}}),r=(0,H.useContext)(IV);return{isDropped:e.original.id===r,...t}},IW=({rows:e,children:t,groupedValue:r})=>{let a=(0,H.useMemo)(()=>e.map(I$),[e]);return(0,O.jsx)(IZ.Fo,{items:a,strategy:IZ.qw,id:r,children:t})};try{IW.displayName||(IW.displayName="ReorderableRowsContext")}catch{}var IG=r(46939);function IU(e){if(e===eA.LinkedPullRequests||e===eA.Reviewers||e===eA.Tracks||e===eA.TrackedBy||e===eA.Repository||e===eA.Title)return!0}async function IH(e){f8.increment();try{let t=aa("memex-item-update-bulk-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e}),a=0;if(r.memexProjectItems)for(let e of r.memexProjectItems)e.updatedAt&&(a=Math.max(a,new Date(e.updatedAt).getTime()));return f4.set(a),f8.decrement(),r}catch(e){throw f8.decrement(),e}}let Iq=(0,H.createContext)(null),IK=()=>(0,H.useContext)(Iq),IQ=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)([]),[a,n]=(0,H.useState)(-1),[i,l]=(0,H.useState)([]),[s,o]=(0,H.useState)([]),d=(0,H.useCallback)((e,r)=>{if(t.length>0&&r===a){let r=t.find(t=>Number(t.memexProjectItemId)===e);return r?.message}},[t,a]),u=(0,H.useCallback)((e,a,i)=>{o(e),l(a),n(i),t.length>0&&r([])},[o,l,n,t,r]),c=(0,H.useMemo)(()=>({setErrors:r,memexProjectColumnId:a,errorMessageFor:d,selectedItemIds:i,reverts:s,onPreparingToBulkUpdate:u}),[r,a,i,s,d,u]);return(0,O.jsx)(Iq.Provider,{value:c,children:e})});try{Iq.displayName||(Iq.displayName="BulkUpdateItemsContext")}catch{}try{IQ.displayName||(IQ.displayName="BulkUpdateItemsProvider")}catch{}let IX=()=>{let e=IK(),{setColumnValue:t}=hr(),{setItemData:r}=dA(),{findMemexItem:a}=hi(),{postStats:n}=os(),{findLoadedFieldIds:i}=f7(),l=i(),s=(0,b4.U)(async i=>{let s=[],o=[];for(let{itemId:e,updates:r}of i){let n=a(e);if(!n)continue;let i=[],l=[];for(let e of r){let r=d8(e),a=lH(e,n),s=d4(e);i.push(a),t(n,s),r&&l.push(r)}o.push({itemId:e,updates:i}),l.length&&s.push({id:n.id,memexProjectColumnValues:l})}try{f2();let t=s[0];(0,J.Z)(t,"need at least one project item update");let a=t.memexProjectColumnValues[0];(0,J.Z)(a,"need at least one column value");let i=a.memexProjectColumnId;e?.onPreparingToBulkUpdate(o,s.map(e=>e.id),i),n({name:"bulk_column_value_update",ui:"shortcut",context:s.length,memexProjectColumnId:i});let d=await IH({memexProjectItems:s,fieldIds:l});if("memexProjectItems"in d&&d.memexProjectItems)for(let e of d.memexProjectItems)r(e);return e&&"bulkUpdateErrors"in d&&d.bulkUpdateErrors&&e.setErrors(d.bulkUpdateErrors),o}catch(e){for(let{itemId:e,updates:r}of o){let n=a(e);if(n)for(let e of r)t(n,d4(e))}throw e}});return{bulkUpdateColumnValues:(0,H.useCallback)(async e=>{let t=await s(e);return async()=>{t!==b4.x&&await s(t)}},[s])}},IY=()=>{let{bulkUpdateColumnValues:e}=IX(),{addToast:t}=e9(),r=bF();return{bulkUpdateSingleColumnValue:async(a,n,i=1===a.length?rS.updateItem:rS.updateItems,l)=>{if(a.length>50){t({message:"Error updating items: Cannot update more than 50 items at once",type:"error"});return}try{void 0!==l&&vn(a,n,l);let t=a.map(e=>({itemId:e.id,updates:[n]})),s=await e(t);r?.registerAction({revert:s,description:i})}catch(e){if(e instanceof api_error_ApiError&&!e.message.includes("not valid JSON"))throw t({message:`Error updating items: ${e.message}`,type:"error"}),e;if(e instanceof api_error_ApiError&&e.status&&e.status>=500)t({message:"Something went wrong, please try again.",type:"error"});else if(e instanceof UpdateValidationError)t({message:e.message,type:"warning"});else throw e}},bulkUpdateMultipleColumnValues:async(a,n=1===a.length?rS.updateItem:rS.updateItems)=>{if(a.length>50){t({message:"Error updating items: Cannot update more than 50 items at once",type:"error"});return}try{let t=await e(a);r?.registerAction({revert:t,description:n})}catch(e){if(e instanceof api_error_ApiError&&!e.message.includes("not valid JSON"))throw t({message:`Error updating items: ${e.message}`,type:"error"}),e;if(e instanceof api_error_ApiError&&e.status&&e.status>=500)t({message:"Something went wrong, please try again.",type:"error"});else if(e instanceof UpdateValidationError)t({message:e.message,type:"warning"});else throw e}}}},IJ=()=>{let e=ID();return(0,H.useCallback)(()=>e.groupedRows?.flatMap(e=>e.isCollapsed?[]:e.subRows)??e.flatRows,[e])},I0={DESELECT_ALL_ROWS:"useDeselectAllRows.deselectAllRows"},I1=Object.values(I0),I2=e=>I1.includes(e.type),I5=()=>({type:I0.DESELECT_ALL_ROWS}),I3=e=>{e.stateReducers.push(I8)};I3.pluginName="useDeselectAllRows";let I4={},I8=(e,t)=>{let r;return I2(t)?t.type===I0.DESELECT_ALL_ROWS?(r={...e,selectedRowIds:I4},rt(e,r))?e:r:void 0:e},I6={EMPTY:{columnId:null,rowIds:new Set,rangeReferenceId:null,isMaximumExceeded:!1},isEqual:(e,t)=>e===t||e.columnId===t.columnId&&e.rangeReferenceId===t.rangeReferenceId&&function(e,t){if(e.size!==t.size)return!1;for(let r of e)if(!t.has(r))return!1;return!0}(e.rowIds,t.rowIds)},I7=(e,t)=>{let r=Math.min(e,t),a=Array.from({length:Math.abs(e-t)+1},(e,t)=>r+t);return e<=t?a:a.reverse()},I9=[],Se=(e,{columnId:t,affectedRowIds:r=I9,mode:a,keepRangeReference:n=!1})=>{let i;if(null===t)return I6.EMPTY;let l=e.columnId!==t?I6.EMPTY:e,s=Array.isArray(r)?r:r?.(l),o=n?e.rangeReferenceId:s.at(-1)??e.rangeReferenceId;switch(a){case"toggle":i=function(e,t){let r=new Set(e);for(let e of t)r.delete(e)||r.add(e);return r}(l.rowIds,new Set(s));break;case"replace":i=new Set(s);break;case"add":i=new Set([...l.rowIds,...s])}let d={columnId:t,rowIds:i,rangeReferenceId:o,isMaximumExceeded:i.size>50};return I6.isEqual(d,e)?e:d},St=(0,H.createContext)(I6.EMPTY),Sr=(0,H.createContext)(null),Sa=(0,H.createContext)(null),Sn=(0,H.memo)(function(e){let[t,r]=(0,H.useReducer)(Se,I6.EMPTY),a=ID(),n=(0,e5.Z)(iB().state.focus),i=(0,H.useCallback)(e=>a.flatRows.findIndex(t=>t.original.id===e),[a]),l=(0,H.useCallback)(e=>a.flatRows[e]?.original.id,[a]),s=(0,H.useCallback)(()=>{let e=n.current;return e&&iM(e)?a.rowsById[e.details.y]?.cells.find(t=>t.column?.id===e.details.x):void 0},[n,a]),o=(0,H.useCallback)((e,t,r)=>{let a=s(),n=i(r);return I7(null!==t?i(t):a?.column.id===e?i(a.row.original.id):n,n).map(e=>l(e)).filter(ro)},[i,l,s]),d=IJ(),u=(0,H.useCallback)(()=>d().map(e=>e.original.id),[d]),c=(0,H.useCallback)(e=>l(i(e)-1)??e,[i,l]),m=(0,H.useCallback)(e=>l(i(e)+1)??e,[i,l]),p=(0,H.useMemo)(()=>({select:(e,t)=>r({columnId:e.column.id,mode:t,affectedRowIds:({columnId:r})=>{let a=s();return("toggle"===t||"add"===t)&&null===r&&a?[a.row.original.id,e.row.original.id]:[e.row.original.id]}}),selectRange:(e,t)=>r({columnId:e.column.id,mode:t,affectedRowIds:({rangeReferenceId:t})=>o(e.column.id,t,e.row.original.id),keepRangeReference:!0}),clearSelection:()=>r({columnId:null,mode:"replace"}),expandSelectionUp:e=>r({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,c(e.row.original.id)]}),expandSelectionDown:e=>r({columnId:e.column.id,mode:"add",affectedRowIds:[e.row.original.id,m(e.row.original.id)]}),selectColumn:e=>r({affectedRowIds:u(),columnId:e,mode:"replace"})}),[o,c,m,u,s]),f=IR();return(0,H.useEffect)(()=>{t.rowIds.size>0&&f(I5())},[f,t]),(0,O.jsx)(Sr.Provider,{value:p,children:(0,O.jsx)(St.Provider,{value:t,children:(0,O.jsxs)(Sa.Provider,{value:t.rowIds.size>0,children:[e.children,(0,O.jsx)(mg.T,{"aria-live":"polite","aria-relevant":"additions removals",children:t.isMaximumExceeded&&rI.selectionMaximumExceeded(50)})]})})})}),Si=()=>(0,H.useContext)(St),Sl=()=>(0,H.useContext)(Sr),Ss=e=>{let t=Si();return!!e&&t.columnId===e.column.id&&t.rowIds.has(e.row.original.id)},So=()=>(0,H.useContext)(Sa),Sd=()=>{let{rowIds:e}=Si(),t=ID();return(0,H.useCallback)(()=>Array.from(e).map(e=>t.flatRows.find(t=>t.original.id===e)).filter(e=>void 0!==e&&e.original.contentType!==eL.RedactedItem),[e,t])},Su=()=>{let e=Si(),t=ID();return null!==e.columnId?t.visibleColumns.find(t=>t.id===e.columnId):null};try{St.displayName||(St.displayName="SelectionStateContext")}catch{}try{Sr.displayName||(Sr.displayName="SelectionMethodsContext")}catch{}try{Sa.displayName||(Sa.displayName="SelectionAreCellsBulkSelectedContext")}catch{}try{Sn.displayName||(Sn.displayName="TableCellBulkSelectionProvider")}catch{}try{Sn.displayName||(Sn.displayName="TableCellBulkSelectionProvider")}catch{}let Sc=()=>{let e=Si(),t=So(),r=Sd(),{bulkUpdateSingleColumnValue:a}=IY();return(0,H.useCallback)(async n=>{if(!t||!e.columnId)return;let i=r(),[l,...s]="as-selected"===n?i:i.sort((e,t)=>e.index-t.index),o=l?.cells.find(t=>t.column.id===e.columnId);if(!o)return;let d=function(e){try{let t=e.column.columnModel;return void 0!==t?lq(t.id,t.dataType,e.row.original):null}catch(e){return null}}(o);d&&a(s.map(e=>e.original),d,rS.fillCells,o.row.original.contentRepositoryId)},[a,r,t,e.columnId])},Sm=(0,H.createContext)({isDragging:!1}),Sp=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(!1),a=Sc(),n=(0,b4.U)(()=>{a("as-selected"),r(!1)});(0,H.useEffect)(()=>(t&&document.addEventListener("mouseup",n),()=>document.removeEventListener("mouseup",n)),[t,n]);let i=(0,H.useCallback)(()=>r(!0),[]);if(!Sl())throw Error("`TableDragToFillProvider` requires `TableCellBulkSelectionProvider` as an ancestor");return(0,O.jsx)(Sm.Provider,{value:(0,H.useMemo)(()=>({isDragging:t,onFillStart:i}),[t,i]),children:e})}),Sf=e=>{let{isDragging:t,onFillStart:r}=(0,H.useContext)(Sm),a=Si(),n=Array.from(a.rowIds),i=t&&a.columnId===e.column.id&&n[0]===e.row.original.id,l=t&&a.columnId===e.column.id&&n.at(-1)===e.row.original.id,s=(0,H.useCallback)(t=>{t.metaKey||t.ctrlKey||t.shiftKey||r?.(e.column.id,e.row.index)},[e,r]),o=Sg(e),d=(0,H.useCallback)(e=>{e.stopPropagation(),o()},[o]);return r?{isFillSourceCell:i,isFillLastCell:l,onFillHandleMousedown:s,onFillHandleDoubleClick:d}:null},Sh=(e,t)=>{let r=t.id;return!e.original.columns[r]},Sg=e=>{let t=ID(),r=Sl(),a=Sc(),n=(0,b4.U)(a);return(0,H.useCallback)(()=>{let a=e.row,i=e.column.columnModel;if(!r||!i||Sh(a,i))return;let l=t.flatRows,s=l.slice(a.index+1).findIndex(e=>e.original.contentType===eL.RedactedItem||!Sh(e,i)||a.groupedValue!==e.groupedValue),o=-1===s?l.length-1:s+a.index;if(o===a.index)return;let d=l[o]?.cells.find(t=>t.column.id===e.column.id);d&&(r.select(e,"replace"),r.selectRange(d,"replace"),setTimeout(()=>n("down")))},[r,e,n,t.flatRows])};try{Sm.displayName||(Sm.displayName="DragToFillContext")}catch{}try{Sp.displayName||(Sp.displayName="TableDragToFillProvider")}catch{}function Sy(e,t){return t&&iM(t)&&t.details.y===e.row.id&&t.details.x===e.column.id?{isFocused:!0,isEditing:!!t.details.meta.editing,isSuspended:!!t.details.meta.suspended,replaceContents:!!t.details.meta.replaceContents}:{isFocused:!1,isEditing:!1,isSuspended:!1,replaceContents:!1}}let Sx=(0,H.createContext)(null),Sb=()=>{let e=(0,H.useContext)(Sx);if(!e)throw Error("useVisibleFields must be used within a ViewProvider");return e},Sv=Symbol("clipboard-only_url_id"),Sw={dataType:Symbol("clipboard-only_url_data-type"),id:Sv,name:"URL"},Sj={UPDATE_CLIPBOARD:"UPDATE_CLIPBOARD",CLEAR_CLIPBOARD:"CLEAR_CLIPBOARD"},SC=(...e)=>new Blob(e,{type:al.HTML}),SI=(...e)=>new Blob(e,{type:al.Text}),SS=(...e)=>"undefined"==typeof ClipboardItem?null:new ClipboardItem(Object.fromEntries(e.map(e=>[e.type,e]))),Sk=e=>{if(1!==e.length)return;let t=e[0];if(t?.length===1)return t[0]},ST=e=>e?.html??u1(e?.text??""),SN=(e,t)=>{if(0===e.length)return;let r=Sk(e);if(r)return ST(r);let a=t?`
<thead><tr>${t.map(e=>`<th>${u1(e)}</th>`).join("")}</tr></thead>`:"",n=`<tbody>
${e.map(e=>`<tr>${e.map(e=>`<td>${ST(e)}</td>`).join("")}</tr>`).join("\n")}
</tbody>`;return`<table>${a}
${n}
</table>`},S_=e=>{let t=e.columns.Assignees||[];if(e.contentType!==eL.RedactedItem)return{text:t.map(e=>e.login).join(", "),dataType:eA.Assignees,value:t,repositoryId:e.contentRepositoryId}},SR=e=>{let t=e.getUrl();return{text:t,dataType:Sw.dataType,value:t}},SP=(e,t)=>{let r=e.columns[t],a=tH(r)||"",n=tU(r)||void 0;return{text:a,dataType:eA.Date,value:n}},SD=e=>{if(e.contentType!==eL.Issue)return;let t=e.columns[eM.IssueType];return{text:t?t.name:"",dataType:eA.IssueType,value:t,repositoryId:e.contentRepositoryId,html:t?u1(t.name):""}},SE=(e,t)=>{let r=e.columns[t.id],a=r?.id,n=t.allIterations.find(e=>e.id===a);return{text:n?.title||"",dataType:eA.Iteration,value:r,html:n?u1(n.titleHtml):""}},SA=e=>{if(e.contentType===eL.DraftIssue||e.contentType===eL.RedactedItem)return;let t=e.columns.Labels||[];return{text:t.map(e=>e.name).join(", "),dataType:eA.Labels,value:t,repositoryId:e.contentRepositoryId,html:t.map(e=>u1(e.nameHtml)).join(", ")}},SM=e=>{let t=e.columns["Linked pull requests"];if(t&&0!==t.length)return{text:t.map(e=>e.url).join(", "),dataType:eA.LinkedPullRequests,value:t,html:t.map(e=>`<a href="${e.url}">#${e.number}</a>`).join(", ")}},SL=e=>{if(e.contentType===eL.DraftIssue||e.contentType===eL.RedactedItem)return;let t=e.columns.Milestone;return{text:t?t.title:"",dataType:eA.Milestone,value:t,repositoryId:e.contentRepositoryId,html:t?`<a href="${t.url}">${u1(t.title)}</a>`:""}},SF=(e,t)=>{let r=t$(e.columns[t])||void 0;return{text:r?r.value.toString():"",dataType:eA.Number,value:r}},SZ=e=>{if(e.contentType!==eL.Issue)return;let t=e.columns["Parent issue"];return{text:t?.url||"",dataType:eA.ParentIssue,value:t,repositoryId:e.contentRepositoryId,html:t?`<a href="${t.url}">${u1(`${t.nwoReference}`)}</a>`:""}},SO=e=>{let t=e.columns.Repository;if(t)return{text:t.nameWithOwner,dataType:eA.Repository,value:t,html:`<a href="${t.url}">${u1(t.nameWithOwner)}</a>`}},SV=e=>{let t=e.columns.Reviewers;if(t&&0!==t.length)return{text:t.map(e=>e.reviewer.name).join(", "),dataType:eA.Reviewers,value:t||[]}},SB=(e,t)=>{let r=e.columns[t.id],a=r?.id,n=t.options.find(e=>e.id===a),i=tz(r)||void 0;return{text:n?.name||"",dataType:eA.SingleSelect,value:i,html:n?u1(n.nameHtml):void 0}},S$=e=>{let t=e.columns["Sub-issues progress"];if(!t)return;let r=`${t.completed} / ${t.total} (${t.percent_completed}%)`;return{text:r,dataType:eA.SubIssuesProgress,value:t,html:r}},Sz=(e,t)=>{let r=tB(e.columns[t])||void 0;return{text:r?.raw||"",dataType:eA.Text,value:r,html:r?u1(r.html):""}},SW=e=>{let t=e.columns[eM.Title];if(!t||t.contentType===eL.RedactedItem)return;let r=u1(t.value.title.html),a=e.getUrl(),n=a?`<a href="${a}">${r}</a>`:r;return{text:t.value.title.raw,dataType:eA.Title,value:{title:t.value.title},html:n}},SG=e=>{let t=e.columns["Tracked by"];if(t&&0!==t.length)return{text:t.map(e=>e.url).join(", "),dataType:eA.TrackedBy,value:t||[],html:t.map(e=>`<a href="${e.url}">${u1(iC(e))}</a>`).join(", ")}},SU=e=>{let t=e.columns.Tracks;if(t&&0!==t.total)return{text:rI.progressCount({percent:t5(t),total:t.total}),dataType:eA.Tracks,value:t}},SH=e=>{let{column:t,row:r}=e;switch(t.dataType){case eA.Title:return SW(r);case eA.Assignees:return S_(r);case eA.Labels:return SA(r);case eA.Milestone:return SL(r);case eA.ParentIssue:return SZ(r);case eA.Repository:return SO(r);case eA.SubIssuesProgress:return S$(r);case eA.Tracks:return SU(r);case eA.TrackedBy:return SG(r);case eA.IssueType:return SD(r);case eA.Text:return Sz(r,t.id);case eA.Number:return SF(r,t.id);case eA.Date:return SP(r,t.id);case eA.Iteration:return SE(r,t);case eA.SingleSelect:return SB(r,t);case eA.Reviewers:return SV(r);case eA.LinkedPullRequests:return SM(r);case Sw.dataType:return SR(r);default:ij(t)}},Sq=(e,t)=>{let r=function(e,t){let r;t.contentRepositoryId&&(r=t.contentRepositoryId);let a=function(e){switch(e.dataType){case eA.Assignees:return{id:eM.Assignees,dataType:e.dataType};case eA.Date:return{id:e.id,dataType:e.dataType};case eA.Iteration:{let t=nR(e);return{id:e.id,dataType:e.dataType,allIterations:t}}case eA.Labels:return{id:eM.Labels,dataType:e.dataType};case eA.LinkedPullRequests:return{id:eM.LinkedPullRequests,dataType:e.dataType};case eA.Milestone:return{id:eM.Milestone,dataType:e.dataType};case eA.Number:return{id:e.id,dataType:e.dataType};case eA.ParentIssue:return{id:eM.ParentIssue,dataType:e.dataType};case eA.Repository:return{id:eM.Repository,dataType:e.dataType};case eA.Reviewers:return{id:eM.Reviewers,dataType:e.dataType};case eA.SingleSelect:if(tW(e.id)||e.id===eM.Status){let t=e.settings.options||[];return{id:e.id,dataType:e.dataType,options:t}}return null;case eA.SubIssuesProgress:return{id:eM.SubIssuesProgress,dataType:e.dataType};case eA.Text:return{id:e.id,dataType:e.dataType};case eA.Title:return{id:eM.Title,dataType:e.dataType};case eA.Tracks:return{id:eM.Tracks,dataType:e.dataType};case eA.TrackedBy:return{id:eM.TrackedBy,dataType:e.dataType};case eA.IssueType:return{id:eM.IssueType,dataType:e.dataType};case Sw.dataType:return Sw;default:ij(e)}}(e);if(a)return{repositoryId:r,column:a,row:t}}(e,t);if(!r)return;let a=SH(r);if(a)return{...a,columnId:r.column.id,itemId:r.row.id}},SK=(e,t)=>e.filter(e=>e.contentType!==eL.RedactedItem).map(e=>t.map(t=>Sq(t,e))),SQ=async({items:e,clipboardDispatch:t,itemsToCsv:r,addToast:a,withHeaders:n,selectedFields:i})=>{let l=n?i.map(e=>e.name):void 0,s=SK(e,i),o=SN(s,l)??"",d=r(e,{withHeaders:n,selectedFields:i});try{await function(e,t=t3(e)){let r=SS(SC(e),SI(t));return r&&void 0!==navigator.clipboard?.write?navigator.clipboard.write([r]):function(e){if(void 0===navigator.clipboard?.writeText)throw Error("Copying is not supported in this browser");return navigator.clipboard.writeText(e)}(t)}(o,d),t({type:Sj.UPDATE_CLIPBOARD,state:s})}catch(e){a({message:"Could not copy items. Please check the page permissions and try again.",type:"error",keepAlive:!1})}},SX={type:"empty"},SY=()=>{let e=(0,H.createContext)({state:SX,clipboardDispatch:()=>void 0});return e.displayName="CopyPaste",e},SJ=(e="")=>e.includes("	")?`"${e.replaceAll('"','""')}"`:e,S0=(e,t)=>[...t?[t.map(e=>SJ(e)).join("	")]:[],...e.map(e=>e.map(e=>SJ(e?.text)).join("	"))].join("\n"),S1=({items:e,withHeaders:t,selectedFields:r})=>{let a=e.every(e=>"DraftIssue"===e.contentType)?r:r.flatMap(e=>e.id===eM.Title?[e,Sw]:[e]),n=t?a.map(e=>e.name):void 0;return S0(SK(e,a),n)},S2=({cell:e,clipboard:t})=>{if("empty"===t.type)return;let r=Sk(t.value);return r?.columnId?.toString()===e.column.id&&r.itemId===e.row.original.id};let PasteValidationFailure=class PasteValidationFailure extends Error{};let DataTypeMismatchFailure=class DataTypeMismatchFailure extends PasteValidationFailure{constructor(){super(rI.unableToPasteMismatchedDataTypes)}};let S5=e=>{if("string"==typeof e)return;if(e.dataType!==eA.Assignees)throw new DataTypeMismatchFailure;let t=e.value;return{dataType:eA.Assignees,value:t}},S3=(e,t)=>{if("string"!=typeof e){if(e.dataType===eA.Date){let r=e.value;return{dataType:eA.Date,memexProjectColumnId:t,value:r?{value:r.value}:void 0}}if(e?.value)throw new DataTypeMismatchFailure;return{dataType:eA.Date,memexProjectColumnId:t,value:void 0}}},S4=e=>{if("string"==typeof e)return;if(e.dataType!==eA.IssueType)throw new DataTypeMismatchFailure;let t=e.value;return{dataType:eA.IssueType,value:t}},S8=(e,t)=>{let r;if("string"!=typeof e){if(e.dataType===eA.Iteration&&e.columnId===t.id){let t=e.value;r=t?.id}else if(e.dataType===eA.Text){let a=e.value;if(!t)throw new DataTypeMismatchFailure;let n=a?.raw.trim().toLowerCase(),i=nR(t).find(e=>e.title.trim().toLowerCase()===n);if(!i&&a)throw new PasteValidationFailure(rI.iterationNotFound);r=i?.id}if(!r&&e.value)throw new DataTypeMismatchFailure;return{dataType:eA.Iteration,memexProjectColumnId:t.id,value:r?{id:r}:void 0}}},S6=e=>{if("string"==typeof e)return;if(e.dataType!==eA.Labels)throw new DataTypeMismatchFailure;let t=e.value;return{dataType:eA.Labels,value:t}},S7=e=>{if("string"==typeof e)return;if(e.dataType!==eA.Milestone)throw new DataTypeMismatchFailure;let t=e.value;return{dataType:eA.Milestone,value:t}},S9=(e,t)=>{let r;if("string"==typeof e){if(isNaN(r=parseFloat(e))&&e)return}else if(e.dataType===eA.Number){let t=e.value;r=t?.value}else if(e.dataType===eA.Text){if(isNaN(r=parseFloat(e.text))&&e.text)throw new DataTypeMismatchFailure}else if(isNaN(r=parseFloat(e.text))&&e.text)throw new DataTypeMismatchFailure;return{dataType:eA.Number,memexProjectColumnId:t,value:r?{value:r}:void 0}},ke=e=>{if("string"==typeof e)return;if(e.dataType!==eA.ParentIssue)throw new DataTypeMismatchFailure;let t=e.value;return{dataType:eA.ParentIssue,value:t}},kt=(e,t)=>{let r;if("string"!=typeof e){if(e.dataType===eA.SingleSelect&&e.columnId===t.id){let t=e.value;r=t?.id}else if(e.dataType===eA.Text){let a=e.value,n=t.settings.options,i=a?.raw.trim().toLowerCase(),l=n.find(e=>e.name.trim().toLowerCase()===i);r=l?.id}if(!r&&e.value)throw new DataTypeMismatchFailure;return{dataType:eA.SingleSelect,memexProjectColumnId:t.id,value:r?{id:r}:void 0}}},kr=(e,t)=>({dataType:eA.Text,memexProjectColumnId:t,value:"string"==typeof e?e:e.text}),ka=(e,t)=>{switch(t.dataType){case eA.Assignees:return S5(e);case eA.Date:return S3(e,t.id);case eA.Iteration:return S8(e,t);case eA.Labels:return S6(e);case eA.Milestone:return S7(e);case eA.IssueType:return S4(e);case eA.Number:return S9(e,t.id);case eA.SingleSelect:return kt(e,t);case eA.Text:return kr(e,t.id);case eA.ParentIssue:return ke(e)}},kn=async({cell:e,selectedItems:t,currentClipboard:r,clipboardDispatch:a,updateItems:n,addToast:i})=>{let l="";try{l=await navigator.clipboard.readText()}catch(e){}let s=r,o=!1;if("empty"===r.type&&(o=!!l),"populated"===r.type&&(o=!!l&&l!==S0(r.value)),o&&(s={type:"populated",value:[[{dataType:"text",text:l,value:{raw:l,html:l}}]]},a({type:Sj.CLEAR_CLIPBOARD})),"empty"===s.type)return;let d=0===t.length?[e.row.original]:t,u=Sk(s.value);if(!u)return;let c=u.dataType&&u.columnId?u:u.text,m=e.column.columnModel;if(!c||!m)return;let p="object"==typeof c&&"repositoryId"in c?c.repositoryId:void 0;try{let e=ka(c,m);e&&await n(d,e,rS.paste,p)}catch(e){if(e instanceof PasteValidationFailure)i({message:e.message,type:"warning"});else throw e}},ki=(e,t)=>{switch(t.type){case Sj.CLEAR_CLIPBOARD:return SX;case Sj.UPDATE_CLIPBOARD:return{type:"populated",value:t.state};default:return e}},kl=e=>(0,H.useReducer)(ki,e);try{(x=CopyPasteContext).displayName||(x.displayName="CopyPasteContext")}catch{}try{(b=CopyPasteProvider).displayName||(b.displayName="CopyPasteProvider")}catch{}let{CopyPasteProvider:ks,useCopyPaste:ko}=(()=>{let e=SY(),t=(0,H.memo)(function({children:t}){let[r,a]=kl(SX),n=(0,H.useMemo)(()=>({state:r,clipboardDispatch:a}),[r,a]);return(0,O.jsx)(e.Provider,{value:n,children:t})});return{CopyPasteContext:e,CopyPasteProvider:t,useCopyPaste:()=>{let{state:t,clipboardDispatch:r}=(0,H.useContext)(e),{visibleFields:a}=Sb(),{addToast:n}=e9(),i=(0,H.useCallback)(()=>{r({type:Sj.CLEAR_CLIPBOARD})},[r]),{bulkUpdateSingleColumnValue:l}=IY(),s=(0,H.useCallback)(async(e,a)=>{kn({cell:e,selectedItems:a,addToast:n,updateItems:l,currentClipboard:t,clipboardDispatch:r})},[n,l,t,r]),o=(0,H.useCallback)(e=>S2({cell:e,clipboard:t}),[t]),d=(0,H.useCallback)((e,{withHeaders:t=!1,selectedFields:r=a}={})=>S1({items:e,withHeaders:t,selectedFields:r}),[a]);return{paste:s,clearClipboard:i,isCellCopySource:o,copyItems:(0,H.useCallback)(async(e,{withHeaders:t=!1,selectedFields:i=a}={})=>{SQ({items:e,withHeaders:t,selectedFields:i,clipboardDispatch:r,addToast:n,itemsToCsv:d})},[a,d,r,n]),itemsToCsv:d}}}})();function kd(e){return`TableColumnHeader{id: ${e}}`}function ku(e){return`TableRow{index: ${e}}`}function kc(e,t){return`TableCellEditor{row: ${e}, column: ${t}}`}var km=r(73335);function kp(){let{openPane:e}=dK(),{items:t}=dP(),r=(0,H.useCallback)(r=>{if(!r)return;let a="getState"in r?void 0:new SubIssueSidePanelItem(r),n="getState"in r?r:t.find(e=>e.content.id===r.id);n?e(n):a&&e(a)},[t,e]);return(0,H.useMemo)(()=>({openParentIssue:r}),[r])}function kf(e){e.stopPropagation(),e.preventDefault()}function kh(e,t){t===mV.META_ARROW_LEFT||t===mV.META_ARROW_RIGHT||t===mV.ARROW_LEFT||t===mV.ARROW_RIGHT?e.stopPropagation():kf(e)}function kg(e,t){let r=function(e){let t=mz(e),r=null;switch(t){case mV.META_HOME:r=ir({y:io.First,x:io.First,focusType:is.Focus});break;case mV.SHIFT_ARROW_UP:case mV.SHIFT_ARROW_DOWN:break;case mV.ARROW_UP:r=ir({y:io.Previous,focusType:is.Focus});break;case mV.META_ARROW_UP:r=ir({y:io.First,focusType:is.Focus});break;case mV.ARROW_DOWN:r=ir({y:io.Next,focusType:is.Focus});break;case mV.META_ARROW_DOWN:r=ir({y:io.Last,focusType:is.Focus});break;case mV.ARROW_LEFT:r=ir({x:io.Previous,focusType:is.Focus});break;case mV.META_ARROW_LEFT:r=ir({x:io.First,focusType:is.Focus});break;case mV.ARROW_RIGHT:r=ir({x:io.Next,focusType:is.Focus});break;case mV.META_ARROW_RIGHT:r=ir({x:io.Last,focusType:is.Focus});break;case mV.META_END:r=ir({x:io.Last,y:io.Last,focusType:is.Focus})}return{keyAsShortcut:t,action:r}}(t);return r.action&&e(r.action),r}let ky={Up:"up",Down:"down"},kx=()=>{let e=Sl(),t=IR();return(0,H.useCallback)((r=!0)=>{r&&e?.clearSelection(),t(I5())},[e,t])},kb=e=>e.original.contentType!==eL.RedactedItem,kv=e=>void 0!==e&&e.isSelected&&kb(e),kw=(e,t,r)=>{let a=kv(e),n=!1,i=!1;if(a){let r=t.filter(e=>!e.isGrouped),a=r.findIndex(t=>t.id===e.id);n=kv(r[a-1]),i=kv(r[a+1])}let l=!1,s=!1;if(r&&a)for(let t of r){let r=t.subRows.findIndex(t=>t.id===e.id);if(0===r&&(l=!0),r===t.subRows.length-1&&(s=!0),l||s)break}return{beforeSelected:n,afterSelected:i,firstInGroup:l,lastInGroup:s}},kj=[];function kC(e,t=kj){let{navigationDispatch:r,stateRef:a}=i$(),{flatRows:n,selectedFlatRows:i}=ID(),[l,s]=(0,H.useState)(null),[o,d]=(0,H.useState)(null),u=Sl(),c=IR();(0,H.useEffect)(()=>{i.length>0&&u?.clearSelection()},[i,u]);let m=(0,H.useCallback)(t=>{let r=n.filter(e=>null!=e.toggleRowSelected),a=r.findIndex(e=>e.id===t),i=r.findIndex(t=>t.id===e.id),l=[];if(i<a?l=r.slice(i,a+1):i>a&&(l=r.slice(a,i+1)),l.length)for(let e of(c(I5()),l))e.toggleRowSelected(!0)},[n,e.id,c]),p=(0,H.useCallback)((e,t)=>{let r=i.filter(e=>!e.isGrouped);if(0===r.length)return;let a=n.filter(e=>!e.isGrouped),l=[],s=r[0],o=a.findIndex(e=>e.id===s.id),d=r[r.length-1],u=a.findIndex(e=>e.id===d.id),m=a.findIndex(e=>e.id===t.id);if(1===r.length)e===ky.Up?l=a.slice(o-1,o+1):e===ky.Down&&(l=a.slice(o,o+2));else if(m<u)e===ky.Up?l=a.slice(o,u):e===ky.Down&&(l=a.slice(o,u+2));else if(e===ky.Up){if(0===o)return;l=a.slice(o-1,m+1)}else e===ky.Down&&(l=a.slice(o+1,m+1));if(l.length)for(let e of(c(I5()),l))e.toggleRowSelected(!0)},[n,i,c]);return{onRowClick:(0,H.useCallback)(a=>{if(t.some(e=>e.current===a.target)){if(rc(a)){e.toggleRowSelected();let t=e.cells[1];t&&r(iO(e.id,t.column.id,!1))}else if(i.length&&a.shiftKey&&l?.focus?.type==="coordinate"){let{x:e,y:t}=l.focus.details;m(t),r(iO(t,e,!1))}else{c(I5()),e.toggleRowSelected(!0);let t=e.cells[1];t&&r(iO(e.id,t.column.id,!1))}}},[t,i.length,l?.focus?.type,l?.focus?.details,e,r,m,c]),onRowPointerDown:(0,H.useCallback)(()=>{if(a.current?.focus?.type==="coordinate"){s(a.current);let{y:e}=a.current.focus.details;d(n.findIndex(t=>t.id===e))}else d(n.findIndex(t=>t.id===e.id))},[n,a,e]),focusLastRowIndex:(0,H.useCallback)(e=>{if(null!==o&&o>-1){let t=new Set(e),a=n.filter(e=>!t.has(e.original.id)&&e.cells.length>1),i=a.length-1,l=a[o>i?i:o];if(l){let e=l.cells[1];e&&r(iO(l.id,e.column.id,!1))}else r(iL())}},[n,o,r]),expandRowSelectionInDirection:p}}let kI=(e,t,r,a=!1,n=!1,i=!1)=>{let l=(0,H.useRef)(null),s=(0,H.useRef)(null),{stateRef:o,navigationDispatch:d}=i$(),u=(0,H.useRef)(!1),{toggleAllRowsSelected:c,selectedFlatRows:m,flatRows:p}=ID(),{hasWritePermissions:f}=i4(),{copyItems:h,paste:g}=ko(),{expandRowSelectionInDirection:y}=kC(e.row),x=IR(),{openPane:b}=dK(),{openParentIssue:v}=kp(),{memex_new_issue_viewer:w,memex_issue_viewer_prefetch:j}=n9(),{toggleFilter:C}=dv(),I=Sl(),S=null!==I,k=S&&e.column.columnModel&&!IU(e.column.columnModel.dataType),T=So(),N=Su(),_=Sc(),{clearColumnValue:R}=function(){let{bulkUpdateSingleColumnValue:e}=IY(),{addToast:t}=e9();return{clearColumnValue:(0,H.useCallback)(async(r,a)=>{if(!r.columnModel){t({type:"error",message:"You cannot delete this"});return}let n=a.map(e=>e.original),{dataType:i}=r.columnModel,l=tZ(r.id);switch(i){case eA.Assignees:return e(n,{columnValue:{dataType:eA.Assignees,value:[]}}.columnValue,rS.delete);case eA.Labels:return e(n,{columnValue:{dataType:eA.Labels,value:[]}}.columnValue,rS.delete);case eA.Milestone:return e(n,{columnValue:{dataType:eA.Milestone,value:void 0}}.columnValue,rS.delete);case eA.IssueType:return e(n,{columnValue:{dataType:eA.IssueType,value:void 0}}.columnValue,rS.delete);case eA.ParentIssue:return e(n,{columnValue:{dataType:eA.ParentIssue,value:void 0}}.columnValue,rS.delete);case eA.Text:case eA.Number:case eA.Date:case eA.Iteration:if(tW(l))return e(n,{dataType:i,memexProjectColumnId:l,value:void 0},rS.delete);break;case eA.SingleSelect:if(l===eM.Status||tW(l))return e(n,{memexProjectColumnId:l,dataType:i,value:void 0},rS.delete);break;case eA.LinkedPullRequests:t({type:"error",message:"Linked pull requests cannot be deleted"});break;case eA.Title:case eA.Repository:case eA.Reviewers:case eA.Tracks:case eA.TrackedBy:case eA.SubIssuesProgress:t({type:"error",message:`${i.slice(0,1).toUpperCase()+i.slice(1)} cannot be deleted`});break;default:ij(i)}},[e,t])}}(),P=kx(),D=(0,H.useMemo)(()=>p.findIndex(t=>t.id===e.row.id),[e.row.id,p]),E=(0,H.useCallback)((e=[])=>{if(-1===D)return;let t=new Set(e),r=p.filter(e=>!t.has(e.original.id)),a=r.length-1,n=r[D>a?a:D];if(n){let e=n.cells[1];if(!e)return;d(iO(n.id,e.column.id,!1))}else d(iL())},[p,D,d]),A=(0,H.useCallback)((e=[])=>{E(e)},[E]),M=Sd(),L=(0,H.useCallback)(e=>{P(),A(e)},[A,P]),{openRemoveConfirmationDialog:F}=bU(void 0,L,E),{openArchiveConfirmationDialog:Z}=b$(void 0,L,E),O=(0,uN.useRelayEnvironment)(),V=(0,H.useCallback)(()=>{if(!function(e,t,r){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let a=e.focus.details;return a.y===t&&a.x===r}(o.current,e.row.id,e.column.id)&&(d(iO(e.row.id,e.column.id,!1)),j&&w&&e.row.original.contentType===eL.Issue&&e.column.id===eM.Title)){let t=e.row.original.getItemIdentifier();if(!t)return;let{number:r,owner:a,repo:n}=t;(0,km.f)(O,a,n,r)}},[o,e.row.id,e.row.original,e.column.id,d,j,w,O]),B=(0,H.useCallback)(t=>{if(e.column.nonNavigable||t.isPropagationStopped()||t.shiftKey)return;let r=t.target instanceof Node&&s.current?.contains(t.target),n=u.current||r;a&&n&&(u.current=!1,d(iO(e.row.id,e.column.id,a)),I?.clearSelection())},[e,a,d,I]),$=(0,H.useCallback)(r=>{if(!e.column.nonNavigable){if(S){if(r.shiftKey){I.selectRange(e,rc(r)?"add":"replace"),r.preventDefault();return}rc(r)?I.select(e,"toggle"):I.clearSelection()}t?t&&a&&(u.current=!0):u.current=!1,x(I5())}},[S,e,t,a,x,I]),z=m.filter(e=>kv(e)),W=(0,H.useCallback)(t=>{if(Im(e.column)||r)return;let n=mz(t);if(S&&(n===mV.ARROW_LEFT||n===mV.ARROW_RIGHT)&&I.clearSelection(),kg(d,t).action)x(I5()),kf(t);else{switch(n){case mV.ENTER:a&&(d(ir({focusType:is.Edit})),kf(t));return;case mV.HOME:d(ir({x:io.First,focusType:is.Focus})),x(I5()),kf(t);return;case mV.SHIFT_SPACE:f&&(kf(t),e.row.toggleRowSelected(!0));return;case mV.SPACE:"Title"===e.column.id&&(b(e.row.original),kf(t)),e.column.columnModel?.dataType===eA.ParentIssue&&(v(e.row.original.getParentIssue()),kf(t)),e.column.columnModel?.dataType===eA.SubIssuesProgress&&(C("parent-issue",e.row.original.getNameWithOwnerReference()),kf(t));return;case mV.META_ENTER:S&&(I.select(e,"toggle"),kf(t));return;case mV.SHIFT_ENTER:S&&(I.selectRange(e,"replace"),kf(t));return;case mV.META_SHIFT_ENTER:S&&(I.selectRange(e,"add"),kf(t));return;case mV.SHIFT_ARROW_UP:m.length>0?(y(ky.Up,e.row),kf(t)):S&&(I.expandSelectionUp(e),d(ir({y:io.Previous,focusType:is.Focus})),kf(t));return;case mV.SHIFT_ARROW_DOWN:m.length>0?(y(ky.Down,e.row),kf(t)):S&&(I.expandSelectionDown(e),d(ir({y:io.Next,focusType:is.Focus})),kf(t));return;case mV.END:d(ir({x:io.Last,focusType:is.Focus})),x(I5()),kf(t);return;case mV.META_C:if(e.row.original.contentType!==eL.RedactedItem){if(z.length>0)h(z.map(e=>e.original),{withHeaders:m.length===p.length});else{let t=M().map(e=>e.original);t.length&&N?.columnModel?h(t,{selectedFields:[N.columnModel]}):e.column.columnModel&&h([e.row.original],{selectedFields:[e.column.columnModel]})}t.preventDefault()}return;case mV.META_V:f&&e.row.original.contentType!==eL.RedactedItem&&(g(e,M().sort((e,t)=>e.index-t.index).map(e=>e.original)),t.preventDefault());return;case mV.META_A:m.length===p.length?x(I5()):m.length>0?c(!0):0===m.length&&e.row.toggleRowSelected(!0),kf(t);return;case mV.DELETE:case mV.BACKSPACE:if(f&&z.length>0)kf(t),F(z.map(e=>e.original.id),a5);else if(a){let r=M();0===r.length&&r.push(e.row),R(e.column,r),kf(t)}return;case mV.META_D:k&&f&&T&&(kf(t),_("down"));return;case mV.ARCHIVE:if(z.length&&f&&z.every(e=>bR(e.original.contentType))){kf(t),Z(z.map(e=>e.original.id),a5);return}}if(t.key.match(/^\S$/)&&!function(e){return e.altKey||e.ctrlKey||e.metaKey}(t)&&"/"!==t.key){let r=!1!==e.column.typeToEditEnabled;a&&r&&d(iO(e.row.id,e.column.id,!0,!1,!0,t.key)),kf(t);return}}},[e,r,S,d,I,x,a,f,b,m,y,N,h,p.length,M,g,c,z,F,R,k,T,_,Z,v,C]),G=(0,H.useCallback)(t=>{if(1!==t.buttons||!I||e.column.nonNavigable)return;let r=o.current?.focus,a=r&&iM(r)&&!r.details.meta.suspended?r.details.x:null;e.column.id===a&&I.selectRange(e,rc(t)?"add":"replace")},[I,e,o]);return{wrapperProps:(0,H.useMemo)(()=>({ref:l,onKeyDown:W,onClick:B,onMouseDown:$,onFocus:V,onMouseEnter:G,tabIndex:e.column.nonNavigable?void 0:0}),[W,B,$,V,G,e.column.nonNavigable]),contentsProps:(0,H.useMemo)(()=>r?{replaceContents:i,isDisabled:n}:{dropdownRef:s,isDisabled:n},[r,s,i,n])}};function kS({row:e,column:t,...r}){let a=(0,H.useMemo)(()=>({column:t,row:e}),[t,e]),{state:{focus:n}}=iB(),{isFocused:i,isEditing:l,isSuspended:s,replaceContents:o}=Sy(a,n);return(0,O.jsx)(kk,{...r,cell:a,isFocused:i,isEditing:l,isSuspended:s,replaceContents:o})}let kk=(0,H.memo)(function({focusCellElement:e,isDragging:t,styles:r,children:a,getCellProps:n,render:i,cell:l,className:s,sx:o,isFocused:d,isEditing:u,isSuspended:c,replaceContents:m}){var p,f;let{isReadonly:h,hasWritePermissions:g}=i4(),y=So(),x=Si(),b=Sl(),{columnModel:v}=l.column,w=v?v.id:l.column.id,{validationMessage:j,validationMessageId:C}=Ix(l.row.id,w),I=Sf(l),S=(0,H.useMemo)(()=>l.column.columnModel&&function(e,t){if(t===eA.LinkedPullRequests||t===eA.Reviewers||t===eA.Tracks||t===eA.TrackedBy||t===eA.SubIssuesProgress||t===eA.IssueType&&e===eL.PullRequest||t===eA.ParentIssue&&(e===eL.DraftIssue||e===eL.PullRequest))return!1;switch(e){case eL.RedactedItem:return!1;case eL.DraftIssue:return!0;case eL.Issue:case eL.PullRequest:return t!==eA.Repository}}(l.row.original.contentType,l.column.columnModel.dataType)&&g,[l.column.columnModel,l.row.original.contentType,g]),k=(0,H.useMemo)(()=>h&&l.column.id===eM.Title?l.row.original.contentType===eL.RedactedItem:!S,[l.column.id,l.row.original.contentType,S,h]),T=(0,H.useMemo)(()=>l.column.columnModel&&IU(l.column.columnModel.dataType),[l.column.columnModel]),{wrapperProps:N,contentsProps:_}=kI(l,d,u,S,k,m),R=Ss(l),P=d&&u&&!!j,{isCellCopySource:D}=ko();(0,uG.b)(()=>{let t=N.ref.current;t&&d&&!u&&!u&&e(t,l.column.id,{isSuspended:c})},[u,N.ref,e,c,l.column.id,d]);let E=Im(l.column),A=(0,IL.W)({hoverable:!t,"is-focused":d&&!E,"is-selected":R,"is-disabled-selected":R&&(k||T||x.isMaximumExceeded),"is-copy-source":I?.isFillSourceCell||D(l),"is-editing":u,"is-invalid":P,draggable:E,"is-dragging":t,"cursor-not-allowed":!h&&!S,"is-first-row":0===l.row.index},s),M=l.column.id===Ic?1:"unset",L=n({style:(0,H.useMemo)(()=>({flexGrow:M,overflowX:E?"visible":"unset",whiteSpace:"nowrap",minWidth:l.column.width,...r}),[l.column.width,M,E,r]),className:A,role:"gridcell"});return(0,O.jsxs)(kT,{"aria-selected":R&&!k,...N,...L,...(0,ef.f)((p=l.row.index,f=l.column.columnModel?.name||l.column.id,`TableCell{row: ${p}, column: ${f}}`)),sx:o,"data-test-cell-is-focused":d||void 0,"data-test-cell-is-editing":u||void 0,"data-test-cell-is-suspended":c||void 0,children:[i(u?"CellEditor":"Cell",_),C&&(0,O.jsx)(IG.v,{id:C,message:j}),a,I&&(d&&null!==b&&!T&&!k&&!y||I.isFillLastCell)&&(0,O.jsx)(kN,{onMouseDown:I.onFillHandleMousedown,onDoubleClick:I.onFillHandleDoubleClick})]})});kS.displayName="TableCell";let kT=Y.ZP.div.withConfig({displayName:"table-cell__StyledTableCell",componentId:"sc-ef6323f3-0"})(["scroll-margin-top:35px;scroll-margin-bottom:64px;cursor:default;border-left:1px solid ",";border-bottom:1px solid ",";outline:none;&:first-of-type{border-left:0;}&:nth-of-type(2){border-left:0;}&:last-child{border-right:0;}.row-highlight &.hoverable:hover{background-color:unset;}&.is-selected{position:relative;overflow-x:visible !important;overflow-y:visible;background-color:",";::before{content:'';position:absolute;width:calc(100%);height:calc(100%);border:1px solid ",";left:-1px;top:-1px;z-index:0;pointer-events:none;}}&.is-focused,&.is-copy-source{position:relative;overflow-x:visible !important;overflow-y:visible;::before{content:'';position:absolute;width:calc(100% - 2px);height:calc(100% - 2px);border-radius:2px;left:-1px;top:-1px;z-index:0;pointer-events:none;border-width:2px;border-color:",";}}&.is-focused::before{border-style:solid;box-shadow:inset -3px 0 0 0 ",",inset 0 -3px 0 0 ",",inset 3px 0 0 0 ",",inset 0 3px 0 0 ",",",";}&.is-copy-source::before{border-style:dotted;}&.is-copy-source.is-focused::before{border-style:dashed;}&.is-focused.is-first-row{::before{top:0px;height:calc(100% - 3px);}}&.is-focused.is-editing{background-color:",";::before{box-shadow:inset -3px 0 0 0 ",",inset 0 -3px 0 0 ",",inset 3px 0 0 0 ",",inset 0 3px 0 0 ",",",";}::after{display:none;}}&.is-focused.is-invalid{::before{border-color:",";}}&.is-focused.cursor-not-allowed::before{border-color:",";box-shadow:none;}&.cursor-not-allowed{cursor:not-allowed;}&.is-disabled-selected{::before{border-color:",";}}&.draggable{cursor:grab;user-select:none;}&.draggable:active,&.is-dragging{cursor:grabbing;user-select:none;}.reveal-link-icon{visibility:hidden;}&:hover .reveal-link-icon{visibility:visible;}",""],(0,U.U2)("colors.border.muted"),(0,U.U2)("colors.border.muted"),(0,U.U2)("colors.accent.subtle"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("shadows.shadow.medium"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.canvas.default"),(0,U.U2)("shadows.shadow.medium"),(0,U.U2)("colors.danger.fg"),(0,U.U2)("colors.fg.subtle"),(0,U.U2)("colors.fg.subtle"),eV.Z),kN=(0,H.memo)(({onMouseDown:e,onDoubleClick:t})=>(0,O.jsx)(eO.Z,{"aria-hidden":!0,onMouseDown:e,onDoubleClick:t,onClick:e=>e.stopPropagation(),sx:{position:"absolute",bg:"accent.emphasis",cursor:"crosshair",border:"1px solid",borderColor:"fg.onEmphasis",borderRadius:"2px",boxSizing:"border-box",height:"12px",width:"12px",bottom:"-6px",right:"-6px",boxShadow:"shadow.medium",zIndex:2},...(0,ef.f)("table-cell-fill-handle")}));kN.displayName="FillerHandle";try{kk.displayName||(kk.displayName="InnerTableCell")}catch{}let k_=Y.ZP.div.withConfig({displayName:"table-row__StyledTableRow",componentId:"sc-d2185a97-0"})(["display:flex;background-color:",";&.row-highlight{position:relative;background-color:",";box-shadow:0 0 0 1px ",";> *{border-bottom:transparent;}}&.row-selected{position:relative;background-color:",";&.selection-top-edge{box-shadow:0 -1px 0 0 ",";&.selection-bottom-edge{box-shadow:0 0 0 1px ",";}}&.selection-bottom-edge{box-shadow:0 1px 0 0 ",";}}&.hoverable:not(.is-focused):hover{background-color:",";.table-row-dropdown-caret{opacity:1;}}&.hoverable:hover .menu-trigger,&.hoverable:focus .menu-trigger{opacity:1;}",""],(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.accent.subtle"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.subtle"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.canvas.subtle"),eV.Z),kR=(0,H.createContext)({rowNumber:0}),kP={height:"37px",width:"100%",flexShrink:0},kD=(0,H.memo)(e=>{let{flatRows:t,groupedRows:r}=ID(),a=IP();e.data.prepareRow(e.row);let{setNodeRef:n,setActivatorNodeRef:i,listeners:l,isSorting:s,isDragging:o,isDropped:d}=Iz(e.row),u=!!a?.[e.row.id]&&kb(e.row),{beforeSelected:c,afterSelected:m,firstInGroup:p,lastInGroup:f}=kw(e.row,t,r),h=(0,IL.W)({hoverable:!s,"row-selected":u,"row-highlight":o||d,"selection-top-edge":u&&(!c||p),"selection-bottom-edge":u&&(!m||f)}),g=(0,H.useMemo)(()=>({rowNumber:e.index+1,setSortActivatorNodeRef:i,sortListeners:l}),[e.index,i,l]);return(0,O.jsx)(kR.Provider,{value:g,children:(0,O.jsx)(k_,{...e.row.getRowProps({className:h}),...(0,ef.f)(ku(e.row.index)),style:kP,"data-test-row-is-selected":u,"data-hovercard-subject-tag":i7(e.row.original),ref:n,children:e.row.cells.map(t=>(0,O.jsx)(kS,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,focusCellElement:e.data.focusCellElement,isDragging:s},t.column.id))})})});kD.displayName="TableRow";try{kR.displayName||(kR.displayName="RowContext")}catch{}let kE={SET_ROW_MENU_OPEN:"useRowMenuShortcut.setRowMenuOpen"},kA=Object.values(kE),kM=e=>kA.includes(e.type),kL=e=>({type:kE.SET_ROW_MENU_OPEN,origin:e}),kF=e=>{e.stateReducers.push(kZ)};kF.pluginName="useRowMenuShortcut";let kZ=(e,t)=>{let r;return kM(t)?t.type===kE.SET_ROW_MENU_OPEN?(r={...e,rowMenuShortcutOrigin:t.origin},rt(e,r))?e:r:void 0:e},kO={position:"relative",overflow:"visible",userSelect:"none",WebkitUserSelect:"none"},kV=e=>{for(let t of e)t.isSelected||t.toggleRowSelected()},kB=e=>{for(let t of e)t.isSelected&&t.toggleRowSelected()},k$={position:"absolute",right:"30px",left:"5px",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,width:"18px",height:"18px","&:focus":{opacity:1}},kz={width:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"fg.muted",paddingLeft:3};function kW({column:e,row:t}){let r=IR(),{selectedFlatRows:a}=ID(),{navigationDispatch:n}=i$(),i=(0,H.useContext)(II)??void 0,{postStats:l}=os(),{contentType:s}=t.original,{rowNumber:o,setSortActivatorNodeRef:d,sortListeners:u}=(0,H.useContext)(kR),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(!1),h=(0,H.useRef)(null),g=(0,H.useRef)(!1),{hasWritePermissions:y}=i4(),x=(0,H.useRef)(null),b=(0,H.useRef)(null),{onRowClick:v,onRowPointerDown:w,focusLastRowIndex:j}=kC(t,(0,H.useMemo)(()=>[x,b],[x,b])),C=(0,H.useMemo)(()=>a.filter(e=>kv(e)),[a]),I=(0,H.useCallback)(()=>{i&&n(ia(i)),r(kL())},[i,r,n]),S=(0,H.useCallback)(()=>{(0,uU.flushSync)(()=>{n(iV()),m(!0)})},[n]),k=(0,H.useCallback)(()=>{g.current||I(),m(!1)},[g,I,m]),T=(0,H.useCallback)(e=>e?S():k(),[S,k]),N=(0,H.useCallback)(()=>{g.current=!0,-1!==C.findIndex(e=>e.id===t.id)?kV(C):(kB(C),kV([t]))},[t,C]),_=(0,H.useCallback)(()=>{g.current=!1,k(),h.current?.focus()},[k]),R=(0,H.useCallback)(e=>{g.current=!1,I(),r(I5()),j(e)},[I,r,j]);(0,H.useEffect)(()=>{i?.details.y===t.id&&s!==eL.RedactedItem&&T(!0)},[t.id,T,i?.details.y,s]);let{openRemoveConfirmationDialog:P}=bU(N,R,_),{openArchiveConfirmationDialog:D}=b$(N,R,_),E=(0,H.useCallback)(()=>{P([t.original.id],a2)},[P,t.original.id]),A=(0,H.useCallback)(()=>{D([t.original.id],a2)},[D,t.original.id]),M=(0,H.useCallback)(()=>{D(C.map(e=>e.original.id),a2)},[D,C]),L=(0,H.useCallback)(()=>{P(C.map(e=>e.original.id),a2)},[P,C]),F=kv(t)&&C.length>1,Z=C.every(e=>bR(e.original.contentType))&&bR(s)&&y,V=(0,H.useCallback)(()=>{l({name:aD,ui:"row-dragger-menu",memexProjectItemId:t.original.id})},[l,t]),B=(0,H.useMemo)(()=>s!==eL.RedactedItem&&y?{draggable:!0,style:kO,onClick:v,ref:e=>{d?.(e),x.current=e},onPointerDown:e=>{w(),u?.onPointerDown?.(e)}}:{style:{...kO,cursor:"default"},title:"Reordering this item is disabled",onClick:v,onPointerDown:void 0,ref:x},[s,y,v,d,w,u]);return Im(e)?(0,O.jsxs)(IM,{...B,sx:{pr:1},...(0,ef.f)("row-dragger"),children:[(0,O.jsx)(eO.Z,{ref:b,sx:kz,children:o}),y&&s!==eL.RedactedItem&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(fj.P,{open:c,onOpenChange:T,anchorRef:h,children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{ref:h,icon:eF.TriangleDownIcon,"aria-label":"Row actions",className:"menu-trigger",tabIndex:-1,block:!0,sx:k$,...(0,ef.f)("row-menu-trigger")})}),(0,O.jsx)(fj.P.Overlay,{...(0,ef.f)("row-menu"),children:(0,O.jsxs)(mx.S,{children:[F||s!==eL.DraftIssue?null:(0,O.jsxs)(mx.S.Item,{onSelect:()=>f(!0),...(0,ef.f)("row-menu-convert-to-issue"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.IssueOpenedIcon,{})}),"Convert to issue"]}),Z?(0,O.jsx)(O.Fragment,{children:F?(0,O.jsxs)(mx.S.Item,{onSelect:M,...(0,ef.f)("row-menu-archive-multiple"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),"Archive ",C.length," items",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(Ih,{})})]}):(0,O.jsxs)(mx.S.Item,{onSelect:A,...(0,ef.f)("row-menu-archive"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),"Archive",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(Ih,{})})]})}):null,F?(0,O.jsxs)(mx.S.Item,{variant:"danger",onSelect:L,...(0,ef.f)("row-menu-delete-multiple"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete ",C.length," selected items from project",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(If,{})})]}):(0,O.jsxs)(mx.S.Item,{variant:"danger",onSelect:E,...(0,ef.f)("row-menu-delete"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete from project",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(If,{})})]})]})})]}),(0,O.jsx)(w0,{anchorRef:x,isOpen:p,item:t.original,onOpenChange:e=>f(e),onSuccess:V,...(0,ef.f)("row-menu-repo-picker")})]})]}):null}let kG=(0,H.memo)(kW);try{kW.displayName||(kW.displayName="RowDragger")}catch{}let kU={Header:"",id:Iu,width:60,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Cell:e=>(0,O.jsx)(kG,{column:e.column,row:e.row}),CellEditor:e=>(0,O.jsx)(kG,{column:e.column,row:e.row})};function kH(e){return[kU,...e]}let kq=e=>{e.columns.unshift(kH)};function kK(){let{getRoadmapSettingsOrDefaults:e}=function(){let{allColumnsRef:e}=cE(),t=e.current.find(e=>e.dataType===eA.Title),r=(0,H.useCallback)(()=>{let[t,r]=e.current.reduce((e,t)=>(nK(t)?e[0].push(t.databaseId):nH(t)&&e[1].push(t.databaseId),e),[[],[]]);return t?.length?C8(t):r?.length?[r[0]??fH,r[0]??fH]:C8([])},[e]),a=(0,H.useCallback)((e,a)=>{let n=t&&CJ(fW.Roadmap,e)[t.databaseId],i=t?{[t.databaseId]:n??350}:{},l={...e.roadmap?.columnWidths??{},...i};return a?{columnWidths:l}:e.roadmap?.dateFields||e.roadmap?.zoomLevel?{...e.roadmap,columnWidths:l}:{dateFields:r(),zoomLevel:C4(e),columnWidths:l}},[r,t]);return(0,H.useMemo)(()=>({getRoadmapSettingsOrDefaults:a}),[a])}(),{getTableSettingsOrDefaults:t}=function(){let e=(0,H.useCallback)(e=>({columnWidths:e.table?.columnWidths??{}}),[]);return(0,H.useMemo)(()=>({getTableSettingsOrDefaults:e}),[e])}(),r=(0,H.useCallback)((r,a=!1)=>({...r,roadmap:e(r,a),table:t(r)}),[e,t]),a=(0,H.useCallback)((e,t)=>{let a=t.localViewState.layout;if(a===e||a!==fW.Roadmap&&e!==fW.Roadmap)return;let n=a===fW.Roadmap&&!C5(t.serverViewState.layoutSettings.roadmap)&&C5(t.localViewState.layoutSettings.roadmap);return r(t.localViewState.layoutSettings,n)},[r]);return(0,H.useMemo)(()=>({getNextLayoutSettings:a,getLayoutSettingsWithDefaults:r}),[a,r])}kq.pluginName="useRowDragHandle";let kQ=()=>{let{findColumn:e}=gt(),{currentView:t,viewStateDispatch:r}=oi(),{getLayoutSettingsWithDefaults:a}=kK(),n=jC(),i=(0,H.useCallback)(r=>{let n=e(r);if(n){let e=t?.localViewState&&a(t?.localViewState.layoutSettings);if(e){let r=CJ(t.localViewState.layout,e),a=r?.[n.databaseId.toString()];if(a)return a}}return n?.settings.width??void 0},[e,a,t]);return{updateWidth:(0,H.useCallback)(async(a,l)=>{let s=Math.round(l),o=e(a);if(!o||i(a)===s)return;let d=t?.number;if(!d)return;let u=f0(t.localViewState.layout);if(!CX(u))return;let{layout:c}=t.localViewState,m=CJ(c,t.localViewState.layoutSettings),p={...m,[o.databaseId.toString()]:s},f=C0(t.serverViewState,c,p);r({type:dy.SetColumnWidths,viewType:u,viewNumber:d,columnWidths:p}),f2(),await n.perform({viewNumber:t.number,view:hp(f,fU)}),"failed"===n.status.current.status&&r({type:dy.SetColumnWidths,viewType:u,viewNumber:d,columnWidths:m})},[i,e,t,n,r]),getWidth:i}},kX=(0,Cz.Z)("localStorage"),kY=(0,H.createContext)(null),kJ={roadmapTruncateTitles:"Truncate titles",roadmapShowDateFields:"Show date fields"};function k0(e,t,r){let a=kX.getItem(`projects.${e}`),[n,i]=(0,H.useReducer)(k1,t,()=>void 0!==r?r:a?"true"===a:t),{postStats:l}=os(),s=(0,H.useCallback)(()=>{i({type:"toggle",name:e}),l({name:"user_settings_edit",context:JSON.stringify({name:e,enabled:!n})})},[n,e,l]),o=kJ[e];return(0,H.useMemo)(()=>({name:e,enabled:n,toggleEnabled:s,label:o}),[e,n,s,o])}function k1(e,t){if("toggle"===t.type)return kX.setItem(`projects.${t.name}`,String(!e)),!e;throw Error(`Unknown action type: ${t.type}`)}function k2({children:e}){let t=k0("roadmapTruncateTitles",!1),r=k0("roadmapShowDateFields",!1);return(0,O.jsx)(kY.Provider,{value:(0,H.useMemo)(()=>({roadmapTruncateTitles:t,roadmapShowDateFields:r}),[r,t]),children:e})}let k5=()=>{let e=(0,H.useContext)(kY);return(0,J.Z)(null!==e,"useUserSettings must be used within a UserSettingsProvider"),e};try{kY.displayName||(kY.displayName="UserSettingsContext")}catch{}try{k2.displayName||(k2.displayName="UserSettingsProvider")}catch{}let k3=[],k4=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),{allColumns:a}=df(),n=(0,H.useCallback)((e,t)=>{r({type:dy.SetRoadmapDateFields,viewNumber:e,dateFields:t})},[r]),i=(0,H.useCallback)((e,t)=>{r({type:dy.ToggleRoadmapMarkerFields,viewNumber:e,field:t})},[r]),l=(0,H.useMemo)(()=>t?.localViewState?.layout===fW.Roadmap&&t.localViewStateDeserialized.layoutSettings?.roadmap?.dateFields?.length?C8(t.localViewStateDeserialized.layoutSettings.roadmap.dateFields):C8([]),[t]),s=(0,H.useMemo)(()=>l.length>0&&t?.serverViewState.layoutSettings.roadmap===void 0,[t?.serverViewState.layoutSettings.roadmap,l.length]),[o,d]=(0,H.useState)({}),u=(0,H.useMemo)(()=>o[t?.id??0]??!1,[t?.id,o]),c=(0,H.useCallback)(()=>{t?.id&&!u&&d({...o,[t.id]:!0})},[t?.id,u,o]),m=(0,H.useMemo)(()=>t?.localViewState?.layout!==fW.Roadmap?new Map:a.reduce((e,t)=>{if(nH(t)){let r=nR(t).reduce((e,t)=>{let{id:r,startDate:a,duration:n}=t,i=nT({startDate:a,duration:n}),l={...t,start:i.startDate,end:i.endDate};return e.set(r,l),e},new Map);e.set(t.id,r)}return e},new Map),[a,t]),p=(0,H.useCallback)((e,t)=>{let r=l[t];if(!r||"none"===r)return{date:void 0,iteration:void 0};let a=e[r.id];if(!a)return{date:void 0,iteration:void 0};if(nK(r))return{date:tU(a)?.value,iteration:void 0};if(nH(r)&&"id"in a){let e=m.get(r.id);if(e){let r=e.get(a.id);if(r)return{date:0===t?r.start:r.end,iteration:r}}}return{date:void 0,iteration:void 0}},[l,m]),f=(0,H.useCallback)(e=>{if(!l.length)return{start:void 0,end:void 0};let t=p(e,0),r=p(e,1);return{start:t.date,startIteration:t.iteration,end:r.date,endIteration:r.iteration}},[p,l]),h=(0,H.useMemo)(()=>C4(t?.localViewState?.layoutSettings),[t]),g=(0,H.useCallback)((e,t)=>{r({type:dy.SetRoadmapZoomLevel,viewNumber:e,zoomLevel:t})},[r]),{getWidth:y,updateWidth:x}=kQ(),{hasWritePermissions:b}=i4(),v=t&&CY(t.localViewState.layout),w=a.find(e=>e.dataType===eA.Title)?.id,[j,C]=(0,H.useState)(new Map),I=(0,H.useCallback)(e=>{t&&b&&C(r=>new Map(r).set(t.number,e))},[t,b]),{roadmapShowDateFields:S}=k5(),k=S.enabled,T=l[0]!==fH,N=l[1]!==fH,_=k&&(T||N)?T&&N&&l[0]!==l[1]?2:1:0,R=(t?.number&&j.get(t.number))??(w&&v?y(w):void 0)??650,P=120*_+60,D=(0,H.useCallback)(e=>{if(!w)throw Error("Title column not found");if(b)return I(null),x(w,e)},[b,w,I,x]),E=t?.localViewStateDeserialized?.layoutSettings.roadmap?.markerFields??k3;return(0,O.jsx)(Io.Provider,{value:g,children:(0,O.jsx)(Il.Provider,{value:h,children:(0,O.jsx)(Ir.Provider,{value:R+P,children:(0,O.jsx)(In.Provider,{value:P,children:(0,O.jsx)(C7.Provider,{value:(0,H.useMemo)(()=>({dateFields:l,markerFields:E,areDateFieldsDefault:s,setDateFields:n,toggleMarkerField:i,isRoadmapMarkerFieldsDirty:t?.isRoadmapMarkerFieldsDirty??!1,isRoadmapDateFieldsDirty:t?.isRoadmapDateFieldsDirty??!1,isRoadmapZoomLevelDirty:t?.isRoadmapZoomLevelDirty??!1,getTimeSpanFromColumnData:f,titleColumnWidth:R,updateTitleColumnWidth:D,updateLocalTitleColumnWidth:I,showDateFields:k}),[l,E,s,n,i,t?.isRoadmapMarkerFieldsDirty,t?.isRoadmapDateFieldsDirty,t?.isRoadmapZoomLevelDirty,f,R,D,I,k]),children:(0,O.jsx)(C9.Provider,{value:(0,H.useMemo)(()=>({isDateFieldsPopoverDisabled:u,disableDateFieldsPopover:c}),[u,c]),children:e})})})})})})});try{k4.displayName||(k4.displayName="RoadmapSettingsProvider")}catch{}let k8=[eA.Assignees,eA.Date,eA.Labels,eA.Iteration,eA.LinkedPullRequests,eA.Milestone,eA.Number,eA.SingleSelect,eA.Text,eA.Title,eA.Labels,eA.Repository,eA.Reviewers,eA.IssueType,eA.ParentIssue,eA.SubIssuesProgress];function k6(e){return k8.includes(e)}let k7=[eA.Assignees,eA.Date,eA.Iteration,eA.Labels,eA.LinkedPullRequests,eA.Milestone,eA.Number,eA.SingleSelect,eA.Text,eA.Title,eA.Repository,eA.Reviewers,eA.IssueType,eA.ParentIssue],k9=[eA.Assignees,eA.Date,eA.Iteration,eA.Milestone,eA.Number,eA.SingleSelect,eA.Text,eA.Repository,eA.IssueType,eA.ParentIssue];function Te(e){return k9.includes(e)}let Tt=[eA.Assignees,eA.Date,eA.IssueType,eA.Iteration,eA.Labels,eA.Milestone,eA.Number,eA.SingleSelect,eA.Text,eA.Repository,eA.ParentIssue];function Tr(e){return Tt.includes(e)}let Ta=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),a=jC(),{memex_table_without_limits:n}=n9(),i=t?.localViewStateDeserialized.sliceBy?.field??null;n&&!(i&&Tr(i.dataType))&&(i=null);let l=(0,H.useCallback)((e,t)=>{r({type:dy.SetSliceValue,value:t,viewNumber:e})},[r]),s=(0,H.useCallback)((e,t)=>{r({type:dy.SetSliceValue,value:"",viewNumber:e}),r({type:dy.SetSliceBy,column:t,viewNumber:e})},[r]),o=(0,H.useCallback)(e=>{r({type:dy.SetSliceValue,value:"",viewNumber:e}),r({type:dy.ClearSliceBy,viewNumber:e})},[r]),d=(0,H.useCallback)(async e=>{let n=t?.number;if(!n)return;r({type:dy.SetSliceByPanelWidth,viewNumber:n,panelWidth:e});let i=t.serverViewState.sliceBy||{},l={...t.serverViewState,sliceBy:{...i,panelWidth:e}};await a.perform({viewNumber:n,view:hp(l,fU)}),"failed"===a.status.current.status&&r({type:dy.SetSliceByPanelWidth,viewNumber:n,panelWidth:i.panelWidth})},[t,a,r]);return(0,O.jsx)(ot.Provider,{value:(0,H.useMemo)(()=>({sliceField:i,setSliceField:s,clearSliceField:o,isSliceByDirty:t?.isSliceByDirty??!1,sliceValue:t?.localViewStateDeserialized.sliceValue??null,setSliceValue:l,sliceByPanelWidth:t?.localViewState.sliceBy?.panelWidth,setSliceByPanelWidth:d}),[i,s,o,t?.isSliceByDirty,t?.localViewStateDeserialized.sliceValue,t?.localViewState.sliceBy?.panelWidth,l,d]),children:e})});try{Ta.displayName||(Ta.displayName="SliceByProvider")}catch{}let Tn=e=>{switch(e){case"asc":return"desc";case"desc":return null;case null:return"asc"}},Ti=e=>{switch(e){case 0:return"primary";case 1:return"secondary";default:return`no. ${e+1}`}},Tl=[],Ts=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),a=t?.number,n=t?.localViewStateDeserialized.sortByColumnsAndDirections??Tl,i=(0,H.useCallback)((...e)=>{void 0!==a&&r({type:dy.SetSortedBy,sorts:e,viewNumber:a})},[a,r]),l=(0,H.useCallback)((e=0)=>{void 0!==a&&r({type:dy.SetSortedBy,sorts:n.slice(0,e),viewNumber:a})},[a,r,n]),s=(0,H.useCallback)(e=>n.find(t=>t.column.id===e.id),[n]),o=(0,H.useCallback)((e,t)=>{let r=n.findIndex(t=>t.column.id===e.id);if(null===t&&r>-1){let e=[...n];e.splice(r,1),i(...e)}else if(null==t)return;else if(r>-1){let a=[...n];a.splice(r,1,{column:e,direction:t}),i(...a)}else{let r=[...n];null!=t&&(r=r.slice(0,1)).push({column:e,direction:t}),i(...r)}},[i,n]),d=(0,H.useCallback)((e,t)=>{let r=n.findIndex(t=>t.column.id===e.id);if(null!=t){if(r>0)i({column:e,direction:t});else{let r=[...n];r.splice(0,1,{column:e,direction:t}),i(...r)}}},[i,n]);return(0,O.jsx)(dT.Provider,{value:(0,H.useMemo)(()=>({sorts:n,isSorted:n.length>0,setSortedBy:i,clearSortedBy:l,isSortedByDirty:t?.isSortedByDirty??!1,setColumnSort:o,setPrimarySortPreservingSecondary:d,getColumnSort:s}),[l,t?.isSortedByDirty,s,o,d,i,n]),children:e})});try{Ts.displayName||(Ts.displayName="SortedByProvider")}catch{}let To=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),a=(0,H.useCallback)((e,t)=>{r({type:dy.SetVerticalGroupedBy,viewNumber:e,column:t})},[r]);return(0,O.jsx)(dS.Provider,{value:(0,H.useMemo)(()=>({groupedByColumnId:t?.localViewStateDeserialized.verticalGroupByColumns[0]?.id,groupedByColumn:t?.localViewStateDeserialized.verticalGroupByColumns[0],setGroupedBy:a,isGroupedByDirty:t?.isVerticalGroupedByDirty??!1}),[t?.isVerticalGroupedByDirty,t?.localViewStateDeserialized.verticalGroupByColumns,a]),children:e})});try{To.displayName||(To.displayName="VerticalGroupedByProvider")}catch{}async function Td(e){let t=new URL(aa("memex-columns-get-api-data").url,window.location.origin);for(let r of e.memexProjectColumnIds)t.searchParams.append("columnIds[]",`${r}`);let{data:r}=await ad(t);return r}let Tu=()=>{let{loadedFieldIdsRef:e}=cE();return{hasColumnData:(0,H.useCallback)(t=>e.current.has(t),[e])}},Tc=[eM.Repository],Tm=[eM.Title,eM.Assignees,eM.Status,...Tc],Tp=[...Tc],Tf=[];function Th(){let{findMissingColumnIds:e}=Tx(),{loadColumnsWithItemColumnValues:t}=Tb(),[r,a]=(0,H.useState)(Tf),n=(0,H.useCallback)(t=>{let r=e(t);a(e=>0===r.filter(t=>!e.includes(t)).length?e:[...new Set([...e,...r])])},[e]),{perform:i}=d1({request:(0,H.useCallback)(async e=>{await t(e),a(Tf)},[t])});return(0,H.useEffect)(()=>{r.length>0?i(r):a(Tf)},[r,e,i]),{missingFieldIds:r,addPotentiallyMissingFieldIds:n}}function Tg(){let{findFilterableFieldByName:e}=ms();return{getFieldIdsFromFilter:(0,H.useCallback)(function(t){let r=new Set,{fieldFilters:a}=oB(t),n=t=>{let a=e(t);a&&r.add(a.id)};for(let e of a){let t=e[0],r=e[1];if(oz(t)&&(t=t.slice(1)),o$(t))for(let e of r)n(e);else n(t)}return r},[e])}}let Ty=e=>{let{findMissingColumnIds:t}=Tx(),{getFieldIdsFromFilter:r}=Tg(),{missingFieldIds:a,addPotentiallyMissingFieldIds:n}=Th();return(0,H.useEffect)(()=>{e&&n(t(function(e,t){let{localViewStateDeserialized:{visibleFields:r,viewType:a,filter:n,verticalGroupByColumns:i,horizontalGroupByColumns:l,aggregationSettings:s,sortByColumnsAndDirections:o,sliceBy:d}}=e,u=new Set(r.map(e=>e.id).concat(a!==fQ.Table?Tm:Tp));for(let e of i)e.id!==eM.Status&&u.add(e.id);for(let e of l)u.add(e.id);for(let e of s.sum)u.add(e.id);for(let e of o)u.add(e.column.id);d.field?.id&&(u.add(d.field.id),d.field.id===eM.TrackedBy&&u.add(eM.Tracks));let c=d.filter?t(d.filter):[];return Array.from(new Set([...u,...t(n),...c]))}(e,r)))},[n,e,t,r]),a},Tx=()=>{let{hasColumnData:e}=Tu();return{findMissingColumnIds:(0,H.useCallback)(t=>[...new Set(t).add(eM.Status)].filter(t=>!e(t)),[e])}},Tb=()=>{let{updateAllColumnValues:e}=w_(),{addToast:t}=e9();return{loadColumnsWithItemColumnValues:(0,H.useCallback)(async r=>{if(0===r.length)return;let a=[];await Promise.allSettled(r.map(async t=>{for(let r of(await Td({memexProjectColumnIds:[t]})).memexProjectColumns){e(r);let t=r.partialFailures;t&&a.push(t.message)}})),a&&a.length>0&&t({message:a.join(", "),type:e$.warning,keepAlive:!0})},[t,e])}};function Tv(e,t,r=""){if(!e)throw Error("Must provide a view to get a url for");let a=new URLSearchParams(r);if(e.isViewTypeDirty?a.set(lr,e.localViewStateDeserialized.viewType):a.delete(lr),e.isFilterDirty?a.set(lt,e.localViewStateDeserialized.filter):a.delete(lt),a.delete(le),a.delete(i9),e.isSortedByDirty){let t=e.localViewStateDeserialized.sortByColumnsAndDirections;if(t.length>0)for(let{column:e,direction:r}of t)a.append(le,r),a.append(i9,`${e.id}`);else a.set(le,""),a.set(i9,"")}if(e.isHorizontalGroupedByDirty){let[t]=e.localViewStateDeserialized.horizontalGroupByColumns;t?a.set(la,`${t.id}`):a.set(la,"")}else a.delete(la);if(e.isVerticalGroupedByDirty){let[t]=e.localViewStateDeserialized.verticalGroupByColumns;t?a.set(ln,`${t.id}`):a.set(ln,"")}else a.delete(ln);if(e.isVisibleFieldsDirty){let t=e.localViewStateDeserialized.visibleFields;t.length>0?a.set(li,JSON.stringify(t.map(e=>e.id))):a.set(li,"")}else a.delete(li);if(e.isAggregationSettingsDirty){let{sum:t,hideItemsCount:r}=e.localViewStateDeserialized.aggregationSettings;t.length>0?a.set(ls,JSON.stringify(t.map(e=>e.id))):a.set(ls,""),a.set(ll,JSON.stringify(!!r))}else a.delete(ls),a.delete(ll);if(e.isSliceByDirty){let t=e.localViewStateDeserialized.sliceBy;t.field?a.set(lo,`${t.field.id}`):a.set(lo,"")}else a.delete(lo);if(e.localViewStateDeserialized.sliceValue){let t=`${e.localViewStateDeserialized.sliceValue}`;a.set(ld,t)}else a.delete(ld);return{pathname:ev.generatePath({...t,viewNumber:e.localViewStateDeserialized.number}),search:a.toString()}}function Tw(e,t){return e.length!==t.length||JSON.stringify(e)!==JSON.stringify(t)}function Tj({serverViewState:e,localViewState:t}){var r,a;let n=e.layout!==t.layout,i=Tw(e.groupBy,t.groupBy),l=Tw(e.verticalGroupBy||[],t.verticalGroupBy||[]),s=e.sortBy.length!==t.sortBy.length||JSON.stringify(e.sortBy)!==JSON.stringify(t.sortBy),o=e.filter?.trim()!==t.filter?.trim(),d=Tw(e.visibleFields,t.visibleFields),u=!!t.aggregationSettings?.hideItemsCount,c=!!e.aggregationSettings?.hideItemsCount!==u||Tw(t.aggregationSettings?.sum||[],e.aggregationSettings?.sum||[]),m=Tw(C8(t.layoutSettings?.roadmap?.dateFields??[]),C8(e.layoutSettings?.roadmap?.dateFields??[])),p=(r=t.layoutSettings?.roadmap?.markerFields??[],a=e.layoutSettings?.roadmap?.markerFields??[],r.length!==a.length||JSON.stringify(r.slice().sort())!==JSON.stringify(a.slice().sort())),f=(t.layoutSettings?.roadmap?.zoomLevel||fq.Month)!==(e.layoutSettings?.roadmap?.zoomLevel||fq.Month),h=t.sliceBy?.field!==e.sliceBy?.field,g=t.sliceBy?.filter!==e.sliceBy?.filter;return{isViewTypeDirty:n,isHorizontalGroupedByDirty:i,isVerticalGroupedByDirty:l,isSortedByDirty:s,isFilterDirty:o,isVisibleFieldsDirty:d,isAggregationSettingsDirty:c,isRoadmapDateFieldsDirty:m,isRoadmapZoomLevelDirty:f,isRoadmapMarkerFieldsDirty:p,isSliceByDirty:h,isSliceByFilterDirty:g,isViewStateDirty:o||i||l||s||n||d||c||m||f||p||h||g}}var TC=r(72552);let TI=(0,Cz.Z)("sessionStorage"),TS=Symbol("effects"),Tk=(e,t)=>(r,a)=>{let{[TS]:n,...i}=r,l=e(i,a);return{...l,[TS]:n.concat([()=>t(l,r,a)])}},TT=e=>{let t=e[TS];(0,H.useEffect)(()=>{if(!t)return;let e=[];for(;t.length>0;){let r=t.shift();if(r&&"function"==typeof r){let t=r();t&&"function"==typeof t&&e.push(t)}}return()=>{for(let t of e)t&&t()}},[t])};function TN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function T_(e){if(!TR(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!(TR(r)&&Object.prototype.hasOwnProperty.call(r,"isPrototypeOf"))}function TR(e){return"[object Object]"===Object.prototype.toString.call(e)}let TP=(e,t)=>{if(t.type===dy.RemoveField){let r=new Set(e);return r.has(t.column.databaseId)?(r.delete(t.column.databaseId),Array.from(r)):e}return e},TD=(e,t)=>{switch(t.type){case dy.RemoveField:case dy.HideField:if(-1===e.findIndex(([e])=>e!==t.column.databaseId))return e;return e.filter(([e])=>e!==t.column.databaseId);default:return e}},TE=(e,t)=>{switch(t.type){case dy.ShowField:{let r=new Set(e);if(r.has(t.column.databaseId))return e;return r.add(t.column.databaseId),Array.from(r)}case dy.RemoveField:case dy.HideField:{let r=new Set(e);if(!r.has(t.column.databaseId))return e;return r.delete(t.column.databaseId),Array.from(r)}case dy.MoveField:{let r=e.findIndex(e=>e===t.column.databaseId);if(r===t.newPosition)return e;let a=[...e];return -1!==r&&a.splice(r,1),a.splice(t.newPosition,0,t.column.databaseId),a}case dy.AddField:{let r=new Set(e);if(r.has(t.column.databaseId))return e;return r.add(t.column.databaseId),Array.from(r)}default:return e}},TA=(e,t,r)=>{let a=new Set(e);return a.has(r)?(a.delete(r),Array.from(a)):e},TM=(e,t)=>{switch(t.type){case dy.ToggleItemsCount:return{...e,hideItemsCount:!e?.hideItemsCount};case dy.RemoveField:{if(!e)return e;let{hideItemsCount:r,...a}=e;for(let e of Object.keys(a))a[e]=TA(a[e]??[],e,t.column.databaseId);return{hideItemsCount:r,...a}}case dy.RemoveFieldAggregation:{let r=e?.[t.fieldOperation]??[];return{...e,[t.fieldOperation]:TA(r,t.fieldOperation,t.column.databaseId)}}case dy.AddFieldAggregation:{let r=new Set(e?.[t.fieldOperation]??[]);if(r.has(t.column.databaseId))return e;return r.add(t.column.databaseId),{...e,[t.fieldOperation]:Array.from(r)}}default:return e}},TL=(e,t)=>t.type===dy.UpdateBoardColumnLimit?e?.columnLimits?.[t.columnDatabaseId]?.[t.optionId]===t.limit?e:{...e,columnLimits:{...e?.columnLimits,[t.columnDatabaseId]:{...e?.columnLimits?.[t.columnDatabaseId],[t.optionId]:t.limit}}}:e,TF=(e,t)=>{switch(t.type){case dy.ToggleRoadmapMarkerFields:{let r=new Set(e.roadmap?.markerFields),a=new Set(r);if(a.has(t.field.databaseId)?a.delete(t.field.databaseId):a.add(t.field.databaseId),a.size===r.size)return e;return{...e,roadmap:{...e.roadmap,markerFields:[...a]}}}case dy.SetRoadmapDateFields:return{...e,roadmap:{...e.roadmap,dateFields:t.dateFields.map(e=>"none"===e?"none":e.databaseId)}};case dy.SetRoadmapZoomLevel:return{...e,roadmap:{...e.roadmap,zoomLevel:t.zoomLevel}};case dy.UpdateBoardColumnLimit:if(TL(e.board,t)===e.board)return e;return{...e,board:TL(e.board,t)};case dy.SetColumnWidths:return{...e,[t.viewType]:{...e[t.viewType],columnWidths:{...t.columnWidths}}};default:return e}},TZ=(e,t)=>{switch(t.type){case dy.SetFilter:if(e.filter===t.filter)return e;return{...e,filter:t.filter};case dy.SetHorizontalGroupedBy:{let r=[t.column.databaseId];if((0,mt.Z)(r,e.groupBy))return e;return{...e,groupBy:r}}case dy.SetVerticalGroupedBy:{let r=[t.column.databaseId];if((0,mt.Z)(r,e.verticalGroupBy))return e;return{...e,verticalGroupBy:r}}case dy.SetSortedBy:if((0,mt.Z)(t.sorts,e.sortBy))return e;return{...e,sortBy:t.sorts.map(({column:e,direction:t})=>[e.databaseId,t])};case dy.ClearHorizontalGroupedBy:if(0===e.groupBy.length)return e;return{...e,groupBy:[]};case dy.SetSliceBy:return{...e,sliceBy:{field:t.column.databaseId,filter:"",panelWidth:e.sliceBy?.panelWidth}};case dy.ClearSliceBy:if(!e.sliceBy?.field&&!e.sliceBy?.filter)return e;return{...e,sliceBy:{}};case dy.SetSliceValue:return{...e,sliceValue:t.value};case dy.SetSliceByFilter:return{...e,sliceBy:{...e.sliceBy,filter:t.filter??""}};case dy.SetSliceByPanelWidth:return{...e,sliceBy:{...e.sliceBy,panelWidth:t.panelWidth}};case dy.SetViewType:return{...e,layout:f1(t.viewType),layoutSettings:{...t.layoutSettings?t.layoutSettings:e.layoutSettings}};case dy.ShowField:return{...e,visibleFields:TE(e.visibleFields,t)};case dy.HideField:{let r=new Set(e.visibleFields);if(!r.has(t.column.databaseId))return e;return r.delete(t.column.databaseId),{...e,visibleFields:TE(e.visibleFields,t),groupBy:TP(e.groupBy,t),sortBy:TD(e.sortBy,t)}}case dy.ToggleField:if(new Set(e.visibleFields).has(t.column.databaseId))return TZ(e,{type:dy.HideField,column:t.column,viewNumber:t.viewNumber});return TZ(e,{type:dy.ShowField,column:t.column,viewNumber:t.viewNumber,position:t.position});case dy.MoveField:return{...e,visibleFields:TE(e.visibleFields,t)};case dy.SaveViewName:if(e.name===t.name)return e;return{...e,name:t.name};case dy.AddField:return{...e,visibleFields:TE(e.visibleFields,t)};case dy.RemoveField:return{...e,visibleFields:TE(e.visibleFields,t),groupBy:TP(e.groupBy,t),sortBy:TD(e.sortBy,t)};case dy.UpdateView:{let r={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??fG()};if((0,mt.Z)(r,e))return e;return r}case dy.ToggleItemsCount:case dy.AddFieldAggregation:case dy.RemoveFieldAggregation:{let r=TM(e.aggregationSettings,t);if((0,mt.Z)(r,e.aggregationSettings))return e;return{...e,aggregationSettings:TM(e.aggregationSettings,t)}}case dy.UpdateBoardColumnLimit:case dy.SetColumnWidths:case dy.ToggleRoadmapMarkerFields:case dy.SetRoadmapDateFields:case dy.SetRoadmapZoomLevel:{let r=TF(e.layoutSettings,t);if((0,mt.Z)(r,e.layoutSettings))return e;return{...e,layoutSettings:r}}default:return e}},TO=(e,t)=>{switch(t.type){case dy.MoveField:case dy.ToggleField:case dy.HideField:case dy.ShowField:case dy.SetViewType:case dy.SetSortedBy:case dy.SetHorizontalGroupedBy:case dy.ClearHorizontalGroupedBy:case dy.SetVerticalGroupedBy:case dy.SetFilter:case dy.ToggleItemsCount:case dy.AddFieldAggregation:case dy.RemoveFieldAggregation:case dy.SetRoadmapDateFields:case dy.ToggleRoadmapMarkerFields:case dy.SetRoadmapZoomLevel:case dy.SetSliceBy:case dy.ClearSliceBy:case dy.SetSliceValue:case dy.SetSliceByFilter:case dy.SetSliceByPanelWidth:case dy.SetColumnWidths:{let r=TZ(e.localViewState,t);if((0,mt.Z)(r,e.localViewState))return e;return{...e,localViewState:r}}case dy.UpdateBoardColumnLimit:return{...e,localViewState:TZ(e.localViewState,t),serverViewState:TZ(e.serverViewState,t)};case dy.ResetViewState:{let t={id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:e.serverViewState,localViewState:e.serverViewState};if(e.localViewState.sliceBy?.field&&e.localViewState.sliceBy.field===e.serverViewState.sliceBy?.field&&(t.localViewState.sliceValue=e.localViewState.sliceValue),(0,mt.Z)(t,e))return e;return t}case dy.RemoveField:case dy.UpdateView:case dy.AddField:return{id:e.serverViewState.id,name:e.serverViewState.name,number:e.serverViewState.number,serverViewState:TZ(e.serverViewState,t),localViewState:TZ(e.localViewState,t)};case dy.SaveViewName:return{id:e.serverViewState.id,name:t.name,number:e.serverViewState.number,serverViewState:TZ(e.serverViewState,t),localViewState:TZ(e.localViewState,t)};case dy.SetLocalViewState:if((0,mt.Z)(t.localViewState,e.localViewState))return e;return{...e,localViewState:t.localViewState};default:return e}},TV=(e,t)=>{switch(t.type){case dy.SetViewServerStates:{let r=Object.fromEntries(t.viewStates.map(t=>{let r;let a={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings??fG()},n=e[t.number];if(!n||(0,mt.Z)(hp(n.localViewState,[fK]),hp(n.serverViewState,[fK])))r=a,n?.localViewState.sliceBy?.field&&n.localViewState.sliceBy.field===r.sliceBy?.field&&(r.sliceValue=n.localViewState.sliceValue);else{let{layout:e}=a;if(n.localViewState.layout===e&&CY(e)){let t=CJ(e,a.layoutSettings);r=Object.keys(t).length>0?C0(n.localViewState,e,t):n.localViewState}else r=n.localViewState;let t=n.localViewState.sliceBy?.field;t&&t===a.sliceBy?.field&&r.sliceBy&&a.sliceBy.panelWidth&&(r.sliceBy.panelWidth=a.sliceBy.panelWidth)}return[t.number,{id:t.id,number:t.number,name:t.name,localViewState:r,serverViewState:a}]}));for(let t of Object.values(e))r[t.number]||(r[t.number]={...t,isDeleted:!0});return r}case dy.UpdateView:{let r=e[t.view.number];if(!r)return e;return{...e,[t.view.number]:TO(r,t)}}case dy.AddField:case dy.SaveViewName:case dy.MoveField:case dy.ToggleField:case dy.HideField:case dy.ShowField:case dy.SetViewType:case dy.SetSortedBy:case dy.SetHorizontalGroupedBy:case dy.ClearHorizontalGroupedBy:case dy.SetVerticalGroupedBy:case dy.SetFilter:case dy.ResetViewState:case dy.ToggleItemsCount:case dy.AddFieldAggregation:case dy.RemoveFieldAggregation:case dy.SetRoadmapDateFields:case dy.ToggleRoadmapMarkerFields:case dy.SetRoadmapZoomLevel:case dy.SetSliceBy:case dy.ClearSliceBy:case dy.SetSliceValue:case dy.SetSliceByFilter:case dy.SetSliceByPanelWidth:case dy.SetColumnWidths:case dy.UpdateBoardColumnLimit:{let r=e[t.viewNumber];if(!r)return e;let a=TO(r,t);if((0,mt.Z)(a,r))return e;return{...e,[t.viewNumber]:a}}case dy.AddView:{let r={...t.view,filter:t.view.filter??"",aggregationSettings:t.view.aggregationSettings??fG()};return{...e,[t.view.number]:{id:r.id,name:r.name,number:r.number,serverViewState:r,localViewState:r}}}case dy.RemoveField:return Object.entries(e).reduce((e,[r,a])=>(e[Number(r)]=TO(a,t),e),{});case dy.DeleteView:{let{[t.viewNumber]:r,...a}=e;return a}case dy.SetLocalViewState:{let r=e[t.viewNumber];if(!r)return e;let a=TO(r,t);if((0,mt.Z)(a,r))return e;return{...e,[t.viewNumber]:a}}case dy.SetViews:return t.views;default:return e}},TB=(e,t)=>{switch(t.type){case dy.AddView:return{...e,views:TV(e.views,t),currentViewNumber:t.view.number,viewsOrder:[...e.viewsOrder||[],t.view.number]};case dy.SetViewServerStates:{let r=TV(e.views,t);return{...e,views:r,viewsOrder:t.viewStates.map(e=>e.number)}}case dy.SetLocalViewState:case dy.RemoveField:case dy.UpdateView:case dy.AddField:case dy.SaveViewName:case dy.MoveField:case dy.ToggleField:case dy.HideField:case dy.ShowField:case dy.SetViewType:case dy.SetHorizontalGroupedBy:case dy.SetVerticalGroupedBy:case dy.SetSortedBy:case dy.ClearHorizontalGroupedBy:case dy.SetFilter:case dy.ResetViewState:case dy.ToggleItemsCount:case dy.AddFieldAggregation:case dy.RemoveFieldAggregation:case dy.SetRoadmapDateFields:case dy.ToggleRoadmapMarkerFields:case dy.SetRoadmapZoomLevel:case dy.SetSliceBy:case dy.ClearSliceBy:case dy.SetSliceValue:case dy.SetSliceByFilter:case dy.SetSliceByPanelWidth:case dy.SetColumnWidths:case dy.UpdateBoardColumnLimit:{let r=e.currentViewNumber;return"currentViewNumber"in t&&void 0!==t.currentViewNumber&&(r=t.currentViewNumber),{...e,views:TV(e.views,t),currentViewNumber:r}}case dy.SetState:return{...e,...t.state};case dy.DeleteView:{let r;let a=Object.keys(e.views).map(e=>parseInt(e,10)).indexOf(t.viewNumber),n=TV(e.views,t),i=Object.keys(n).map(e=>parseInt(e,10));return r=i.length>a?a:a-1,{...e,views:n,currentViewNumber:i[r],viewsOrder:(e.viewsOrder??[]).filter(e=>e!==t.viewNumber)}}case dy.SetViews:return{...e,views:TV(e.views,t),currentViewNumber:t.currentViewNumber??e.currentViewNumber};case dy.GoToViewNumber:return{...e,currentViewNumber:t.viewNumber};case dy.ReorderView:{let r=(e.viewsOrder??[]).filter(e=>e!==t.viewNumber);if(!t.prevViewNumber)return{...e,viewsOrder:[...r,t.viewNumber]};let a=r.indexOf(t.prevViewNumber);return{...e,viewsOrder:[...r.slice(0,a),t.viewNumber,...r.slice(a)]}}default:ij(t)}},T$=(e,t)=>(function e(t,r){if(t===r)return t;let a=TN(t)&&TN(r);if(a||T_(t)&&T_(r)){let n=a?t.length:Object.keys(t).length,i=a?r:Object.keys(r),l=i.length,s=a?[]:{},o=0;for(let n=0;n<l;n++){let l=a?n:i[n];s[l]=e(t[l],r[l]),s[l]===t[l]&&o++}return n===l&&o===n?t:s}return r})(e,TB(e,t)),Tz=Symbol("historyAction"),TW=()=>{let{findColumn:e}=gt(),t=function(){let{findColumnByDatabaseId:e}=cA(),{findColumn:t}=gt();return(0,H.useCallback)(function(r){let a;let n=rs(r.groupBy.map(t=>e(t))),i=rs((r.verticalGroupBy||[]).map(t=>e(t)));if(0===i.length){let e=t("Status");e&&i.push(e)}let l=rs(r.sortBy.map(([t,r])=>{let a=e(t);if(a&&r)return{column:a,direction:r}})),s=r.sliceBy?.field?{field:e(r.sliceBy.field),filter:r.sliceBy.filter??""}:{field:void 0,filter:""};{let t=new Set(rs(r.visibleFields.map(t=>e(t))));for(let e of l)t.add(e.column);a=Array.from(t)}let o=new Set(rs((r.aggregationSettings?.sum??[]).map(t=>e(t))));return{id:r.id,number:r.number,name:r.name,filter:r.filter??"",viewType:f0(r.layout),horizontalGroupByColumns:n,verticalGroupByColumns:i,sortByColumnsAndDirections:l,visibleFields:a,createdAt:r.createdAt,updatedAt:r.updatedAt,aggregationSettings:{hideItemsCount:r.aggregationSettings?.hideItemsCount??!1,sum:Array.from(o)},layoutSettings:{...r.layoutSettings,roadmap:r.layoutSettings.roadmap?{...r.layoutSettings.roadmap,markerFields:rs((r.layoutSettings.roadmap.markerFields??[]).map(t=>e(t))),dateFields:rs((r.layoutSettings.roadmap.dateFields??[]).map(t=>t===fH?t:e(t)))}:void 0},sliceBy:s,sliceValue:r.sliceValue}},[e,t])}(),{getLayoutSettingsWithDefaults:r}=kK(),a=(0,H.useCallback)(({initialViewData:t})=>{let a=!function(e){for(let t of[ev,eb])if(t.matchFullPath(e))return!0;return!1}(window.location.pathname)?new URLSearchParams:new URLSearchParams(window.location.search),n=a.get(la),i=a.get(ln),l=a.getAll(i9),s=a.get(lt),o=a.get(li),d=a.get(lr),u=a.get(ll),c=a.get(ls),m=a.get(lo),p=a.get(ld),f={...t,filter:t.filter??"",aggregationSettings:t.aggregationSettings||fG()},h=(0,TC.Z)(f);if(null!=n){let t=e(n);t?h.groupBy=[t.databaseId]:h.groupBy=[]}if(null!=i){let t=e(i);t?h.verticalGroupBy=[t.databaseId]:h.verticalGroupBy=[]}if(l.length>0){let t=a.getAll(le);h.sortBy=l.map((r,a)=>{let n=e(r),i="desc"===t[a]?"desc":"asc";return n?[n.databaseId,i]:void 0}).filter(ro)}if(null!=s&&(h.filter=s),null!=o)try{let t=JSON.parse(o);if(Array.isArray(t)){let r=rs(t.map(t=>e(t)?.databaseId));h.visibleFields=r}}catch(e){}if(m){let t=e(m);t&&(h.sliceBy={field:t.databaseId,filter:""})}if(p&&(h.sliceValue=p),d&&Object.values(fQ).includes(d)){let e=d===fQ.Roadmap,t=d===fQ.Board||d===fQ.Table;e&&h.layout!==fW.Roadmap&&d===fQ.Roadmap&&(h.layoutSettings=r(h.layoutSettings)),(t||e)&&(h.layout=f1(d))}if(h.layout===fW.Board||h.layout===fW.Table&&h.groupBy.length>0){if(null!=u)try{let e=JSON.parse(u);"boolean"==typeof e&&(h.aggregationSettings.hideItemsCount=e)}catch(e){}if(null!=c)try{let t=JSON.parse(c);if(Array.isArray(t)){let r=rs(t.map(t=>e(t)?.databaseId));h.aggregationSettings.sum=r}}catch(e){}}return h},[e,r]),n=function(){let e=l$(),t=(0,K.TH)(),{isProjectViewRoute:r}=dg(),a=ur();return(0,H.useCallback)((n,{replace:i})=>{if(!n||!r)return;let l=Tv(n,a,t.search);(l.pathname!==t.pathname||l.search!==t.search.slice(1))&&e(l,{replace:i})},[t.search,t.pathname,r,e,a])}(),i=(0,H.useCallback)(e=>({...e,localViewStateDeserialized:t(e.localViewState),...Tj(e)}),[t]),l=(0,H.useCallback)((e,{currentViewNumber:t,sessionStorageViews:r})=>{let n={};for(let i of e){let e;let l={...i,filter:i.filter??"",aggregationSettings:i.aggregationSettings||fG()};if(i.number===t)e=a({initialViewData:l});else if(r?.[i.number]){let t=r[i.number];(0,J.Z)(t,"session view data is defined"),e={...t,aggregationSettings:t.aggregationSettings??i.aggregationSettings??{}}}else e=l;n[i.number]={id:l.id,name:l.name,number:l.number,serverViewState:l,localViewState:e}}return n},[a]),s=(0,H.useMemo)(()=>Tk(T$,(e,t,{[Tz]:r})=>{let a="number"==typeof e.currentViewNumber?e.views[e.currentViewNumber]:void 0;a&&r?.navigate!==!1&&n(i(a),{replace:r?.replace})}),[i,n]),[o,d]=(0,H.useReducer)(s,null,function(){let e=eP("memex-views")??[],t=ev.matchFullPath(window.location.pathname),r=t&&t.params.viewNumber?parseInt(t.params.viewNumber,10):e[0]?.number,a=e.find(e=>e.number===r),n=l(e,{currentViewNumber:a?.number,sessionStorageViews:function(){let e=TI.getItem(h$(TG));if(!e)return null;let t=JSON.parse(e);return!function(e){for(let t of Object.values(e))try{f0(t.layout)}catch(e){if(e instanceof EnumValueError)return!1}return!0}(t)?null:t}()}),i=e.map(e=>e.number);return a?{views:n,currentViewNumber:a.number,viewsOrder:i,[TS]:[]}:{views:n,currentViewNumber:void 0,viewsOrder:i,[TS]:[]}});TT(o);let u=(0,H.useCallback)(e=>{d({type:dy.SetLocalViewState,localViewState:a({initialViewData:e}),viewNumber:e.number,currentViewNumber:e.number,[Tz]:{navigate:!1}})},[a]),c=(0,H.useCallback)((e,t)=>{d({views:l(e,{currentViewNumber:o.currentViewNumber}),currentViewNumber:t,type:dy.SetViews})},[l,o.currentViewNumber]);(0,H.useEffect)(()=>{function e(){let e=ev.matchFullPath(window.location.pathname);if(!e?.params.viewNumber){let e=Object.keys(o.views).map(e=>parseInt(e,10)),t=o.views[Math.min(...e)];t&&u(t.serverViewState);return}let t=parseInt(e.params.viewNumber,10),r=o.views[t];r?u(r.serverViewState):d({type:dy.GoToViewNumber,viewNumber:void 0,[Tz]:{navigate:!1}})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[u,o.views]);let m=(0,H.useMemo)(()=>{let e=(o.viewsOrder??[]).reduce((e,t,r)=>({...e,[t]:r}),{});return Object.values(o.views).map(e=>({...e,...Tj(e)})).sort((t,r)=>(e[t.number]??0)-(e[r.number]??0))},[o.views,o.viewsOrder]);(0,H.useEffect)(()=>{!function(e){var t;t=JSON.stringify(e),TI.setItem(h$(TG),t)}(Object.fromEntries(Object.entries(o.views).map(([e,t])=>[e,t.localViewState])))},[o.views]);let p=null!=o.currentViewNumber?o.views[o.currentViewNumber]:void 0;return{currentView:(0,H.useMemo)(()=>{if(p)return i(p)},[p,i]),viewsMap:o.views,views:m,viewStateDispatch:d,setViews:c}},TG="memex-views";function TU({children:e}){let t=l$(),{projectLimits:{viewsLimit:r}}=i5(),{postStats:a}=os(),{currentView:n,views:i,viewsMap:l,viewStateDispatch:s}=TW(),{hasWritePermissions:o}=i4(),d=function(e,t){let{findMissingColumnIds:r}=Tx(),{findColumnByDatabaseId:a}=cA(),{loadColumnsWithItemColumnValues:n}=Tb(),{perform:i}=d1({request:n});return(0,H.useEffect)(()=>{let t=r(rs([...new Set(Object.values(e).map(e=>{let t=[...e.localViewState.verticalGroupBy||[],...e.localViewState.groupBy,...e.localViewState.sortBy.map(e=>e[0])];return e.localViewState.layout===fW.Roadmap&&C5(e.localViewState.layoutSettings.roadmap)&&t.push(...e.localViewState.layoutSettings.roadmap.dateFields.filter(C2)),t}).flat())].map(e=>a(e)?.id)));0!==t.length&&i(t)},[a,r,i,e]),Ty(t)}(i,n),u=(0,H.useCallback)((e,t)=>{s({type:dy.ReorderView,viewNumber:e,prevViewNumber:t})},[s]),c=(0,H.useCallback)((e,t)=>{s({type:dy.GoToViewNumber,viewNumber:e}),t&&a({name:"view_open",memexProjectViewNumber:e,...t})},[a,s]),m=(0,H.useCallback)(e=>{s({type:dy.AddView,view:e})},[s]),p=(0,H.useCallback)(e=>{s({type:dy.UpdateView,view:e})},[s]),f=(0,H.useCallback)(e=>{s({type:dy.DeleteView,viewNumber:e})},[s]),h=(0,H.useCallback)(e=>{s({type:dy.SetViewServerStates,viewStates:e})},[s]),g=jj({setCurrentViewNumber:c,addView:m,updateView:p,deleteView:f}),y=(0,H.useCallback)((e,t)=>{if("loading"===g.status.current.status)return;let r=g.perform({view:e});return a({name:"view_create",memexProjectViewNumber:n?.number,context:e.layout?f0(e.layout):fQ.Table,...t}),r},[g,n?.number,a]),x=jI({setCurrentViewNumber:c,addView:m,updateView:p,deleteView:f}),b=jS({setCurrentViewNumber:c,addView:m,updateView:p,deleteView:f}),v=jC(),w=(0,H.useCallback)((e,t)=>{s({type:dy.ResetViewState,viewNumber:e}),t&&a({name:"view_reset",memexProjectViewNumber:e,...t})},[a,s]),j=jj({setCurrentViewNumber:(0,H.useCallback)(e=>{n&&n.isDeleted?f(n.number):n&&w(n.number),c(e)},[f,w,c,n]),addView:m,updateView:p,deleteView:f}),C=(0,H.useCallback)(async(e,t,r)=>{let n=l[e];if(n&&!n.isDeleted&&t!==n.name){let i=hp(n.serverViewState,fU);await v.perform({viewNumber:n.number,view:{...i,name:t,filter:n.serverViewState.filter??""}}),a({name:"view_rename",memexProjectViewNumber:e,...r}),"succeeded"===v.status.current.status&&s({type:dy.SaveViewName,viewNumber:e,name:t})}},[l,v,s,a]),I=(0,H.useCallback)(async(e,t)=>{let r=l[e];if(!r||r.isDeleted)return;let n=hp(r.localViewState,fU),i=x.perform({viewNumber:e,view:n});a({name:"view_save",memexProjectViewNumber:e,...t}),await i},[l,x,a]),S=(0,H.useCallback)(async(e,t,n)=>{let i=l[e];if(!i)throw Error("No view found");if(Object.keys(l).length>r)return;let s=Tj(i),o=hp(i.localViewState,[...fU,"name"]);return a(s.isViewStateDirty?{name:"view_save_as_new",memexProjectViewNumber:e,...n}:{name:"view_duplicate",memexProjectViewNumber:e,...n}),j.perform({view:{...o,name:t}})},[l,j,a,r]),k=(0,at.N)(),T=(0,H.useCallback)(async(e,t,r)=>{let n=await k({title:"Delete view?",content:"Are you sure you want to delete this view?",confirmButtonContent:"Delete",confirmButtonType:"danger"}),i=l[e];if(n){if(i?.isDeleted){f(e),r?.();return}await b.perform({viewNumber:e}),a({name:"view_delete",memexProjectViewNumber:e,...t})}r?.()},[k,l,b,a,f]),{isProjectViewRoute:N}=dg(),_=(0,H.useCallback)(async(e,t,r,a)=>{let n=l[e];if(!n||n.isDeleted)return;let i=hp(n.serverViewState,fU);u(e,r);try{await v.perform({viewNumber:e,view:{...i,previousMemexProjectViewId:t}})}catch(t){u(e,a)}},[l,v,u]),R=(0,e5.Z)(n);(0,H.useEffect)(function(){if(N)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){let{current:t}=R;t&&t.isViewStateDirty&&!t.isDeleted&&mz(e)===mV.META_S&&(e.preventDefault(),I(t.number,{ui:"keyboard shortcut"}))}},[R,N,I]);let P=ur();ep(()=>{if(!n)return null;let e=[];return(N&&n.isViewStateDirty&&!n.isDeleted&&(o&&e.push(["s","Save view","views_save",()=>I(n.number,{ui:az})]),e.push(["r","Reset view","views_reset",()=>w(n.number,{ui:az})])),i.length>1&&(N&&o&&e.push(["d","Delete view","views_delete",()=>T(n.number,{ui:az})]),e.push(["g","Go to view...",i.reduce((e,r,a)=>(N&&r.number===n.number||e.push([`${a}`,`Go to ${r.name}`,"views_change",()=>{c(r.number,{ui:az}),N||t(ev.generatePath({...P,viewNumber:r.number}))}]),e),[])])),N&&i.length<r&&o&&(e.push(["n","New view","views_create",()=>y({},{ui:az})]),e.push(["c",rI.duplicateView({isDirty:n.isViewStateDirty}),"views_duplicate",()=>S(n.number,void 0,{ui:az})])),0===e.length)?null:["v","View options...",e]},[y,n,T,S,o,N,t,w,I,c,i,r,P]);let{getFieldIdsFromFilter:D}=Tg(),E=(0,H.useMemo)(()=>{if(!n)return!0;if(0===d.length)return!1;let e=D(n.localViewStateDeserialized.filter),t=d.some(t=>e.has(t)),r=!!d.find(e=>n.localViewStateDeserialized.horizontalGroupByColumns.some(t=>t.id===e)),a=!!d.find(e=>n.localViewStateDeserialized.verticalGroupByColumns.some(t=>t.id===e&&t.id!==eM.Status)),i=!!d.find(e=>n.localViewStateDeserialized.sortByColumnsAndDirections.some(t=>t.column.id===e));return t||r||i||a},[n,D,d]),A=(0,H.useMemo)(()=>n?Tv(n,P):eb.generatePath(P),[n,P]);return(0,O.jsx)(on.Provider,{value:(0,H.useMemo)(()=>({views:i,viewsMap:l,viewStateDispatch:s,createView:g,currentView:n,duplicateCurrentViewState:S,setCurrentViewNumber:c,updateView:x,updateViewPriority:_,saveCurrentViewState:I,destroyView:b,isViewStateDirty:n?.isViewStateDirty??!1,resetViewState:w,createNewDefaultView:y,destroyCurrentView:T,renameView:C,missingRequiredColumnData:E,returnToViewLinkTo:A,updateViewServerStates:h}),[y,g,n,T,b,S,C,w,I,c,x,_,s,i,l,E,A,h]),children:e})}try{TU.displayName||(TU.displayName="ViewProvider")}catch{}let TH=(0,H.memo)(function({children:e}){let{viewStateDispatch:t,currentView:r}=oi(),{getNextLayoutSettings:a}=kK(),{postStats:n}=os(),i=(0,H.useCallback)((e,r,i)=>{t({type:dy.SetViewType,viewType:r,viewNumber:e.number,layoutSettings:a(f1(r),e)}),n({name:aG,ui:i,context:r})},[n,t,a]),{isProjectViewRoute:l}=dg();return ep(()=>l&&r?["y","Switch layout...",Object.entries({[fQ.Table]:["t","Switch layout: Table","view.table",()=>i(r,fQ.Table,"command palette")],[fQ.Board]:["b","Switch layout: Board","view.board",()=>i(r,fQ.Board,"command palette")],[fQ.Roadmap]:["r","Switch layout: Roadmap","view.roadmap",()=>i(r,fQ.Roadmap,"command palette")],[fQ.List]:null}).reduce((e,[t,a])=>(t!==r.localViewStateDeserialized.viewType&&null!==a&&e.push(a),e),[])]:null,[r,l,i]),(0,O.jsx)(hM.Provider,{value:(0,H.useMemo)(()=>({isViewTypeDirty:r?.isViewTypeDirty??!1,setViewType:i,viewType:r?.localViewStateDeserialized.viewType??fQ.Table}),[r?.isViewTypeDirty,r?.localViewStateDeserialized.viewType,i]),children:e})});try{TH.displayName||(TH.displayName="ViewTypeProvider")}catch{}async function Tq(e){let t=aa("memex-column-delete-api-data");await ac(t.url,{method:"DELETE",body:e})}let TK=()=>{let{setAllColumns:e,allColumnsRef:t}=cE(),{findColumn:r}=gt();return{destroyColumn:(0,H.useCallback)(async a=>{let n=r(a);n&&n.userDefined&&(e(t.current.filter(e=>e.id!==n.id)),f2(),await Tq({memexProjectColumnId:n.id}))},[t,e,r])}},TQ=(0,H.memo)(function({children:e}){let{currentView:t,viewStateDispatch:r}=oi(),{postStats:a}=os(),{destroyColumn:n}=TK(),i=(0,H.useCallback)(e=>(r({type:dy.RemoveField,column:e}),n(e.id.toString())),[n,r]),l=(0,H.useCallback)((e,t)=>{r({type:dy.ShowField,viewNumber:e,column:t})},[r]),s=(0,H.useCallback)((e,t)=>{r({type:dy.HideField,viewNumber:e,column:t})},[r]),o=(0,H.useCallback)(e=>!!t&&!!t.localViewStateDeserialized.visibleFields.find(t=>t.id===e.id),[t]),d=(0,H.useCallback)((e,t,n,i=aB)=>{a({name:o(t)?a$:"field_show",ui:i,memexProjectColumnId:t.id}),r({type:dy.ToggleField,viewNumber:e,column:t,position:n})},[o,a,r]),u=(0,H.useCallback)((e,t,n,i=aB)=>{a({name:"field_move",context:`position: ${n}`,memexProjectColumnId:t.id,ui:i}),r({type:dy.MoveField,viewNumber:e,column:t,newPosition:n})},[r,a]);return(0,O.jsx)(Sx.Provider,{value:(0,H.useMemo)(()=>({visibleFields:t?.localViewStateDeserialized.visibleFields??[],isVisibleFieldsDirty:t?.isVisibleFieldsDirty??!1,isFieldVisible:o,showField:l,hideField:s,moveField:u,toggleField:d,removeField:i}),[t?.isVisibleFieldsDirty,t?.localViewStateDeserialized.visibleFields,s,o,u,i,l,d]),children:e})});try{TQ.displayName||(TQ.displayName="VisibleFieldsProvider")}catch{}let TX=(0,H.memo)(function({children:e}){return(0,O.jsx)(TU,{children:(0,O.jsx)(TH,{children:(0,O.jsx)(dw,{config:dx,children:(0,O.jsx)(TQ,{children:(0,O.jsx)(Ta,{children:(0,O.jsx)(CQ,{children:(0,O.jsx)(To,{children:(0,O.jsx)(Ts,{children:(0,O.jsx)(CB,{children:(0,O.jsx)(CE,{children:(0,O.jsx)(k2,{children:(0,O.jsx)(k4,{children:(0,O.jsx)(dG,{children:(0,O.jsx)(r9,{children:(0,O.jsx)(CZ,{children:e})})})})})})})})})})})})})})})});try{TX.displayName||(TX.displayName="ViewsProvider")}catch{}let TY={ADMIN:"ADMIN",WRITE:"WRITE",DEFAULT:"DEFAULT"},TJ=(e=TY.DEFAULT)=>{let{hasAdminPermissions:t,hasWritePermissions:r}=i4();switch(e){case TY.ADMIN:return t;case TY.WRITE:return r;case TY.DEFAULT:return t||r}};function T0(e,t){return TJ(e)?t:null}function T1(e){var t,r;return t=TY.DEFAULT,r=e,TJ(t)?r:null}function T2(e,{timeoutMs:t=225}={}){let[r,a]=(0,H.useState)(e),n=(0,e5.Z)(t);return(0,H.useEffect)(()=>{let t=!0,r=setTimeout(()=>{t&&a(e)},n.current);return()=>{t=!1,clearTimeout(r)}},[e,n]),r}let T5=(0,H.createContext)(null),T3=(0,H.createContext)(null),T4=(0,H.createContext)(null),T8=(0,H.createContext)(null),T6=(0,H.createContext)(null);async function T7(e){let t=new URL(aa("memex-archived-items-get-api-data").url,window.location.origin);void 0!==e.perPage&&t.searchParams.set("per_page",e.perPage.toString()),e.visibleFields&&t.searchParams.set(li,JSON.stringify(e.visibleFields));let{data:r}=await ad(t);return r}function T9({children:e}){let[t,r]=(0,H.useState)([]),{itemMatchesFilterQuery:a}=dh(),[n,i]=(0,H.useState)(""),l=T2(n.trim()),{state:s,optimisticRemoveItems:o,optimisticRollbackRemoveItems:d,loadAllItems:u,loadAllItemsStatus:c}=function({filter:e}){let t=dl(()=>new Map),[r,a]=(0,H.useState)("idle"),[n,i]=(0,H.useState)(null),[l,s]=(0,H.useState)(!1),o=(0,W.NL)(),{requiredFields:d,hasAllFieldsLoaded:u,addRequiredFieldsFromFilter:c,markFieldsAsLoaded:m}=function({initialFields:e}){let[t,r]=(0,H.useState)(new Set(e)),[a,n]=(0,H.useState)(new Set),{getFieldIdsFromFilter:i}=Tg(),l=(0,H.useCallback)(e=>{let a=Array.from(i(e)).filter(e=>!t.has(e));a.length>0&&r(e=>new Set([...Array.from(e),...a]))},[i,t]),s=(0,H.useCallback)(e=>{n(t=>new Set([...Array.from(t),...e]))},[]),o=(0,H.useMemo)(()=>(0,mt.Z)(t,a),[t,a]),d=(0,H.useMemo)(()=>Array.from(a),[a]),u=(0,H.useMemo)(()=>Array.from(t),[t]);return(0,H.useMemo)(()=>({loadedFields:d,requiredFields:u,addRequiredFieldsFromFilter:l,markFieldsAsLoaded:s,hasAllFieldsLoaded:o}),[l,o,d,s,u])}({initialFields:[eM.Title]}),p=(0,H.useCallback)(async e=>{try{a("loading");let{memexProjectItems:r,totalCount:n}=await T7({visibleFields:e,perPage:l?1e4:500});for(let l of(m(e),i({archivedItems:r.map(e=>i6(e)),totalCount:n}),a("idle"),r))t.current.set(l.id,l)}catch(e){a("error")}},[t,l,m]),f=(0,H.useCallback)(async()=>{try{s(!1),a("loading");let{memexProjectItems:e,totalCount:r}=await T7({visibleFields:d,perPage:1e4}),n=e.map(e=>i6(e));for(let l of(i({archivedItems:n,totalCount:r}),a("idle"),s(!0),e))t.current.set(l.id,l);return n}catch(e){a("error")}},[t,d]),h=(0,H.useCallback)(e=>{for(let r of e){let e=t.current.get(r);if(e){let{archived:t,...r}=e;sq(o,i6(r))}t.current.delete(r)}i(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount-e.length,archivedItems:t.archivedItems.filter(t=>!e.includes(t.id))}:t)},[t,o]),g=(0,H.useCallback)(e=>{sK(o,e.map(e=>e.id)),i(t=>t?.archivedItems&&t.totalCount?{...t,totalCount:t.totalCount+e.length,archivedItems:[...e,...t.archivedItems].sort((e,t)=>(function(e,t){let r=0;if(e.archivedAt&&t.archivedAt){let a=(0,rx.D)(e.archivedAt);r=(0,rx.D)(t.archivedAt).getTime()-a.getTime()}return 0!==r?r:t.id-e.id})({id:e.id,archivedAt:e.archived?.archivedAt},{id:t.id,archivedAt:t.archived?.archivedAt}))}:t)},[o]);return(0,H.useEffect)(()=>{u||"idle"!==r||p(d)},[u,p,d,r]),(0,H.useEffect)(()=>{c(e)},[c,e]),{state:n,status:r,optimisticRemoveItems:h,optimisticRollbackRemoveItems:g,loadAllItemsStatus:r,loadAllItems:f}}({filter:l}),m=(0,H.useCallback)(()=>{r([])},[]),p=(0,H.useCallback)(e=>{if(t.some(t=>t.id===e))r(t.filter(t=>t.id!==e));else{let t=s?.archivedItems?.find(t=>t.id===e);if(t?.contentType===eL.RedactedItem)return;t&&r(e=>[...e,t])}},[s?.archivedItems,t]),f=(0,H.useCallback)(e=>{r(Ni(e))},[]),h=(0,H.useCallback)(e=>{let a=Ni(e);t.length===a.length?r([]):r(a)},[t.length]),g=(0,H.useMemo)(()=>new Set(t.map(e=>e.id)),[t]),y=(0,H.useCallback)(e=>g.has(e),[g]),{openRemoveConfirmationDialog:x}=bU(void 0,(0,H.useCallback)(e=>{o(e),r(t=>t.filter(t=>!e.includes(t.id)))},[o])),b=(0,H.useCallback)(()=>{x(t.map(e=>e.id),"archive page bulk action menu")},[x,t]),v=(0,H.useCallback)((e,t)=>{x(e,t)},[x]),w=d1({request:(0,H.useCallback)(async e=>{let t=new Set(e.map(e=>e.id));o(Array.from(t)),r(e=>e.filter(e=>!t.has(e.id))),await bD({memexProjectItemIds:Array.from(t)})},[o]),rollback:(0,H.useCallback)(async e=>{d(e)},[d])}),j=(0,H.useMemo)(()=>l?s?.archivedItems?.filter(e=>a(e,o4(l)))??[]:s?.archivedItems??[],[l,s?.archivedItems,a]),C=(0,H.useMemo)(()=>Ni(j),[j]);return(0,H.useEffect)(()=>{l&&m()},[m,l]),(0,O.jsx)(T5.Provider,{value:(0,H.useMemo)(()=>({archivedItems:s?.archivedItems,totalCount:s?.totalCount,loaded:null!==s,filteredItems:j,loadAllItemsStatus:c,loadAllItems:u}),[j,u,c,s]),children:(0,O.jsx)(T3.Provider,{value:(0,H.useMemo)(()=>({filteredItems:j,filterValue:n,deferredFilterValue:l,setFilterValue:i}),[l,n,j,i]),children:(0,O.jsx)(T6.Provider,{value:(0,H.useMemo)(()=>({selectedItems:t,selectableItems:C,selectItem:p,selectAllItems:f,toggleSelectAllItems:h,isSelected:y,clearSelectedItems:m}),[m,y,f,p,C,t,h]),children:(0,O.jsx)(T4.Provider,{value:(0,H.useMemo)(()=>({restoreItemsRequest:w}),[w]),children:(0,O.jsx)(T8.Provider,{value:(0,H.useMemo)(()=>({removeAllSelectedItems:b,removeItems:v}),[b,v]),children:e})})})})})}let Ne=()=>{let e=(0,H.useContext)(T5);if(null===e)throw Error("useArchiveItems must be used within an ArchivedItemsContext");return e},Nt=()=>{let e=(0,H.useContext)(T4);if(null===e)throw Error("useRestoreArchiveItems must be used within an RestoreArchiveItemsContext");return e},Nr=()=>{let e=(0,H.useContext)(T6);if(null===e)throw Error("useSelectArchiveItems must be used within an SelectArchiveItemsContext");return e},Na=()=>{let e=(0,H.useContext)(T8);if(null===e)throw Error("useRemoveArchiveItems must be used within an RemoveArchiveItemsContext");return e},Nn=()=>{let e=(0,H.useContext)(T3);if(null===e)throw Error("useFilterArchiveItems must be used within an FilterArchiveItemsContext");return e},Ni=e=>e.filter(e=>e.contentType!==eL.RedactedItem);try{T9.displayName||(T9.displayName="ArchivedItemsProvider")}catch{}function Nl({children:e}){return(0,O.jsx)(eO.Z,{sx:{marginTop:3,bg:"canvas.subtle",border:"1px solid",borderColor:"border.default",borderTopLeftRadius:6,borderTopRightRadius:6},children:(0,O.jsx)(eO.Z,{sx:{p:2,pl:4,pr:3,display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"50px"},children:e})})}try{Nl.displayName||(Nl.displayName="ArchiveHeaderWrapper")}catch{}function Ns({projectItemLimit:e,canBulkRestore:t}){let{hasWritePermissions:r}=i4(),{archivedItems:a,loaded:n,loadAllItemsStatus:i,loadAllItems:l,totalCount:s}=Ne(),{selectedItems:o,selectableItems:d,selectAllItems:u,toggleSelectAllItems:c}=Nr(),{removeAllSelectedItems:m}=Na(),{restoreItemsRequest:p}=Nt(),{deferredFilterValue:f}=Nn(),{itemMatchesFilterQuery:h}=dh(),{setArchiveStatus:g}=uo(),y=(0,H.useCallback)(async()=>{await p.perform(o,o),g()},[p,o,g]),x=(0,H.useCallback)(()=>{c(d)},[c,d]),b=o.length===d.length&&d.length>0,v=0===o.length,w=o.length>0,j=!b&&!v,C=!!a&&a.length>0,I=!!a&&!!s&&s>a.length,{primaryText:S,secondaryText:k,loadAllText:T,loadAllAction:N}=(0,H.useMemo)(()=>{let e="loaded"===i||!I;return a&&s?e||w||f?!e&&w?{primaryText:`${o.length.toLocaleString()} selected`,secondaryText:"Only selecting results from most recently archived",loadAllText:"Select all",loadAllAction:async()=>{let e=await l();e&&u(e.filter(e=>h(e,o4(f))))}}:!e&&f?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`,secondaryText:"Only filtering on most recently archived",loadAllText:"Filter on all",loadAllAction:l}:e&&f?{primaryText:`${d.length.toLocaleString()} archived ${1===d.length?"item":"items"}`}:e&&w?{primaryText:`${o.length.toLocaleString()} selected`}:{primaryText:`${s.toLocaleString()} archived ${1===s?"item":"items"}`}:{primaryText:"Most recently archived",secondaryText:`of ${s.toLocaleString()} archived items`,loadAllText:"Show all",loadAllAction:l}:{primaryText:"0 archived items"}},[i,I,a,s,w,f,l,o.length,u,h,d.length]),_="loading"===i;return(0,O.jsxs)(Nl,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{children:C?(0,O.jsx)(uz.Z,{sx:{mr:3},onChange:x,"aria-label":"Toggle select all items",disabled:_||!r,...j?{indeterminate:!0}:{checked:b}}):null}),(0,O.jsxs)(eO.Z,{children:[S?(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:S}):null,n&&C?(0,O.jsxs)(eO.Z,{children:[k?(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",mr:2},children:k}):null,T?(0,O.jsx)(uB.Z,{as:"button",onClick:N,disabled:_,sx:{color:_?"primer.fg.disabled":void 0,"&&":{cursor:_?"default":"pointer"}},children:T}):null]}):null]})]}),n&&"loading"===i?(0,O.jsx)(u$.Z,{size:"small"}):w?(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,O.jsx)(cd.r,{leadingVisual:eF.TrashIcon,variant:"danger",size:"small",onClick:m,children:"Delete from project"}),(0,O.jsx)(cd.r,{size:"small",onClick:y,disabled:!t,children:t?"Restore":(0,O.jsx)(fC.Z,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]}):null]})}try{Ns.displayName||(Ns.displayName="ArchiveHeader")}catch{}let No={Found:"found",Empty:"empty",Loading:"loading"};function Nd(e){return{state:No.Found,value:e}}let Nu={state:No.Loading},Nc={state:No.Empty};function Nm(e){return"loading"===e.state}function Np(e){return"empty"===e.state}function Nf(e){return"found"===e.state}let Nh=(0,H.memo)(function({titleColumn:e}){if(!Nf(e)||!e)return null;switch(e.value.contentType){case eL.RedactedItem:return(0,O.jsx)(eF.LockIcon,{"aria-label":"Redacted item"});case eL.DraftIssue:return(0,O.jsx)(eZ.Z,{icon:eF.IssueDraftIcon,sx:{color:"fg.muted"},"aria-label":"Draft issue"});case eL.Issue:case eL.PullRequest:return(0,O.jsx)(u9,{title:e.value});default:ij(e.value)}});try{Nh.displayName||(Nh.displayName="MemexItemIcon")}catch{}var Ng=r(70697);let Ny={color:"fg.default",overflow:"hidden",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none",textOverflow:"ellipsis","&.is-disabled":{color:"fg.muted"},"&:hover":{color:"accent.fg"},"&:focus, &:focus-visible":{outline:"none"}};function Nx({model:e,currentValue:t,isDisabled:r,openPane:a,onHover:n}){let{safeClearTimeout:i}=(0,Ng.Z)(),l=(0,H.useRef)(void 0),s=(0,H.useCallback)(t=>{!a||e instanceof RedactedItemModel||t.currentTarget instanceof Element&&"A"===t.currentTarget.tagName&&(t.metaKey||t.ctrlKey)||(a(e),t.preventDefault(),t.stopPropagation())},[e,a]),o=Nf(t)?t0(t.value):"",d=(0,H.useCallback)(()=>{n&&n()},[n]);switch(e.contentType){case eL.RedactedItem:return(0,O.jsx)(vo,{isDisabled:r,children:o});case eL.DraftIssue:return(0,O.jsx)(vo,{sx:{"&:hover":{color:"accent.fg",cursor:"pointer",textDecoration:"underline"}},dangerousHtml:o,onClick:s,isDisabled:r});case eL.PullRequest:case eL.Issue:return(0,O.jsx)(uB.Z,{sx:Ny,onMouseEnter:d,onMouseLeave:()=>l.current&&i(l.current),target:"_blank",rel:"noreferrer",href:e.content.url,className:r?"is-disabled":void 0,onClick:e.contentType===eL.Issue?s:void 0,tabIndex:-1,children:(0,O.jsx)(u5,{children:o})});default:ij(e)}}try{Nx.displayName||(Nx.displayName="InteractiveItemTitle")}catch{}let Nb=(0,H.memo)(function({archivedItem:e,columnData:t,canRestore:r,projectItemLimit:a}){let{hasWritePermissions:n}=i4(),{restoreItemsRequest:i}=Nt(),{setArchiveStatus:l}=uo(),s=(0,H.useCallback)(async()=>{let t=[e];await i.perform(t,t),l()},[e,i,l]),{selectItem:o,isSelected:d}=Nr(),u=(0,H.useCallback)(()=>{o(e.id)},[e,o]),{removeItems:c}=Na(),m=(0,H.useCallback)(()=>{c([e.id],"archive page row action menu")},[e.id,c]),p=`item-title-${e.id}`,f=t.Title,h=f?Nd(f):Nc,g=t1(f),y=e.contentType===eL.RedactedItem,x=y||!n;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{as:"label",sx:{pl:4,pt:2},children:(0,O.jsx)(uz.Z,{sx:{alignSelf:"start"},"aria-labelledby":p,checked:!x&&d(e.id),onChange:x?void 0:u,disabled:x})}),(0,O.jsx)(eO.Z,{sx:{pt:2,pl:3},children:(0,O.jsx)(Nh,{titleColumn:h})}),(0,O.jsxs)(eO.Z,{sx:{p:2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,O.jsxs)(eO.Z,{id:p,sx:{display:"flex",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,O.jsx)(Nx,{model:e,currentValue:h}),tW(g)&&(0,O.jsx)(eO.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:[" #",g]})})]}),(0,O.jsxs)(eO.Z,{sx:{color:"fg.muted",fontSize:0},children:["archived ",(0,O.jsx)(y6.Z,{datetime:e.archived?.archivedAt}),!y&&e.archived?.archivedBy?(0,O.jsxs)(O.Fragment,{children:[" by ",(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.default"},children:e.archived.archivedBy.login})]}):null]})]}),(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",mr:3},children:x?null:(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{icon:eF.KebabHorizontalIcon,variant:"invisible","aria-label":"Open item actions",sx:{color:"fg.default"}})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Item,{onSelect:s,disabled:!r,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.HistoryIcon,{})}),r?"Restore":(0,O.jsxs)(O.Fragment,{children:["Restore unavailable",(0,O.jsxs)(mx.S.Description,{variant:"block",children:["This will exceed the ",a," project item limit"]})]})]}),(0,O.jsxs)(mx.S.Item,{onSelect:m,variant:"danger",children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete from project"]})]})})]})})]})});try{Nb.displayName||(Nb.displayName="ArchiveItem")}catch{}let Nv=(0,H.memo)(function(){return(0,O.jsxs)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,O.jsx)(eZ.Z,{icon:eF.ArchiveIcon,size:30,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"There aren't any archived items"}),(0,O.jsx)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:"Archive items from a project view and they'll be shown here."})]})}),Nw=(0,H.memo)(function(){return(0,O.jsxs)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:[(0,O.jsx)(eZ.Z,{icon:eF.ArchiveIcon,size:30,sx:{color:"fg.muted"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"No results matched your filter"})]})}),Nj=(0,H.memo)(function(){return(0,O.jsx)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,m:6},children:(0,O.jsx)(u$.Z,{})})});try{Nv.displayName||(Nv.displayName="NoArchivedItems")}catch{}try{Nw.displayName||(Nw.displayName="NoFilteredItems")}catch{}try{Nj.displayName||(Nj.displayName="Loader")}catch{}let NC={borderBottom:"1px solid",borderColor:"border.default","&:last-child":{borderBottom:"none"},display:"grid",gridTemplateColumns:"auto auto 1fr auto",flexShrink:0},NI=(0,H.memo)(function({children:e}){let t=(0,H.useRef)(null),{isVisible:r,size:a}=uK({ref:t});return(0,O.jsx)(eO.Z,{style:(0,H.useMemo)(()=>({height:r?"unset":a,flexShrink:0}),[r,a]),ref:t,as:"li",sx:NC,children:r?e:null})});try{NI.displayName||(NI.displayName="ArchiveListItem")}catch{}let NS={listStyleType:"none",display:"flex",flexDirection:"column",border:"1px solid",borderTop:0,borderColor:"border.default",borderRadius:6,borderTopRightRadius:0,borderTopLeftRadius:0,contentVisibility:"auto",m:0},Nk=(0,H.memo)(function({filteredItems:e,loaded:t,hasArchive:r,renderItem:a,sx:n}){return(0,O.jsx)(eO.Z,{as:"ul",sx:{...NS,...n},...(0,ef.f)("archived-item-list"),children:t?r?0===e.length?(0,O.jsx)("li",{children:(0,O.jsx)(Nw,{})}):(0,O.jsx)(uq,{rootRef:null,sizeEstimate:55,children:e.map(e=>(0,O.jsx)(NI,{children:a(e)},e.id))}):(0,O.jsx)("li",{children:(0,O.jsx)(Nv,{})}):(0,O.jsx)(eO.Z,{as:"li",...(0,ef.f)("archived-item-loader"),children:(0,O.jsx)(Nj,{})})})});try{Nk.displayName||(Nk.displayName="ArchiveList")}catch{}let NT=[];function NN(){let{archivedItems:e,loaded:t}=Ne(),{filterValue:r,setFilterValue:a,filteredItems:n}=Nn(),{selectedItems:i}=Nr(),{items:l}=dP(),s=i5().projectLimits.projectItemLimit,o=i.length+l.length>s,d=l.length+1>s,u=(0,H.useCallback)(e=>(0,O.jsx)(Nb,{archivedItem:e,columnData:e.columns,canRestore:!d,projectItemLimit:s}),[s,d]),c=(0,H.useMemo)(()=>({items:e??NT}),[e]),m=(0,H.useRef)(null);return(0,O.jsx)(ue.X,{sx:{pt:4},containerWidth:"large",rowGap:"condensed",children:(0,O.jsxs)(ue.X.Content,{children:[(0,O.jsxs)(eO.Z,{sx:{position:"sticky",top:-2,pt:5,mt:-5,backgroundColor:"canvas.default",zIndex:1},children:[(0,O.jsx)(mD.Provider,{value:c,children:(0,O.jsx)(pK,{inputRef:m,height:40,value:r,onChange:(0,H.useCallback)(e=>a(e.target.value),[a]),onClearButtonClick:(0,H.useCallback)(()=>{a("")},[a]),filterCount:r.trim()?n.length:void 0,setValueFromSuggestion:a,hideSaveButton:!0,hideResetChangesButton:!0})}),(0,O.jsx)(Ns,{projectItemLimit:s,canBulkRestore:!o})]}),(0,O.jsx)(Nk,{filteredItems:n,loaded:t,hasArchive:!!e&&e.length>0,renderItem:u})]})})}try{NN.displayName||(NN.displayName="ArchiveView")}catch{}let N_=(0,lj.r)({queryKey:["archivedItems"],fetcher:async({after:e,q:t})=>s7({after:e,q:t,scope:"archived",fieldIds:[eM.Title]}),use:[e=>t=>e({...t,placeholderData:s0.Wk,staleTime:6e4,refetchOnMount:"always"})]}),NR=e=>{if("groups"in e)throw Error("groups not expected in archived data");let{nodes:t,...r}=e;return{...r,itemModels:e.nodes.map(e=>i6(e))}},NP=(e={})=>N_({variables:e,select:NR}),ND=()=>{let e=(0,W.NL)();return(0,hW.c)({mutationFn:bz,onSuccess:async t=>{t&&"job"in t&&await am(t.job.url,{headers:{accept:"application/json"}});let r=N_.getKey();e.invalidateQueries({queryKey:r})}})()},NE=()=>{let e=(0,W.NL)();return(0,hW.c)({mutationFn:bD,onSuccess:async t=>{t&&"job"in t&&await am(t.job.url,{headers:{accept:"application/json"}});let r=N_.getKey();e.invalidateQueries({queryKey:r})}})()},NA=(e,t)=>({type:"SET_NEXT_CURSOR",nextCursor:e,currentPageItemCount:t}),NM=()=>({type:"SET_PREVIOUS_CURSOR"}),NL=e=>({type:"SET_ITEM_SELECTION",itemSelection:e}),NF=(e,t)=>{switch(t.type){case"SET_NEXT_CURSOR":{let r=e.previousCursors[e.previousCursors.length-1],a=e.previousCursors.concat({cursor:e.currentCursor,previousPagesItemCount:(r?r.previousPagesItemCount:0)+t.currentPageItemCount});return{...e,previousCursors:a,currentCursor:t.nextCursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_PREVIOUS_CURSOR":{let t=[...e.previousCursors],r=t.pop();return{...e,previousCursors:t,currentCursor:r?.cursor,itemSelection:"all_on_server"===e.itemSelection?"all_on_server":[]}}case"SET_DEBOUNCED_FILTER_VALUE":return{...e,debouncedFilterValue:t.debouncedFilterValue,previousCursors:[],currentCursor:void 0,itemSelection:[]};case"SET_ITEM_SELECTION":return{...e,itemSelection:t.itemSelection};default:return e}},NZ={currentCursor:void 0,previousCursors:[],debouncedFilterValue:"",itemSelection:[]};var NO=r(11724),NV=r(20088),NB=r(74960),N$=r(94437);let single_select_filter_provider_SingleSelectFilterProvider=class single_select_filter_provider_SingleSelectFilterProvider extends EventTarget{handleEvent(e){let t=e.parsedQuery.at(-1);t&&((""!==t.value||this.priority<=NO.$G)&&"filter"!==t.type&&!e.parsedQuery.some(e=>"filter"===e.type&&e.filter===this.value)&&((0,pr.CD)(t.value,this.name)||(0,pr.CD)(t.value,this.value))&&this.dispatchEvent(new Event("show")),"filter"===t.type&&t.filter===this.value&&this.filterValues.map(e=>{if(!e)return;let r=e.charAt(0).toUpperCase()+e.slice(1);e.indexOf(" ")>-1&&(e=`${e}`),this.emitSuggestion(this.value,e,r,t.value,NO.C0,void 0)}))}emitSuggestion(e,t,r,a,n,i){(!a||(0,pr.CD)(a,t))&&(a&&(n-=(0,pr.Gs)(a,t)),this.dispatchEvent(new N$.L2({filter:e,value:t,name:r,priority:n,icon:i})))}constructor(e,{name:t,value:r,priority:a,icon:n},i){super(),this.type="filter",this.name=t,this.singularItemName=t,this.value=r,this.priority=a,this.icon=n,this.filterValues=i,e.addEventListener("query",this),e.attachProvider(this)}};let Nz=[{filter:{name:"Is",value:"is",icon:N$.zi.Apps,description:'Filter for "issues" or "pull requests", or items that are "open", "closed", "merged", or "draft"',priority:3},values:[{value:"issue",description:"Issues only",priority:1,icon:N$.zi.Issue},{value:"pr",description:"Pull Requests only",priority:2,icon:N$.zi.PullRequest,name:"Pull Request"},{value:"open",description:"Items with open state",priority:3,icon:N$.zi.Issue},{value:"closed",description:"Items with closed state",priority:4,icon:N$.zi.IssueClosed},{value:"merged",description:"Items with merged state",priority:5,icon:N$.zi.Merged},{value:"draft",description:"Items with draft state",priority:6,icon:N$.zi.Draft}]}],NW={name:"No",value:"no",icon:N$.zi.No,description:"Fields without values",priority:2},NG=[NO.T_.assignee],NU=(0,H.forwardRef)(({onChange:e,value:t},r)=>{let{loggedInUser:a}=i5(),{allColumnsRef:n}=cE(),i=(0,H.useRef)(null);(0,my.z)(r,i);let l=(0,H.useCallback)(e=>{e.stopPropagation();let t=e.target;Nz.map(e=>(0,NB.Eg)(e.filter,t,e.values));let r=[{value:"assignee",description:"Items without an assignee",priority:1,icon:N$.zi.No,name:"Assignee"}];for(let e of n.current)"singleSelect"===e.dataType&&(!function(e,t){let r=oQ(t.name),a={name:t.name,value:r,priority:4,description:`Filter for ${t.name}`,icon:N$.zi.SingleSelect},n=t.settings.options.map(e=>e.name.replaceAll("-"," "));new single_select_filter_provider_SingleSelectFilterProvider(e,{...a,name:`Exclude ${t.name}`,icon:N$.zi.Not,value:`-${a.value}`,priority:NO.C0},n),new single_select_filter_provider_SingleSelectFilterProvider(e,a,n)}(t,e),r.push({value:oQ(e.name),description:`Items without a '${e.name}' value`,priority:r.length+1,icon:N$.zi.No,name:e.name}));(0,NB.Eg)(NW,t,r),NG.map(e=>(0,NB.Z6)(e,t,a?.login??"",a?.avatarUrl??""))},[n,a?.avatarUrl,a?.login]),s=(0,H.useCallback)(t=>{e(t.target.value)},[e]);return(0,O.jsx)(NV.z,{inputRef:i,label:rI.filterByKeyboardOrByField,id:"archive-query-builder",onChange:s,inputValue:t,placeholder:rI.filterByKeyboardOrByField,onRequestProvider:l,...(0,ef.f)("filter-bar-input")})});function NH({children:e}){return(0,O.jsx)(eO.Z,{sx:{bg:"canvas.subtle",border:"1px solid",borderColor:"border.default",borderBottomLeftRadius:6,borderBottomRightRadius:6},children:(0,O.jsx)(eO.Z,{sx:{p:2,pl:4,pr:3,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"50px"},children:e})})}function Nq({hasResults:e,onFetchNextPage:t,onFetchPreviousPage:r,mutationIsLoading:a}){if(!e)return null;let n=r&&!a,i=t&&!a;return(0,O.jsx)(NH,{children:(0,O.jsx)(eO.Z,{sx:{display:"flex"},children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,O.jsxs)(cd.r,{disabled:!n,onClick:r,children:[n&&(0,O.jsx)(eZ.Z,{icon:eF.ChevronLeftIcon})," Previous"]}),(0,O.jsxs)(cd.r,{disabled:!i,onClick:t,children:["Next ",i&&(0,O.jsx)(eZ.Z,{icon:eF.ChevronRightIcon})]})]})})})}NU.displayName="ArchiveQueryBuilder";try{NH.displayName||(NH.displayName="ArchiveFooterWrapper")}catch{}try{Nq.displayName||(Nq.displayName="PaginatedArchiveFooter")}catch{}function NK({projectItemLimit:e,canBulkRestore:t,loading:r,filteredItemCount:a,itemSelection:n,hasSelectedAllItemsInPage:i,hasMoreItemsOnServer:l,onToggleSelectAll:s,onRestoreSelectedItems:o,onRemoveSelectedItems:d,selectMatchingItemsOnServer:u,totalCount:c,previousPagesItemCount:m,removeIsMutating:p,restoreIsMutating:f}){let{hasWritePermissions:h}=i4(),g=n&&!i;return(0,O.jsxs)(Nl,{children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{children:a>0?(0,O.jsx)(uz.Z,{sx:{mr:3},onChange:h?s:void 0,"aria-label":"Toggle select all items",disabled:!h||f||p,...g?{indeterminate:!0}:{checked:i}}):null}),(0,O.jsx)(eO.Z,{children:(0,O.jsx)(NJ,{itemSelection:n,selectMatchingItemsOnServer:l&&i&&"all_on_server"!==n?u:void 0,totalCount:c,previousPagesItemCount:m,countForCurrentPage:a,loading:r,disabled:f||p})})]}),(0,O.jsx)(NX,{projectItemLimit:e,canBulkRestore:t,itemSelection:n,onRestoreSelectedItems:o,onRemoveSelectedItems:d,restoreIsMutating:f,removeIsMutating:p})]})}function NQ(e,t){return e&&"all_on_server"!==t&&t<=10}function NX({projectItemLimit:e,canBulkRestore:t,itemSelection:r,onRestoreSelectedItems:a,onRemoveSelectedItems:n,restoreIsMutating:i,removeIsMutating:l}){if(r){let s=i||l,o=NQ(l,r),d=NQ(i,r);return(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,O.jsx)(cd.r,{leadingVisual:o?NY:eF.TrashIcon,variant:"danger",size:"small",onClick:n,disabled:s,"aria-label":o?"Deleting items from project...":void 0,children:"Delete from project"}),(0,O.jsx)(cd.r,{leadingVisual:d?NY:void 0,size:"small",onClick:a,disabled:!t||s,"aria-label":d?"Restoring items in project...":void 0,children:t?"Restore":(0,O.jsx)(fC.Z,{"aria-label":`This will exceed the ${e} project item limit`,children:"Restore unavailable"})})]})}return null}function NY(){return(0,O.jsx)(u$.Z,{size:"small"})}function NJ({itemSelection:e,selectMatchingItemsOnServer:t,totalCount:r,previousPagesItemCount:a,countForCurrentPage:n,loading:i,disabled:l}){return i?(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold",marginRight:2},children:"Loading..."}),(0,O.jsx)(u$.Z,{size:"small"})]}):e?(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:"all_on_server"===e?rH.allSelectedMatchingItems(r):rH.selectedItems(e)}),t&&(0,O.jsx)(uB.Z,{disabled:l,sx:{ml:2},as:"button",onClick:t,children:rH.selectAllMatchingItems(r)})]}):(0,O.jsx)(eO.Z,{children:(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:0===n?rH.noArchivedItems:rH.itemCount(1+a,n+a,r)})})}try{NK.displayName||(NK.displayName="PaginatedArchiveHeader")}catch{}try{NX.displayName||(NX.displayName="ArchiveHeaderBulkActions")}catch{}try{NY.displayName||(NY.displayName="SmallSpinner")}catch{}try{NJ.displayName||(NJ.displayName="ArchiveHeaderTitle")}catch{}let N0=(0,H.memo)(function({archivedItem:e,columnData:t,canRestore:r,projectItemLimit:a,isSelected:n,onToggleSelection:i,onRestoreItems:l,onRemoveItems:s,mutationLoading:o}){let{hasWritePermissions:d}=i4(),u=e.archived?.archivedAt,c=!u,m=e.contentType===eL.RedactedItem,p=m||c||!d,f=`item-title-${e.id}`,h=t.Title,g=h?Nd(h):Nc,y=t1(h),x=(0,H.useMemo)(()=>u||new Date(new Date().getTime()-1e3).toISOString(),[u]),b=(0,H.useCallback)(()=>{l({memexProjectItemIds:[e.id]})},[l,e.id]),v=(0,H.useCallback)(()=>{s({memexProjectItemIds:[e.id]})},[s,e.id]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{as:"label",sx:{pl:4,pt:2},children:(0,O.jsx)(uz.Z,{sx:{alignSelf:"start"},"aria-labelledby":f,checked:!p&&n,onChange:p?void 0:i,disabled:p||o})}),(0,O.jsx)(eO.Z,{sx:{pt:2,pl:3},children:(0,O.jsx)(Nh,{titleColumn:g})}),(0,O.jsxs)(eO.Z,{sx:{p:2,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,O.jsxs)(eO.Z,{id:f,sx:{display:"flex",alignItems:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:[(0,O.jsx)(Nx,{model:e,currentValue:g}),tW(y)&&(0,O.jsx)(eO.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:[" #",y]})})]}),(0,O.jsxs)(eO.Z,{sx:{color:"fg.muted",fontSize:0},children:[e.archived?"archived":"restored"," ",(0,O.jsx)(y6.Z,{datetime:x}),!m&&e.archived?.archivedBy?(0,O.jsxs)(O.Fragment,{children:[" by ",(0,O.jsx)(eB.Z,{as:"span",sx:{color:"fg.default"},children:e.archived.archivedBy.login})]}):null]})]}),(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",mr:3},children:p||o?null:(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{icon:eF.KebabHorizontalIcon,variant:"invisible","aria-label":"Open item actions",sx:{color:"fg.default"}})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Item,{onSelect:b,disabled:!r,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.HistoryIcon,{})}),r?"Restore":(0,O.jsxs)(O.Fragment,{children:["Restore unavailable",(0,O.jsxs)(mx.S.Description,{variant:"block",children:["This will exceed the ",a," project item limit"]})]})]}),(0,O.jsxs)(mx.S.Item,{onSelect:v,variant:"danger",children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete from project"]})]})})]})})]})});try{N0.displayName||(N0.displayName="PaginatedArchiveItem")}catch{}let N1=({headerText:e})=>(0,O.jsx)(gM.Z,{open:!0,caret:"bottom",sx:{position:"fixed",display:"flex",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",top:0,left:0},children:(0,O.jsxs)(gM.Z.Content,{sx:{margin:"auto",paddingTop:"25px",width:"320px",height:"200px","&::before":{content:"none !important"},"&::after":{content:"none !important"}},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:3,mb:4},children:e}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,O.jsx)(u$.Z,{}),(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",mt:3,px:2},children:"This may take some time. This dialog will close when the job is complete."})]})]})});try{N1.displayName||(N1.displayName="PaginatedArchiveMutationInProgressDialog")}catch{}let N2=e=>({filteredItems:e?.itemModels??[],hasNextPage:e?.pageInfo.hasNextPage??!1,endCursor:e?.pageInfo.endCursor,totalCount:e?.totalCount??{value:0,isApproximate:!1}});function N5(){var e;let[t,r]=(0,H.useReducer)(NF,NZ),{data:a,isInitialLoading:n,isFetching:i}=NP({after:t.currentCursor,q:t.debouncedFilterValue}),{filteredItems:l,hasNextPage:s,endCursor:o,totalCount:d}=N2(a),u=t.previousCursors.length>0,c=s&&o?()=>r(NA(o,l.length)):void 0,m=(0,H.useMemo)(()=>"all_on_server"===t.itemSelection?"all_on_server":new Set(t.itemSelection),[t.itemSelection]),p=(0,H.useMemo)(()=>l.filter(e=>{let t=e.contentType===eL.RedactedItem,r=!e.archived?.archivedAt;return!(t||r)}).map(e=>e.id),[l]),f=(0,H.useCallback)(()=>{"all_on_server"===m||p.length===m.size?r(NL([])):r(NL(p))},[p,m]),h=(0,H.useCallback)(()=>{r(NL("all_on_server"))},[]),{items:g}=dP(),y=i5().projectLimits.projectItemLimit,x=g.length+1<=y,b=(e=d.value,"all_on_server"===m?g.length+e<y:g.length+m.size<=y),v=(0,H.useCallback)(e=>{if("all_on_server"===m)r(NL(p.filter(t=>t!==e.id)));else{let t=new Set(m);t.has(e.id)?t.delete(e.id):t.add(e.id),r(NL(Array.from(t)))}},[p,m]),w=function(){let{addToast:e}=e9();return(0,H.useCallback)(t=>{e({type:"error",message:t instanceof api_error_ApiError?t.message:rI.genericErrorMessage})},[e])}(),{setArchiveStatus:j}=uo(),{mutate:C,isPending:I}=NE(),S=(0,H.useCallback)(async e=>{C(e,{onSuccess:()=>{if("all_on_server"===t.itemSelection||t.itemSelection.length===p.length)r(NL([]));else{let a="memexProjectItemIds"in e?e.memexProjectItemIds:[];r(NL(t.itemSelection.filter(e=>!a.includes(e))))}j()},onError:w})},[w,C,p.length,j,t.itemSelection]),k=(0,H.useCallback)(()=>{"all_on_server"===m?S({q:t.debouncedFilterValue}):S({memexProjectItemIds:Array.from(m)})},[S,m,t.debouncedFilterValue]),{mutate:T,isPending:N}=ND(),{confirmRemoveItems:_}=bH(),R=(0,H.useCallback)(async e=>{let a,n=[];"memexProjectItemIds"in e?n=e.memexProjectItemIds:a=rH.deleteAllMatchingItemsConfirmation,await _(n,a?{content:a}:void 0)&&T(e,{onSuccess:()=>{"all_on_server"===t.itemSelection||t.itemSelection.length===p.length?r(NL([])):r(NL(t.itemSelection.filter(e=>!n.includes(e)))),j()},onError:w})},[_,w,T,p.length,j,t.itemSelection]),P=(0,H.useCallback)(()=>{"all_on_server"===m?R({q:t.debouncedFilterValue,scope:"archived"}):R({memexProjectItemIds:Array.from(m)})},[R,m,t.debouncedFilterValue]),D=(0,H.useCallback)(e=>(0,O.jsx)(N0,{archivedItem:e,columnData:e.columns,canRestore:x,projectItemLimit:y,isSelected:"all_on_server"===m||m.has(e.id),onToggleSelection:()=>v(e),onRestoreItems:S,onRemoveItems:R,mutationLoading:I||N}),[x,R,S,v,y,N,I,m]),[E,A]=(0,H.useState)(""),M=(0,fu.N)(e=>r({type:"SET_DEBOUNCED_FILTER_VALUE",debouncedFilterValue:e}),225),L=(0,H.useCallback)(e=>{A(e),M(e)},[M]),F=(0,H.useRef)(null),Z=l.length>0||!!t.debouncedFilterValue,V=t.previousCursors[t.previousCursors.length-1],B=V?V.previousPagesItemCount:0,$=(I||N)&&("all_on_server"===m||m.size>10),z=i5().archiveAlphaFeedbackLink;return(0,O.jsxs)(ue.X,{sx:{pt:4},containerWidth:"large",rowGap:"condensed",children:[(0,O.jsx)(ue.X.Header,{children:(0,O.jsxs)(ut.Z,{children:[rH.noLimitsBannerMessage,z&&(0,O.jsxs)(O.Fragment,{children:[rH.noLimitsBannerFeedback,(0,O.jsx)(uB.Z,{inline:!0,href:z,target:"_blank",rel:"noreferrer",children:rH.noLimitsBannerFeedbackLinkText}),"."]})]})}),(0,O.jsxs)(ue.X.Content,{children:[(0,O.jsxs)(eO.Z,{sx:{position:"sticky",top:-2,pt:3,mt:-3,backgroundColor:"canvas.default",zIndex:1},children:[(0,O.jsx)(NU,{ref:F,onChange:e=>L(e),value:E}),(0,O.jsx)(NK,{canBulkRestore:b,projectItemLimit:y,loading:i,restoreIsMutating:I,removeIsMutating:N,filteredItemCount:l.length,itemSelection:"all_on_server"===m?"all_on_server":m.size,hasSelectedAllItemsInPage:"all_on_server"===m||m.size===p.length,hasMoreItemsOnServer:s||u,onToggleSelectAll:f,onRestoreSelectedItems:k,onRemoveSelectedItems:P,selectMatchingItemsOnServer:h,totalCount:d,previousPagesItemCount:B})]}),(0,O.jsx)(Nk,{filteredItems:l,loaded:!n,hasArchive:Z,renderItem:D,sx:l.length>0?{borderRadius:0,borderBottom:0}:void 0}),(0,O.jsx)(Nq,{hasResults:l.length>0,onFetchNextPage:c,onFetchPreviousPage:u?()=>r(NM()):void 0,mutationIsLoading:N||I}),$&&(0,O.jsx)(N1,{headerText:I?"Restoring items...":"Deleting items..."})]})]})}try{N5.displayName||(N5.displayName="PaginatedArchiveView")}catch{}function N3(){dX();let{memex_paginated_archive:e,memex_table_without_limits:t}=n9();return e||t?(0,O.jsx)(dY,{...(0,ef.f)("paginated-archive-page"),sx:{scrollbarGutter:"stable both-edges",mb:0},children:(0,O.jsx)(N5,{})}):(0,O.jsx)(dY,{...(0,ef.f)("archive-page"),sx:{scrollbarGutter:"stable both-edges",mb:0},children:(0,O.jsx)(T9,{children:(0,O.jsx)(NN,{})})})}try{N3.displayName||(N3.displayName="ArchivePage")}catch{}function N4({localVersion:e,serverVersion:t}){let r=e.configuration,a=t.configuration,n=r.filter.trim()!==a.filter.trim(),i=r.type!==a.type,l=r.xAxis.dataSource.column!==a.xAxis.dataSource.column,s=r.xAxis.dataSource.sortOrder!==a.xAxis.dataSource.sortOrder,o=r.xAxis.groupBy?.column!==a.xAxis.groupBy?.column,d=r.xAxis.groupBy?.sortOrder!==a.xAxis.groupBy?.sortOrder,u=l||s||o||d,c=r.yAxis.aggregate.operation!==a.yAxis.aggregate.operation,m=!(0,mt.Z)(r.yAxis.aggregate.columns,a.yAxis.aggregate.columns),p=r.time?.period!==a.time?.period,f=r.time?.startDate!==a.time?.startDate,h=r.time?.endDate!==a.time?.endDate,g=p||f||h,y=i||u||c||m;return{isXAxisColumnDirty:l,isXAxisGroupByColumnDirty:o,isXAxisGroupBySortOrderDirty:d,isXAxisDirty:u,isYAxisAggregateOperationDirty:c,isYAxisAggregateColumnsDirty:m,isFilterDirty:n,isConfigurationDirty:y,isTimePeriodDirty:g,isDirty:y||n||g}}function N8(e){return"time"===e.localVersion.configuration.xAxis.dataSource.column}function N6(e){return e.number<=0}function N7(e){let t=new URLSearchParams(e);return t.delete(lt),t.delete(lr),t.delete(lf),t.delete(lp),t.delete(lh),t.delete(lg),t.delete(lu),t.delete(lc),t.delete(lm),t}let N9={bar:"bar",column:"column",line:"line","stacked-area":"stacked-area","stacked-bar":"stacked-bar","stacked-column":"stacked-column"},_e={sum:"sum",count:"count",max:"max",min:"min",avg:"avg"};function _t({memexChartOperation:e,values:t}){switch(e){case"sum":return t.reduce((e,t)=>e+t,0);case"avg":return 0===t.length?null:t.reduce((e,t)=>e+t,0)/t.length;case"min":return 0===t.length?null:Math.min(...t);case"max":return 0===t.length?null:Math.max(...t);default:throw Error(`Unknown memex chart operation: ${e}`)}}let _r=(0,H.createContext)(null);function _a(){let e=(0,H.useContext)(_r);if(null===e)throw Error("useCharts can only be used inside a ChartStateProvider");return e}let _n=(0,H.createContext)(null),_i=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(!1),[a,n]=(0,H.useState)(!1),i=(0,H.useRef)(0),l=(0,H.useCallback)(()=>{clearTimeout(i.current),n(!1),r(!0)},[]),s=(0,H.useCallback)(()=>{n(!0),i.current=window.setTimeout(()=>{r(!1),n(!1)},300)},[]),o=(0,H.useMemo)(()=>({openPane:l,closePane:s,isClosing:a,isOpen:t}),[l,s,a,t]);return(0,O.jsx)(_n.Provider,{value:o,children:e})}),_l=()=>{let e=(0,H.useContext)(_n);if(null===e)throw Error("useInsightsConfigurationPane must be used within a InsightsConfigurationPaneProvider");return e};try{_n.displayName||(_n.displayName="InsightsConfigurationPaneContext")}catch{}try{_i.displayName||(_i.displayName="InsightsConfigurationPaneProvider")}catch{}let _s={bar:"bar",column:"column",line:"line","stacked-area":"areaspline","stacked-bar":"bar","stacked-column":"column"},_o=e=>"line"===e||"stacked-area"===e,_d=e=>"stacked-area"===e||"stacked-bar"===e||"stacked-column"===e,_u=["2W","1M","3M","max","custom"],_c=(e,t)=>{let r=e.get(lu);return r&&_u.includes(r)?r:t?.period??"2W"},_m=e=>!!e&&/^\d{4}-\d{2}-\d{2}$/.test(e),_p=(e,t)=>{let r=_c(e,t),a={period:r};if("custom"===r){let r=e.get(lc)??t?.startDate,n=e.get(lm)??t?.endDate;_m(r)&&_m(n)?(a.startDate=r,a.endDate=n):a.period=t?.period??"2W"}return a};var _f=r(41679),_h=r(73418);function _g({tagName:e,elementClass:t,events:r}){return"undefined"==typeof window||window.customElements.get(e)||window.customElements.define(e,t,void 0),(0,_h.L)({tagName:e,elementClass:t,react:q,events:r,displayName:e})}let _y="bar-chart-memex-insights",_x=_g({tagName:_y,elementClass:class BarChartElementMemex extends _f.bR{}});try{_x.displayName||(_x.displayName="BarChart")}catch{}let _b="column-chart-memex-insights",_v=_g({tagName:_b,elementClass:class ColumnChartElementMemex extends _f.yi{}});try{_v.displayName||(_v.displayName="ColumnChart")}catch{}let _w="insights-query-element-memex-with-opaque-error",_j=e=>e.setAttribute("error",""),_C=_g({tagName:_w,elementClass:class InsightsQueryWithOpaqueError extends _f.YI{constructor(...e){super(...e),this.renderError=(e,t)=>{super.renderError(e,t,{chartCallback:_j})}}}}),_I=(0,H.forwardRef)(function(e,t){let r=(0,H.useRef)(null);(0,H.useImperativeHandle)(t,()=>r.current);let a=(0,H.useRef)(null);return(0,H.useEffect)(()=>{let e=!0,t=r.current;return async function(){await window.customElements.whenDefined(_w),a.current=window.setTimeout(()=>{t&&e&&t.executeQuery()})}(),()=>{e=!1,a.current&&window.clearTimeout(a.current)}},[e.authUrl,e.apiUrl,e.query,e.autoRender,e.options]),(0,O.jsx)(_C,{...e,ref:r})});try{_C.displayName||(_C.displayName="ReactInsightsQuery")}catch{}try{_I.displayName||(_I.displayName="AutoExecutingInsightsQuery")}catch{}try{_I.displayName||(_I.displayName="AutoExecutingInsightsQuery")}catch{}let _S="line-chart-memex-insights",_k=_g({tagName:_S,elementClass:class LineChartElementMemex extends _f.KB{}});try{_k.displayName||(_k.displayName="LineChart")}catch{}let _T="stacked-area-chart-memex-insights",_N=_g({tagName:_T,elementClass:class StackedAreaChartElementMemex extends _f.nf{}});try{_N.displayName||(_N.displayName="StackedAreaChart")}catch{}var __=r(38081);let _R=(e,t)=>e.prioritizedIndex-t.prioritizedIndex;function _P(e,t,r,a,n,i){let l=r.contentType,s=a.contentType;if(l===eL.RedactedItem&&s===eL.RedactedItem)return 0;if(l===eL.RedactedItem&&s!==eL.RedactedItem)return n?-1:1;if(l!==eL.RedactedItem&&s===eL.RedactedItem)return n?1:-1;if(0===e.length&&t.length>0)return n?-1:1;if(e.length>0&&0===t.length)return n?1:-1;for(let r=0;r<e.length;r++){if(r>=t.length)return 1;let a=e[r],n=t[r];if("string"==typeof a&&"string"==typeof n?a.toLowerCase()!==n.toLowerCase():a!==n)return("string"==typeof a&&"string"==typeof n?a.toLowerCase()>n.toLowerCase():a>n)?1:-1}return t.length>e.length?-1:i?0:_R(r,a)}function _D(e,t,r,a){return _P(e.columns.Assignees?.map(e=>e.login)??[],t.columns.Assignees?.map(e=>e.login)??[],e,t,r,a)}function _E(e,t,r,a,n,i){let l=r.contentType,s=a.contentType;return l===eL.RedactedItem&&s===eL.RedactedItem?0:l===eL.RedactedItem&&s!==eL.RedactedItem?n?-1:1:l!==eL.RedactedItem&&s===eL.RedactedItem?n?1:-1:void 0!==e&&void 0!==t&&e!==t?e-t:void 0===e&&void 0!==t?n?-1:1:void 0!==e&&void 0===t?n?1:-1:i?0:_R(r,a)}function _A(e,t,r,a,n,i){let l=r.contentType,s=a.contentType;if(l===eL.RedactedItem&&s===eL.RedactedItem)return 0;if(l===eL.RedactedItem&&s!==eL.RedactedItem)return n?-1:1;if(l!==eL.RedactedItem&&s===eL.RedactedItem)return n?1:-1;if(""===e&&""!==t)return n?-1:1;if(""!==e&&""===t)return n?1:-1;let o=e.localeCompare(t);return 0!==o?o:i?0:_R(r,a)}function _M(e,t,r,a){return _A(e.columns[eM.IssueType]?.name??"",t.columns[eM.IssueType]?.name??"",e,t,r,a)}function _L(e,t,r,a){return _P(e.columns.Labels?.map(e=>e.nameHtml)??[],t.columns.Labels?.map(e=>e.nameHtml)??[],e,t,r,a)}function _F(e,t,r,a){return _P(e.columns["Linked pull requests"]?.map(e=>e.number)??[],t.columns["Linked pull requests"]?.map(e=>e.number)??[],e,t,r,a)}function _Z(e,t,r,a){return _A(e.columns.Milestone?.title??"",t.columns.Milestone?.title??"",e,t,r,a)}function _O(e,t,r,a){let n=e.columns[eM.ParentIssue],i=t.columns[eM.ParentIssue];return _A(n?.title||"",i?.title||"",e,t,r,a)}function _V(e,t,r,a){return _A(e.columns.Repository?.name??"",t.columns.Repository?.name??"",e,t,r,a)}function _B(e,t,r,a){return _P(e.columns.Reviewers?.map(e=>e.reviewer.name)??[],t.columns.Reviewers?.map(e=>e.reviewer.name)??[],e,t,r,a)}function _$(e,t,r,a){let n=e.columns[eM.SubIssuesProgress],i=t.columns[eM.SubIssuesProgress];return _E(n?.total===0?void 0:n?.percent_completed,i?.total===0?void 0:i?.percent_completed,e,t,r,a)}function _z(e,t,r,a){return _A(t0(e.columns.Title),t0(t.columns.Title),e,t,r,a)}function _W(e,t,r,a){return _P(e.columns["Tracked by"]?.map(iC)??[],t.columns["Tracked by"]?.map(iC)??[],e,t,r,a)}function _G(e,t,r,a){return _E(t2(e.columns.Tracks),t2(t.columns.Tracks),e,t,r,a)}function _U(e){switch(e.dataType){case eA.Title:return _z;case eA.Assignees:return _D;case eA.Labels:return _L;case eA.LinkedPullRequests:return _F;case eA.Reviewers:return _B;case eA.Milestone:return _Z;case eA.Repository:return _V;case eA.Tracks:return _G;case eA.TrackedBy:return _W;case eA.IssueType:return _M;case eA.ParentIssue:return _O;case eA.SubIssuesProgress:return _$;case eA.Text:return(t,r,a,n)=>(function(e,t,r,a,n){let i=tB(e.columns[r.id]),l=tB(t.columns[r.id]);return _A(i?.raw??"",l?.raw??"",e,t,a,n)})(t,r,e,a,n);case eA.Number:return(t,r,a,n)=>(function(e,t,r,a,n){let i=t$(e.columns[r.id]),l=t$(t.columns[r.id]);return _E(i?.value,l?.value,e,t,a,n)})(t,r,e,a,n);case eA.Date:return(t,r,a,n)=>(function(e,t,r,a,n){let i=tU(e.columns[r.id]),l=tU(t.columns[r.id]);return _E(i?.value.getTime(),l?.value.getTime(),e,t,a,n)})(t,r,e,a,n);case eA.SingleSelect:return(t,r,a,n)=>(function(e,t,r,a,n){let i=tz(e.columns[r.id]),l=tz(t.columns[r.id]),s=i?.id||"",o=l?.id||"",d=r.settings.options;if(!d)return 0;let u=d.findIndex(e=>e.id===s),c=d.findIndex(e=>e.id===o);return e.contentType===eL.RedactedItem&&t.contentType!==eL.RedactedItem?a?-1:1:e.contentType!==eL.RedactedItem&&t.contentType===eL.RedactedItem?a?1:-1:-1===u&&-1!==c?a?-1:1:-1!==u&&-1===c?a?1:-1:u>c?1:u<c?-1:n?0:_R(e,t)})(t,r,e,a,n);case eA.Iteration:return(t,r,a,n)=>(function(e,t,r,a,n){let i=tz(e.columns[r.id]),l=tz(t.columns[r.id]),s=i?.id||"",o=l?.id||"",d=nR(r);if(!d.length)return 0;if(e.contentType===eL.RedactedItem&&t.contentType!==eL.RedactedItem)return a?-1:1;if(e.contentType!==eL.RedactedItem&&t.contentType===eL.RedactedItem)return a?1:-1;let u=d.find(e=>e.id===s),c=d.find(e=>e.id===o);if(!u&&c)return a?-1:1;if(u&&!c)return a?1:-1;if(u&&c){let e=nM(u,c);if(0!==e)return e}return n?0:_R(e,t)})(t,r,e,a,n);default:ij(e)}}let _H=e=>(t,r)=>{for(let{column:a,direction:n}of e){let e="desc"===n,i=_U(a)(t,r,e,!0);if(e&&(i*=-1),0!==i)return i}return 0===e.length?0:_R(t,r)};function _q(e,t){let r=function(e,t){switch(e.dataType){case eA.SingleSelect:{let r=t[e.id]?.id,a=_K(e.settings.options),n=e.settings.options?.find(e=>e.id===r),i=a.get(n?.id);if(i)return[i];return[`${rI.noSuggestion} ${e.name}`]}case eA.Milestone:return t[eM.Milestone]?.title;case eA.IssueType:return t[eM.IssueType]?.name;case eA.Repository:return t[eM.Repository]?.nameWithOwner;case eA.Date:return tH(t[e.id]);case eA.Number:{let r=t[e.id];return r?.value.toString()}case eA.Labels:return t.Labels?.map(e=>e.name);case eA.LinkedPullRequests:return t[eM.LinkedPullRequests]?.map(e=>e.number.toString());case eA.Assignees:return t[eM.Assignees]?.map(e=>e.login);case eA.Reviewers:return t[eM.Reviewers]?.map(e=>e.reviewer.name);case eA.Iteration:{let r=t[e.id]?.id,a=nR(e),n=_K(a),i=a.find(e=>e.id===r),l=n.get(i?.id);if(l)return l;return`${rI.noSuggestion} ${e.name}`}case eA.ParentIssue:return t[eM.ParentIssue]?.title;default:throw Error(`${e.dataType} column is not a supported chart data type`)}}(e,t);return r&&0!==r.length?Array.isArray(r)?r:[r]:[`${rI.noSuggestion} ${e.name}`]}function _K(e){let t=new Map,r=new Map;for(let a of e){let e=a.name||a.title;r.get(e)?r.set(e,(r.get(e)||0)+1):r.set(e,1);let n=r.get(e)||0;n>1?t.set(a.id,`${e} (${n-1})`):t.set(a.id,e)}return t}function _Q(e,t,r){t!==r?e.set(lt,t):e.delete(lt)}function _X(e,t,r){t===r?e.delete(lr):e.set(lr,t)}function _Y(e,t,r){(0,mt.Z)(t,r)?(e.delete(lf),e.delete(lp)):(e.set(lf,`${t.dataSource.column}`),e.set(lp,t.groupBy?`${t.groupBy.column}`:""))}function _J(e,t,r){(0,mt.Z)(t,r)?(e.delete(lg),e.delete(lh)):(e.set(lg,t.aggregate.operation),e.set(lh,t.aggregate.columns?t.aggregate.columns.join(","):""))}function _0(e,t,r){!t||(0,mt.Z)(t,r)?(e.delete(lu),e.delete(lc),e.delete(lm)):"custom"===t.period?(e.set(lu,t.period),e.set(lc,t.startDate||""),e.set(lm,t.endDate||"")):(e.set(lu,t.period),e.delete(lc),e.delete(lm))}function _1(e){let[t,r]=lG(),{getNextSearchParamsForConfigurationUpdate:a}=function(){let[e]=lG(),{hasUnlimitedSavedCharts:t}=Cu();return{getNextSearchParamsForConfigurationUpdate:(0,H.useCallback)((r,a)=>{let n=a.serverVersion.configuration,i=new URLSearchParams(e);return t&&(r.type&&_X(i,r.type,n.type),r.xAxis&&_Y(i,r.xAxis,n.xAxis),r.yAxis&&_J(i,r.yAxis,n.yAxis)),"string"==typeof r.filter&&_Q(i,r.filter,n.filter),_0(i,r.time,n.time),i},[t,e])}}(),n=(0,H.useCallback)((n,{replace:i=!1}={})=>{let l=a(n,e);t.toString()!==l.toString()&&r(l,{replace:i})},[a,e,t,r]);return(0,H.useMemo)(()=>({setNextChartParams:n}),[n])}let _2={flex:1,gridTemplateColumns:"min-content 1fr min-content",textAlign:"left",width:"100%","[data-component=buttonContent]":{flex:0}},_5={width:"353px"},_3=({children:e,sx:t,...r})=>(0,O.jsx)(eB.Z,{sx:{display:"flex",mb:2,fontWeight:"semibold",...t},...r,children:e});try{_3.displayName||(_3.displayName="SelectorLabel")}catch{}let _4={success:eF.CheckCircleFillIcon,error:eF.AlertFillIcon,warning:eF.AlertFillIcon},_8={success:"success.fg",error:"danger.fg",warning:"attention.fg"},_6=({children:e,validationStatus:t,sx:r})=>{let a=t?_4[t]:void 0,n=t?_8[t]:void 0;return(0,O.jsxs)(eB.Z,{sx:{marginTop:2,alignItems:"center",color:n,display:"flex",a:{color:"currentColor",textDecoration:"underline"},...r,fontSize:0},children:[a&&(0,O.jsx)(eO.Z,{as:"span",sx:{display:"flex",mr:1},children:(0,O.jsx)(a,{size:12,fill:"currentColor"})}),(0,O.jsx)("span",{children:e})]})};try{_6.displayName||(_6.displayName="Validation")}catch{}let _7=e=>"count"!==e,_9=new Set([eA.Number]),Re=(e,t)=>`${rZ.operationLabel[e]} ${t}`,Rt={count:{label:Re("count","items"),type:"count"},sum:{label:Re("sum","a field"),type:"sum"},avg:{label:Re("avg","a field"),type:"avg"},min:{label:Re("min","a field"),type:"min"},max:{label:Re("max","a field"),type:"max"}},Rr=Object.values(Rt),Ra=(e,t)=>e?.field.name??(t?rZ.invalidFieldLabel:"None");function Rn({chart:e}){let{setNextChartParams:t}=_1(e),{allColumns:r}=df(),{updateLocalChartConfiguration:a}=_a(),n=(0,H.useMemo)(()=>r.filter(e=>_9.has(e.dataType)).map(e=>({label:e.name,icon:jA(e.dataType),field:e})),[r]),i=(0,H.useCallback)(r=>{let i={operation:r.type,columns:"count"===r.type?void 0:n[0]?.field.databaseId?[n[0].field.databaseId]:void 0},l={yAxis:{...e.localVersion.configuration.yAxis,aggregate:i}};a(e.number,l),t(l)},[n,e.localVersion.configuration.yAxis,e.number,t,a]),l=(0,H.useCallback)(r=>{let n={yAxis:{...e.localVersion.configuration.yAxis,aggregate:{...e.localVersion.configuration.yAxis.aggregate,columns:r}}};a(e.number,n),t(n)},[e.localVersion.configuration.yAxis,e.number,t,a]),s=e.localVersion.configuration.yAxis.aggregate.columns||[],o=n.find(e=>s.includes(e.field.databaseId)),d=!o&&s.length>0,u=d?{borderColor:"danger.emphasis"}:{},c=(0,O.jsx)(_6,{validationStatus:"error",children:rZ.invalidFieldErrorMessage}),m=Ra(o,d),p=Rt[e.localVersion.configuration.yAxis.aggregate.operation],f=(0,H.useId)(),h=(0,H.useId)(),g=(0,H.useId)(),y=(0,H.useId)();return(0,O.jsxs)(eO.Z,{sx:{mb:4},children:[(0,O.jsx)(_3,{id:f,children:"Y-axis"}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{id:h,"aria-labelledby":`${f} ${h}`,sx:_2,children:p?.label??"None"}),(0,O.jsx)(fj.P.Overlay,{sx:_5,children:(0,O.jsx)(mx.S,{selectionVariant:"single",...(0,ef.f)("chart-y-axis-list"),children:Rr.map((e,t)=>(0,O.jsx)(mx.S.Item,{selected:p?.type===e.type,onSelect:()=>i(e),disabled:_7(e.type)&&0===n.length,children:e.label},t))})})]}),p&&_7(p.type)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(_3,{id:g,sx:{mt:4},children:"Y-axis field"}),(0,O.jsx)(fj.P.Button,{id:y,"aria-labelledby":`${g} ${y}`,sx:{..._2,mt:3,...u},leadingVisual:o?.icon,disabled:0===n.length,children:m}),(0,O.jsx)(fj.P.Overlay,{sx:_5,children:(0,O.jsx)(mx.S,{selectionVariant:"single",...(0,ef.f)("chart-y-axis-field-list"),children:n.map((e,t)=>(0,O.jsxs)(mx.S.Item,{selected:o?.field.databaseId===e.field.databaseId,onSelect:()=>l([e.field.databaseId]),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e.icon,{})}),e.field.name]},t))})})]}),d?c:null]}):null]})}try{Rn.displayName||(Rn.displayName="YAxisSelector")}catch{}function Ri({items:e,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,yAxisAggregate:n,isChartCard:i=!1}){if(!t)return[];let l=_U(t),s=l?e.slice().sort((e,t)=>{let r=l(e,t,!1);if(0===r&&a){let n=a?_U(a):void 0;return n?.(e,t,!1)??r}return r}):e.slice();return"count"!==n.operation&&r?a?function({items:e,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,memexChartOperation:n,isChartCard:i}){let l=new Map,s=[];for(let n of e){let e=n.columns,i=_q(t,e),o=parseFloat(_q(r,e)[0]);for(let t of i){let r=l.get(t)??new Map;for(let n of(l.get(t)||l.set(t,r),_q(a,e))){s.includes(n)||s.push(n);let e=r.get(n)??[];isNaN(o)||e.push(o),r.set(n,e)}}}let o=Array.from(l.keys()),d=s.map(e=>({name:e,data:[]})),u=[];for(let[e,t]of l)for(let r of s){let a=t.get(r),i=a&&a.length>0?_t({memexChartOperation:n,values:a}):0;a&&a.length>0&&u.push([e,i,r]),d.find(e=>e.name===r)?.data.push(i??0)}return i?{xCoordinates:o,series:d}:u}({items:s,xAxisColumnModel:t,yAxisColumnModel:r,groupByColumnModel:a,memexChartOperation:n.operation,isChartCard:i}):function({items:e,xAxisColumnModel:t,yAxisColumnModel:r,memexChartOperation:a,isChartCard:n}){let i=new Map;for(let a of e){let e=a.columns,n=_q(t,e),l=parseFloat(_q(r,e)[0]);for(let e of n){let t=i.get(e)||[];isNaN(l)||t.push(l),i.set(e,t)}}let l=[{data:[],name:"Sum of Estimate"}],s=Array.from(i.keys()),o=[];for(let[e,t]of i)t.length>0&&o.push([e,_t({memexChartOperation:a,values:t})]),l[0]?.data.push(_t({memexChartOperation:a,values:t})??0);return n?{series:l,xCoordinates:s}:o}({items:s,xAxisColumnModel:t,yAxisColumnModel:r,memexChartOperation:n.operation,isChartCard:i}):a?function(e,t,r,a){let n={},i=[];for(let a of e)for(let e of _q(t,a.columns))for(let t of(void 0===n[e]&&(n[e]={}),_q(r,a.columns)))n[e]?.[t]===void 0&&(n[e][t]=0),i.includes(t)||i.push(t),n[e][t]+=1;let l=Object.keys(n),s=i.map(e=>({name:e,data:[]})),o=[];for(let e of Object.keys(n))for(let t of i){let r=n[e][t];r&&o.push([e,r,t]),s.find(e=>e.name===t)?.data.push(r??0)}return a?{xCoordinates:l,series:s}:o}(s,t,a,i):function(e,t,r){let a={};for(let r of e)for(let e of _q(t,r.columns))void 0===a[e]&&(a[e]=0),a[e]+=1;let n=[{data:[],name:"Sum of Estimate"}],i=Object.keys(a),l=[];for(let e of Object.keys(a))l.push([e,a[e]]),n[0]?.data.push(a[e]);return r?{series:n,xCoordinates:i}:l}(s,t,i)}function Rl({chartType:e,isLoading:t,series:r,colorCoding:a,...n}){switch(e){case"stacked-area":return(0,O.jsx)(_N,{...n,series:r,loading:t,colorCoding:a});case"line":return(0,O.jsx)(_k,{...n,series:r,loading:t,colorCoding:a});case"column":case"stacked-column":return(0,O.jsx)(_v,{...n,series:r,loading:t,colorCoding:a,chartStacked:"stacked-column"===e});case"bar":case"stacked-bar":return(0,O.jsx)(_x,{...n,series:r,loading:t,colorCoding:a,chartStacked:"stacked-bar"===e});default:ij(e)}}try{Rl.displayName||(Rl.displayName="ChartByType")}catch{}let Rs=(0,H.memo)(function({configuration:e,filteredItems:t,isLoading:r}){let{series:a}=function(e,t){let{items:r}=dP(),{findColumnByDatabaseId:a}=cA(),n=e.xAxis.dataSource.column,i=e.xAxis.groupBy?.column,l=e.yAxis.aggregate?.columns?.[0],s=tW(n)?a(n):void 0,o=tW(i)?a(i):void 0,d=tW(l)?a(l):void 0;return{series:{columns:function(e,t,r,a){let n=[{name:e?.name||"Unknown",dataType:"nvarchar"}];return t&&a&&"count"!==a?n.push({name:Re(a,t.name),dataType:"int"}):n.push({name:"Count",dataType:"int"}),r&&n.push({name:r.name||"Unknown",dataType:"nvarchar"}),n}(s,d,o,e.yAxis.aggregate.operation),rows:Ri({items:null===t?r:t,xAxisColumnModel:s,yAxisColumnModel:d,groupByColumnModel:o,yAxisAggregate:e.yAxis.aggregate}),isSensitive:!1}}}(e,t),{series:n,axis:i,xCoordinates:l}=function(e,t){let{items:r}=dP(),{findColumnByDatabaseId:a}=cA(),n=e.xAxis.dataSource.column,i=e.xAxis.groupBy?.column,l=e.yAxis.aggregate?.columns?.[0],s=tW(n)?a(n):void 0,o=tW(i)?a(i):void 0,d=tW(l)?a(l):void 0,u=function(e,t,r){let a={name:e?.name||"Unknown",dataType:"nvarchar"},n={name:"Count",dataType:"int"};return t&&r&&"count"!==r&&(n={name:Re(r,t.name),dataType:"int"}),{xAxis:a,yAxis:n}}(s,d,e.yAxis.aggregate.operation),{series:c,xCoordinates:m}=Ri({items:null===t?r:t,xAxisColumnModel:s,yAxisColumnModel:d,groupByColumnModel:o,yAxisAggregate:e.yAxis.aggregate,isChartCard:!0});return{series:c.filter(e=>e.data.length),axis:u,xCoordinates:m}}(e,t),{memex_chart_cards_insights:s}=n9(),{xAxis:o,yAxis:d}=i;return s?n.length?(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(__.t,{padding:"spacious",size:"xl",children:(0,O.jsx)(__.t.Chart,{series:n,xAxisTitle:o.name,xAxisOptions:{title:{text:null},categories:l},yAxisTitle:d.name,yAxisOptions:{title:{text:null},maxPadding:0,allowDecimals:!1},plotOptions:{series:{stacking:_d(e.type)?"normal":void 0,marker:{enabled:!1},pointPlacement:_o(e.type)?"on":void 0}},overrideOptionsNotRecommended:{legend:{reversed:!0,verticalAlign:"bottom",align:"right",layout:"horizontal",enabled:!0},tooltip:{valuePrefix:"&nbsp;"}},type:_s[e.type]})})}):(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:1,borderWidth:1,borderRadius:2,borderStyle:"solid",borderColor:"border.default",minHeight:"200px"},children:[(0,O.jsx)(eZ.Z,{icon:eF.GraphIcon,size:"medium",sx:{fill:"fg.muted"}}),(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:3},children:"No data available"}),(0,O.jsx)(eO.Z,{as:"p",sx:{color:"fg.muted"},children:"No results were returned."})]}):(0,O.jsx)(Rl,{chartType:e.type,isLoading:r,series:a})});try{Rs.displayName||(Rs.displayName="CurrentInsightsChart")}catch{}let Ro=({icon:e,heading:t,content:r,children:a,...n})=>(0,O.jsx)(eO.Z,{sx:{backgroundColor:e=>`${e.colors.canvas.subtle}`,maxWidth:(0,U.U2)("sizes.large"),mx:"auto",display:"flex",flexDirection:"column",gap:"24px",borderRadius:"6px",p:5},...n,children:(0,O.jsx)(c$,{icon:e,heading:t,content:r,children:a})});try{Ro.displayName||(Ro.displayName="BaseChartError")}catch{}let Rd=()=>(0,O.jsx)(Ro,{heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. You will need to delete and re-create this chart."});try{Rd.displayName||(Rd.displayName="ChartErrorFallback")}catch{}let Ru=()=>{let{openPane:e}=_l();return(0,O.jsx)(Ro,{...(0,ef.f)("chart-invalid-config-error"),heading:"This chart configuration is no longer valid",content:"A required field may have been deleted. Update the configuration or delete the chart.",children:(0,O.jsx)(cd.r,{sx:{mt:2},onClick:e,children:"Update configuration"})})};try{Ru.displayName||(Ru.displayName="InvalidConfigError")}catch{}let Rc=()=>(0,O.jsx)(Ro,{icon:eF.CircleSlashIcon,heading:"This insight chart no longer exists",content:"Select another chart to view insights"});try{Rc.displayName||(Rc.displayName="MissingChartError")}catch{}let Rm=e=>{let{updateChartName:t}=_a(),[r,a]=yh(e.name),n=(0,H.useCallback)(()=>{a(e.name)},[e.name,a]),i=(0,H.useCallback)(async()=>{if(N6(e))return;let a=r.trim();a!==e.name&&(a.length?await t.perform({chartNumber:e.number,chart:{name:a}}):n())},[e,r,t,n]);return{chartName:r,setLocalChartName:a,revertChartName:n,saveChartName:i}},Rp=({showTooltip:e,text:t="",children:r})=>e?(0,O.jsx)(fC.Z,{"aria-label":t,direction:"s",align:"right",children:r}):(0,O.jsx)(O.Fragment,{children:"children"}),Rf=(0,H.memo)(function({chart:e}){let{hasWritePermissions:t}=i4(),{chartName:r}=Rm(e),[a,n]=(0,H.useState)(!1),i=(0,H.useRef)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,O.jsx)(Rp,{showTooltip:t,text:"Rename",children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",gap:1,px:1,mx:-1},children:[(0,O.jsx)(eO.Z,{sx:{fontSize:3,fontWeight:600},...(0,ef.f)("insights-chart-name"),children:r}),t&&(0,O.jsx)(mq.h,{ref:i,as:"button",icon:eF.PencilIcon,onClick:()=>n(!0),variant:"invisible","aria-label":"Edit chart name",...(0,ef.f)("chart-name-edit-button")})]})})}),(0,O.jsx)(Rh,{chart:e,isOpen:a,setIsOpen:n,returnFocusRef:i})]})}),Rh=({chart:e,isOpen:t,setIsOpen:r,returnFocusRef:a})=>{let{chartName:n,setLocalChartName:i,revertChartName:l,saveChartName:s}=Rm(e),o=(0,H.useRef)(null),d=(0,H.useCallback)(e=>i(e.target.value),[i]),u=(0,H.useCallback)(()=>{r(!1),s()},[s,r]),c=(0,H.useCallback)(()=>{l(),r(!1)},[l,r]);return(0,O.jsxs)(fc.Z,{isOpen:t,initialFocusRef:o,returnFocusRef:a,onDismiss:c,"aria-labelledby":"chart-name-editor-header",children:[(0,O.jsx)(fc.Z.Header,{sx:{background:"none",border:"none"},id:"chart-name-editor-header",children:(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:3},children:"Edit chart name"})}),(0,O.jsx)(eO.Z,{sx:{px:3},children:(0,O.jsxs)(cX.Z,{sx:{flex:1},children:[(0,O.jsx)(cX.Z.Label,{children:"Chart name"}),(0,O.jsx)(pw.Z,{ref:o,name:"chartName",value:n,onChange:d,sx:{width:"100%"},...(0,ef.f)("chart-name-editor-input")})]})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",mt:4,py:3,px:3,borderTop:"1px solid",borderColor:"border.default",gap:1},children:[(0,O.jsx)(cd.r,{variant:"default",onClick:c,children:"Cancel"}),(0,O.jsx)(cd.r,{variant:"primary",onClick:u,children:"Save"})]})]},t?"open":"closed")};try{Rp.displayName||(Rp.displayName="ConditionalTooltip")}catch{}try{Rf.displayName||(Rf.displayName="InsightsChartName")}catch{}try{Rh.displayName||(Rh.displayName="ChartNameEditorDialog")}catch{}var Rg=r(8677);let Ry=({onResize:e}={})=>{let t=ma(gY()??null),r=(0,e5.Z)(e);return(0,uG.b)(()=>{r.current?.(t)},[t,r]),t};function Rx({chart:e,showUpsellDialog:t}){let{canCreateChart:r}=ge(),{updateLocalChartConfiguration:a,updateChartConfiguration:n,createChartConfiguration:i,resetLocalChangesForChartNumber:l}=_a(),{closePane:s}=_l(),o=l$(),d=N4(e),[u,c]=lG(),m=ur(),p=(0,H.useCallback)(async()=>{function a(){let e=N7(new URLSearchParams(u));e.toString()!==u.toString()&&c(e,{replace:!0})}N6(e)?r()?(await i.perform({chart:{configuration:e.localVersion.configuration}}),l(e.number),a(),"succeeded"===i.status.current.status&&o(eT.generatePath({...m,insightNumber:i.status.current.data.chart.number}))):t():(await n.perform({chartNumber:e.number,chart:{configuration:e.localVersion.configuration}}),a()),s()},[e,s,u,c,r,i,l,o,t,n,m]),f=(0,H.useCallback)(()=>{a(e.number,{...e.serverVersion.configuration,filter:e.localVersion.configuration.filter});let t=function(e){let t=new URLSearchParams(e);return t.delete(lr),t.delete(lf),t.delete(lp),t.delete(lh),t.delete(lg),t}(new URLSearchParams(u));u.toString()!==t.toString()&&c(t),s()},[e.localVersion.configuration.filter,e.number,e.serverVersion.configuration,s,u,c,a]);return(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,O.jsx)(cd.r,{onClick:f,disabled:!d.isDirty,...(0,ef.f)("insights-discard-changes"),children:rI.discardChanges}),(0,O.jsx)(cd.r,{variant:"primary",onClick:p,disabled:!d.isDirty,...(0,ef.f)("insights-save-changes"),children:N6(e)?rI.saveToNewChart:rI.saveChanges})]})}try{Rx.displayName||(Rx.displayName="ActionButtons")}catch{}function Rb(){return(0,O.jsx)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsxs)("g",{children:[(0,O.jsx)("line",{x1:"1.75",y1:"0.75",x2:"1.75",y2:"15.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,O.jsx)("rect",{x:"1",y:"3",width:"9",height:"3",rx:"1.5",fill:"currentColor"}),(0,O.jsx)("rect",{x:"1",y:"7",width:"13",height:"3",rx:"1.5",fill:"currentColor"}),(0,O.jsx)("rect",{x:"1",y:"11",width:"6",height:"3",rx:"1.5",fill:"currentColor"})]})})}try{Rb.displayName||(Rb.displayName="BarChartIcon")}catch{}function Rv(){return(0,O.jsxs)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,O.jsx)("line",{x1:"15.25",y1:"14.25",x2:"0.75",y2:"14.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,O.jsx)("rect",{x:"2.75",y:"6.75",width:"1.5",height:"7.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,O.jsx)("rect",{x:"6.75",y:"4.75",width:"1.5",height:"9.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"}),(0,O.jsx)("rect",{x:"10.75",y:"9.75",width:"1.5",height:"4.5",rx:"0.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinejoin:"round"})]})}try{Rv.displayName||(Rv.displayName="ColumnChartIcon")}catch{}function Rw(){return(0,O.jsxs)("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,O.jsx)("path",{d:"M0.75 14.25H0C0 14.6642 0.335786 15 0.75 15L0.75 14.25ZM0.75 13.25L0.281479 12.6643C0.103567 12.8067 0 13.0222 0 13.25H0.75ZM5.75 9.25L6.08541 8.57918L5.6562 8.36457L5.28148 8.66435L5.75 9.25ZM9.75 11.25L9.41459 11.9208C9.67891 12.053 9.99621 12.0176 10.2249 11.8305L9.75 11.25ZM15.25 6.75H16C16 6.46021 15.833 6.19635 15.5712 6.07225C15.3093 5.94815 14.9994 5.98602 14.7751 6.16953L15.25 6.75ZM15.25 14.25V15C15.6642 15 16 14.6642 16 14.25H15.25ZM1.5 14.25V13.25H0V14.25H1.5ZM1.21852 13.8357L6.21852 9.83565L5.28148 8.66435L0.281479 12.6643L1.21852 13.8357ZM5.41459 9.92082L9.41459 11.9208L10.0854 10.5792L6.08541 8.57918L5.41459 9.92082ZM10.2249 11.8305L15.7249 7.33047L14.7751 6.16953L9.27507 10.6695L10.2249 11.8305ZM14.5 6.75V14.25H16V6.75H14.5ZM15.25 13.5H0.75V15H15.25V13.5Z",fill:"currentColor"}),(0,O.jsx)("path",{d:"M0.281479 8.91435C-0.0419677 9.17311 -0.0944088 9.64507 0.164348 9.96852C0.423106 10.292 0.895075 10.3444 1.21852 10.0857L0.281479 8.91435ZM5.75 5.5L6.08541 4.82918C5.82376 4.69835 5.50991 4.7316 5.28148 4.91435L5.75 5.5ZM9.75 7.5L9.41459 8.17082L9.87424 8.40065L10.2545 8.05496L9.75 7.5ZM15.7545 3.05496C16.061 2.77632 16.0836 2.30199 15.805 1.9955C15.5263 1.689 15.052 1.66641 14.7455 1.94504L15.7545 3.05496ZM1.21852 10.0857L6.21852 6.08565L5.28148 4.91435L0.281479 8.91435L1.21852 10.0857ZM5.41459 6.17082L9.41459 8.17082L10.0854 6.82918L6.08541 4.82918L5.41459 6.17082ZM10.2545 8.05496L15.7545 3.05496L14.7455 1.94504L9.2455 6.94504L10.2545 8.05496Z",fill:"currentColor"})]})}try{Rw.displayName||(Rw.displayName="StackedAreaChartIcon")}catch{}let Rj={bar:{label:"Bar",type:"bar",icon:Rb},column:{label:"Column",type:"column",icon:Rv},line:{label:"Line",type:"line",icon:eF.GraphIcon},"stacked-area":{label:"Stacked area",type:"stacked-area",icon:Rw},"stacked-bar":{label:"Stacked bar",type:"stacked-bar",icon:Rb},"stacked-column":{label:"Stacked column",type:"stacked-column",icon:Rv}},RC=Object.values(Rj);function RI({chart:e}){let{updateLocalChartConfiguration:t}=_a(),{number:r,localVersion:{configuration:{type:a}}}=e,n=Rj[a],{setNextChartParams:i}=_1(e),l=(0,H.useCallback)(e=>{let a={type:e.type};t(r,a),i(a)},[t,r,i]),s=(0,H.useId)(),o=(0,H.useId)();return(0,O.jsxs)(eO.Z,{sx:{mb:4},children:[(0,O.jsx)(_3,{id:s,children:"Layout"}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{id:o,"aria-labelledby":`${s} ${o}`,leadingVisual:n?.icon,sx:_2,children:n?.label??"None"}),(0,O.jsx)(fj.P.Overlay,{sx:_5,children:(0,O.jsx)(mx.S,{selectionVariant:"single",...(0,ef.f)("chart-layout-list"),children:RC.map((e,t)=>(0,O.jsxs)(mx.S.Item,{selected:e.type===a,onSelect:()=>l(e),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e.icon,{})}),e.label]},t))})})]})]})}try{RI.displayName||(RI.displayName="LayoutSelector")}catch{}let RS=new Set([eA.Iteration,eA.SingleSelect,eA.Milestone,eA.Repository,eA.Labels,eA.Assignees,eA.IssueType,eA.ParentIssue]),Rk=new Set([eA.Iteration,eA.SingleSelect,eA.Repository,eA.Labels]),RT=new Set([eA.Milestone,eA.Assignees]),RN=(e,t)=>e?.label??(t?rZ.invalidFieldLabel:"None"),R_={borderColor:"danger.emphasis"},RR=e=>({..._2,...e?R_:{}});function RP({chart:e}){let{allColumns:t}=df(),{findColumnByName:r}=hn(),{updateLocalChartConfiguration:a}=_a(),{setNextChartParams:n}=_1(e),i=r("Status"),{memex_historical_charts_on_assignees_milestones:l}=n9(),s=(0,H.useCallback)(t=>{let r={xAxis:{...e.localVersion.configuration.xAxis,dataSource:{column:t.type},groupBy:"time"===t.type?{column:i.databaseId}:void 0},yAxis:"time"===t.type?{aggregate:{operation:"count"}}:e.localVersion.configuration.yAxis};a(e.number,r),n(r)},[i.databaseId,e.localVersion.configuration.xAxis,e.localVersion.configuration.yAxis,e.number,n,a]),o=(0,H.useCallback)(t=>{if("time"===t)return;let r={xAxis:{...e.localVersion.configuration.xAxis,groupBy:null==t?void 0:{column:t}}};a(e.number,r),n(r)},[e.localVersion.configuration.xAxis,e.number,n,a]),d=(0,H.useMemo)(()=>t.filter(e=>RS.has(e.dataType)).map(e=>({label:e.name,icon:jA(e.dataType),type:e.databaseId,category:"field"})).concat({label:"Time",type:"time",icon:eF.CalendarIcon,category:"historical"}).sort((e,t)=>e.label.localeCompare(t.label)),[t]),u=(0,H.useMemo)(()=>{let e=new Set([...Rk,...l?RT:[]]);return t.filter(t=>e.has(t.dataType)).map(e=>({label:e.name,icon:jA(e.dataType),type:e.databaseId,category:"field"})).sort((e,t)=>e.label.localeCompare(t.label))},[t,l]),c=d.find(t=>t.type===e.localVersion.configuration.xAxis.dataSource.column),m=!c&&!!e.localVersion.configuration.xAxis.dataSource.column,p=RN(c,m),f=(0,H.useMemo)(()=>d.filter(e=>"historical"===e.category),[d]),h=(0,H.useMemo)(()=>d.filter(e=>"field"===e.category),[d]),g=(0,H.useMemo)(()=>N8(e)?u:d.filter(e=>!("time"===e.type||e.type===c?.type)),[e,u,c?.type,d]),y=g.find(t=>t.type===e.localVersion.configuration.xAxis.groupBy?.column),x=!y&&!!e.localVersion.configuration.xAxis.groupBy?.column,b=RN(y,x),v=(0,O.jsx)(_6,{validationStatus:"error",children:rZ.invalidFieldErrorMessage}),{isInsightsEnabled:w}=Cu(),j="time"===e.localVersion.configuration.xAxis.dataSource.column,C=(0,H.useId)(),I=(0,H.useId)(),S=(0,H.useId)(),k=(0,H.useId)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:{mb:4},children:[(0,O.jsx)(_3,{id:C,children:"X-axis"}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{leadingVisual:c?.icon,sx:RR(m),id:I,"aria-labelledby":`${C} ${I}`,children:p}),(0,O.jsx)(fj.P.Overlay,{sx:_5,children:(0,O.jsxs)(mx.S,{selectionVariant:"single",...(0,ef.f)("chart-x-axis-list"),children:[w&&(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Historical"}),f.map((e,t)=>(0,O.jsxs)(mx.S.Item,{selected:c?.type===e.type,onSelect:()=>s(e),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e.icon,{})}),e.label]},t))]}),(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:w?"Fields":""}),h.map((e,t)=>(0,O.jsxs)(mx.S.Item,{selected:c?.type===e.type,onSelect:()=>s(e),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e.icon,{})}),e.label]},t))]})]})})]}),m?v:null]}),j?null:(0,O.jsxs)(eO.Z,{sx:{mb:4},children:[(0,O.jsx)(_3,{id:S,children:"Group by (optional)"}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{id:k,"aria-labelledby":`${S} ${k}`,leadingVisual:y?.icon,sx:RR(x),children:b}),(0,O.jsx)(fj.P.Overlay,{sx:_5,children:(0,O.jsxs)(mx.S,{selectionVariant:"single",...(0,ef.f)("chart-x-axis-group-by-list"),children:[(0,O.jsx)(mx.S.Item,{selected:void 0===e.localVersion.configuration.xAxis.groupBy,onSelect:()=>o(null),children:"None"}),g.map((t,r)=>(0,O.jsxs)(mx.S.Item,{selected:e.localVersion.configuration.xAxis.groupBy?.column===t.type,onSelect:()=>o(t.type),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(t.icon,{})}),t.label]},r))]})})]}),x?v:null]})]})}try{RP.displayName||(RP.displayName="XAxisSelector")}catch{}let RD=({chart:e,showUpsellDialog:t})=>(0,O.jsxs)("div",{children:[(0,O.jsxs)(eO.Z,{sx:{px:4},children:[(0,O.jsx)(RI,{chart:e}),(0,O.jsx)(RP,{chart:e}),(0,O.jsx)(Rn,{chart:e})]}),(0,O.jsx)(eO.Z,{sx:{p:4,borderTop:"1px solid",borderColor:"border.default"},children:(0,O.jsx)(Rx,{chart:e,showUpsellDialog:t})})]}),RE=({chart:e,showUpsellDialog:t,returnFocusRef:r})=>{let{closePane:a,isOpen:n}=_l(),i=Ry(),{containerRef:l}=(0,c0.P)();return n?(0,O.jsx)(Rg.ZP,{returnFocusRef:r,onEscape:a,onClickOutside:a,children:(0,O.jsxs)(eO.Z,{ref:l,sx:{display:"flex",flexDirection:"column",overflow:"hidden",position:"fixed",bottom:"0",right:"0",width:400,height:i.clientHeight,backgroundColor:"canvas.default",boxShadow:"shadow.large",borderLeft:"1px solid",borderColor:"border.default",":focus":{outline:"none"}},...(0,ef.f)("insights-configuration-pane"),children:[(0,O.jsxs)(eO.Z,{sx:{px:4,py:3,display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:2},children:"Configure chart"}),(0,O.jsx)(mq.h,{"aria-label":"Close configuration pane",variant:"invisible",icon:eF.XIcon,sx:{px:2},onClick:a,...(0,ef.f)("side-panel-button-close")})]}),(0,O.jsx)(RD,{chart:e,showUpsellDialog:t})]})}):null};try{RD.displayName||(RD.displayName="InsightsConfigurationPaneForm")}catch{}try{RE.displayName||(RE.displayName="InsightsConfigurationPane")}catch{}let RA=({filteredItems:e,filterValue:t,handleFilterValueChange:r,onClearButtonClick:a,setValueFromSuggestion:n,onSaveChanges:i,onResetChanges:l,inputRef:s,hideSaveButton:o})=>{let{items:d}=dP(),u=(0,H.useMemo)(()=>({items:d}),[d]);return(0,O.jsx)(mD.Provider,{value:u,children:(0,O.jsx)(pK,{inputRef:s,height:"32px",value:t,onChange:r,onClearButtonClick:a,setValueFromSuggestion:n,filterCount:e?e.length:null,onSaveChanges:i,onResetChanges:l,hideSaveButton:o})})};try{RA.displayName||(RA.displayName="InsightsFilters")}catch{}function RM(){let[e,t]=(0,H.useState)(!1),{postStats:r}=os(),a=(0,H.useCallback)(()=>{t(!0),r({name:"insights_upsell_dialog_open"})},[r]),n=(0,H.useCallback)(()=>t(!1),[]);return{showDialog:a,InsightsUpsellDialog:(0,H.useCallback)(()=>e?(0,O.jsx)(RL,{hideDialog:n}):null,[n,e])}}function RL({hideDialog:e}){let{savedChartsLimit:t}=Cu(),r=jT("insightsChartLimitDialog","banner"),{postStats:a}=os();return(0,O.jsxs)(wE.V,{"aria-labelledby":"insights-chart-limits-dialog-title",onClose:()=>e(),width:"xlarge",role:"alertdialog",renderHeader:()=>(0,O.jsx)(eO.Z,{sx:{backgroundImage:`url(${r})`,backgroundRepeat:"no-repeat",backgroundPosition:"left",backgroundSize:"100%",height:"142px",borderTopLeftRadius:"12px",borderTopRightRadius:"12px"}}),footerButtons:[{content:rZ.upsellDialogCancelButton,onClick:()=>e()},{as:"a",buttonType:"primary",content:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eZ.Z,{icon:eF.LinkExternalIcon,sx:{mr:1}}),rZ.upsellDialogUpgradePlanButton]}),href:"https://github.com/pricing",sx:{ml:3},target:"_blank",rel:"noreferrer",onClick:()=>a({name:"insights_upsell_dialog_upgrade_click"})}],children:[(0,O.jsx)(eB.Z,{id:"insights-chart-limits-dialog-title",sx:{fontSize:4,fontWeight:"bold",my:3,px:3},children:rZ.upsellDialogTitle}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",mt:2,px:3},children:[(0,O.jsx)(eB.Z,{children:rZ.planUpgradeText(t)}),(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold",mt:2},children:rZ.upsellDialogSubtitle}),(0,O.jsx)(RF,{text:rZ.upsellDialogBullet1}),(0,O.jsx)(RF,{text:rZ.upsellDialogBullet2}),(0,O.jsx)(RF,{text:rZ.upsellDialogBullet3})]})]})}function RF({text:e}){return(0,O.jsxs)(eO.Z,{sx:{mt:2},children:[(0,O.jsx)(eZ.Z,{sx:{mr:2,color:"success.fg"},icon:eF.CheckIcon})," ",(0,O.jsx)(eB.Z,{children:e})]})}try{(v=InsightsUpsellDialog).displayName||(v.displayName="InsightsUpsellDialog")}catch{}try{RL.displayName||(RL.displayName="UpsellDialog")}catch{}try{RF.displayName||(RF.displayName="UpsellDialogChecklistItem")}catch{}var RZ=r(31930),RO=r(15559),RV=r(5585),RB=r(28999);let R$="yyyy-MM-dd",Rz=[{name:"Date",dataType:"datetime"},{name:"count",dataType:"int"},{name:"State",dataType:"nvarchar"}];function RW(){let e=(0,_f.gh)(),t=_f.O9[(0,_f.DO)(e)].scale,r=t.green[(0,_f.OT)(e,4,5)],a=t.green[(0,_f.OT)(e,0,9)],n=t.purple[(0,_f.OT)(e,5,5)],i=t.purple[(0,_f.OT)(e,0,9)],l=t.red[(0,_f.OT)(e,4,5)],s=t.red[(0,_f.OT)(e,0,9)],o=t.gray[(0,_f.OT)(e,6,4)],d=t.gray[(0,_f.OT)(e,0,7)];if(void 0!==r&&void 0!==a&&void 0!==n&&void 0!==i&&void 0!==l&&void 0!==s&&void 0!==o&&void 0!==d)return{[RG.OPEN]:{borderColor:r,backgroundColor:a},[RG.COMPLETED]:{borderColor:n,backgroundColor:i},[RG.CLOSED]:{borderColor:l,backgroundColor:s},[RG.NOT_PLANNED]:{borderColor:o,backgroundColor:d}}}let RG={OPEN:"Open",COMPLETED:"Completed",CLOSED:"Closed pull requests",NOT_PLANNED:"Not planned"};function RU(e){return e?new Date(e):void 0}function RH(e){return e.issueCreatedAt?e.issueCreatedAt:"DraftIssue"===e.contentType?e.createdAt:void 0}function Rq({period:e,startDate:t,endDate:r,items:a}){let n=new Date;switch(e){case"2W":return(0,RZ.D)({start:(0,np.k)(n,14),end:n});case"1M":return(0,RZ.D)({start:(0,RO.W)(n,1),end:n});case"3M":return(0,RZ.D)({start:(0,RO.W)(n,3),end:n});case"max":{let e=(0,RV.V)(a.map(e=>{let t=RH(e);return t?new Date(t):n})),t=(0,np.k)(n,7);return(0,RZ.D)({start:(0,nf.R)(e,t)?e:t,end:n})}case"custom":return(0,RZ.D)({start:t?new Date(t):n,end:r?new Date(r):n})}}function RK(e){return e?(0,eE.WU)(new Date(e),R$).toString():""}function RQ(e){let t=e.columns?.Title;return t?.contentType===eL.PullRequest&&t.value.state===aw.Merged}function RX({items:e,dates:t}){let r=(0,RV.V)(t);return e.reduce((e,t)=>{let a=RH(t);return a&&(0,nf.R)(new Date(a),r)&&e.open++,t.issueClosedAt&&(0,nf.R)(new Date(t.issueClosedAt),r)&&(t.contentType===eL.Issue?(t.stateReason===av.NotPlanned?e.notPlanned++:e.completed++,e.open--):t.contentType===eL.PullRequest&&(RQ(t)?e.completed++:e.closed++,e.open--)),e},{open:0,completed:0,closed:0,notPlanned:0})}function RY({items:e}){return e.reduce((e,t)=>{let r=RK(RH(t));if(!r)return e;e.open.get(r)?e.open.set(r,(e.open.get(r)||0)+1):e.open.set(r,1);let a=RK(t.issueClosedAt),n=t.contentType===eL.Issue?t.stateReason===av.NotPlanned?e.notPlanned:e.completed:RQ(t)?e.completed:e.closed;return a&&(n.get(a)?n.set(a,(n.get(a)||0)+1):n.set(a,1)),e},{open:new Map,completed:new Map,closed:new Map,notPlanned:new Map})}function RJ(e,t){let r=RG[t],a=RW()?.[r],n=e.series.find(e=>e.name===r);void 0===n?e.series.push({name:r,data:[e[t]],fillColor:a?.backgroundColor,color:a?.borderColor,index:R2(r)}):n.data.push(e[t])}function R0({item:e,date:t,startDate:r}){let a=RU(RH(e)),n=RU(e.issueClosedAt);if(n&&((0,nf.R)(n,t)||(0,RB.K)(n,t))){if((0,nf.R)(n,r))return;if(e.contentType===eL.Issue)return e.stateReason===av.NotPlanned?RG.NOT_PLANNED:RG.COMPLETED;if(e.contentType!==eL.PullRequest)return;return RQ(e)?RG.COMPLETED:RG.CLOSED}if(a&&((0,nf.R)(a,t)||(0,RB.K)(a,t)))return RG.OPEN}function R1(e){switch(e){case RG.OPEN:return 4;case RG.COMPLETED:return 3;case RG.CLOSED:return 2;case RG.NOT_PLANNED:return 1;default:return 0}}function R2(e){switch(e){case RG.OPEN:return 0;case RG.COMPLETED:return 1;case RG.CLOSED:return 2;case RG.NOT_PLANNED:return 3;default:return 4}}let R5=(0,H.memo)(function({configuration:e,endDate:t,filteredItems:r,isLoading:a,startDate:n}){let{series:i}=function({configuration:e,filteredItems:t,startDate:r,endDate:a}){let n=e.time?.period||"2W",{items:i}=dP(),{findColumnByDatabaseId:l}=cA(),s=t||i,o=Rq({period:n,startDate:r,endDate:a,items:s}),d=e.yAxis.aggregate,u=d?.columns?.[0],c=tW(u)?l(u):void 0;return{series:{columns:Rz,rows:"count"!==d.operation&&c?function({items:e,dates:t,yAxisColumnModel:r,memexChartOperation:a}){let n=(0,RV.V)(t),i=new Map,l=new Map(t.map(e=>[RK(e.toISOString()),new Map([[RG.NOT_PLANNED,new Set],[RG.COMPLETED,new Set],[RG.CLOSED,new Set],[RG.OPEN,new Set]])])),s=new Set([RG.NOT_PLANNED,RG.COMPLETED,RG.CLOSED,RG.OPEN]);for(let a of e){let e=parseFloat(_q(r,a.columns)[0]);for(let r of(i.set(a.id,e),t)){let e=RK(r.toISOString()),t=R0({item:a,date:r,startDate:n});t&&(l.get(e)?.get(t)?.add(a.id),s.delete(t))}}let o=[];for(let[e,t]of l)for(let[r,n]of t){let t=_t({memexChartOperation:a,values:Array.from(n).map(e=>i.get(e)||0)});s.has(r)||o.push([e,t||0,r])}return o.sort((e,t)=>R1(e[2])-R1(t[2]))}({items:s,dates:o,yAxisColumnModel:c,memexChartOperation:d.operation}):function({items:e,dates:t}){if(!e.length)return[];let r=RX({items:e,dates:t}),a=RY({items:e});return t.reduce((e,t)=>{let n=(0,eE.WU)(t,R$).toString(),i=a.open.get(n)||0,l=a.completed.get(n)||0,s=a.closed.get(n)||0,o=a.notPlanned.get(n)||0;return e.open=e.open+i-l-s-o,e.completed+=l,e.closed+=s,e.notPlanned+=o,a.notPlanned.size>0&&e.rows.push([n,e.notPlanned,RG.NOT_PLANNED]),a.closed.size>0&&e.rows.push([n,e.closed,RG.CLOSED]),a.completed.size>0&&e.rows.push([n,e.completed,RG.COMPLETED]),a.open.size+r.open>0&&e.rows.push([n,e.open,RG.OPEN]),e},{rows:[],open:r.open,completed:0,closed:0,notPlanned:0}).rows.sort((e,t)=>R1(e[2])-R1(t[2]))}({items:s,dates:o}),isSensitive:!1}}}({configuration:e,filteredItems:r,startDate:n,endDate:t}),{memex_chart_cards_insights:l}=n9(),{series:s,xCoordinates:o}=function({configuration:e,filteredItems:t,startDate:r,endDate:a}){let n=e.time?.period||"2W",{items:i}=dP(),{findColumnByDatabaseId:l}=cA(),s=t||i,o=Rq({period:n,startDate:r,endDate:a,items:s}),d=e.yAxis.aggregate,u=d?.columns?.[0],c=tW(u)?l(u):void 0;return"count"!==d.operation&&c?function({items:e,dates:t,yAxisColumnModel:r,memexChartOperation:a}){let n=(0,RV.V)(t),i=new Map,l=new Map(t.map(e=>[RK(e.toISOString()),new Map([[RG.NOT_PLANNED,new Set],[RG.COMPLETED,new Set],[RG.CLOSED,new Set],[RG.OPEN,new Set]])])),s=new Set([RG.NOT_PLANNED,RG.COMPLETED,RG.CLOSED,RG.OPEN]);for(let a of e){let e=parseFloat(_q(r,a.columns)[0]);for(let r of(i.set(a.id,e),t)){let e=RK(r.toISOString()),t=R0({item:a,date:r,startDate:n});t&&(l.get(e)?.get(t)?.add(a.id),s.delete(t))}}let o=[],d=[];for(let[e,t]of l)for(let[r,n]of(o.push(e),t)){let e=_t({memexChartOperation:a,values:Array.from(n).map(e=>i.get(e)||0)});if(!s.has(r)){let t=d.find(e=>e.name===r);if(void 0===t){let t=RW()?.[r];d.push({name:r,data:[e||0],fillColor:t?.backgroundColor,color:t?.borderColor,index:R2(r)})}else t.data.push(e||0)}}return{series:d,xCoordinates:o}}({items:s,dates:o,yAxisColumnModel:c,memexChartOperation:d.operation}):function({items:e,dates:t}){if(e.length){let r=RX({items:e,dates:t}),a=RY({items:e}),{series:n,xCoordinates:i}=t.reduce((e,t)=>{let n=(0,eE.WU)(t,R$).toString(),i=a.open.get(n)||0,l=a.completed.get(n)||0,s=a.closed.get(n)||0,o=a.notPlanned.get(n)||0;return e.OPEN=e.OPEN+i-l-s-o,e.COMPLETED+=l,e.CLOSED+=s,e.NOT_PLANNED+=o,e.xCoordinates.push((0,eE.WU)(t,"MMM d")),a.notPlanned.size>0&&RJ(e,"NOT_PLANNED"),a.closed.size>0&&RJ(e,"CLOSED"),a.completed.size>0&&RJ(e,"COMPLETED"),a.open.size+r.open>0&&RJ(e,"OPEN"),e},{series:[],xCoordinates:[],OPEN:r.open,COMPLETED:0,CLOSED:0,NOT_PLANNED:0});return{series:n,xCoordinates:i}}return{series:[],xCoordinates:[]}}({items:s,dates:o})}({configuration:e,filteredItems:r,startDate:n,endDate:t}),d=e.type;return l?s.length?(0,O.jsx)(__.t,{padding:"spacious",size:"xl",children:(0,O.jsx)(__.t.Chart,{series:s,xAxisTitle:"Date",xAxisOptions:{title:{text:null},categories:o,tickAmount:28},yAxisTitle:"items",yAxisOptions:{title:{text:null},maxPadding:0,allowDecimals:!1},plotOptions:{series:{stacking:_d(d)?"normal":void 0,marker:{enabled:!1},pointPlacement:_o(e.type)?"on":void 0}},overrideOptionsNotRecommended:{legend:{reversed:!0,align:"right",layout:"horizontal",verticalAlign:"bottom"},tooltip:{valuePrefix:"&nbsp;"}},type:_s[d]})}):(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:1,borderWidth:1,borderRadius:2,borderStyle:"solid",borderColor:"border.default",minHeight:"200px"},children:[(0,O.jsx)(eZ.Z,{icon:eF.GraphIcon,size:"medium",sx:{fill:"fg.muted"}}),(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:3},children:"No data available"}),(0,O.jsx)(eO.Z,{as:"p",sx:{color:"fg.muted"},children:"No results were returned."})]}):(0,O.jsx)(Rl,{chartType:d,isLoading:a,series:i,colorCoding:RW()})});try{R5.displayName||(R5.displayName="LeanHistoricalInsightsChart")}catch{}function R3({size:e,color:t}){return`0 0 0 ${e} ${t}`}let R4=({startDate:e,endDate:t})=>{let[r,a]=lG(),n=(0,H.useMemo)(()=>{let r=(0,rx.D)(e??""),a=(0,rx.D)(t??"");return(0,ti.J)(r)&&(0,ti.J)(a)?{from:r,to:a}:null},[t,e]),i=(0,H.useCallback)(e=>{if(!e)return;let t=new URLSearchParams(r);t.set(lu,"custom"),t.set(lc,(0,yU.c)(e.from,{representation:"date"})),t.set(lm,(0,yU.c)(e.to,{representation:"date"})),a(t)},[a,r]),l=null!==n;return(0,O.jsx)(yW.DatePicker,{variant:"range",value:n,onChange:i,placeholder:"Custom range",anchor:({children:e,...t})=>(0,O.jsxs)(cd.r,{variant:"invisible",sx:{fontWeight:"normal",bg:l?"btn.outline.selectedBg":"transparent",color:l?"btn.outline.selectedText":"fg.default",":hover":{bg:l?"btn.outline.selectedBg":"transparent",boxShadow:e=>R3({size:"1px",color:e.colors.btn.outline.hoverBorder})}},...(0,ef.f)("insight-custom-date-picker"),...t,children:[(0,O.jsx)(eF.CalendarIcon,{}),(0,O.jsx)(eB.Z,{sx:{px:2},children:e}),(0,O.jsx)(eF.ChevronDownIcon,{})]})})};try{R4.displayName||(R4.displayName="InsightCustomDatePicker")}catch{}let R8=[{value:"2W",ariaLabel:"Last 2 weeks"},{value:"1M",ariaLabel:"Last month"},{value:"3M",ariaLabel:"Last 3 months"},{text:"Max",value:"max"}];function R6({periodValue:e,selected:t,children:r,"aria-label":a}){let n=(0,K.TH)(),i=(0,H.useMemo)(()=>{let t=new URLSearchParams(n.search);return t.set(lu,e),t.delete(lc),t.delete(lm),{pathname:n.pathname,search:t.toString()}},[e,n.pathname,n.search]),l=(0,H.useCallback)(()=>(0,jg.x)(rZ.periodNavigationLinkAnnouncement(a??r)),[a,r]);return(0,O.jsx)(eO.Z,{as:"li",children:(0,O.jsx)(eO.Z,{as:lz,"aria-current":t,"aria-label":a,to:i,onClick:l,sx:{display:"flex",alignItems:"center",px:2,borderRadius:"6px",minHeight:"30px",textDecoration:"none",color:t?"fg.onEmphasis":"fg.default",backgroundColor:t?"accent.emphasis":"transparent",borderColor:t?"accent.emphasis":"transparent",":focus-visible":{outlineOffset:"1px"},"&:hover":{textDecoration:"none",backgroundColor:t?"accent.emphasis":"canvas.subtle"}},children:r},e)})}function R7({period:e}){return(0,O.jsx)("nav",{"aria-label":"Time period",children:(0,O.jsx)(eO.Z,{as:"ul",sx:{listStyle:"none",margin:0,padding:0,display:"flex",gap:2},children:R8.map((t,r)=>(0,O.jsx)(R6,{periodValue:t.value,selected:e===t.value||!e&&0===r,"aria-label":t.ariaLabel,children:t.text??t.value},t.value))})})}try{R6.displayName||(R6.displayName="PeriodNavigationLink")}catch{}try{R7.displayName||(R7.displayName="PeriodNavigation")}catch{}let R9=(0,H.memo)(function(){let e=(0,K.UO)(),{getChartConfigurationByNumber:t}=ge(),r=t(e.insightNumber?Number(e.insightNumber):0);if(!r)return(0,O.jsx)(Rc,{});let a=(0,O.jsx)(Rd,{});return(0,O.jsx)(ErrorBoundary,{fallback:a,children:(0,O.jsx)(Pr,{chart:r})},r.number)}),Pe={minWidth:"100%",minHeight:"200px",aspectRatio:["4/3","4/3","16 / 9"],maxWidth:"100%",[`& ${_w}`]:{width:"100%",display:"block",height:"100%"},[`& ${_y},
    & ${_S},
    & ${_b},
    & ${_T}`]:{width:"100%",display:"block",height:"100%",border:"1px solid",borderColor:"border.default",borderRadius:2,p:5},"& .redaction_msg":{ml:"unset !important"}},Pt={width:"100%",height:"100%"},Pr=(0,H.memo)(function({chart:e}){let{updateChartConfiguration:t}=_a(),[r,a]=lG(),{filteredItems:n,filterValue:i,handleFilterValueChange:l,onClearButtonClick:s,setValueFromSuggestion:o,resetFilter:d,inputRef:u}=function(e){let{localFilterValue:t,setLocalFilterValueAndSyncToQueryParam:r,resetFilter:a}=function(e){let t=e.localVersion.configuration.filter,r=e.serverVersion.configuration.filter,{updateLocalChartConfiguration:a}=_a(),n=(0,xh.Z)(),[i,l]=lG(),s=(0,H.useRef)(null),o=(0,H.useRef)(!1);(0,H.useEffect)(()=>()=>{s.current&&window.clearTimeout(s.current)},[]);let[d,u]=(0,H.useState)(()=>i.get(lt)??t),c=(0,H.useCallback)((t,r={immediate:!1})=>{function d(){let n=new URLSearchParams(i);t===e.serverVersion.configuration.filter?n.delete(lt):n.set(lt,t),a(e.number,{filter:t}),l(n,{replace:r.replace})}u(t),r.skipNextSyncFromExternalChange&&(o.current=!0),s.current&&window.clearTimeout(s.current),r.immediate?d():s.current=window.setTimeout(()=>{n()&&d()},200)},[i,e.serverVersion.configuration.filter,e.number,a,l,n]),m=(0,e5.Z)(c);return(0,H.useEffect)(function(){if(o.current)o.current=!1;else{let e=new URLSearchParams(window.location.search);m.current(e.get(lt)??t,{immediate:!0,replace:!0})}},[t,m,e.number]),{localFilterValue:d,setLocalFilterValueAndSyncToQueryParam:c,resetFilter:(0,H.useCallback)(()=>{m.current(r,{immediate:!0})},[r,m]),setLocalFilterValue:u}}(e),{filteredItems:n}=function(e){let t=T2(e),{items:r}=dP(),{itemMatchesFilterQuery:a}=dh();return{filteredItems:(0,H.useMemo)(()=>t.trim()?r.filter(e=>a(e,o4(t))):null,[t,r,a])}}(t),i=(0,H.useRef)(null),l=t.trim(),s=(0,H.useMemo)(()=>l?()=>{r("",{immediate:!0,skipNextSyncFromExternalChange:!0})}:void 0,[l,r]),o=(0,H.useCallback)(e=>r(e,{immediate:!0,skipNextSyncFromExternalChange:!0}),[r]);return{chart:e,filteredItems:n,filterValue:t,handleFilterValueChange:(0,H.useCallback)(e=>{r(e.target.value,{immediate:!1,skipNextSyncFromExternalChange:!0})},[r]),onClearButtonClick:s,setValueFromSuggestion:o,resetFilter:a,inputRef:i}}(e),{endDate:c,period:m,startDate:p}=function(e){let t=N8(e),[r]=lG(),{time:a}=e.localVersion.configuration,{period:n,startDate:i,endDate:l}=_p(r,a),{updateLocalChartConfiguration:s}=_a();return(0,H.useEffect)(()=>{t&&"custom"!==n&&s(e.number,{time:{period:n}})},[e.number,t,n,s]),(0,H.useEffect)(()=>{t&&i&&l&&s(e.number,{time:{period:"custom",startDate:i,endDate:l}})},[e.number,t,i,l,s]),{endDate:l,period:n,startDate:i}}(e),{openPane:f,isOpen:h}=_l(),{isLoading:g,isValid:y}=function(e){let{getFieldIdsFromFilter:t}=Tg(),{missingFieldIds:r,addPotentiallyMissingFieldIds:a}=Th(),{findColumnByDatabaseId:n}=cA(),[i,l]=(0,H.useState)(!0);return(0,H.useEffect)(()=>{let r=t(e.filter),s=new Set;if("number"==typeof e.xAxis.dataSource.column){let t=e.xAxis.dataSource.column,a=n(t);a?r.add(a.id):s.add(t)}if(e.xAxis.groupBy){let t=e.xAxis.groupBy.column,a=n(t);a?r.add(a.id):s.add(t)}if(e.yAxis.aggregate.columns)for(let t of e.yAxis.aggregate.columns){let e=n(t);e?r.add(e.id):s.add(t)}l(0===s.size),i&&r.size>0&&a([...r])},[a,e.filter,e.xAxis.dataSource.column,e.xAxis.groupBy,e.yAxis.aggregate.columns,n,t,l,i]),(0,H.useMemo)(()=>({isLoading:r.length>0,isValid:i,missingFieldIds:r}),[r,i])}(e.localVersion.configuration),x=(0,H.useCallback)(async()=>{if(N6(e))return;await t.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration,filter:i}}});let n=new URLSearchParams(r);n.delete(lt),a(n,{replace:!0})},[e,i,r,a,t]),b=N4(e),v=N6(e),w=!v,j=N8(e),{InsightsUpsellDialog:C,showDialog:I}=RM(),S=(0,H.useRef)(null);return(0,O.jsxs)(eO.Z,{sx:{maxWidth:(0,U.U2)("sizes.large"),mx:"auto",display:"flex",flexDirection:"column",gap:"24px"},children:[(0,O.jsxs)(cG.Z,{...(0,ef.f)("insights-header"),as:"h2",sx:{borderBottomStyle:"solid",borderBottomWidth:"1px",borderBottomColor:"border.muted",fontSize:4,fontWeight:"normal",pb:2,display:"flex",justifyContent:"space-between"},children:[v?e.name:(0,O.jsx)(Rf,{chart:e}),(0,O.jsx)(eO.Z,{children:(0,O.jsx)(cd.r,{ref:S,leadingVisual:eF.PencilIcon,onClick:f,...(0,ef.f)("insights-configuration-pane-button-open"),children:"Configure"})})]}),e.description?(0,O.jsxs)(eB.Z,{sx:{fontSize:1},...(0,ef.f)("insights-description"),children:[e.description," "]}):null,(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:(0,O.jsx)(eO.Z,{sx:{width:"100%"},children:(0,O.jsx)(RA,{inputRef:u,filteredItems:n,filterValue:i,handleFilterValueChange:l,onClearButtonClick:s,setValueFromSuggestion:o,onSaveChanges:w&&b.isFilterDirty?x:void 0,hideSaveButton:!w,onResetChanges:b.isFilterDirty?d:void 0})})}),y?(0,O.jsxs)(O.Fragment,{children:[j?(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)(R7,{period:m}),(0,O.jsx)(R4,{startDate:p,endDate:c})]}):null,(0,O.jsx)(eO.Z,{sx:Pe,children:(0,O.jsx)(eO.Z,{sx:Pt,children:j?(0,O.jsx)(R5,{configuration:e.localVersion.configuration,isLoading:g,filteredItems:n,filterValue:i,startDate:p,endDate:c}):(0,O.jsx)(Rs,{configuration:e.localVersion.configuration,isLoading:g,filterValue:i,filteredItems:n})})})]}):(0,O.jsx)(Ru,{}),h&&(0,O.jsx)(RE,{chart:e,showUpsellDialog:I,returnFocusRef:S}),(0,O.jsx)(C,{})]})});try{R9.displayName||(R9.displayName="InsightsChartView")}catch{}try{Pr.displayName||(Pr.displayName="InsightChartContent")}catch{}let Pa={position:"relative"},Pn=(0,H.memo)(function({children:e,isDirty:t,hideDirtyState:r=!1,...a}){let n=r?{}:{height:"8px",width:"8px",backgroundColor:"accent.emphasis",top:"-1px",right:"-3px",borderRadius:"100%",boxShadow:e=>`0 0 0 2px ${e.colors.canvas.overlay}`,flex:"none",...a.sx},i=(0,H.useRef)(null),l={...a,title:void 0,ref:i,"aria-label":"Unsaved changes",sx:e?{...n,position:"absolute"}:{...n,position:"relative"}};return e?(0,O.jsxs)(eO.Z,{className:"dirty-icon-container",sx:Pa,children:[e,t&&(0,O.jsx)(eO.Z,{...l})]}):t?(0,O.jsx)(eO.Z,{...l}):null});try{Pn.displayName||(Pn.displayName="PotentiallyDirty")}catch{}let Pi=(0,H.memo)(function({to:e,isActive:t,children:r,isDirty:a,leadingVisual:n=null,trailingVisual:i=null,...l}){return(0,O.jsxs)(fw,{to:e,isActive:t,end:!0,...l,children:[n?(0,O.jsx)(fb.$.LeadingVisual,{children:n}):null,(0,O.jsxs)(eO.Z,{sx:{position:"relative",display:"flex",alignItems:"center",gap:2},children:[r,!t&&a?(0,O.jsx)(Pn,{isDirty:!0,hideDirtyState:!1,sx:{position:"static"},...(0,ef.f)("my-chart-navigation-item-dirty")}):null]}),i?(0,O.jsx)(fb.$.TrailingVisual,{children:i}):null]})});try{Pi.displayName||(Pi.displayName="ChartLink")}catch{}let Pl=({chart:e})=>{let{isDirty:t,isConfigurationDirty:r}=N4(e),[,a]=lG(),n=ur(),[i,l]=(0,H.useState)(!1),s=(0,H.useRef)(null),{hasWritePermissions:o}=i4(),{saveChartName:d}=Rm(e),{showDialog:u,InsightsUpsellDialog:c}=RM(),m=(0,H.useCallback)(e=>{l(e),e||d()},[d]),{canCreateChart:p}=ge(),{destroyChartConfiguration:f,createChartConfiguration:h,updateChartConfiguration:g,resetLocalChangesForChartNumber:y}=_a(),x=l$(),b=(0,at.N)(),{getChartLinkTo:v}=ge(),w=N6(e),j=!w,C=(0,H.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),!w&&await b({title:"Delete chart?",content:`Are you sure you want to delete "${e.name}"?`,confirmButtonContent:"Delete",confirmButtonType:"danger"})&&(await f.perform(e.number),"succeeded"===f.status.current.status&&x(v(0).url))},[e.name,e.number,w,b,f,v,x]),I=(0,H.useCallback)(async t=>{t.preventDefault(),t.stopPropagation();let r=e.number;p()?(await h.perform({chart:{configuration:e.localVersion.configuration}}),"succeeded"===h.status.current.status&&x(eT.generatePath({...n,insightNumber:h.status.current.data.chart.number})),y(r)):u()},[p,e.localVersion.configuration,e.number,h,x,y,u,n]),S=(0,H.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),w||(await g.perform({chartNumber:e.number,chart:{configuration:{...e.localVersion.configuration}}}),a(N7(new URLSearchParams(window.location.search))))},[e.localVersion.configuration,e.number,w,a,g]),k=(0,H.useCallback)(async t=>{t.preventDefault(),t.stopPropagation(),y(e.number),a(N7(new URLSearchParams(window.location.search)))},[e.number,y,a]),{openPane:T}=_l();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Pn,{isDirty:t,hideDirtyState:!o,...t?(0,ef.f)("chart-options-dirty"):void 0,children:(0,O.jsx)(mq.h,{...(0,ef.f)("chart-options-button"),ref:s,"aria-haspopup":"true","aria-expanded":i,icon:eF.TriangleDownIcon,onClick:(0,H.useCallback)(e=>{e.preventDefault(),l(e=>!e)},[]),sx:{display:"flex",alignItems:"center",justifyContent:"center",ml:1,px:0,py:0,pt:"2px",height:18,width:18,"& svg":{verticalAlign:"top!important"}},"aria-label":"Chart options"})}),(0,O.jsx)(fj.P,{open:i,onOpenChange:m,anchorRef:s,children:(0,O.jsx)(fj.P.Overlay,{sx:{zIndex:3},width:"medium",children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Item,{onSelect:T,...(0,ef.f)("chart-options-open-configure"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(Pn,{isDirty:r,children:(0,O.jsx)(eF.PencilIcon,{})})}),"Configure"]}),(0,O.jsxs)(mx.S.Item,{onSelect:I,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.VersionsIcon,{})}),t?"Save changes to new chart":"Duplicate chart"]}),w?null:(0,O.jsxs)(mx.S.Item,{variant:"danger",onSelect:C,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete chart"]}),t?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{sx:{"& > ul":{display:"flex"}},children:[o&&j?(0,O.jsx)(mx.S.Item,{onSelect:S,...(0,ef.f)("view-options-menu-save-changes-button"),sx:{flex:"auto",color:"accent.fg",borderRight:"1px solid",borderColor:"border.default",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:rI.saveChanges}):null,(0,O.jsx)(mx.S.Item,{onSelect:k,...(0,ef.f)("chart-options-menu-reset-changes-button"),sx:{flex:"auto",color:"fg.muted",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:rI.discardChanges})]})]}):null]})})}),(0,O.jsx)(c,{})]})};try{Pl.displayName||(Pl.displayName="InsightsChartOptions")}catch{}let Ps=(0,H.memo)(function(){let{getCreateChartRequest:e,canCreateChart:t}=ge(),{createChartConfiguration:r}=_a(),a=l$(),{showDialog:n,InsightsUpsellDialog:i}=RM(),l=ur();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(i,{}),(0,O.jsx)(cd.r,{...(0,ef.f)("add-chart-button"),onClick:(0,H.useCallback)(async()=>{let i=e();if(t()){if(await r.perform(i),"succeeded"===r.status.current.status){let e=r.status.current.data;a(eT.generatePath({...l,insightNumber:e.chart.number}))}}else n()},[e,t,r,a,n,l]),sx:{ml:2,mt:2},leadingVisual:eF.PlusIcon,children:rZ.sideNavNewChartButton})]})});function Po(e,t){return e.name.localeCompare(t.name)}let Pd=({chartConfiguration:e,isActiveChart:t})=>(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:t?(0,O.jsx)(Pl,{chart:e}):null}),Pu=()=>{let e=(0,K.UO)(),{chartConfigurations:t,getChartLinkTo:r}=ge(),{postStats:a}=os(),n=e.insightNumber?Number(e.insightNumber):0,{defaultCharts:i,myCharts:l}=(0,H.useMemo)(()=>{let[e,r]=nx(Object.values(t),N6);return{defaultCharts:e.sort(Po),myCharts:r.sort(Po)}},[t]),s=(0,H.useCallback)((e,t)=>{a({name:"insights_chart_navigation",context:JSON.stringify({chartNumber:e,...t})})},[a]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(fb.$,{sx:{"& > ul":{pt:0}},...(0,ef.f)("insights-side-nav"),children:[(0,O.jsx)(fb.$.Group,{title:rZ.sideNavDefaultCharts,children:i.map(e=>{let t=0===n,a=N4(e),i=Rj[e.localVersion.configuration.type].icon;return(0,H.createElement)(Pi,{...(0,ef.f)("default-chart-navigation-item"),key:e.number,isDirty:a.isDirty,to:r(e.number).url,isActive:t,leadingVisual:(0,O.jsx)(i,{}),trailingVisual:(0,O.jsx)(Pd,{chartConfiguration:e,isActiveChart:t}),onClick:r=>{t?r.preventDefault():s(e.number,e.localVersion.configuration)}},e.name)})}),(0,O.jsx)(fb.$.Group,{title:rZ.sideNavCustomCharts,children:l.map(e=>{let t=n===e.number,a=N4(e),i=Rj[e.localVersion.configuration.type].icon;return(0,H.createElement)(Pi,{...(0,ef.f)("my-chart-navigation-item"),key:e.number,to:r(e.number).url,isActive:t,isDirty:a.isDirty,leadingVisual:(0,O.jsx)(i,{}),trailingVisual:(0,O.jsx)(Pd,{chartConfiguration:e,isActiveChart:t}),onClick:r=>{t?r.preventDefault():s(e.number,e.localVersion.configuration)}},e.name)})})]}),(0,O.jsx)(eO.Z,{children:(0,O.jsx)(Ps,{})})]})};try{Ps.displayName||(Ps.displayName="AddChartButton")}catch{}try{Pd.displayName||(Pd.displayName="ChartItemTrailingVisual")}catch{}try{Pu.displayName||(Pu.displayName="InsightsSideNav")}catch{}let Pc=(0,H.memo)(function({children:e}){return(0,O.jsxs)(ue.X,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${eO.Z}`]:{minHeight:"100%"}},children:[(0,O.jsx)(ue.X.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:(0,O.jsx)(Pu,{})}),(0,O.jsx)(ue.X.Content,{width:"large",sx:{padding:[3,null,null,4]},children:e})]})});try{Pc.displayName||(Pc.displayName="InsightsLayout")}catch{}function Pm(){return dX(),(0,O.jsx)(dY,{...(0,ef.f)("insights-page"),children:(0,O.jsx)(_i,{children:(0,O.jsx)(Pc,{children:(0,O.jsx)(K.j3,{})})})})}try{Pm.displayName||(Pm.displayName="InsightsPage")}catch{}async function Pp(e){let t=aa("memex-collaborators-api-data"),{data:r}=await ac(t.url,e);return r}async function Pf(e){let t=aa("memex-remove-collaborators-api-data"),{data:r}=await ac(t.url,{method:"DELETE",body:e});return r}async function Ph({role:e,collaborators:t}){let r=aa("memex-add-collaborators-api-data"),{data:a}=await ac(r.url,{method:"POST",body:{permission:aN.get(e),collaborators:t}});return a}async function Pg(e){let{url:t}=aa("memex-get-organization-access-api-data"),{data:r}=await ac(t,e);return{role:r.role??r.permission}}async function Py({role:e}){let t=aa("memex-update-organization-access-api-data");await ac(t.url,{method:"PUT",body:{permission:aN.get(e)}})}function Px(e){let{projectOwner:t}=i5();return"user"===e.actor_type?e.login:`${t?`${t.login}/`:""}${e.slug}`}let Pb=e=>`${e.actor_type}/${e.id}`,Pv=(0,lj.r)({queryKey:["organization-access"],fetcher:(e,{signal:t})=>Pg({signal:t}),initialData:{role:aS.None}}),Pw=()=>Pv({select:(0,H.useMemo)(()=>e=>a_.get(e.role)??aI.None,[])}),Pj=()=>{let e=(0,W.NL)();return(0,H.useCallback)(()=>e.prefetchQuery(Pv.getFetchOptions()),[e])},PC=()=>{let e=(0,W.NL)();return(0,lw.D)({mutationFn:Py,onMutate:({role:t})=>{e.setQueriesData({queryKey:Pv.getKey()},{role:aN.get(t)??aS.None})},onSettled:()=>{e.invalidateQueries({queryKey:Pv.getKey()})}})},PI=(0,lj.r)({queryKey:["all-collaborators"],fetcher:(e,{signal:t})=>Pp({signal:t})});function PS(e){return new Set(e.collaborators.map(e=>Pb(e)))}let Pk=()=>PI({select:PS}),PT=e=>new Map(e.collaborators.map(e=>[Pb(e),e])),PN=()=>PI({select:PT}),P_=()=>{let e=(0,W.NL)();return(0,H.useCallback)(()=>e.prefetchQuery(PI.getFetchOptions()),[e])},PR=(0,hW.c)({mutationFn:Pf}),PP=()=>{let e=(0,W.NL)();return PR({onMutate:({collaborators:t})=>{e.setQueriesData({queryKey:PI.getKey()},e=>e?{collaborators:e.collaborators.filter(e=>!t.includes(Pb(e)))}:e)},onSettled:()=>{e.invalidateQueries({queryKey:PI.getKey()})}})},PD=(0,hW.c)({mutationFn:Ph}),PE=()=>{let e=(0,W.NL)();return PD({onMutate:({collaborators:t,role:r})=>{e.setQueriesData({queryKey:PI.getKey()},e=>{if(!e)return e;let a=new Set(t);return{collaborators:e.collaborators.map(e=>a.has(Pb(e))?{...e,role:aN.get(r)??aS.None,isUpdated:!0}:e)}})},onSettled:()=>{e.invalidateQueries({queryKey:PI.getKey()})}})};async function PA({query:e},t){let r=aa("memex-suggested-collaborators-api-data"),a=new URLSearchParams({q:e}),n=`${r.url}?${a}`,{data:i}=await ac(n,t);return i}let PM=(0,lj.r)({queryKey:["suggested-collaborators"],fetcher:(e,{signal:t})=>PA(e,{signal:t}),use:[e=>t=>e({...t,enabled:(t.variables?.query??"").trim().replace(/^@/,"").length>0})]}),PL=e=>{let{data:t}=Pk(),r=(0,H.useCallback)(e=>e.suggestions.map(e=>{if("user"in e){let r="user";return{...e.user,isCollaborator:t?.has(Pb({id:e.user.id,actor_type:r}))??!1,actor_type:r}}if("team"in e){let r="team";return{...e.team,isCollaborator:t?.has(Pb({id:e.team.id,actor_type:r}))??!1,actor_type:r}}ij(e)}),[t]);return PM({...e,select:r})};function PF({login:e,id:t,onRemove:r,avatarUrl:a}){return(0,O.jsxs)(eO.Z,{sx:{m:1,pl:"2px",pr:1,pt:"2px",pb:"2px",display:"flex",borderRadius:"20px",bg:"accent.subtle",flexDirection:"row",alignItems:"center"},...(0,ef.f)(`collaborator-pill-${e}`),children:[(0,O.jsx)(mo.O,{loading:"lazy",alt:e,src:a,sx:{mr:1}}),(0,O.jsx)(eB.Z,{sx:{mr:1,color:"accent.fg"},children:e}),(0,O.jsx)(cd.r,{variant:"invisible",onClick:()=>r(),sx:{p:0,height:"auto"},children:(0,O.jsx)(eF.XIcon,{})})]},t)}try{PF.displayName||(PF.displayName="CollaboratorPill")}catch{}let PZ=({displayName:e,selected:t,onClose:r,role:a,description:n,handleOnClick:i})=>{let l=(0,H.useCallback)(()=>{i(a)},[i,a]);return(0,O.jsxs)(mx.S.Item,{tabIndex:0,selected:t,onClick:l,onKeyDown:e=>{"Enter"===e.key&&(l(),r())},...(0,ef.f)(`collaborators-role-dropdown-item-${a}`),children:[e,(0,O.jsx)(mx.S.Description,{variant:"block",children:n})]})},PO=[{value:aI.Admin,displayName:t9(aI.Admin.toString()),description:rM.collaboratorDropDownAdmin},{value:aI.Write,displayName:t9(aI.Write.toString()),description:rM.collaboratorDropDownWrite},{value:aI.Read,displayName:t9(aI.Read.toString()),description:rM.collaboratorDropDownRead}];function PV({align:e="inside-right",roles:t=PO,selectedRoles:r,isOrganizationRole:a=!1,handleOnClick:n,handleDropDownButtonClick:i}){let[l,s]=(0,H.useState)(!1),o=r.length>1?"Mixed":t9(r[0]??""),d=r.length>0?new Set(r.map(e=>t9(e))):new Set;return(0,O.jsx)(eO.Z,{sx:{position:"relative"},children:(0,O.jsxs)(fj.P,{open:l,onOpenChange:e=>s(e),...(0,ef.f)("collaborators-role-dropdown"),children:[(0,O.jsxs)(fj.P.Button,{onClick:i,...(0,ef.f)("collaborators-role-dropdown-button"),children:[a?null:(0,O.jsx)("span",{style:{fontWeight:400},children:"Role: "}),o]}),(0,O.jsx)(fj.P.Overlay,{anchorSide:e,children:(0,O.jsx)(mx.S,{selectionVariant:"single",children:t.map(e=>(0,O.jsx)(PZ,{role:e.value,description:e.description,displayName:e.displayName,onClose:()=>s(!1),selected:d.has(e.displayName),handleOnClick:e=>{n(e)}},e.value))})})]})})}try{PZ.displayName||(PZ.displayName="CollaboratorRoleDropDownItem")}catch{}try{PV.displayName||(PV.displayName="CollaboratorRoleDropDown")}catch{}let PB=({collaboratorsAddedCount:e,setInvitationRequestState:t})=>{let r=e3(()=>t(yg.None),5e3);return(0,H.useEffect)(()=>{r()},[r]),(0,O.jsxs)(eO.Z,{...(0,ef.f)("success-message"),children:[(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{ml:3,color:"success.fg"}}),(0,O.jsxs)(eB.Z,{children:[" ",e," successfully added "]})]})},P$=()=>(0,O.jsxs)(eO.Z,{...(0,ef.f)("failure-message"),children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,sx:{ml:3,color:"danger.fg"}}),(0,O.jsx)(eB.Z,{children:" Unable to add some users "})]}),Pz="add-collaborators-suggestions-list",PW=[],PG=[],PU=()=>{let e=(0,H.useRef)(null),t=(0,H.useRef)(null),r=(0,H.useRef)(null),{projectOwner:a}=i5(),[n,i]=(0,H.useState)(!1),[l,s]=(0,H.useState)(!1),[o,d]=(0,H.useState)(aI.Write),[u,c]=(0,H.useState)(PW),[m,p]=(0,H.useState)(yg.None),[f,h]=(0,H.useState)(""),[g,y]=(0,H.useState)(""),x=T2(g.startsWith("@")?g.trim().slice(1):g.trim()),{data:b=PG}=PL({variables:{query:x}});!function(e,t){let r=(0,e5.Z)(e),a=(0,e5.Z)(t);(0,H.useEffect)(()=>{let e=e=>{document.body.contains(e.target)&&(r.current.some(t=>t.current?.contains(e.target))||a.current())};return addEventListener("click",e,!0),()=>{removeEventListener("click",e,!0)}},[r,a])}([r,e],()=>s(!1));let v=(0,H.useCallback)(e=>{c(t=>{let r=t.filter(t=>Pb(t)!==Pb(e));return r.length===t.length?t:r})},[]),w=(0,H.useCallback)(e=>{let t=new Set(e);c(e=>{let r=[];for(let a of e)t.has(`${Pb(a)}`)&&r.push(a);return r})},[c]),j=e=>{let t=b.find(t=>Pb(t)===e);t&&c(e=>e.some(e=>Pb(e)===Pb(t))?e:[...e,t])},C=t=>{t.isCollaborator||(s(!1),y(""),j(Pb(t)),e.current?.focus())},I=(0,H.useCallback)(({target:e})=>{y(e.value)},[]),S=(0,H.useCallback)(()=>{s(!0),i(!0)},[s,i]),k=(0,H.useCallback)(()=>{i(!1)},[i]),T=(0,H.useCallback)(e=>{if("Backspace"===e.key&&""===g&&u.length>0){let e=u[u.length-1];e&&v(e)}m!==yg.None&&(p(yg.None),h(""))},[m,g,u,v]),{addToast:N}=e9(),{mutate:_}=PE(),R=(0,H.useCallback)(()=>{if(0!==u.length)return _({role:o,collaborators:u.map(e=>Pb(e))},{onSuccess:({failed:e})=>{if(e.length>0)p(yg.Failed),w(e);else{y("");let e=u.length;h(`${e} ${1===e?"user":"users"}`),p(yg.Successful),c(PW)}},onError:e=>{N({type:e$.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})},[N,u,o,_,w]);(0,uG.b)(()=>{s((x.startsWith("@")?x.substring(1,x.length):x).length>0)},[x]);let P=(0,H.useCallback)(e=>{v(e),m!==yg.None&&p(yg.None)},[p,m,v]),D=a&&"organization"===a.type?rM.addCollaboratorPlaceholderOrgProject:rM.addCollaboratorPlaceholderUserProject,E=b.length>0&&x.length>0&&l;return(0,O.jsx)(eO.Z,{sx:{flexDirection:"column",flexGrow:1,display:"flex"},...(0,ef.f)("add-collaborators"),children:(0,O.jsxs)(cX.Z,{sx:{mb:5,alignItems:"stretch"},children:[(0,O.jsx)(cX.Z.Label,{visuallyHidden:!0,children:"Add Collaborators"}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between",my:2},children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:4,fontWeight:"normal"},children:"Invite collaborators"}),(0,O.jsx)(eO.Z,{children:(0,O.jsxs)("div",{"aria-live":"polite",children:[m===yg.Successful&&(0,O.jsx)(PB,{setInvitationRequestState:p,collaboratorsAddedCount:f}),m===yg.Failed&&(0,O.jsx)(P$,{})]})})]}),(0,O.jsxs)(eO.Z,{sx:{flexDirection:"row",alignItems:"flex-start",flexWrap:"nowrap",display:"flex"},children:[(0,O.jsxs)(eO.Z,{ref:t,onClick:()=>e.current?.focus(),sx:{flex:1,width:"100%",display:"flex",boxShadow:n?e=>`0 0 0 2px ${e.colors.accent.fg}`:void 0,flexDirection:"row",borderRadius:2,borderWidth:"1px",borderStyle:"solid",borderColor:n?"accent.emphasis":"border.default"},children:[(0,O.jsx)(eZ.Z,{icon:eF.PersonIcon,sx:{m:2,color:"fg.muted"}}),(0,O.jsxs)(eO.Z,{sx:{flexDirection:"row",display:"flex",flex:1,flexWrap:"wrap",cursor:"text"},children:[u.map(e=>{let t=Pb(e);return(0,O.jsx)(PF,{avatarUrl:e.avatarUrl,login:Px(e),id:t,onRemove:()=>P(e)},t)}),(0,O.jsx)(pT,{role:"combobox","aria-haspopup":"listbox","aria-expanded":E,"aria-autocomplete":"list","aria-controls":Pz,"aria-label":D,style:{flex:1,width:"auto",display:"inline"},autoComplete:"off",value:g,ref:e,onChange:I,onFocus:S,onBlur:k,onKeyDown:T,placeholder:D,id:"add-collaborators-input",...(0,ef.f)("add-collaborators-input")}),E&&(0,O.jsx)(mS,{testId:Pz,listRef:r,controllingElementRef:e,xOriginEdgeAlign:"left",style:{width:"400px"},items:b.map(e=>({renderItem:()=>(0,O.jsx)(PH,{suggestion:e}),key:e.id,value:Px(e),asHTML:!0,onSelect:()=>C(e),testId:`collaborator-suggestion-item-${Px(e)}`}))})]})]}),(0,O.jsx)(eO.Z,{sx:{mx:2},children:(0,O.jsx)(PV,{selectedRoles:[o],handleOnClick:d})}),(0,O.jsx)(cd.r,{variant:"primary",onClick:R,...(0,ef.f)("add-collaborators-invite-button"),children:"Invite"})]})]})})};function PH({suggestion:e}){let t=Px(e);return(0,O.jsxs)("span",{children:[(0,O.jsx)(mo.O,{loading:"lazy",alt:t,src:e.avatarUrl,sx:{mr:1}}),(0,O.jsxs)(eB.Z,{sx:{color:e.isCollaborator?"fg.muted":"fg.default"},children:[e.name," ",(0,O.jsx)(eB.Z,{sx:{color:"fg.subtle",mx:1},children:t})]}),e.isCollaborator&&(0,O.jsx)(eB.Z,{sx:{color:"fg.subtle",fontSize:12},children:"\xb7 Already a collaborator"})]})}try{PB.displayName||(PB.displayName="AddCollaboratorSuccess")}catch{}try{P$.displayName||(P$.displayName="AddCollaboratorError")}catch{}try{PU.displayName||(PU.displayName="AddCollaborators")}catch{}try{PH.displayName||(PH.displayName="CollabSuggestionItem")}catch{}let Pq=(0,H.createContext)(null),PK=()=>{let e=(0,H.useContext)(Pq);if(!e)throw Error("useCollaboratorsFilter must be used inside the Provider");return e},PQ={Role:"role",Type:"type"},PX=({children:e})=>{let t=(0,H.useMemo)(()=>/(admin|read|write)/gi,[]),r=(0,H.useMemo)(()=>/(user|team)/gi,[]),a=(0,H.useCallback)((e,t)=>{let r=RegExp(`\\b${t}:\\b\\S+`,"gi");return e.replace(r,"").replace(/\s\s+/g," ").trim()},[]),[n,i]=(0,H.useState)(""),[l,s]=(0,H.useState)([]),[o,d]=(0,H.useState)(aI.None),[u,c]=(0,H.useState)(ak.None),m=e=>{d(aI.None),c(ak.None),s(e.split(" ")),i(e)},p=(0,H.useCallback)(e=>{let a=oB(e);if(a.fieldFilters.length){let n=a.fieldFilters.filter(e=>e[0]===PQ.Role),i=a.fieldFilters.filter(e=>e[0]===PQ.Type),l=!n||1!==n.length,s=!i||1!==i.length;if(l&&s){m(e);return}{let a=!0;if(!l){let e=n[0]?.[1]??"";1===e.length&&e[0]?.match(t)&&(d(e[0]),a=!1)}if(!s){let e=i[0]?.[1];e?.length===1&&e[0]?.match(r)&&(c(e[0]),a=!1)}if(a){m(e);return}}}else d(aI.None),c(ak.None);s(a.searchTokens),i(e)},[t,r]),f=(0,H.useCallback)((e,i)=>{let l=i===PQ.Role?n.match(t):n.match(r);if((e=e.toLocaleLowerCase())===aI.None||e===ak.None&&i===PQ.Type){p(`${a(n,i)}`);return}if(l&&1===l.length){p(n.replace(l[0],`${e}`));return}let s=n.trimEnd();l&&l.length>1&&(s=`${a(n,i)}`),p(`${s}${s.length?" ":""}${i}:${e}`)},[n,t,r,p,a]),h=(0,H.useCallback)(e=>{d(e),f(e.toLowerCase(),PQ.Role)},[d,f]),g=(0,H.useCallback)(e=>{c(e),f(e.toLowerCase(),PQ.Type)},[f,c]),y=(0,H.useCallback)(e=>{let t=Px(e);if(0===l.length&&o===aI.None&&u===ak.None)return!0;let r=o&&o!==aI.None&&e.role!==aN.get(o.toLowerCase()),a=!!(u&&u!==ak.None&&u!==e.actor_type);return!r&&!a&&(!(l.length>0)||!!t&&op(l,t.toLowerCase())||!!e.name&&op(l,e.name.toLowerCase()))},[o,l,u]),x=(0,H.useMemo)(()=>({query:n,setQuery:p,roleFilter:o,typeFilter:u,setTypeFilter:g,setRoleFilter:h,match:y}),[n,p,o,h,u,g,y]);return(0,O.jsx)(Pq.Provider,{value:x,children:e})};try{PX.displayName||(PX.displayName="CollaboratorsFilterProvider")}catch{}function PY(e,t){return"user"===e.actor_type?`/users/${e.login}/hovercard`:"team"===e.actor_type&&t?.type==="organization"?`/orgs/${t.login}/teams/${e.slug}/hovercard`:void 0}let PJ={padding:3,marginTop:"-1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:1,borderRadius:"0 0 6px 6px"},P0={padding:3,listStyleType:"none",marginTop:"-1px",borderTopColor:"border.muted",borderTopStyle:"solid",borderTopWidth:1},P1=({collaborator:e,isLastItem:t,isSelected:r,onCheckboxChange:a,onDropDownClick:n,onRemoveButtonClick:i})=>{let{projectOwner:l}=i5(),s=a_.get(e.role)??aI.None,o=e.isUpdated?P2:eO.Z,d="team"===e.actor_type?function(e){let t=e.membersCount,r=1===t?`${t} member`:`${t} members`;return`@${e.slug} \u{2022} ${r}`}(e):Px(e);return(0,O.jsx)(o,{sx:t?PJ:P0,...(0,ef.f)(`collaborators-row-${d}`),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",flex:"auto",alignItems:"center"},children:[(0,O.jsx)(eO.Z,{sx:{mr:3},children:(0,O.jsx)("input",{type:"checkbox","aria-label":r?rP.unselectCollaborator(d):rP.selectCollaborator(d),checked:r,name:Pb(e),onChange:a,...(0,ef.f)(`collaborators-checkbox-${d}`)})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",flex:"auto"},children:[(0,O.jsx)(mo.O,{loading:"lazy",alt:d,src:e.avatarUrl,size:32,sx:{mr:3},"data-hovercard-type":e.actor_type,"data-hovercard-url":PY(e,l)}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,O.jsx)(uB.Z,{"data-hovercard-type":e.actor_type,"data-hovercard-url":PY(e,l),sx:{cursor:"pointer",textDecoration:"none",fontWeight:"bold"},href:function(e,t){let r="";return"user"===e.actor_type&&(r=`/${e.login}`),"team"===e.actor_type&&(r=t?`/orgs/${t.login}/teams/${e.slug}`:""),r}(e,l),...(0,ef.f)("collaborator-link"),children:e.name||d}),e.name&&(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},...(0,ef.f)("collaborator-login"),children:d})]})]}),(0,O.jsx)(PV,{selectedRoles:[s],handleOnClick:t=>n(t,new Set([Pb(e)]))}),(0,O.jsx)(cd.r,{variant:"invisible",onClick:()=>i(new Set([Pb(e)])),...(0,ef.f)(`remove-collaborator-${d}`),sx:{color:"fg.muted",border:"1px solid",borderColor:"transparent",boxShadow:"none","&:hover:not([disabled]), &:focus:not([disabled])":{color:"btn.danger.text",border:"1px solid",borderColor:"btn.border"},marginLeft:2},"aria-label":rI.removeTitle,children:rI.removeTitle})]})},e.id)},P2=(0,Y.ZP)(eO.Z).withConfig({displayName:"collaborators-list-item__FadedRow",componentId:"sc-113e6afe-0"})(["animation:fadeOut 2s ease-out;@keyframes fadeOut{from{background:",";}to{background:",";}}"],(0,U.U2)("colors.neutral.subtle"),(0,U.U2)("colors.canvas.default")),P5=(0,H.memo)(P1);try{P1.displayName||(P1.displayName="CollaboratorsListItemComponent")}catch{}try{P2.displayName||(P2.displayName="FadedRow")}catch{}try{P5.displayName||(P5.displayName="CollaboratorsListItem")}catch{}let P3=["Read","Write","Admin"],P4=["User","Team"],P8=new Map([[aS.Reader,"Read"],[aS.Writer,"Write"],[aS.Admin,"Admin"]]),P6=new Map,P7=(0,H.memo)(function({userCount:e,teamCount:t,showError:r,selectedCollaboratorIds:a,onCheckBoxChange:n,onDropDownItemClick:i,onRemoveButtonClick:l,onDropDownButtonClick:s}){var o;let{data:d=P6}=PN(),u=new Set;for(let e of a){if(u.size===P3.length)break;let t=d.get(e);if(t){let e=P8.get(t.role);e&&u.add(e)}else a.delete(e)}let c=(0,H.useRef)(null),{typeFilter:m}=PK(),p=(o={userCount:e,teamCount:t},({[ak.User]:o.userCount,[ak.Team]:o.teamCount,[ak.None]:o.userCount+o.teamCount})[m]);(0,uG.b)(()=>{c.current&&(c.current.indeterminate=0!==a.size&&a.size<p)},[a,p]);let f="";f=1!==e?`${e} members`:`${e} member`,t&&(0===e&&(f=""),f+=(e?", ":"")+(t>1?`${t} teams`:`${t} team`));let h=a.size;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:P9,children:[(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",flex:"1 1 0"},children:(0,O.jsx)(eO.Z,{sx:{mr:2},children:(0,O.jsxs)(cX.Z,{id:"collaborators-checkbox-bulk",children:[(0,O.jsx)(uz.Z,{name:"collaborators-checkbox-bulk",ref:c,onChange:n,checked:h>0&&h===p,...(0,ef.f)("collaborators-checkbox-bulk")}),(0,O.jsxs)(cX.Z.Label,{sx:{color:"fg.muted",fontWeight:"normal"},children:[(0,O.jsx)(mg.T,{children:"Select all collaborators. "}),(0,O.jsx)(eB.Z,{...(0,ef.f)("collaborators-table-counter"),children:h>0?`${h} selected`:f})]})]})})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)("div",{"aria-live":"polite",children:h>1&&r&&(0,O.jsx)(De,{})}),(0,O.jsx)(eO.Z,{...(0,ef.f)("collaborators-header-dropdown"),children:h>1?(0,O.jsx)(Dt,{selectedRoles:Array.from(u),collaboratorIds:a,onDropDownItemClick:i,onDropDownButtonClick:s}):(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(Da,{}),(0,O.jsx)(Dn,{})]})}),h>1&&(0,O.jsx)(cd.r,{sx:{ml:2,"&:hover:not([disabled]), &:focus:not([disabled])":{color:"btn.danger.text"}},onClick:()=>l(a),...(0,ef.f)("collaborators-remove-bulk"),children:rI.removeTitle})]})]}),(0,O.jsx)(eO.Z,{sx:{p:3},children:(0,O.jsx)(Dr,{})})]})}),P9={display:"flex",flexWrap:"wrap",alignItems:"center",padding:3,margin:"-1px -1px 0",backgroundColor:"canvas.subtle",borderColor:"border.default",borderStyle:"solid",borderWidth:1,borderTopLeftRadius:2,borderTopRightRadius:2};function De(){return(0,O.jsxs)(eO.Z,{...(0,ef.f)("failure-message"),sx:{mr:2},children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,sx:{mr:1,color:"danger.fg"}}),(0,O.jsx)(eB.Z,{children:"Something went wrong"})]})}function Dt(e){return(0,O.jsx)(PV,{selectedRoles:e.selectedRoles,handleOnClick:t=>e.onDropDownItemClick(t,e.collaboratorIds),handleDropDownButtonClick:e.onDropDownButtonClick,...(0,ef.f)("collaborators-header-role-picker")})}let Dr=()=>{let{query:e,setQuery:t}=PK(),{projectOwner:r}=i5(),[a,n]=yh(e),i=(0,H.useRef)();return(0,O.jsx)(eO.Z,{sx:{flex:"1 1 100%"},...(0,ef.f)("filter-collaborators"),children:(0,O.jsx)(pw.Z,{placeholder:r&&"organization"===r.type?rM.collaboratorFilterPlaceholderOrgProject:rM.collaboratorFilterPlaceholderUserProject,value:a,contrast:!0,onChange:e=>{let r=e.target.value;n(r),i.current&&i.current.cancel(),i.current=(0,s9.Z)(()=>t(r),200),i.current()},...(0,ef.f)("filter-collaborators-input"),sx:{width:"100%"}})})},Da=()=>{let{typeFilter:e,setTypeFilter:t}=PK(),[r,a]=(0,H.useState)(!1),n=(0,H.useCallback)(e=>{t(e)},[t]),i=(0,H.useCallback)((e,t)=>{n(t?ak.None:e)},[n]);return(0,O.jsxs)(fj.P,{open:r,onOpenChange:e=>a(e),children:[(0,O.jsx)(fj.P.Button,{...(0,ef.f)("collaborators-header-type-filter-button"),children:(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:"Type"})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(mx.S,{selectionVariant:"single",...(0,ef.f)("collaborators-header-type-filter-menu"),children:P4.map(t=>(0,O.jsx)(Di,{onClickHandler:i,onClose:()=>a(!1),value:t,filter:e},t))})})]})},Dn=()=>{let{roleFilter:e,setRoleFilter:t}=PK(),[r,a]=(0,H.useState)(!1),n=(0,H.useCallback)(e=>{t(e)},[t]),i=(0,H.useCallback)((e,t)=>{n(t?aI.None:e)},[n]);return(0,O.jsxs)(fj.P,{open:r,onOpenChange:e=>a(e),children:[(0,O.jsx)(fj.P.Button,{...(0,ef.f)("collaborators-header-role-filter-button"),sx:{ml:2},children:(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:"Role"})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(mx.S,{selectionVariant:"single",...(0,ef.f)("collaborators-header-role-filter-menu"),children:P3.map(t=>(0,O.jsx)(Di,{onClickHandler:i,onClose:()=>a(!1),value:t,filter:e},t))})})]})},Di=({filter:e,value:t,onClickHandler:r,onClose:a})=>{let n=(0,H.useMemo)(()=>t.toLowerCase()===e?.toLowerCase(),[t,e]),i=(0,H.useCallback)(()=>{r(t,n)},[r,t,n]);return(0,O.jsx)(mx.S.Item,{tabIndex:0,onClick:i,onKeyDown:e=>{"Enter"===e.key&&(i(),a())},selected:n,...(0,ef.f)(`filter-${t.toLowerCase()}`),children:t},t)};try{P7.displayName||(P7.displayName="CollaboratorsTableHeader")}catch{}try{P7.displayName||(P7.displayName="CollaboratorsTableHeader")}catch{}try{De.displayName||(De.displayName="ErrorMessage")}catch{}try{Dt.displayName||(Dt.displayName="RoleBulkSetDropdown")}catch{}try{Dr.displayName||(Dr.displayName="CollaboratorsFilterInput")}catch{}try{Da.displayName||(Da.displayName="CollaboratorsFilterTypeDropdown")}catch{}try{Dn.displayName||(Dn.displayName="CollaboratorsFilterRoleDropdown")}catch{}try{Di.displayName||(Di.displayName="FilterDropdownItem")}catch{}let Dl=({allCollaboratorActorIdentifiers:e})=>{let[t,r]=(0,H.useState)(()=>new Set),a=new Set(t);for(let r of t)e.has(r)||a.delete(r);return a.size!==t.size&&r(a),[t,r]},Ds={[aS.Admin]:3,[aS.Writer]:2,[aS.Reader]:1,[aS.None]:0},Do={collaborators:[]},Dd=()=>{let{data:e=Do,isLoading:t,isError:r}=PI(),a=(0,H.useMemo)(()=>new Set(e.collaborators.map(Pb)),[e]),{mutateAsync:n}=PP(),{mutateAsync:i}=PE(),l=(0,at.N)(),[s,o]=(0,H.useState)(yg.None),{query:d,match:u}=PK(),c=(0,H.useRef)(!0),m=(0,H.useMemo)(()=>e.collaborators.filter(u),[u,e]),[p,f]=Dl({allCollaboratorActorIdentifiers:a}),h=(0,H.useCallback)(async(e,t)=>{let{actorIds:r,role:a}=e,{loggedInUser:n}=i5(),i=`user/${n?.id}`,s=!1;if(n?.id&&(s=r.has(i)),s){if(await l({title:"Remove yourself as admin?",content:"Are you sure you want to remove yourself as Admin? You will lose access to Settings",confirmButtonContent:"Remove",confirmButtonType:"danger"})){let{failed:e}=await t({collaborators:Array.from(r),role:a});if(e.length>0&&r.size>1&&e.includes(i))o(yg.Failed);else{let e=window.location.pathname.substring(0,window.location.pathname.indexOf("/settings"));window.location.assign(e)}}}else{let{failed:e}=await t({role:a,collaborators:Array.from(r)});e.length>0&&r.size>1&&o(yg.Failed)}},[l]),g=async e=>{o(yg.None),await h({actorIds:e},e=>n(e,{onError:e=>{y({type:e$.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to remove collaborators"})}}))},{addToast:y}=e9(),x=async(e,t)=>{o(yg.None),await h({role:e,actorIds:t},async({collaborators:e,role:t})=>{if(!t)throw Error("you must specify a Role to assign to the selected collaborators");return i({collaborators:e,role:t},{onError:e=>{y({type:e$.error,message:e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:"Failed to update collaborators"})}})})},b=(0,H.useCallback)(({target:{name:e,checked:t}})=>{f(r=>{let n=new Set(r);return t&&void 0!==a.has(e)?n.add(e):n.delete(e),n})},[a,f]),v=(0,H.useCallback)(e=>{e.target.checked?f(new Set(m.map(Pb))):f(new Set)},[m,f]),[{length:w},{length:j}]=(0,H.useMemo)(()=>nx(e.collaborators,e=>"user"===e.actor_type),[e.collaborators]),C=m.slice().sort((e,t)=>{let r=Ds[t.role]-Ds[e.role];if(0!==r)return r;let a=Px(e),n=Px(t);return a.localeCompare(n)}).map((e,t)=>(0,O.jsx)(P5,{collaborator:e,isLastItem:t===m.length-1,isSelected:p.has(Pb(e)),onCheckboxChange:b,onDropDownClick:x,onRemoveButtonClick:g},`collaborator-row-${e.id}-${e.role}`)),I=(0,s9.Z)(e=>{(0,jg.x)(e,{assertive:!0})},100);return(0,H.useEffect)(()=>{if(c.current){c.current=!1;return}if(!t){if(r){I(rQ.error);return}if(0===e.collaborators.length&&0===d.length){I(rQ.noCollaborators);return}0===C.length?I(rQ.filtering):I(rQ.collaboratorsFound(C.length))}},[d]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{mb:2,fontSize:4,fontWeight:"normal"},children:"Manage access"}),(0,O.jsxs)(eO.Z,{...(0,ef.f)("collaborators-table"),sx:{borderRadius:2,border:"1px solid",borderColor:"border.subtle",bg:"canvas.default"},"data-team-hovercards-enabled":!0,children:[(0,O.jsx)(P7,{userCount:w,teamCount:j,selectedCollaboratorIds:p,showError:s===yg.Failed,onCheckBoxChange:v,onDropDownItemClick:x,onRemoveButtonClick:g,onDropDownButtonClick:()=>{o(yg.None)}}),t?(0,O.jsx)(eO.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,O.jsx)(eO.Z,{sx:{mb:2},children:(0,O.jsx)(u$.Z,{size:"medium"})}),(0,O.jsx)("span",{children:"Loading collaborators..."})]})}):r?(0,O.jsx)(Dm,{type:Du.Error}):0===C.length?d.length>0?(0,O.jsx)(Dm,{type:Du.Filtering}):(0,O.jsx)(Dm,{type:Du.NoCollaborators}):C]})]})},Du={Error:"error",NoCollaborators:"no-collaborators",Filtering:"filtering"},Dc=new Map([[Du.Error,{title:rQ.error,message:"Please try again later."}],[Du.NoCollaborators,{title:rQ.noCollaborators,message:"Add a collaborator to see them here."}],[Du.Filtering,{title:rQ.filtering,message:"Try to change or remove some filters to see results."}]]);function Dm({type:e}){let t=Dc.get(e);if(!t)throw Error("invalid blankslate type");return(0,O.jsxs)(eO.Z,{className:"blankslate",...(0,ef.f)(`collaborators-table-blankslate-${e}`),children:[(0,O.jsx)("h3",{...(0,ef.f)("collaborators-table-empty-title"),children:t.title}),(0,O.jsx)("p",{...(0,ef.f)("collaborators-table-empty-message"),children:t.message})]})}let Dp=(0,H.memo)(Dd);try{Dd.displayName||(Dd.displayName="CollaboratorsTableComponent")}catch{}try{Dm.displayName||(Dm.displayName="BlankSlateMessage")}catch{}try{Dp.displayName||(Dp.displayName="CollaboratorsTable")}catch{}let Df=()=>{let{isPublicProject:e}=gC(),{projectOwner:t,isOrganization:r}=i5(),a=t?.name?.toLowerCase(),{data:n=aI.None,error:i,refetch:l,status:s}=Pw(),{mutate:o,status:d}=PC(),u=(0,H.useRef)(null);(0,H.useEffect)(()=>{u.current?.focus()},[]);let c=ur();return(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexWrap:"wrap"},...(0,ef.f)("privacy-settings"),children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderRadius:2,flex:1,p:3,mr:r?2:0},...(0,ef.f)("privacy-settings-manage-visibility"),children:[(0,O.jsxs)(eO.Z,{sx:{mb:3},children:[(0,O.jsxs)(eO.Z,{sx:{mb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{mr:2,fontSize:2,fontWeight:"semibold"},children:e?"Public project":"Private project"}),(0,O.jsx)(eZ.Z,{icon:e?eF.GlobeIcon:eF.LockIcon,sx:{color:"fg.muted"}})]}),(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:e?"This project is public and visible to anyone.":"Only those with access to this project can view it."})]}),(0,O.jsx)(eO.Z,{children:(0,O.jsx)(cd.r,{ref:u,as:lz,to:eC.generatePath(c),...(0,ef.f)("privacy-settings-manage-access-link"),children:"Manage"})})]}),r&&(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",backgroundColor:"canvas.subtle",borderRadius:2,flex:1,padding:3},...(0,ef.f)("privacy-settings-organization-access"),children:[(0,O.jsxs)(eO.Z,{sx:{mb:3},children:[(0,O.jsxs)(eO.Z,{sx:{mb:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{mr:2,fontSize:2,fontWeight:"semibold"},children:"Base role"}),(0,O.jsx)(eZ.Z,{icon:eF.OrganizationIcon,sx:{color:"fg.muted"}})]}),(0,O.jsx)(Dh,{owner:a,organizationAccessRole:n})]}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[i?(0,O.jsx)(cd.r,{disabled:!0,trailingVisual:eF.TriangleDownIcon,...(0,ef.f)("collaborators-role-dropdown-button"),children:t9(n)}):(0,O.jsx)(Dy,{organizationAccessRole:n,updateOrganizationAccessRole:o}),(0,O.jsx)("div",{"aria-live":"polite",...(0,ef.f)("org-access-update-status"),children:(0,O.jsx)(Dg,{orgAccessRoleRequestStatus:s,orgAccessRequestUpdateState:d,refetchOrganizationAccessRole:l})})]})]})]})};function Dh({owner:e,organizationAccessRole:t}){if(t===aI.Admin)return(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:rM.privacySettingsAdmin});let r=eP("github-url"),a=`${r}/orgs/${e}/people?query=role%3Aowner`,n="privacy-settings-org-owners-link";return t===aI.Write?(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:["Everyone in the organization can see and edit this project.",(0,O.jsx)(uB.Z,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:a,sx:{mx:1},underline:!0,...(0,ef.f)(n),children:"Owners"}),"are admins of this project."]}):t===aI.Read?(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:["Everyone in the organization can see this project.",(0,O.jsx)(uB.Z,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:a,sx:{mx:1},underline:!0,...(0,ef.f)(n),children:"Owners"}),"are admins of this project."]}):(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:["Only those with direct access and"," ",(0,O.jsx)(uB.Z,{inline:!0,rel:"noopener noreferrer",target:"_blank",href:a,sx:{mr:1},...(0,ef.f)(n),children:"owners"}),"can see this project. Owners are also admins of this project."]})}function Dg({orgAccessRoleRequestStatus:e,orgAccessRequestUpdateState:t,refetchOrganizationAccessRole:r}){return"error"===t||"error"===e?(0,O.jsxs)(eO.Z,{...(0,ef.f)("initial-org-access-request-failure-message"),sx:{ml:2},children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,sx:{mr:1,color:"danger.fg"}}),(0,O.jsx)(eB.Z,{children:"Something went wrong."})," ",(0,O.jsx)(uB.Z,{as:"button",onClick:()=>r(),children:"Try again"})]}):"success"===t?(0,O.jsxs)(eO.Z,{...(0,ef.f)("org-access-request-success-message"),sx:{ml:2},children:[(0,O.jsx)(eZ.Z,{icon:eF.CheckIcon,sx:{mr:1,color:"success.fg"}}),(0,O.jsx)(eB.Z,{children:"Changes saved"})]}):null}function Dy({organizationAccessRole:e,updateOrganizationAccessRole:t}){return(0,O.jsx)(PV,{align:"inside-left",roles:[...PO,{value:aI.None,displayName:t9(aI.None.toString()),description:rM.collaboratorDropDownNone}],isOrganizationRole:!0,selectedRoles:[e],handleOnClick:r=>{r!==e&&t({role:r})}})}try{Df.displayName||(Df.displayName="PrivacySettings")}catch{}try{Dh.displayName||(Dh.displayName="SelectedRoleText")}catch{}try{Dg.displayName||(Dg.displayName="Status")}catch{}try{Dy.displayName||(Dy.displayName="OrgAccessDropdown")}catch{}let Dx=()=>{let{hasAdminPermissions:e}=i4();return e?(0,O.jsxs)(eO.Z,{sx:{flexDirection:"column",flexGrow:1,display:"flex",paddingBottom:5},...(0,ef.f)("access-settings"),children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{mb:3,fontSize:4,fontWeight:"normal"},children:"Who has access"}),(0,O.jsx)(Df,{}),(0,O.jsx)(PU,{}),(0,O.jsx)(PX,{children:(0,O.jsx)(Dp,{})})]}):(0,O.jsx)(ey,{})};try{Dx.displayName||(Dx.displayName="AccessSettingsView")}catch{}let Db=[],Dv=({ui:e,column:t,onChangeCallback:r})=>{let[a,n]=yh(()=>t?.settings.options??Db),[i,l]=yh(()=>t?.settings.options??Db),s=(0,H.useCallback)(()=>{n(i)},[i,n]),o=(0,H.useCallback)(()=>{l(a)},[a,l]),{postStats:d}=os(),u=(0,H.useCallback)((r,a)=>{d({name:r,ui:e,context:a,memexProjectColumnId:t?.id})},[t?.id,d,e]),c=(0,H.useCallback)(({dragMetadata:e,dropMetadata:t,isBefore:a})=>{e.id!==t?.id&&(n(r=>{let n=r.find(({id:t})=>t===e.id);return r.reduce((e,r)=>(r.id===n.id||(r.id!==t?.id?e.push(r):a?e.push(n,r):a||e.push(r,n)),e),[])}),r?.(),u("settings_field_order"))},[n,r,u]),m=function(e={}){let t=(0,H.useRef)(e.start??0);return(0,H.useCallback)(()=>{let e=t.current;return t.current+=1,e},[])}({start:1}),p=(0,H.useCallback)(e=>{let t=rn(m(),e,a),i=[...a,t];n(i),u("settings_field_add",`${rI.newOptionsCount}: ${i.length}`),r?.()},[a,m,n,u,r]),f=(0,H.useCallback)(e=>{n(t=>t.map(t=>t.id===e.id?e:t)),r?.()},[n,r]),h=a.length>1,g=(0,H.useCallback)(e=>{if(h){let t=a.filter(t=>t.id!==e);n(t),r?.(),u("settings_field_delete",`${rI.newOptionsCount}: ${t.length}`)}},[h,a,n,r,u]);return{options:a,persistedOptions:i,commitMutations:o,revertMutations:s,onDrop:c,canRemoveOption:h,addOption:p,updateOption:f,removeOption:g}},Dw=(e,t)=>{let{postStats:r}=os(),{updateOptions:a}=wR(),{perform:n,status:i}=d1({request:(0,H.useCallback)(async()=>{await a(e,t),r({name:aX,ui:aY,memexProjectColumnId:e.id})},[e,t,r,a]),showErrorToast:!1});return{updateColumnOptions:n,updateColumnOptionsStatus:i}},Dj=()=>{let e=(0,at.N)();return(0,H.useCallback)(async t=>0!==t.values.length&&e({title:rP.deleteValuesTitle(t.field.dataType,t.values.length),content:(0,O.jsx)(DI,{...t}),confirmButtonContent:"Delete",confirmButtonType:"danger"}),[e])},DC=({children:e})=>(0,O.jsxs)(ut.Z,{variant:"danger",as:"p",sx:{p:2},children:[(0,O.jsx)(mg.T,{children:"Warning: "}),e]}),DI=({field:e,values:t,affectedItems:r,affectedWorkflows:a})=>{let n=e.dataType===eA.Iteration?rP.deleteIterationValuesIntro(e.name,t.length):rP.deleteValuesIntro(e.dataType,e.name,t.length),i=r>0?e.dataType===eA.Iteration?rP.deleteIterationValuesAffectedItemsWarning(t.length,r):rP.deleteValuesAffectedItemsWarning(e.dataType,t.length,r):null,l=a>0?rE.deleteValuesAffectedWorkflowsWarning(e.dataType,t.length,a):null;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("p",{children:[n," ",(0,O.jsx)("strong",{children:rP.cannotBeUndone})]}),i&&(0,O.jsx)(DC,{children:i}),l&&(0,O.jsx)(DC,{children:l})]})};try{DC.displayName||(DC.displayName="Warning")}catch{}try{DI.displayName||(DI.displayName="Content")}catch{}let DS=({externalColumn:e})=>{let{postStats:t}=os(),{items:r}=dP(),a=r.map(e=>e.columns),[n,i]=(0,H.useState)(e),{findLoadedFieldIds:l}=f7(),s=e3(()=>{m(yg.None),o.current=null},3e3),o=(0,H.useRef)();if(void 0===n)throw Error("Column is undefined");let d=l().includes(n.id),{loadColumnsWithItemColumnValues:u}=Tb();(0,H.useEffect)(()=>{d||u([n.id])},[d,n.id,u]);let[c,m]=(0,H.useState)(yg.None),{options:p,persistedOptions:f,commitMutations:h,revertMutations:g,onDrop:y,addOption:x,canRemoveOption:b,removeOption:v,updateOption:w}=Dv({column:n,onChangeCallback:(0,H.useCallback)(()=>{N(!0),m(yg.None)},[m]),ui:aY}),{workflowsUsingMissingColumnOption:j}=uO(),C=(0,H.useMemo)(()=>j(n.databaseId,p.map(e=>e.id)).length,[n.databaseId,p,j]),I=(0,H.useMemo)(()=>(function(e,t,r){let a=new Set(t.map(e=>e.id)),n=new Set("options"in e.settings?e.settings.options.filter(e=>!a.has(e.id)).map(e=>e.id):void 0),i=0;for(let t of r){let r=t[e.id],a=r?.id;n.has(a)&&i++}return i})(n,p,a),[n,p,a]),{updateColumnOptions:S,updateColumnOptionsStatus:k}=Dw(n,p),[T,N]=(0,H.useState)(!1);(0,H.useEffect)(()=>{T||i(e)},[e,T]);let _=(0,H.useRef)(rI.genericErrorMessage),R=(0,H.useCallback)(async()=>{await S(),"succeeded"===k.current.status?(h(),N(!1),m(yg.Successful),o.current&&o.current.cancel(),o.current=s()):"failed"===k.current.status&&(g(),m(yg.Failed),(0,jg.x)(rI.updateColumnOptionsFailed,{assertive:!0}))},[h,s,S,k,g]),P=Dj(),D=(0,H.useCallback)(async()=>{let e=C+I>0;n.id===eM.Status&&p.every(e=>""===e.name.trim())?(_.current=rI.statusFieldEmptyError,m(yg.Failed)):e?(I>0&&t({name:"settings_data_loss_single_select_warning",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:I})}),await P({field:n,values:f.filter(e=>!p.some(t=>t.id===e.id)).map(e=>e.name),affectedItems:I,affectedWorkflows:C})?(t({name:"settings_data_loss_single_select_save",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:I})}),await R()):(t({name:"settings_data_loss_single_select_cancel",context:JSON.stringify({columnId:n.id,affectedOptionsUsedCount:I})}),g(),N(!1),m(yg.None))):await R()},[C,I,n,p,P,f,t,R,g]);return(0,H.useEffect)(()=>{T&&D()},[T,D]),{commitState:c,options:p,onDrop:y,addOption:x,canRemoveOption:b,removeOption:v,updateOption:w,areColumnValuesLoaded:d,optionsChanged:T,saveSingleSelectOptions:D,errorMessage:_}};var Dk=r(67747);let DT={opacity:0},DN={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0,transition:"opacity 300ms ease-in-out"},exited:{opacity:0},unmounted:{opacity:0}},D_=({commitState:e,errorMessage:t})=>{let r=(0,H.useRef)(null);return(0,H.useEffect)(()=>{e===yg.Successful&&(0,jg.x)("Saved!")},[e]),(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Dk.ZP,{in:e===yg.Successful,nodeRef:r,timeout:500,children:e=>(0,O.jsxs)(eB.Z,{sx:{pl:2,mt:2},ref:r,style:{...DT,...DN[e]},children:[(0,O.jsx)(yC,{status:yg.Successful}),(0,O.jsx)(eB.Z,{sx:{ml:2},...(0,ef.f)("column-settings-saved-message"),children:"Saved!"})]})}),e===yg.Failed&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(yC,{status:yg.Failed}),(0,O.jsx)(eB.Z,{sx:{ml:2},...(0,ef.f)("single-select-options-error-box"),children:t.current})]})]})})};try{D_.displayName||(D_.displayName="AutosaveMessage")}catch{}let DR=({options:e,onAddOption:t,onUpdateOption:r,onRemoveOption:a,canRemoveOption:n,onDrop:i,sx:l})=>{let{projectLimits:{singleSelectColumnOptionsLimit:s}}=i5(),o=(0,H.useRef)(null),d=e.length>=s,u=e=>o.current?.querySelector(`input[data-option-index='${e}']`),[c,m]=(0,H.useState)(null),p=(0,pu.F)(c),f=e.slice(0,s);return(0,O.jsxs)(eO.Z,{sx:{borderStyle:"solid",borderWidth:p([0,1]),borderColor:"border.default",borderRadius:2,...l},ref:m,children:[(0,O.jsx)(IZ.lk,{items:f.map(e=>({id:e.id,title:e.name,option:e})),onDrop:i,style:{listStyle:"none"},"aria-label":"Single select options",renderOverlay:({option:e},t)=>(0,O.jsx)(IZ.lk.Item,{id:e.id,index:t,title:e.name,isDisabled:!0,isDragOverlay:!0,children:(0,O.jsx)(DE,{option:e,index:t,enableOptionRemoval:n,onRemove:()=>a(e.id),onChange:r,breakpoint:p},e.id)},e.id),children:e.slice(0,s).map((e,t)=>(0,O.jsx)(IZ.lk.Item,{id:e.id,index:t,title:e.name,isDisabled:!0,children:(0,O.jsx)(DE,{option:e,index:t,enableOptionRemoval:n,onRemove:()=>a(e.id),onChange:r,breakpoint:p},e.id)},e.id))}),(0,O.jsx)(eO.Z,{sx:{p:p([0,3]),pt:p([2,3])},children:d?(0,O.jsx)(ut.Z,{variant:"warning",sx:{p:2},children:rI.singleSelectOptionLimitWarning(s)}):(0,O.jsx)(DP,{onCreate:(r=wy)=>{t(r),setTimeout(()=>u(e.length)?.focus())}})})]})},DP=({onCreate:e})=>{let[t,r]=(0,H.useState)(""),a=""!==t.trim(),n=()=>{a&&(e({...wy,name:yf(t)}),r(""))},i=(0,yc.u)(e=>{"Enter"===e.key&&(e.preventDefault(),n())}),l=yR();return(0,O.jsxs)(eO.Z,{as:"fieldset",sx:{display:"flex",gap:2,border:0,padding:0,margin:0},onSubmit:n,children:[(0,O.jsx)(mg.T,{as:"legend",children:"Add option"}),(0,O.jsxs)(cX.Z,{sx:{flex:1},children:[(0,O.jsx)(cX.Z.Label,{visuallyHidden:!0,children:"Label text"}),(0,O.jsx)(yk.F,{...l,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{block:!0,value:t,onChange:e=>r(e.target.value),placeholder:"Add option\u2026",autoComplete:"false",...i})})]}),(0,O.jsx)(cd.r,{onClick:n,disabled:!a,children:"Add"})]})},DD={borderBottomStyle:"solid",borderBottomColor:"border.default",display:"flex",flexDirection:"row",alignItems:"center"};function DE({index:e,option:t,enableOptionRemoval:r,onRemove:a,onChange:n,breakpoint:i}){let{setNodeRef:l}=(0,IZ.nB)({id:t.id,data:{metadata:{id:t.id}}}),[s,o]=(0,H.useState)(!1),[d,u]=(0,H.useState)(!1),c=(0,H.useRef)(null),{openMoveModal:m,moveModalItem:p}=(0,IZ.Y9)();return gQ(s,c),gQ(!!p,c),(0,O.jsxs)(eO.Z,{ref:l,sx:{px:i([0,3]),py:i([1,3]),borderBottomWidth:i([0,1]),...DD},...(0,ef.f)("singleSelectItem"),children:[(0,O.jsx)(IZ.lk.DragTrigger,{}),(0,O.jsx)(y0,{option:t}),(0,O.jsx)(u5,{sx:{flex:1,px:2,color:"fg.subtle",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",m:0},as:"p",children:"descriptionHtml"in t?t.descriptionHtml:t.description}),(0,O.jsxs)(fj.P,{onOpenChange:u,open:d,anchorRef:c,children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{icon:eF.KebabHorizontalIcon,variant:"invisible","aria-label":`Open field actions for ${t.name}`,size:"small",sx:{color:"fg.muted"},...(0,ef.f)("single-select-item-menu-button")})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Item,{onSelect:()=>o(!0),"aria-label":`Open edit dialog for ${t.name}`,...(0,ef.f)("single-select-item-edit-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PencilIcon,{})}),"Edit option"]}),(0,O.jsxs)(mx.S.Item,{"aria-label":`Other actions for ${t.name}`,onSelect:()=>m(t.name,e),...(0,ef.f)("single-select-item-move-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.GrabberIcon,{})}),"Move"]}),r&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Item,{variant:"danger",onClick:a,"aria-label":`Remove ${t.name}`,...(0,ef.f)("single-select-item-delete-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.XIcon,{})}),"Remove option"]})]})]})})]}),s&&(0,O.jsx)(wZ,{initialOption:t,onCancel:()=>o(!1),onSave:e=>{o(!1),n({...t,...e})}})]},t.id)}try{DR.displayName||(DR.displayName="SingleSelectForm")}catch{}try{DP.displayName||(DP.displayName="NewItemCreator")}catch{}try{DE.displayName||(DE.displayName="SingleSelectItem")}catch{}let DA=({column:e})=>{let{commitState:t,options:r,onDrop:a,addOption:n,canRemoveOption:i,removeOption:l,updateOption:s,errorMessage:o}=DS({externalColumn:e});(0,H.useEffect)(()=>{t===yg.Successful&&(0,jg.x)("Saved!")},[t]);let d=t===yg.Failed?yI:{};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:1,mt:4,mb:2},"aria-label":`${e.name} options`,children:"Options"}),(0,O.jsx)(DR,{options:r,onAddOption:n,onUpdateOption:s,onRemoveOption:l,canRemoveOption:i,sx:d,onDrop:a}),(0,O.jsx)(D_,{commitState:t,errorMessage:o})]})};try{DA.displayName||(DA.displayName="SingleSelectOptions")}catch{}let DM=e=>{if("type"===e.name.toLowerCase().trim()){if(!e.userDefined)return;let{issue_types:t}=n7(),{isOrganization:r}=i5();return r&&t?"rename-custom-type-column":void 0}},DL=new Set([eM.Status,eM.SubIssuesProgress]);function DF(e,t={}){let{memex_sub_issues:r=!1}=t;return(!!r||e.id!==eM.SubIssuesProgress)&&(e.userDefined||DL.has(e.id))}let DZ=()=>{let e=(0,W.NL)();return{getCountOfItemsWithColumnValue:(0,H.useCallback)(t=>sz(e).filter(e=>null!=e.columns[t]).length,[e])}},DO=()=>{let{updateColumnEntry:e}=gr(),t=(0,H.useCallback)((t,r)=>!!t.userDefined&&t.name!==r&&(e(ds({...t,name:r})),!0),[e]),r=(0,H.useCallback)(async(e,r)=>{t(e,r)&&(f2(),await wT({memexProjectColumnId:e.id,name:r}))},[t]);return{setName:t,updateName:r}};var DV=r(87388);let DB=()=>({reservedColumnNames:dp().reservedColumnNames}),D$=e=>({isValid:!1,message:e.trim()}),Dz=({allColumns:e,reservedColumnNames:t},r)=>{let a=r.trim();return a?e.some(({name:e})=>DW(e,a))?D$(rI.titleHasAlreadyBeenTaken):t.some(e=>0===e.trim().localeCompare(a,void 0,{sensitivity:"accent"}))?D$(rI.titleIsReserved):a.includes(":")?D$(rI.titleContainsReservedColonCharacter):{isValid:!0,message:""}:D$(rI.titleCannotBeBlank)},DW=(e,t)=>{let r=e.replace(/ /g,"-"),a=t.replace(/ /g,"-");return 0===r.localeCompare(a,void 0,{sensitivity:"accent"})},DG={width:"960px"},DU={padding:0,display:"flex"},DH={py:"20px",pl:"20px",pr:0},Dq={width:[0,0,"480px"],height:[0,0,"auto"],display:["none","flex"],alignItems:"center",justifyContent:"center",padding:"20px",position:"relative"},DK={borderRadius:"6px",overflow:"hidden",zIndex:1,display:"flex"},DQ=({onCancel:e,onConfirm:t,column:r})=>{let a=yR(),{postStats:n}=os(),{reservedColumnNames:i}=DB(),{allColumns:l}=df(),{updateName:s}=DO(),[o,d]=(0,H.useState)(!1),u=(0,DV.T)(),c=(0,H.useId)(),[m,p]=(0,H.useState)(rY.IssueTypeRenameDialog.defaultInputString),f=jT("issueTypes","demo"),h=(0,H.useCallback)(e=>{p(yf(e.currentTarget.value))},[p]),g=Dz({allColumns:l,reservedColumnNames:i},m),y=(0,H.useCallback)(async()=>{if(!g.isValid)return d(!0);await s(r,m),n({name:aQ,ui:"custom_type_rename_dialog",context:`new name: ${m}, original name: ${r.name}`,memexProjectColumnId:r.id}),t()},[s,m,g,d,t,r,n]),x=o&&!g.isValid;return(0,O.jsx)(wE.V,{onClose:e,title:rY.IssueTypeRenameDialog.title,footerButtons:[{buttonType:"default",content:rY.IssueTypeRenameDialog.actionSecondary,onClick:e},{buttonType:"primary",content:rY.IssueTypeRenameDialog.actionPrimary,onClick:y}],sx:DG,renderBody:()=>(0,O.jsxs)(wE.V.Body,{sx:DU,children:[(0,O.jsxs)(eO.Z,{sx:DH,children:[(0,O.jsxs)(eB.Z,{as:"p",children:[rY.IssueTypeRenameDialog.description(r.name),"\xa0",(0,O.jsx)(uB.Z,{target:"_blank",rel:"noopener noreferrer",href:rY.IssueTypeRenameDialog.learnMoreLink,children:rY.IssueTypeRenameDialog.learnMoreText})]}),(0,O.jsxs)(cX.Z,{sx:{mt:2},children:[(0,O.jsx)(cX.Z.Label,{children:rY.IssueTypeRenameDialog.fieldLabel}),(0,O.jsx)(yk.F,{...a,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{value:m,onChange:h,"aria-invalid":x,validationStatus:x&&!g.isValid?"error":void 0})}),x&&(0,O.jsx)(cX.Z.Validation,{variant:"error",children:g.message})]})]}),(0,O.jsx)(eO.Z,{sx:Dq,children:(0,O.jsxs)(eO.Z,{sx:DK,children:[(0,O.jsx)("video",{"aria-describedby":c,controls:!0,playsInline:!0,autoPlay:!u,muted:!0,loop:!0,style:{width:"440px",height:"auto"},children:(0,O.jsx)("source",{src:f,type:"video/mp4"})}),(0,O.jsx)(eO.Z,{id:c,className:"sr-only",sx:{display:"none"},children:rY.IssueTypeRenameDialog.videoDescription})]})})]})})};try{DQ.displayName||(DQ.displayName="MemexIssueTypeRenameDialog")}catch{}function DX({column:e,warning:t}){let[r,a]=(0,H.useState)(!1),n=(0,H.useRef)(null);return"rename-custom-type-column"!==t?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ut.Z,{...(0,ef.f)("column-settings-banner"),sx:{mb:6},variant:"warning","aria-live":"polite",children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",width:"100%"},children:[(0,O.jsx)(eO.Z,{children:(0,O.jsx)(eZ.Z,{icon:eF.AlertIcon,sx:{mr:2}})}),(0,O.jsxs)(eO.Z,{sx:{flexGrow:1},children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{mb:0,fontSize:1},children:rJ.IssueTypeRename.copy1}),rJ.IssueTypeRename.copy2(e.name),"\xa0",(0,O.jsx)(uB.Z,{target:"_blank",rel:"noopener noreferrer",href:rJ.IssueTypeRename.learnMoreLink,children:rJ.IssueTypeRename.learnMoreText})]}),(0,O.jsx)(eO.Z,{sx:{pl:4},children:(0,O.jsx)(cd.r,{ref:n,onClick:()=>a(!0),children:rJ.IssueTypeRename.actionPrimary})})]})}),r&&(0,O.jsx)(DQ,{column:e,onCancel:()=>{a(!1),setTimeout(()=>n.current?.focus(),100)},onConfirm:()=>{a(!1)}})]})}try{DX.displayName||(DX.displayName="ColumnSettingsBanner")}catch{}let DY=()=>{let{updateColumnValues:e}=w_(),{updateColumnEntry:t}=gr();return{updateIterationConfiguration:(0,H.useCallback)(async(r,a)=>{if(r.dataType!==eA.Iteration)return;let n=r.settings.configuration;if(!n)return;let i=a.iterations||n.iterations,l=a.completedIterations||n.completedIterations,s={duration:n.duration,startDay:n.startDay,...a,iterations:DJ(i),completedIterations:DJ(l)};f2();let{memexProjectColumn:o}=await wT({memexProjectColumnId:r.id,settings:{configuration:s}});if(o?.settings){let{settings:e}=o;t(ds({...r,settings:e}))}o&&e(o)},[t,e])}};function DJ(e){return e.map(e=>hp(e,["titleHtml"]))}function D0(){let{title:e}=r8(),t=(0,H.useContext)(on);return(0,O.jsxs)(eB.Z,{sx:{ml:2},...(0,ef.f)("column-settings-saved-message"),children:["Changes saved. Return to"," ",t?(0,O.jsx)(uB.Z,{as:lz,to:t.returnToViewLinkTo,style:{cursor:"pointer"},tabIndex:0,...(0,ef.f)("return-to-project-link"),children:e}):e,"."]})}try{D0.displayName||(D0.displayName="ColumnSettingsSavedMessage")}catch{}var D1=r(94735);let D2=/[A-Za-z ]*/;function D5(e,t,r,a,n){let i,l;let{iterations:s,completedIterations:o}=e,d=a?nG(a):e.duration,u=nP(e),c=nL(e);if(u.length>0&&c){let e=(0,rx.D)(c.startDate);i=r??(0,D1.I)(e,{days:d});let a=parseInt(c.title.replace(t,"").replace(D2,"").trim(),10);isNaN(a)&&(a=u.length),l=`${t} ${a+1}`}else l=`${t} 1`,i=r??new Date;let m={id:n??"",duration:d,title:l,titleHtml:l,startDate:nS(i)},p=s.slice(),f=o.slice();return(0,nf.R)((0,ta.E)(i,d),new Date)?f.unshift(m):p.push(m),a?{iterations:p,completedIterations:f,duration:d}:{iterations:p,completedIterations:f}}function D3(e,{id:t}){return e.filter(e=>e.id!==t)}function D4(e,t){return -1!==e.completedIterations.findIndex(e=>e.id===t.id)?{completedIterations:D3(e.completedIterations,t)}:-1!==e.iterations.findIndex(e=>e.id===t.id)?{iterations:D3(e.iterations,t)}:{}}function D8(e,t,r,a){let n=nP(e).sort(nM),i=n.findIndex(({id:e})=>e===t.id);if(-1===i)return{};let l=(0,ny.j)(nb(t),nb(n[i])),s=l<0&&r||l>0&&!a?l:0,[o,d]=[n.slice(0,i),n.slice(i+1)],u=[...o,t];for(let e of d){let t=u.at(-1),r=0===s&&a?function(e,t){let r=nk(e).endDate,a=(0,rx.D)(t.startDate);return Math.max((0,ny.j)(r,a)+1,0)}(t,e):s;u.push(0!==r?n$(e,r):e)}return nE(u)}let D6="inMemoryIteration",D7=0,D9=({column:e,fieldName:t,serverConfiguration:r,onUpdate:a})=>{let{postStats:n}=os(),[i,l]=(0,H.useState)("active"),[s,o]=(0,H.useState)(r),[d,u]=(0,H.useState)(!1),c=(0,H.useCallback)(e=>{o(e),u(!0)},[]),{items:m}=dP(),p=m.map(e=>e.columns),{findLoadedFieldIds:f}=f7(),h=f().includes(e.id),{loadColumnsWithItemColumnValues:g}=Tb();(0,H.useEffect)(()=>{h||g([e.id])},[h,e.id,g]);let y=(0,H.useMemo)(()=>({...s,iterations:Et(s.iterations),completedIterations:Et(s.completedIterations)}),[s]),x=(0,H.useMemo)(()=>(function(e,t,r){let a=new Set,n=new Set([...t.iterations?.map(e=>e.id)||[],...t.completedIterations?.map(e=>e.id)||[]]);if("configuration"in e.settings){for(let t of e.settings.configuration.iterations)n.has(t.id)||a.add(t.id);for(let t of e.settings.configuration.completedIterations)n.has(t.id)||a.add(t.id)}let i=0;for(let t of r){let r=t[e.id],n=r?.id;a.has(n)&&i++}return i})(e,y,p),[e,y,p]),b=cc(r);(0,H.useEffect)(()=>{d||r===b||o(r)},[d,r,b]);let v=(0,H.useMemo)(()=>(function(e){let t=nL(e),r=t?(0,rx.D)(t.startDate):new Date;return(0,ta.E)(r,t?.duration??0)})(s),[s]),w=(0,H.useMemo)(()=>nW(s.duration),[s.duration]),{perform:j,status:C}=d1({request:(0,H.useCallback)(async()=>{await a(y)},[y,a]),showErrorToast:!1}),[I,S]=(0,H.useState)("idle"),k=(0,H.useCallback)(async()=>{S("loading"),await j();let e=C.current.status;"failed"!==e&&u(!1),S(e)},[j,C]),T=Dj(),N=(0,H.useCallback)(async()=>{if(x>0){n({name:"settings_data_loss_iteration_warning",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:x})});let t=[...r.iterations,...r.completedIterations],a=[...s.iterations,...s.completedIterations];await T({field:e,values:t.filter(e=>!a.some(t=>t.id===e.id)).map(e=>e.title),affectedItems:x,affectedWorkflows:0})?(n({name:"settings_data_loss_iteration_save",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:x})}),await k()):n({name:"settings_data_loss_iteration_cancel",context:JSON.stringify({columnId:e.id,affectedIterationOptionsUsedCount:x})})}else k()},[x,n,e,r.iterations,r.completedIterations,s.iterations,s.completedIterations,T,k]),_=(0,H.useCallback)(e=>{0!==Object.entries(e).length&&(S("idle"),c({...s,...e}))},[s,c]),R=(0,H.useCallback)(e=>_(D4(s,e)),[s,_]),P=(0,H.useCallback)((e,r)=>{_(D5(s,t,e,r,`${D6}-${++D7}`))},[s,t,_]),D=(0,H.useCallback)(e=>_(D8(s,e,!1,!0)),[s,_]),E=(0,H.useCallback)(e=>_(D8(s,n$(e,s.duration),!1,!0)),[s,_]),A=(0,H.useCallback)((e,t,r)=>_(function(e,t,r,a){let n={...t,duration:(0,ny.j)((0,rx.D)(a.startDate),(0,rx.D)(t.startDate))},i={...e,...D8(e,n,!1,!0)};return D8(i,{...r,startDate:nS((0,ta.E)(nb(a),1))},!0,!1)}(s,e,t,r)),[_,s]),M=(0,H.useCallback)(()=>{c(r),S("idle")},[r,c]),L=(0,H.useMemo)(()=>(function(e,t){let r=new Map([...e.completedIterations.map(Ee(!0)),...e.iterations.map(Ee(!1))]);return nP(t).sort(nM).map(rg).map(([e,t])=>{let[a,n]=r.get(t.id)??[void 0,void 0],[i]=(e&&r.get(e.id))??[void 0];return{localIteration:t,localPreviousIteration:e,breakExistsBefore:void 0!==e&&nB(e,t),originalIteration:a,originalIsCompleted:n,originalPreviousIteration:i}})})(r,s),[r,s]),F=(0,H.useMemo)(()=>L.filter(e=>!e.originalIsCompleted&&e.originalIteration?.startDate!==e.localIteration?.startDate).length,[L]);return{allRowData:L,areColumnValuesLoaded:h,hasUnsavedChanges:d,isActiveTab:"active"===i,selectedTab:i,setSelectedTab:l,handleRemoveIteration:R,handleCreateIteration:P,handleChangeIteration:D,handleAddBreak:E,handleChangeBreak:A,handleReset:M,handleSaveChanges:N,countPushedActiveIterations:F,localConfiguration:s,minimumStartDate:v,defaultDuration:w,requestStatus:I}},Ee=e=>t=>[t.id,[t,e]];function Et(e){return e.map(e=>e.id.startsWith(D6)?{...e,id:""}:e)}function Er({onClick:e,removeTopPadding:t}){return(0,O.jsx)(eO.Z,{sx:{p:2,position:"absolute",left:0,right:0,transform:"translateY(-50%)",display:"flex",alignItems:"center",zIndex:1,justifyContent:"flex-end",pr:"20%","&:not(:hover):not(:focus-within) > :not(:hover)":{opacity:0}},children:(0,O.jsx)(eO.Z,{sx:{p:3,position:"absolute",pt:t?0:void 0,mt:t?3:void 0},children:(0,O.jsx)(y8.Z,{sx:{color:"fg.muted",backgroundColor:"canvas.default",cursor:"pointer",":hover":{color:"accent.fg"}},onClick:e,as:"button",type:"button",...(0,ef.f)("add-break-button"),children:"Insert break"})})})}try{Er.displayName||(Er.displayName="AddBreakButton")}catch{}var Ea=r(52333);let En=e=>e,Ei=({originalValue:e="",updatedValue:t="",renderUpdatedValue:r=En,renderOriginalValue:a=En,sx:n,testId:i})=>(0,O.jsx)(eB.Z,{sx:{mr:2,...n??{}},...i?(0,ef.f)(i):{},children:e===t?(0,O.jsx)(eB.Z,{children:r(t)}):(0,O.jsxs)(O.Fragment,{children:[e&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(eB.Z,{as:"del",sx:{color:"fg.subtle",textDecoration:"line-through"},...(0,ef.f)("original-value"),children:a(e)})}),e&&t&&(0,O.jsx)(eB.Z,{sx:{mr:2},children:" "}),t&&(0,O.jsx)(eB.Z,{as:"ins",sx:{textDecoration:"none"},...(0,ef.f)("updated-value"),children:r(t)})]})});try{Ei.displayName||(Ei.displayName="DiffValue")}catch{}let El={display:"flex",flexDirection:"row",position:"relative",padding:3};function Es({onClick:e}){return(0,O.jsx)(mq.h,{icon:eF.TrashIcon,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",color:"fg.muted",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Remove item",onClick:e,...(0,ef.f)("delete-iteration")})}function Eo({value:e,onChange:t}){let[r,a]=yh(e),n=()=>a(e),i=(0,H.useRef)(null),l=()=>{let a=yf(r.trim());a?a!==e&&t?.(a):n()},s=(0,yc.u)(e=>{if("Enter"===e.key)l();else{if("Escape"!==e.key)return;n()}e.preventDefault(),setTimeout(()=>i.current?.blur(),10)}),o=yR();return(0,O.jsx)(eO.Z,{onClick:()=>i.current?.focus(),sx:{px:1,ml:-1,display:"inline-block",borderRadius:"2",cursor:"text","&:focus-within":{boxShadow:"primer.shadow.focus"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`}},children:(0,O.jsx)(yk.F,{...o,children:(0,O.jsx)(pI,{as:pT,autoComplete:"off",value:r,onChange:e=>a(e.target.value),onBlur:l,"aria-label":"Edit iteration name",ref:i,...s,...(0,ef.f)("iteration-title")})})})}function Ed({value:e,onChange:t,minDate:r}){let a=(0,H.useMemo)(()=>(function(e){let{startDate:t,endDate:r}=nk(e);return{from:t,to:r}})(e),[e]);return(0,O.jsx)(yW.DatePicker,{variant:"range",value:a,onChange:e=>{e&&t(function(e){let t=(0,ny.j)(e.to,e.from)+1;return{startDate:nS(e.from),duration:t}}(e))},view:"2-month",minDate:r,confirmation:!0,confirmUnsavedClose:!0,anchor:t=>(0,O.jsx)(uB.Z,{muted:!0,...t,sx:{color:"inherit"},as:"button","aria-label":"Edit date range",...(0,ef.f)("iteration-or-break-dates"),children:nN(e)})})}function Eu({localTitle:e="",originalTitle:t="",localInterval:r,localPreviousInterval:a,originalInterval:n,labelType:i,onRemove:l,onTitleChange:s,onIntervalChange:o,children:d}){let u=e!==t||!(0,mt.Z)(r,n),c=(0,H.useMemo)(()=>a?(0,ta.E)((0,rx.D)(a.startDate),a.duration):(0,Ea.e)(new Date,1),[a]);return(0,O.jsxs)(eO.Z,{as:"li",sx:{listStyle:"none","&:not(:last-child)":{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.muted"}},children:[d,(0,O.jsxs)(eO.Z,{sx:{...El,backgroundColor:"break"===i?"canvas.subtle":"canvas.default",boxShadow:e=>u?`2px 0 0 ${e.colors.accent.fg} inset`:void 0},children:[(0,O.jsx)(vW,{labelType:i,sx:{pt:e?"2px":void 0}}),(0,O.jsxs)(eO.Z,{sx:{flexDirection:"column",display:"flex",alignItems:"flex-start",gap:1},children:[(e||t)&&(0,O.jsx)(eO.Z,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,O.jsx)(Ei,{sx:{fontWeight:600,fontSize:2},originalValue:t,updatedValue:e,testId:"iteration-title-diff",renderUpdatedValue:t=>(0,O.jsx)(Eo,{value:e,onChange:s})})}),(0,O.jsx)(eO.Z,{sx:{flexDirection:"row",display:"flex",justifyContent:"space-between"},children:(0,O.jsx)(Ei,{originalValue:nN(n),updatedValue:nN(r),testId:"iteration-dates-diff",renderOriginalValue:()=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{sx:{fontWeight:600},children:n_(n)}),"\xa0\xa0",(0,O.jsx)(eB.Z,{children:nN(n)})]}),renderUpdatedValue:()=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{sx:{fontWeight:600},children:n_(r)}),"\xa0\xa0",(0,O.jsx)(Ed,{value:r,onChange:o,minDate:c})]})})})]}),(0,O.jsx)(Es,{onClick:l})]})]})}try{Es.displayName||(Es.displayName="DeleteButton")}catch{}try{Eo.displayName||(Eo.displayName="TitleInput")}catch{}try{Ed.displayName||(Ed.displayName="IntervalDatePicker")}catch{}try{Eu.displayName||(Eu.displayName="IterationRowSkeleton")}catch{}function Ec({onChange:e,localPreviousIteration:t,localNextIteration:r,originalPreviousIteration:a,originalNextIteration:n}){let i=nV(t,r);if(!i)return(0,O.jsx)(O.Fragment,{});let l=nV(a,n);return(0,O.jsx)(Eu,{localInterval:i,originalInterval:l,localPreviousInterval:t,labelType:"break",onRemove:()=>e({...i,duration:0}),onIntervalChange:e})}try{Ec.displayName||(Ec.displayName="IterationBreakRow")}catch{}function Em({iteration:e,onRemove:t,onChange:r,originalIsCompleted:a=!1,previousIteration:n,originalIteration:i,children:l}){let s=((0,H.useMemo)(()=>!(0,mt.Z)(e,i),[e,i])?void 0:a)??nD(e)?"completed":nj(new Date,e)?"current":"planned";return(0,O.jsx)(Eu,{localTitle:e.title,originalTitle:i?.title,localInterval:e,originalInterval:i,localPreviousInterval:n,labelType:s,onRemove:t,onTitleChange:t=>r({...e,title:t}),onIntervalChange:t=>r({...e,...t}),children:l})}try{Em.displayName||(Em.displayName="IterationRow")}catch{}let Ep=["days","weeks"];function Ef(e){switch(e.key){case"e":case"-":case".":case"+":e.preventDefault()}}function Eh({value:e,onChange:t,onValidChange:r}){let a=(0,H.useMemo)(()=>{var t;return Number.isNaN(t=e.quantity)?{isValid:!1}:t<1?{isValid:!1,message:rI.iterationDurationQtyLow(1)}:t>99?{isValid:!1,message:rI.iterationDurationQtyHigh(99)}:{isValid:!0}},[e.quantity]);(0,H.useEffect)(()=>r?.(a.isValid),[r,a.isValid]);let n=r=>{r&&t({...e,units:r.key})},i=mb("iteration-duration"),l=mb("duration-quantity-validation-message"),s=(0,H.useMemo)(()=>{var t;return Array.from((t=e.quantity,new Map(Ep.map(e=>[e,{children:1===t?nz[e]:e,key:e,...(0,ef.f)(`duration-${e}-menu-item`)}]))).values())},[e.quantity]);return(0,O.jsxs)(eO.Z,{sx:{flexGrow:1,alignItems:"center",display:"flex"},role:"group","aria-label":rI.iterationDurationLabel,"aria-labelledby":i,children:[(0,O.jsxs)(eO.Z,{sx:{position:"relative"},children:[(0,O.jsx)(pw.Z,{type:"number",min:1,max:99,step:1,required:!0,value:Number.isNaN(e.quantity)?"":e.quantity,onChange:r=>{let a=r.target.valueAsNumber;t({...e,quantity:a})},onKeyDown:Ef,"aria-invalid":!a.isValid,"aria-describedby":a.message&&l,"aria-label":"Duration quantity",sx:{"&.error":{borderColor:"danger.emphasis",boxShadow:"none"},mr:2,"& > input":{textAlign:"center",pr:.5,pl:.5,width:"5ch"}},className:a.isValid?"":"error",...(0,ef.f)("duration-quantity-input"),id:"duration-quantity-input"}),(0,O.jsx)(IG.v,{message:a.message,id:l,testId:"duration-quantity-validation-message"})]}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{sx:{flex:1,gridTemplateColumns:"min-content 1fr min-content","[data-component=text]":{textAlign:"left"},"[data-component=buttonContent]":{flex:0}},"aria-label":"Units",...(0,ef.f)("duration-units-button"),children:(0,O.jsx)(eB.Z,{sx:{flex:1,textAlign:"left"},...(0,ef.f)("duration-units-value"),children:e.units})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(mx.S,{selectionVariant:"single",children:s.map(t=>(0,H.createElement)(mx.S.Item,{...t,key:t.key,selected:t.key===e.units,onSelect:()=>n(t)}))})})]})]})}try{Eh.displayName||(Eh.displayName="IterationDurationInput")}catch{}function Eg({duration:e,onDurationChange:t,startDate:r,onStartDateChange:a,minStartDate:n,onValidChange:i}){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(cX.Z,{id:"iteration-start-date",sx:{mb:2},children:[(0,O.jsx)(cX.Z.Label,{children:rI.iterationStartDateLabel}),(0,O.jsx)(yW.DatePicker,{"aria-label":rI.iterationStartDateLabel,variant:"single",value:r,onChange:e=>{if(!e)throw Error("Start date cannot be null/undefined.");a(e)},minDate:n,showTodayButton:!1,anchorSx:{width:"100%",'[data-component="buttonContent"]':{flex:0}}})]}),(0,O.jsxs)(cX.Z,{id:"duration-quantity-input",sx:{alignItems:"initial"},children:[(0,O.jsx)(cX.Z.Label,{children:rI.iterationDurationLabel}),(0,O.jsx)(Eh,{value:e,onChange:t,onValidChange:i})]})]})}try{Eg.displayName||(Eg.displayName="NewIterationOptions")}catch{}function Ey({onCreate:e,defaultDuration:t,minimumStartDate:r}){let[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useState)(!0),[s,o]=(0,H.useState)(t),[d,u]=(0,H.useState)(r);(0,H.useEffect)(()=>u(e=>(0,nf.R)(e,r)?r:e),[r]);let c=()=>{o(t),u(r),l(!0)},m=()=>{n(!1)};return(0,O.jsxs)(by.Z,{sx:{display:"flex"},children:[(0,O.jsx)(cd.r,{size:"small",onClick:()=>e(r,t),leadingVisual:eF.PlusIcon,sx:{display:"flex",alignItems:"center"},...(0,ef.f)("add-default-iteration-button"),children:"Add iteration"}),(0,O.jsx)(xj.w,{renderAnchor:e=>(0,O.jsx)(cd.r,{trailingVisual:eF.TriangleDownIcon,size:"small",sx:{lineHeight:"22px"},...(0,ef.f)("add-custom-iteration-button"),...e,children:"More options"}),width:"medium",open:a,onOpen:()=>{c(),n(!0)},onClose:m,focusZoneSettings:{bindKeys:xv.Qw.Tab},align:"end",overlayProps:{...(0,ef.f)("custom-iteration-modal"),"aria-label":"Add new iteration configuration",role:"dialog",sx:{overflow:"visible"}},children:(0,O.jsxs)("form",{onSubmit:t=>{t.preventDefault(),m(),e(d,s)},children:[(0,O.jsx)(eO.Z,{sx:{p:3,borderBottom:"1px solid",borderColor:"border.muted"},children:(0,O.jsx)(Eg,{startDate:d,onStartDateChange:u,duration:s,onDurationChange:o,onValidChange:l,minStartDate:r})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-end",p:3,pt:2,pb:2,gap:2},children:[(0,O.jsx)(cd.r,{size:"small",onClick:m,...(0,ef.f)("cancel-add-custom-iteration"),type:"button",children:"Cancel"}),(0,O.jsx)(cd.r,{variant:"primary",size:"small",type:"submit",disabled:!i,...(0,ef.f)("save-add-custom-iteration"),children:"Add"})]})]})})]})}try{Ey.displayName||(Ey.displayName="NewIterationModalButton")}catch{}let Ex=(e,t)=>({bg:"transparent",border:"none",p:4,cursor:e&&!t?"not-allowed":"pointer",fontWeight:t?"semibold":"inherit",color:t?"fg.default":e?"fg.subtle":"fg.muted"});function Eb({selectedTab:e,setSelectedTab:t,configuration:r,addButtonProps:a,disabled:n=!1,tabpanelId:i}){let l=r.iterations.length,s=r.completedIterations.length;return(0,O.jsx)(eO.Z,{children:(0,O.jsxs)(eO.Z,{sx:{...El,bg:"canvas.subtle",p:0,alignItems:"center"},children:[(0,O.jsxs)("div",{role:"tablist","aria-disabled":n,style:{display:"flex"},children:[(0,O.jsxs)(cd.r,{sx:Ex(n,"active"===e),role:"tab","aria-controls":"active"===e?i:void 0,...(0,ef.f)("active-iterations"),onClick:()=>{n||t("active")},"aria-label":"Active iterations","aria-disabled":n,disabled:n,children:[(0,O.jsx)(eZ.Z,{icon:eF.ClockIcon,sx:{color:"inherit",mr:2},"aria-label":"Active iterations"}),(0,O.jsxs)(eB.Z,{children:[l," Active"]})]},"active"),(0,O.jsxs)(cd.r,{sx:Ex(n,"completed"===e),role:"tab","aria-controls":"completed"===e?i:void 0,...(0,ef.f)("completed-iterations"),onClick:()=>{n||t("completed")},"aria-label":"Completed iterations","aria-disabled":n,disabled:n,children:[(0,O.jsx)(eZ.Z,{icon:eF.ArchiveIcon,sx:{color:"inherit",mr:2},"aria-label":"Completed iterations"}),(0,O.jsxs)(eB.Z,{children:[s," Completed"]})]},"completed")]}),"active"===e&&(0,O.jsx)(eO.Z,{sx:{ml:"auto",mr:3},children:(0,O.jsx)(Ey,{...a})})]})})}try{Eb.displayName||(Eb.displayName="IterationsHeader")}catch{}function Ev({isActiveTab:e}){return(0,O.jsxs)(eO.Z,{sx:{width:"100%",p:6,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,O.jsx)(eB.Z,{as:"h3",sx:{color:"fg.default"},children:e?rP.noIterationsTitle:rP.noCompletedIterationsTitle}),(0,O.jsx)(eB.Z,{sx:{color:"fg.muted"},children:e?rP.noIterationsDescription:rP.noCompletedIterationsDescription})]})}try{Ev.displayName||(Ev.displayName="NoIterationsPlaceholder")}catch{}function Ew({column:e,fieldName:t,serverConfiguration:r,onUpdate:a}){let{allRowData:n,areColumnValuesLoaded:i,hasUnsavedChanges:l,isActiveTab:s,selectedTab:o,setSelectedTab:d,handleRemoveIteration:u,handleCreateIteration:c,handleChangeIteration:m,handleAddBreak:p,handleChangeBreak:f,handleReset:h,handleSaveChanges:g,countPushedActiveIterations:y,localConfiguration:x,minimumStartDate:b,defaultDuration:v,requestStatus:w}=D9({column:e,fieldName:t,serverConfiguration:r,onUpdate:a}),j=(0,H.useRef)(null),C=x.iterations.length,I=(0,H.useRef)(C),S=x.completedIterations.length,k=(0,H.useRef)(S);(0,H.useEffect)(()=>{j.current&&(C<=I.current&&S<=k.current||j.current.scrollIntoView({behavior:"smooth"}))},[C,S]),(0,H.useEffect)(()=>{I.current=C,k.current=S});let T=(0,H.useMemo)(()=>n.filter(({originalIsCompleted:e})=>"completed"===o?e:!e).map(({localIteration:e,localPreviousIteration:t,originalIteration:r,originalIsCompleted:a,originalPreviousIteration:n,breakExistsBefore:i},l)=>(0,O.jsxs)(H.Fragment,{children:[i?(0,O.jsx)(Ec,{onChange:r=>f(t,e,r),localNextIteration:e,localPreviousIteration:t,originalNextIteration:r,originalPreviousIteration:n}):null,(0,O.jsx)(Em,{iteration:e,originalIsCompleted:a,onRemove:()=>u(e),onChange:m,previousIteration:t,originalIteration:r,children:i?null:(0,O.jsx)(Er,{onClick:()=>p(e),removeTopPadding:0===l})})]},e.id)),[n,o,p,m,u,f]),N=mb("iteration-field-options");return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:{width:"100%",borderRadius:"6px",borderColor:"border.default",borderStyle:"solid",borderWidth:"1px",overflow:"hidden",position:"relative",mt:4},children:[(0,O.jsx)(Eb,{configuration:x,selectedTab:o,setSelectedTab:d,addButtonProps:{minimumStartDate:b,defaultDuration:v,onCreate:c},disabled:l,tabpanelId:N}),(0,O.jsx)("div",{role:"tabpanel",id:N,children:T.length>0?(0,O.jsx)(eO.Z,{as:"ol",sx:{p:0},"aria-label":"completed"===o?"Completed iterations":"Active iterations",children:T}):(0,O.jsx)(Ev,{isActiveTab:s})}),"completed"===o&&y>0&&(0,O.jsx)(ut.Z,{sx:{border:"none",borderRadius:0},...(0,ef.f)("active-changes-notice"),children:rP.willPushActiveIterations(y)})]}),(0,O.jsx)("div",{ref:j}),(0,O.jsxs)(eO.Z,{sx:{gap:2,my:3,display:"flex",alignItems:"center"},children:[(0,O.jsx)(cd.r,{variant:"primary",disabled:!l||"loading"===w||!i,onClick:()=>g(),...(0,ef.f)("iteration-field-settings-save"),children:rI.saveChanges}),(0,O.jsx)(cd.r,{disabled:!l||"loading"===w,onClick:()=>h(),...(0,ef.f)("iteration-field-settings-reset"),children:rI.reset}),(0,O.jsxs)(eO.Z,{sx:{pl:1},children:[(0,O.jsx)(yC,{status:w}),"succeeded"===w?(0,O.jsx)(D0,{}):"failed"===w?(0,O.jsx)(eB.Z,{sx:{ml:2},children:rI.genericErrorMessage}):null]})]})]})}try{Ew.displayName||(Ew.displayName="IterationFieldOptions")}catch{}let Ej=({column:e})=>{let{updateIterationConfiguration:t}=DY(),r=(0,H.useCallback)(async r=>{await t(e,r)},[e,t]);return(0,O.jsx)(Ew,{column:e,fieldName:e.name,serverConfiguration:e.settings.configuration,onUpdate:r},e.id)};try{Ej.displayName||(Ej.displayName="IterationConfigurationView")}catch{}let EC={containerSolid:"progress-bar-module__containerSolid--LfZWC",containerSegmented:"progress-bar-module__containerSegmented--IwcYh",containerRing:"progress-bar-module__containerRing--Me4du",solid:"progress-bar-module__solid--dWpHA",segmented:"progress-bar-module__segmented--MfASq",barItemComplete:"progress-bar-module__barItemComplete--Ro6h2",barItemIncomplete:"progress-bar-module__barItemIncomplete--Yjwmp",circleProgressShade:"progress-bar-module__circleProgressShade--E8OoA",ringSvg:"progress-bar-module__ringSvg--ZaJgw",circle:"progress-bar-module__circle--Afzpy",circleProgress:"progress-bar-module__circleProgress--Fv2gM",textCount:"progress-bar-module__textCount--FR2FW",consistentContentSizing:"progress-bar-module__consistentContentSizing--ZW4MK",textPercentage:"progress-bar-module__textPercentage--pzQK8"},EI=({color:e,completed:t,name:r,percentCompleted:a,total:n})=>{let{theme:i}=(0,$.Fg)(),l=Math.floor(80)/2,s=Math.ceil(7.5),o=a>=100?100:Math.max(a-s,1);return(0,O.jsxs)(y8.Z,{"aria-label":r,className:EC.containerRing,variant:"secondary",...(0,ef.f)("progress-bar-ring"),children:[(0,O.jsxs)("svg",{className:EC.ringSvg,height:"1em",width:"1em",role:"presentation",viewBox:"0 0 100 100",children:[a>0?(0,O.jsx)(()=>(0,O.jsx)("circle",{className:EC.circleProgressShade,cx:"50",cy:"50",r:"20",fill:"none",pathLength:"100",stroke:e,strokeDasharray:"100",strokeDashoffset:100===o?0:100-o-s,strokeWidth:"40",style:{transform:"rotate(-90deg)"}}),{}):null,(0,O.jsx)(()=>(0,O.jsx)("circle",{className:EC.circle,cx:"50",cy:"50",r:l,fill:"none",stroke:i?.colors.border.default,strokeWidth:20}),{}),a>0?(0,O.jsx)(()=>(0,O.jsx)("circle",{className:EC.circleProgress,cx:"50",cy:"50",r:l,fill:"none",pathLength:"100",stroke:e,strokeDasharray:"100",strokeDashoffset:100-o,strokeLinecap:"round",strokeWidth:20,style:{transform:"rotate(-75deg)"}}),{}):null]}),(0,O.jsxs)(eB.Z,{children:[t," / ",n]})]})};try{EI.displayName||(EI.displayName="ProgressBarRing")}catch{}try{(w=RingBackground).displayName||(w.displayName="RingBackground")}catch{}try{(j=RingProgressShade).displayName||(j.displayName="RingProgressShade")}catch{}try{(C=RingProgress).displayName||(C.displayName="RingProgress")}catch{}let ES=({color:e,completed:t,consistentContentSizing:r,hideNumerals:a,name:n,percentCompleted:i,total:l,...s})=>{let o=Math.min(l,22),d=Math.max(Math.floor(o*i/100),1),u=0===i?0:l<=o?t:d,c=(0,IL.W)(EC.containerSegmented,{[`${EC.consistentContentSizing}`]:r});return(0,O.jsxs)(eO.Z,{className:c,...(0,ef.f)("progress-bar-segmented"),children:[!a&&(0,O.jsxs)(eB.Z,{className:EC.textCount,children:[t," / ",l]}),(0,O.jsxs)(gL.k,{"aria-label":n,"aria-valuenow":i,"aria-valuetext":`${i}% complete`,className:EC.segmented,inline:!0,...s,children:[Array(u).fill(null).map((t,r)=>(0,O.jsx)(gL.k.Item,{className:EC.barItemComplete,sx:{backgroundColor:e}},r)),Array(o-u).fill(null).map((t,r)=>(0,O.jsx)(gL.k.Item,{className:EC.barItemIncomplete,sx:{backgroundColor:e}},r))]}),!a&&(0,O.jsxs)(eB.Z,{className:EC.textPercentage,children:[i,"%"]})]})};try{ES.displayName||(ES.displayName="ProgressBarSegmented")}catch{}let Ek=({color:e,completed:t,consistentContentSizing:r,hideNumerals:a,name:n,percentCompleted:i,total:l,...s})=>{let o=(0,IL.W)(EC.containerSolid,{[`${EC.consistentContentSizing}`]:r});return(0,O.jsxs)(eO.Z,{className:o,...(0,ef.f)("progress-bar-solid"),children:[!a&&(0,O.jsxs)(eB.Z,{className:EC.textCount,children:[t," / ",l]}),(0,O.jsxs)(gL.k,{"aria-label":n,"aria-valuenow":i,"aria-valuetext":`${i}% complete`,className:EC.solid,inline:!0,...s,children:[(0,O.jsx)(gL.k.Item,{progress:i,className:EC.barItemComplete,sx:{backgroundColor:e}}),(0,O.jsx)(gL.k.Item,{progress:100-i,className:EC.barItemIncomplete,sx:{backgroundColor:e}})]}),!a&&(0,O.jsxs)(eB.Z,{className:EC.textPercentage,children:[i,"%"]})]})};try{Ek.displayName||(Ek.displayName="ProgressBarSolid")}catch{}let ET={SEGMENTED:"SEGMENTED",SOLID:"SOLID",RING:"RING"},EN=({color:e="PURPLE",name:t="Progress",variant:r,...a})=>{let{accent:n}=(0,tt.L7)(e);switch(r){case ET.SEGMENTED:return(0,O.jsx)(ES,{...a,color:n,name:t});case ET.RING:return(0,O.jsx)(EI,{...a,color:n,name:t});default:return(0,O.jsx)(Ek,{...a,color:n,name:t})}};try{EN.displayName||(EN.displayName="ProgressBar")}catch{}let E_=()=>{let{updateColumnEntry:e}=gr(),[t,r]=(0,H.useState)(yg.None),a=(0,H.useCallback)((t,r)=>t.dataType!==eA.SubIssuesProgress?void 0:!(0,mt.Z)(t.settings.progressConfiguration,r)&&(e(ds({...t,settings:{progressConfiguration:r}})),!0),[e]),n=(0,H.useCallback)(t=>{e(ds(t))},[e]);return{updateProgressConfiguration:(0,H.useCallback)(async(e,t)=>{if(a(e,t))try{f2();let n=await wT({memexProjectColumnId:e.id,settings:{progressConfiguration:t}});r(yg.Successful),setTimeout(()=>{r(yg.None)},3e3),n.memexProjectColumn.settings?.progressConfiguration&&a(ds({...n.memexProjectColumn}),n.memexProjectColumn.settings?.progressConfiguration)}catch(t){r(yg.Failed),n(e)}},[a,n]),commitState:t}},ER=({children:e})=>(0,O.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:e}),EP=()=>(0,O.jsxs)(ER,{children:[(0,O.jsx)("path",{d:"M3 10H13",stroke:"#D8DEE4",strokeWidth:"2",strokeLinecap:"round"}),(0,O.jsx)("path",{d:"M3 10H7.5",stroke:"#57606A",strokeWidth:"2",strokeLinecap:"round"})]}),ED=()=>(0,O.jsxs)(ER,{children:[(0,O.jsx)("path",{d:"M3 8H13",stroke:"#D8DEE4",strokeWidth:"2",strokeLinecap:"round"}),(0,O.jsx)("path",{d:"M3 8H13",stroke:"#6E7781",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"2 3.75"})]}),EE=()=>(0,O.jsxs)(ER,{children:[(0,O.jsxs)("g",{clipPath:"url(#clip0_3042_26109)",children:[(0,O.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7453 8C13.7453 4.82696 11.173 2.2547 8.00002 2.2547C4.82701 2.2547 2.25479 4.82696 2.25479 8C2.25479 11.173 4.82701 13.7453 8.00002 13.7453C11.173 13.7453 13.7453 11.173 13.7453 8ZM8.00002 0.928857C11.9053 0.928858 15.0711 4.09472 15.0711 8C15.0711 11.9053 11.9053 15.0711 8.00002 15.0711C4.09478 15.0711 0.928963 11.9053 0.928962 8C0.928963 4.09472 4.09478 0.928858 8.00002 0.928857Z",fill:"#D8DEE4"}),(0,O.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7453 8C13.7453 4.82696 11.173 2.2547 8.00002 2.2547L7.99999 2.2547L7.99999 0.928857H8.00002C11.9053 0.928858 15.0711 4.09472 15.0711 8C15.0711 11.9053 11.9053 15.0711 8.00002 15.0711C6.10246 15.0711 4.37947 14.3237 3.10942 13.1071C3.31957 13.3084 3.54254 13.497 3.77729 13.6718C4.72815 14.3797 5.84174 14.8372 7.01565 15.0023C8.18957 15.1673 9.38613 15.0345 10.4953 14.6162C11.1867 14.3554 11.8303 13.9889 12.4041 13.5321C12.7509 13.256 13.0723 12.9469 13.3633 12.6082L12.3578 11.7442C13.2226 10.7386 13.7453 9.43036 13.7453 8ZM4.10902 3.77287C3.99219 3.88041 3.87983 3.99279 3.77223 4.10973C3.87981 3.99287 3.99218 3.88048 4.10902 3.77287ZM2.25599 8.11886C2.25438 8.04086 2.25435 7.96277 2.25592 7.88463C2.25516 7.923 2.25479 7.96146 2.25479 8C2.25479 8.03972 2.25519 8.07934 2.25599 8.11886ZM3.18542 2.82115C4.42299 1.67007 6.07372 0.957248 7.8906 0.929687C7.48097 0.936023 7.07402 0.977921 6.67417 1.05425C5.95369 1.19178 5.25629 1.4411 4.60795 1.79556C4.09103 2.07818 3.61354 2.42313 3.18542 2.82115ZM0.930122 7.87063C0.96257 6.06206 1.67402 4.41923 2.82035 3.18628C2.53455 3.49382 2.27569 3.82728 2.04745 4.18326C1.40758 5.18121 1.02889 6.32402 0.946173 7.5066C0.937684 7.62797 0.932341 7.74935 0.930122 7.87063Z",fill:"#57606A"})]}),(0,O.jsx)("defs",{children:(0,O.jsx)("clipPath",{id:"clip0_3042_26109",children:(0,O.jsx)("rect",{width:"16",height:"16",fill:"white"})})})]});try{ER.displayName||(ER.displayName="IconWrapper")}catch{}try{EP.displayName||(EP.displayName="BarIcon")}catch{}try{ED.displayName||(ED.displayName="SegmentedBarIcon")}catch{}try{EE.displayName||(EE.displayName="RingIcon")}catch{}let EA=[{id:ET.SOLID,leadingVisual:EP,label:"Bar"},{id:ET.SEGMENTED,leadingVisual:ED,label:"Segmented bar"},{id:ET.RING,leadingVisual:EE,label:"Ring"}],EM=({value:e,onSelect:t})=>{let r=EA.find(t=>t.id===e);return(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{"aria-label":"Progress visualization variant",sx:{width:248},leadingVisual:r?.leadingVisual,block:!0,alignContent:"start",children:r?.label}),(0,O.jsx)(fj.P.Overlay,{width:"auto",children:(0,O.jsx)(mx.S,{children:EA.map(({id:e,leadingVisual:r,label:a})=>(0,O.jsxs)(mx.S.Item,{onSelect:()=>t(e),children:[a,(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(r,{})})]},e))})})]})},EL=e=>(0,O.jsx)(eO.Z,{as:"form",...(0,ef.f)("hide-numerals-checkbox-field"),children:(0,O.jsxs)(cX.Z,{disabled:e.disabled,children:[(0,O.jsx)(uz.Z,{...e}),(0,O.jsx)(cX.Z.Label,{children:"Show numerical value"})]})}),EF=({column:e})=>{let{updateProgressConfiguration:t,commitState:r}=E_(),a=e.settings?.progressConfiguration?.variant||ET.SOLID,n=e.settings?.progressConfiguration?.hideNumerals||!1,i=e.settings?.progressConfiguration?.color||"PURPLE",l={color:i,hideNumerals:n,variant:a},s=(0,H.useRef)(rI.genericErrorMessage);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:1,pt:4,pb:2},"aria-label":`${e.name} options`,children:"Options"}),(0,O.jsx)(eO.Z,{sx:{bg:"canvas.subtle",padding:4,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:2,width:248,minHeight:"5em"},children:(0,O.jsx)(EN,{completed:2,percentCompleted:40,total:5,variant:a,hideNumerals:n,color:i})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",gap:2,pt:3,pb:4},children:[(0,O.jsx)(EM,{value:a,onSelect:r=>{t(e,{...l,variant:r})}}),(0,O.jsx)(EL,{checked:!n||a===ET.RING,disabled:a===ET.RING,onChange:r=>{t(e,{...l,hideNumerals:!r.target.checked})}})]}),(0,O.jsx)(wP.z,{value:i,onChange:r=>{t(e,{...l,color:r})},label:"Color"}),(0,O.jsx)(D_,{commitState:r,errorMessage:s})]})};try{EM.displayName||(EM.displayName="VariantSelect")}catch{}try{EL.displayName||(EL.displayName="HideNumeralsCheckboxField")}catch{}try{EF.displayName||(EF.displayName="ProgressConfigurationView")}catch{}let EZ=()=>{let{allColumns:e}=df(),{memex_sub_issues:t}=n9(),{fieldId:r}=(0,K.UO)(),a=l$(),n=ur(),i=(0,H.useMemo)(()=>e.filter(e=>DF(e,{memex_sub_issues:t})),[e,t]),l=(0,H.useMemo)(()=>void 0!==r?i.find(e=>`${e.id}`===r):void 0,[i,r]),s=`${l?.name} field settings`,{setCurrentColumnTitle:o}=r7();o(s);let{postStats:d}=os(),{updateName:u}=DO(),c=(0,H.useCallback)(async e=>{l&&e!==l.name&&(await u(l,e),d({name:aQ,ui:"settings",context:`new name: ${e}, original name: ${l.name}`,memexProjectColumnId:l.id}))},[l,d,u]),{localValue:m,isError:p,isSuccess:f,inputProps:h}=yy({initialValue:l?.name??"",commitFn:c}),g=yR();if(!l)return(0,O.jsx)(EB,{});let y=jA(l.dataType),x=DM(l);return(0,O.jsxs)(eO.Z,{sx:{flexDirection:"column",flex:1,display:"flex"},...(0,ef.f)(`column-settings-${l.name}`),children:[x&&(0,O.jsx)(DX,{warning:x,column:l}),(0,O.jsxs)(eO.Z,{sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",display:"flex",justifyContent:"space-between",alignItems:"center",pb:2,mb:3},children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:4,fontWeight:"normal"},children:s}),l.userDefined?(0,O.jsx)(EO,{column:l,numberOfColumns:i.length,onDeleteColumn:()=>{let e=i.findIndex(e=>e.id===l.id);a(eI.generatePath({...n,fieldId:i[Math.max(0,e-1)].id}),{replace:!0})}}):null]}),(0,O.jsx)(eO.Z,{sx:{pb:2,mb:2},children:(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{children:"Field name"}),l.userDefined?(0,O.jsx)(yk.F,{...g,children:(0,O.jsx)(pw.Z,{value:m,...h,sx:{width:248,...p?yI:{}}},l.id)}):(0,O.jsx)(pw.Z,{sx:{width:248},disabled:!0,value:l.name}),!l.userDefined&&(0,O.jsxs)(cX.Z.Caption,{children:[l.name," fields are created by GitHub and cannot be renamed."]}),p&&(0,O.jsx)(cX.Z.Validation,{variant:"error",children:0===m.length?rI.requiredFieldErrorMessage:rI.genericErrorMessage}),f&&(0,O.jsx)(cX.Z.Validation,{variant:"success",children:"Saved!"})]})}),(0,O.jsxs)(eO.Z,{children:[(0,O.jsx)(eO.Z,{sx:{fontWeight:"bold",mb:1},children:"Field type"}),(0,O.jsx)(cd.r,{leadingVisual:y,disabled:!0,children:jM(l.dataType)})]}),(0,O.jsx)(EV,{column:l})]})},EO=({column:e,numberOfColumns:t,onDeleteColumn:r})=>{let[a,n]=(0,H.useState)(!1);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cd.r,{variant:"danger",onClick:()=>n(!0),children:"Delete field"}),(0,O.jsx)(Ez,{numberOfColumns:t,columnModel:e,isDialogOpen:a,setIsDialogOpen:n,onDeleteColumn:r})]})},EV=(0,H.memo)(function({column:e}){switch(e.dataType){case eA.Iteration:return(0,O.jsx)(Ej,{column:e});case eA.SingleSelect:return(0,O.jsx)(DA,{column:e});case eA.SubIssuesProgress:return(0,O.jsx)(EF,{column:e});default:return null}}),EB=(0,H.memo)(function(){return(0,O.jsxs)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1,my:3},children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,size:30,sx:{color:"danger.fg"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"This field no longer exists"}),(0,O.jsx)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:"Select another field to view settings."})]})}),E$=({columnModel:e})=>{let{getCountOfItemsWithColumnValue:t}=DZ(),r=t(e.id),a=uO().workflows.filter(t=>t.actions.some(t=>t.arguments.fieldId===e.databaseId)).length,n=rI.deleteField(e.name);if(!(r>0||a>0))return(0,O.jsxs)(O.Fragment,{children:[n,"."]});let i=r>0,l=a>0,s=(0,O.jsxs)(O.Fragment,{children:["and remove its data from"," ",i?(0,O.jsxs)("strong",{children:[r," ",1!==r?"items":"item"]}):null,i&&l?" and ":null,l?(0,O.jsxs)("strong",{children:[a," ",1!==a?"workflows":"workflow"]}):null,"."]});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("p",{children:[n," ",s]}),(0,O.jsx)("p",{children:(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:"Permanently delete data from this project?"})})]})},Ez=({isDialogOpen:e,columnModel:t,numberOfColumns:r,setIsDialogOpen:a,onDeleteColumn:n})=>{let{currentView:i}=oi(),{removeField:l}=Sb(),{postStats:s}=os(),{groupedByColumn:o,clearGroupedBy:d}=dI(),u=(0,H.useCallback)(()=>{let{id:e,name:a,dataType:u}=t;i&&o?.id===e&&d(i.number),l(t),s({name:"settings_field_delete",ui:"settings",context:`name: ${a}, dataType: ${u}, total fields: ${r}`,memexProjectColumnId:e}),n?.()},[t,n,r,i,o?.id,l,s,d]),c=(0,H.useCallback)(e=>{a(!1),"confirm"===e&&u()},[u,a]);return e?(0,O.jsx)(at.U,{onClose:c,title:rI.deleteFieldDialogTitle,confirmButtonContent:"Delete field and data",confirmButtonType:"danger",children:(0,O.jsx)(E$,{columnModel:t})}):null};try{EZ.displayName||(EZ.displayName="ColumnSettingsView")}catch{}try{(I=Icon).displayName||(I.displayName="Icon")}catch{}try{EO.displayName||(EO.displayName="DeleteField")}catch{}try{EV.displayName||(EV.displayName="ConfigurationOptions")}catch{}try{EB.displayName||(EB.displayName="NoFieldFound")}catch{}try{E$.displayName||(E$.displayName="BodyText")}catch{}try{Ez.displayName||(Ez.displayName="DeleteFieldDialog")}catch{}async function EW(){let e=aa("memex-reindex-items-api-data"),{data:t}=await ac(e.url,{method:"POST"});return t}async function EG(){f2();let e=aa("memex-delete-api-data"),{data:t}=await ac(e.url,{method:"DELETE"});return t}let EU=()=>{let{perform:e,status:t}=d1({request:EG,showErrorToast:!0});return{deleteMemex:(0,H.useCallback)(async()=>{await e(),"succeeded"===t.current.status&&window.location.assign(t.current.data.redirectUrl)},[e,t]),status:t}},EH=()=>{let{setProject:e}=gl();return{toggleMemexClose:(0,H.useCallback)(async t=>{e((await ya({closed:t})).memexProject)},[e])}},Eq=()=>{let{setProject:e}=gl();return{toggleMemexPublic:(0,H.useCallback)(async t=>{e((await ya({public:t})).memexProject)},[e])}},EK=()=>{let e=gC(),{setProject:t}=gl();return{updateIsTemplate:(0,H.useCallback)(async r=>{e.isTemplate!==r&&t((await ya({isTemplate:r})).memexProject)},[e.isTemplate,t])}};async function EQ(){let e=aa("memex-without-limits-beta-optout-api-data"),{data:t}=await ac(e.url,{method:"POST"});return t}function EX({children:e,showDivider:t}){return(0,O.jsx)(eO.Z,{sx:{justifyItems:"center",p:3,display:"flex",...t?{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px"}:{borderBottom:"unset"}},children:e})}function EY({title:e,description:t}){return(0,O.jsxs)(eO.Z,{sx:{flex:"auto"},children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{mb:1,fontSize:1},children:e}),(0,O.jsx)(eB.Z,{sx:{fontSize:1},children:t})]})}function EJ({children:e}){return(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:"24px"},children:e})}try{EX.displayName||(EX.displayName="ProjectSettingsCard")}catch{}try{EY.displayName||(EY.displayName="ProjectSettingsCardHeader")}catch{}try{EJ.displayName||(EJ.displayName="ProjectSettingsCardBody")}catch{}function E0(){let{addToast:e}=e9(),t=(0,e5.Z)(e),[r,a]=(0,H.useState)(void 0),n=(0,at.N)(),i=(0,H.useCallback)(async()=>await n({...rI.betaOptoutConfirmation,confirmButtonType:"danger"}),[n]),l=(0,H.useCallback)(async()=>{if(await i())try{let e=await EQ();a(e.success),t.current({message:rI.betaOptoutSuccessMessage,type:e$.success})}catch(e){a(!1),t.current({message:rI.betaOptoutFailureMessage,type:e$.error})}},[t,i]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"Unlimited project items beta"}),(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:(0,O.jsxs)(EX,{children:[(0,O.jsx)(EY,{title:"Opt out of unlimited project items",description:rI.betaOptoutInformation}),(0,O.jsx)(EJ,{children:(0,H.createElement)(cd.r,{...(0,ef.f)("beta-optout-button"),key:"settingsBetaOptoutButton",variant:"default",sx:{color:"fg.default",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},block:!0,onClick:l,disabled:!0===r},"Opt out")})]})})]})}try{E0.displayName||(E0.displayName="BetaOptoutSettingsCard")}catch{}let E1={fontSize:1,p:3,pt:0,color:"fg.muted",flexGrow:1},E2={display:"flex",m:3,mt:0,button:{fontSize:1,flex:"1 1 0",py:"5px",px:3}},E5={backgroundColor:"unset",p:2,display:"flex",flexDirection:"row",color:"fg.default"},E3={fontSize:3,fontWeight:"bold",py:"6px",px:2,flexGrow:1},E4=({children:e})=>(0,O.jsx)(eO.Z,{sx:E1,children:e}),E8=({footerButtons:e})=>(0,O.jsx)(eO.Z,{sx:E2,children:(0,O.jsx)(wE.V.Buttons,{buttons:e??[]})}),E6=({title:e,onClose:t,dialogLabelId:r})=>{let a=(0,H.useCallback)(()=>{t("close-button")},[t]);return(0,O.jsxs)(g1.Z,{sx:E5,children:[(0,O.jsx)(g1.Z.Item,{sx:E3,id:r,children:e}),(0,O.jsx)(wE.V.CloseButton,{onClose:a})]})},E7=({children:e,confirmButtonContent:t="OK",onClose:r,title:a})=>{let n=(0,H.useCallback)(()=>{r("confirm")},[r]);return(0,O.jsx)(wE.V,{title:a,role:"alertdialog",width:"medium",onClose:r,footerButtons:[{content:t,onClick:n}],renderBody:E4,renderFooter:E8,renderHeader:E6,children:e})};try{E4.displayName||(E4.displayName="SingleConfirmBody")}catch{}try{E8.displayName||(E8.displayName="SingleConfirmFooter")}catch{}try{E6.displayName||(E6.displayName="SingleConfirmHeader")}catch{}try{E7.displayName||(E7.displayName="AlertDialog")}catch{}let E9=e=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(E6,{...e}),(0,O.jsx)(ut.Z,{variant:"warning",full:!0,sx:{mb:2},children:rP.deleteProjectWarning})]}),Ae=({children:e})=>(0,O.jsx)(eB.Z,{sx:{fontWeight:"bold"},children:e});function At({onClose:e,onConfirm:t,projectName:r,draftIssueCount:a}){let n=(0,H.useRef)(null),[i,l]=(0,H.useState)("");return(0,H.useEffect)(()=>{n.current?.focus()},[]),(0,O.jsxs)(wE.V,{title:rP.deleteProjectTitle,width:"large",renderBody:E4,renderHeader:E9,onClose:e,role:"alertdialog",children:[(0,O.jsxs)(eB.Z,{as:"p",children:["This action ",(0,O.jsx)(Ae,{children:"cannot"})," be undone. This will permanently delete the"," ",(0,O.jsx)(Ae,{children:r})," project, saved views, custom fields and associated values, and Insights data."]}),a?(0,O.jsxs)(eB.Z,{as:"p",children:["This will also delete"," ",(0,O.jsxs)(Ae,{children:[a," draft issue",a>1?"s":""]})," ","that ",a>1?"were":"was"," created in this project."]}):null,(0,O.jsx)(eB.Z,{as:"p",children:"This will not delete issues or pull requests themselves."}),(0,O.jsxs)(eB.Z,{as:"p",children:["Please type ",(0,O.jsx)(Ae,{children:r})," to confirm."]}),(0,O.jsxs)("form",{onSubmit:t,...(0,ef.f)("confirm-delete-form"),children:[(0,O.jsx)(pw.Z,{"aria-label":rP.deleteProjectInputLabel,ref:n,block:!0,onChange:e=>l(e.target.value),value:i,sx:{mb:3},...(0,ef.f)("confirm-delete-input")}),(0,O.jsx)(wE.V.Buttons,{buttons:[{content:rP.deleteProjectConfirmation,buttonType:"danger",disabled:i.trim()!==r.trim(),type:"submit",sx:{width:"100%"}}]})]})]})}try{Ae.displayName||(Ae.displayName="BoldText")}catch{}try{At.displayName||(At.displayName="DeleteProjectDialog")}catch{}let Ar="projectNameRequired",Aa=(0,s9.Z)(e=>{(0,jg.x)(e,{assertive:!0})},100),An=()=>{let e=r8(),{postStats:t}=os(),{setProject:r}=gl(),[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useState)(!1),[s,o]=(0,H.useState)({title:e.title,shortDescription:e.shortDescription,description:e.description});return(0,H.useEffect)(()=>{i&&Aa(i===Ar?rI.projectNameRequired:rI.genericErrorMessage)},[i]),(0,H.useEffect)(()=>{a&&Aa(rI.projectSettingsSaved)},[i,a]),{updateSettings:(0,H.useCallback)(async()=>{let a={},i=s?.title?.trim(),o=s?.shortDescription,d=s?.description;if(i?.trim().length===0){l(Ar);return}i&&e.title!==i&&(a.title=i),o&&e.shortDescription!==o&&o.length>0&&(a.shortDescription=o),d&&e.description!==d&&d.length>0&&(a.description=d);try{let e=await ya(a);r(e.memexProject),l(!1),n(!0),setTimeout(()=>{n(!1)},1800),t({name:"project_settings_save_success",context:JSON.stringify(Object.keys(a))})}catch{l(!0),t({name:"project_settings_save_error",context:JSON.stringify(Object.keys(a))})}},[e.description,e.shortDescription,e.title,t,r,s?.description,s?.shortDescription,s?.title]),setSettings:(0,H.useCallback)(e=>{l(!1),o(t=>({...t,...e}))},[o]),isSuccess:a,isError:i,isDirty:function(e,t){return t?.title!==e.title||t?.shortDescription!==e.shortDescription||t?.description!==e.description}(e,s)}};function Ai({initialValue:e,setLocalProjectName:t}){let[r,a]=yh(e),[n,i]=(0,H.useState)(!1),l=yR(),s=(0,H.useCallback)(()=>{a(e),i(!1)},[a,i,e]),o=(0,H.useCallback)(async()=>{if(!n)return;let e=r.trim();a(e),i(!1),t(e)},[n,r,t,a]),d=(0,H.useCallback)(e=>{i(!0),a(yf(e.target.value))},[a,i]),u=(0,H.useCallback)(e=>{switch(e.key){case"Enter":o();break;case"Escape":n&&e.stopPropagation(),s()}},[o,s,n]),c=(0,yc.u)(u),m=(0,H.useCallback)(()=>{document.hasFocus()&&o()},[o]);return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(cX.Z,{sx:{mb:4},id:Ck,children:[(0,O.jsx)(cX.Z.Label,{children:"Project name"}),(0,O.jsx)(yk.F,{...l,children:(0,O.jsx)(pw.Z,{value:r,sx:{"& > input":{padding:"6px 8px"},width:320},onChange:d,onBlur:m,"aria-invalid":0===r.trim().length,...c})}),0===r.trim().length&&(0,O.jsx)(cX.Z.Validation,{variant:"error",...(0,ef.f)("project-name-error-message"),children:rI.projectNameRequired})]})})}try{Ai.displayName||(Ai.displayName="ProjectNameEditor")}catch{}function Al(){let{title:e}=r8(),{updateSettings:t,isSuccess:r,isError:a,setSettings:n,isDirty:i}=An(),l=(0,H.useCallback)(e=>n({title:e}),[n]),s=(0,H.useCallback)(e=>n({shortDescription:e}),[n]),o=(0,H.useCallback)(e=>n({description:e}),[n]),d=(0,at.N)(),[u,c]=(0,H.useState)(!1),m=(0,K._Z)(({currentLocation:e,nextLocation:t})=>!!i&&e.pathname!==t.pathname&&(p(),!0)),p=(0,H.useCallback)(async()=>{c(await d({title:"Discard changes?",content:(0,O.jsx)(eO.Z,{children:"You have unsaved changes. Are you sure you want leave this page and discard them?"}),confirmButtonContent:"Discard",confirmButtonType:"danger"}))},[d]);return(0,H.useEffect)(()=>{m&&"blocked"===m.state&&(u?m.proceed():m.reset())},[u]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"Project settings"}),(0,O.jsx)(Ai,{initialValue:e,setLocalProjectName:l}),(0,O.jsx)(eO.Z,{sx:{mb:4},...(0,ef.f)("readme-edit"),children:(0,O.jsx)(yD,{setProjectShortDescription:s,editModeOff:!0})}),(0,O.jsx)(eO.Z,{...(0,ef.f)("readme-edit"),children:(0,O.jsx)(yS,{setProjectDescription:o,editModeOff:!0})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"flex-start",mb:5,alignItems:"center"},children:[(0,O.jsx)(cd.r,{sx:{mr:3},size:"medium",variant:"default",onClick:t,...(0,ef.f)("save-project-settings-button"),children:"Save changes"}),r&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{...(0,ef.f)("save-project-settings-success"),sx:{ml:1},children:"Saved"})," ",(0,O.jsx)(yj,{})]}),a&&(0,O.jsx)(eB.Z,{...(0,ef.f)("save-project-settings-success"),sx:{color:"danger.fg"},children:a===Ar?rI.genericFormErrorMessage:rI.genericErrorMessage})]})]})}try{Al.displayName||(Al.displayName="ProjectSettingsForm")}catch{}function As({onClose:e}){let t=(0,H.useRef)(null);(0,H.useEffect)(()=>{t.current?.focus()},[]);let r=(0,H.useCallback)(()=>{e("cancel")},[e]),a=(0,H.useCallback)(()=>{e("confirm")},[e]);return(0,O.jsx)(wE.V,{onClose:e,"aria-labelledby":"header-id",title:"Are you sure?",width:"small",footerButtons:[{content:(0,O.jsx)("span",{children:"Cancel"}),onClick:r,buttonType:"normal"},{content:(0,O.jsx)("span",{children:"Remove"}),onClick:a,buttonType:"danger"}],children:(0,O.jsx)(eB.Z,{children:"Remove this project as a template? It will no longer be available as a template when creating new projects."})})}try{As.displayName||(As.displayName="RemoveTemplateDialog")}catch{}function Ao(){let{isClosed:e,isPublicProject:t,isTemplate:r}=gC(),{isOrganization:a,projectOwner:n,copyProjectPartialUrl:i}=i5(),{createdWithTemplateMemex:l}=gi(),{hasAdminPermissions:s,canChangeProjectVisibility:o,canCopyAsTemplate:d}=i4(),{projectNumber:u}=d5(),{toggleMemexClose:c}=EH(),{toggleMemexPublic:m}=Eq(),[p,f]=(0,H.useState)(""),{postStats:h}=os(),[g,y]=(0,H.useState)(!1),{updateIsTemplate:x}=EK(),[b,v]=(0,H.useState)(!1),[w,j]=(0,H.useState)(""),{deleteMemex:C}=EU(),{memex_paginated_archive:I,memex_table_without_limits:S,memex_resync_index:k,mwl_beta_optout:T}=n9(),N=(I||S)&&k&&s,_=s&&T&&S,R=a&&(d||s||l),P=(0,H.useCallback)(e=>{e.preventDefault(),C()},[C]),D=(0,H.useCallback)(async e=>{await c(e)},[c]),E=(0,H.useCallback)(async e=>{try{t!==e&&(await m(e),f("success"))}catch{f("error")}},[m,t]),A=(0,H.useCallback)(()=>{p&&f("")},[p,f]),{title:M}=r8(),L=dP().items,F=(0,H.useMemo)(()=>L.filter(e=>"DraftIssue"===e.contentType).length,[L]),Z=(0,H.useCallback)(()=>{h({name:ns,ui:a9})},[h]),V=(0,H.useCallback)(()=>{h({name:no,ui:a9})},[h]),B=(0,H.useCallback)(()=>{h({name:"created_with_template_click",ui:"settings",context:JSON.stringify({templateMemexId:l?.id})})},[h,l]),$=(0,H.useMemo)(()=>o&&t?n?.isEnterpriseManaged?rP.projectIsInternal:rP.projectIsPublic:o?rP.projectIsPrivate:a?rP.organizationOwnedProjectVisibilityRestriction:rP.userOwnedProjectVisibilityRestriction,[o,t,a,n?.isEnterpriseManaged]),z=t?n?.isEnterpriseManaged?"Internal":"Public":"Private",W=e=>{"confirm"===e&&G(!r),v(!1)},G=(0,H.useCallback)(async e=>{try{r!==e&&(await x(e),j("success"),setTimeout(()=>{j("")},1800))}catch{j("error")}},[x,r]);return(0,H.useEffect)(()=>{"success"===w&&(0,jg.x)(rI.changesSaved)},[w,r]),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",flexGrow:1},...(0,ef.f)("general-settings"),children:[(0,O.jsx)(Al,{}),R&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"Templates"}),l&&(0,O.jsx)(eO.Z,{sx:{flex:"auto"},children:(0,O.jsxs)(eB.Z,{...(0,ef.f)("created-with-template-link"),as:"p",sx:{fontSize:1,mt:1},children:["This project was created with the\xa0",(0,O.jsx)(uB.Z,{inline:!0,target:"_blank",href:l.url,onClick:B,children:(0,O.jsx)(u5,{children:l.titleHtml})}),"\xa0template."]})}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:[s&&(0,O.jsxs)(EX,{showDivider:d,children:[(0,O.jsxs)(eO.Z,{sx:{flex:"auto"},children:[(0,O.jsx)(eO.Z,{sx:{fontWeight:"bold",mb:1},id:"make-template-label",children:"Make template"}),(0,O.jsxs)(eB.Z,{as:"p",sx:{m:0},id:"make-template-description",children:["Make this project a template that can be used by members of the ",(0,O.jsx)("b",{children:n?.login})," ","organization when creating new projects."]}),(0,O.jsx)("div",{})]}),(0,O.jsxs)(EJ,{children:[(0,O.jsxs)(eO.Z,{sx:{width:"150px",display:"flex",justifyContent:"end"},children:["success"===w&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(yj,{}),(0,O.jsx)(eB.Z,{sx:{ml:1},children:"Saved!"})]}),"error"===w&&(0,O.jsx)(eB.Z,{sx:{color:"danger.fg"},children:"Something went wrong"})]}),(0,O.jsx)(cu.Z,{"aria-labelledby":"make-template-label","aria-describedby":"make-template-description",disabled:e,onClick:()=>{r||G(!r),v(r)},checked:r})]})]}),d&&(0,O.jsxs)(EX,{children:[(0,O.jsxs)(eO.Z,{sx:{flex:"auto"},children:[(0,O.jsx)(cG.Z,{as:"h3",sx:{mb:1,fontSize:1},children:"Copy as template"}),(0,O.jsx)(eB.Z,{children:"Copy this project into a template that can be used when creating new projects."})]}),(0,O.jsxs)(EJ,{children:[(0,O.jsx)("include-fragment",{src:encodeURI(`${i}?copy_as_template=true`)},"settingsCopyAsTemplate"),(0,O.jsx)(cd.r,{variant:"default","aria-label":"Copy as template",id:`settings-copy-as-template-dialog-${u}`,"data-show-dialog-id":`copy-as-template-dialog-${u}`,sx:{color:"fg.default",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},leadingVisual:eF.DuplicateIcon,onClick:V,...(0,ef.f)("copy-as-template-button"),children:(0,O.jsx)(eB.Z,{children:"Copy as template"})},"settingsCopyAsTemplateButton")]})]})]})]}),b&&(0,O.jsx)(As,{isOpen:b,onClose:e=>{W(e)}}),_&&(0,O.jsx)(E0,{}),(0,O.jsx)(cG.Z,{as:"h2",sx:{borderBottomColor:"border.muted",borderBottomStyle:"solid",borderBottomWidth:"1px",fontSize:4,fontWeight:"normal",pb:2,mb:2},children:"More options"}),(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",width:"100%",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:(0,O.jsxs)(EX,{children:[(0,O.jsx)(EY,{title:"Make a copy",description:"Make a copy of this project."}),(0,O.jsxs)(EJ,{children:[(0,O.jsx)("include-fragment",{src:encodeURI(i)},"settingsCopyProject"),(0,O.jsx)(cd.r,{variant:"default","aria-label":"Make a copy",id:`settings-copy-project-dialog-${u}`,"data-show-dialog-id":`copy-project-dialog-${u}`,sx:{color:"fg.default",textAlign:"left",'&& [data-component="buttonContent"]':{flex:0}},block:!0,leadingVisual:eF.CopyIcon,onClick:Z,children:(0,O.jsx)(eB.Z,{children:"Make a copy"})},"settingsCopyProjectButton")]})]})}),(0,O.jsx)(cG.Z,{as:"h3",sx:{fontSize:4,mb:2,fontWeight:"normal"},children:"Danger zone"}),(0,O.jsx)(eO.Z,{sx:{borderColor:"danger.emphasis",borderWidth:"1px",borderStyle:"solid",borderRadius:2,mb:4},children:(0,O.jsxs)(eO.Z,{sx:{justifyItems:"center",display:"flex",flexDirection:"column"},children:[s&&(0,O.jsxs)(EX,{showDivider:!0,children:[(0,O.jsxs)(eO.Z,{sx:{flex:"auto"},children:[(0,O.jsx)(cG.Z,{as:"h3",id:"visibilityHeading",sx:{fontSize:1,mb:1},children:"Visibility"}),(0,O.jsx)(eB.Z,{sx:{fontSize:1},...(0,ef.f)("project-visibility-text"),children:$})]}),(0,O.jsx)(EJ,{children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexWrap:"wrap-reverse",justifyContent:"flex-end"},children:[(0,O.jsx)(eO.Z,{sx:{pt:2},children:(0,O.jsxs)("div",{"aria-live":"polite",...(0,ef.f)("project-visibility-update-status"),children:["success"===p&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(yj,{}),(0,O.jsx)(eB.Z,{sx:{ml:1},children:"Changes saved"})]}),"error"===p&&(0,O.jsx)(eB.Z,{sx:{color:"danger.fg"},children:"Something went wrong"})]})}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{...(0,ef.f)("project-visibility-button"),sx:{position:"relative",ml:"16px",px:3},onClick:A,"aria-describedby":"visibilityHeading",leadingVisual:t?eF.GlobeIcon:eF.LockIcon,disabled:!o,children:z}),(0,O.jsx)(fj.P.Overlay,{anchorSide:"inside-right",children:(0,O.jsxs)(mx.S,{selectionVariant:"single",children:[(0,O.jsxs)(mx.S.Item,{onSelect:()=>E(!1),selected:!t,sx:{alignItems:"flex-start"},children:["Private",(0,O.jsx)(mx.S.Description,{variant:"block",children:"You choose who can read, write, and admin this project."})]},"private"),(0,O.jsxs)(mx.S.Item,{onSelect:()=>E(!0),selected:t,sx:{alignItems:"flex-start"},children:[n?.isEnterpriseManaged?"Internal":"Public",(0,O.jsxs)(mx.S.Description,{variant:"block",children:["Everyone ",n?.isEnterpriseManaged?"in your enterprise":"on the internet"," has read access to this project. You choose who has write and admin access."]})]},"public")]})})]})]})})]}),(0,O.jsx)(EX,{showDivider:s,children:e?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(EY,{title:"Re-open project",description:"Re-opening a project will add it to the list of open projects."}),(0,O.jsx)(EJ,{children:(0,O.jsx)(cd.r,{...(0,ef.f)("reopen-project-button"),onClick:()=>D(!1),children:"Re-open this project"})})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(EY,{title:"Close project",description:"Closing a project will disable its workflows & remove it from the list of open projects."}),(0,O.jsx)(EJ,{children:(0,O.jsx)(cd.r,{variant:"danger",...(0,ef.f)("close-project-button"),onClick:()=>D(!0),children:"Close this project"})})]})}),s&&(0,O.jsxs)(EX,{showDivider:N,children:[(0,O.jsx)(EY,{title:"Delete project",description:"Once you delete a project, there is no going back. Please be certain."}),(0,O.jsx)(EJ,{children:(0,O.jsx)(cd.r,{variant:"danger",...(0,ef.f)("delete-project-button"),onClick:()=>y(!0),children:"Delete this project"})})]}),N&&(0,O.jsxs)(EX,{children:[(0,O.jsx)(EY,{title:"Resync search index for this project",description:"This will asynchronously correct inconsistencies between the search index and the database"}),(0,O.jsx)(EJ,{children:(0,O.jsx)(cd.r,{variant:"danger",...(0,ef.f)("resync-project-es-index-button"),onClick:()=>EW(),children:"Resync search index"})})]})]})}),g&&(0,O.jsx)(At,{onClose:()=>y(!1),projectName:M,onConfirm:P,draftIssueCount:F})]})}try{Ao.displayName||(Ao.displayName="GeneralSettingsView")}catch{}var Ad=r(96463);let Au=()=>{window.location.reload()},Ac=()=>(0,O.jsx)(c$,{as:"main",headingAs:"h2",heading:"This page failed to load",content:"Sorry about that. Please try refreshing and contact us if the problem persists.",...(0,ef.f)("project-settings-error-fallback"),children:(0,O.jsx)(cd.r,{variant:"primary",onClick:Au,sx:{mt:2,mx:"auto"},children:"Reload"})});try{Ac.displayName||(Ac.displayName="SettingsErrorFallback")}catch{}async function Am(e){let t=aa("memex-column-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}let Ap=()=>{let{postStats:e}=os(),{setAllColumns:t,allColumnsRef:r}=cE(),{updateLoadedColumns:a}=hz();return{addColumn:(0,H.useCallback)(async n=>{let i={name:n.name,dataType:n.type,settings:n.settings};f2();let l=(await Am({memexProjectColumn:i})).memexProjectColumn;a(l.id);let s=ds(l),o=r.current.findIndex(e=>e.id===l.id)>-1;return o&&e({name:"existing_column_found",id:l.id}),t(o?[...r.current.filter(e=>e.id!==l.id),s]:[...r.current,s]),{newColumn:s}},[a,r,t,e])}},Af=()=>{let{viewStateDispatch:e,viewsMap:t}=oi(),r=jC(),{addColumn:a}=Ap();return{addField:d1({request:(0,H.useCallback)(async({request:n,viewNumber:i})=>{let{newColumn:l}=await a(n);if(i){let a=t[i];(0,J.Z)(a,"View must exist");let n={...a.serverViewState,visibleFields:a.serverViewState.visibleFields.concat(l.databaseId)};await r.perform({viewNumber:a.number,view:hp(n,fU)}),"succeeded"===r.status.current.status&&e({type:dy.AddField,column:l,viewNumber:i})}return l},[a,r,e,t])})}},Ah=e=>e.preventDefault(),Ag=(0,H.memo)(function({setOpen:e,isOpen:t,onSave:r,anchorRef:a,limitedTypes:n}){var i;let{allColumns:l}=df(),s=(i=l.filter(e=>e.userDefined).length,`${rI.newField}${i>0?` ${i+1}`:""}`),{currentView:o}=oi(),[d,u]=yh(s,{isPropUpdateDisabled:t}),c=(0,H.useRef)(null),m=(0,H.useRef)(null),{reservedColumnNames:p}=DB(),{clientHeight:f}=Ry({}),h=(0,H.useMemo)(()=>f?a.current?f-(window.pageYOffset+a.current.getBoundingClientRect().top):f:"unset",[a,f]),{options:g,addOption:y,updateOption:x,removeOption:b,onDrop:v,canRemoveOption:w,revertMutations:j}=Dv({ui:aJ}),{addField:C}=Af(),I=(0,H.useMemo)(()=>[{leadingVisual:jA(eA.Text),text:jM(eA.Text),key:"Dropdown-text",type:eA.Text,onMouseDown:Ah,...(0,ef.f)("column-type-text")},{leadingVisual:jA(eA.Number),text:jM(eA.Number),key:"Dropdown-number",type:eA.Number,onMouseDown:Ah,...(0,ef.f)("column-type-number")},{leadingVisual:jA(eA.Date),text:jM(eA.Date),key:"Dropdown-date",type:eA.Date,onMouseDown:Ah,...(0,ef.f)("column-type-date")},{leadingVisual:jA(eA.SingleSelect),text:jM(eA.SingleSelect),key:"Dropdown-singleselect",type:eA.SingleSelect,onMouseDown:Ah,...(0,ef.f)("column-type-single-select")},{leadingVisual:jA(eA.Iteration),text:jM(eA.Iteration),key:"Dropdown-iteration",type:eA.Iteration,onMouseDown:Ah,...(0,ef.f)("column-type-iteration")}],[]),S=n&&n.length?I.filter(e=>n.includes(e.type)):I,[k,T]=(0,H.useState)(()=>S[0].type),[N,_]=(0,H.useState)(S[0]),R=(0,H.useCallback)(()=>{u(s)},[s,u]),P=(0,H.useCallback)(e=>{if(e){if(d===s){if(e.type===eA.Iteration){let e=l.filter(e=>e.userDefined&&e.name.startsWith("Iteration")).length;u(rI.newIterationField(e>0?` ${e+1}`:""))}else R()}_(e),T(e.type)}},[l,s,R,u,d]),D=(0,H.useMemo)(()=>(0,Ea.e)(new Date,1),[]),[E,A]=(0,H.useState)(new Date),[M,L]=(0,H.useState)(nU),[F,Z]=(0,H.useState)(!0),V=(0,H.useCallback)(()=>{R(),j(),A(new Date),L(nU),Z(!0);let e=S[0];e&&(_(e),T(e.type))},[S,R,j]),B=(0,H.useCallback)((e,t)=>{switch(t){case eA.SingleSelect:{let r=wg(g).map(({id:e,...t})=>t);return{name:e,type:t,settings:r.length>0?{options:r}:{}}}case eA.Iteration:{let r=nG(M),a=0!==E.getDay()?E.getDay():7,{iterations:n,completedIterations:i}=function(e,{duration:t,selectedStartDate:r},a){if(e.length<=0)throw Error("A title is required to create iterations");let n=r,i=[],l=[];for(let r=1;r<=3;r++)(0,nf.R)((0,ta.E)(n,t),new Date)?l.unshift({title:`${e} ${r}`,startDate:nS(n),duration:t}):i.push({title:`${e} ${r}`,startDate:nS(n),duration:t}),n=(0,ta.E)(n,t);return{iterations:i,completedIterations:l}}(e,{duration:r,selectedStartDate:E},3);return{name:e,type:t,settings:{configuration:{startDay:a,duration:r,iterations:n,completedIterations:i}}}}case eA.Number:case eA.Text:case eA.Date:return{name:e,type:t,settings:void 0};default:ij(t)}},[E,g,M]);(0,H.useEffect)(()=>{t&&m.current?.scrollIntoView()},[t]);let $=(0,H.useCallback)(e=>{u(yf(e.currentTarget.value))},[u]),z={size:"small",type:"button"},W=(0,H.useCallback)(()=>k!==eA.SingleSelect||wg(g).length>0,[g,k]),{isValid:G,message:U}=Dz({allColumns:l,reservedColumnNames:p},d),q=W()&&G,K=(0,H.useCallback)(t=>{"click-outside"!==t&&V(),e(!1)},[e,V]),{postStats:Q}=os(),X=(0,H.useCallback)(async()=>{if(!q)return;K();let e=B(d,k);await C.perform({request:e,viewNumber:o?.number}),"succeeded"===C.status.current.status&&r(C.status.current.data),Q({name:aX,ui:aJ,memexProjectColumnId:C.status.current.data?.id})},[q,K,B,d,k,C,o?.number,Q,r]),Y=(0,H.useCallback)(e=>{"Enter"===e.key?(X(),e.preventDefault()):"Escape"===e.key&&(K(),e.preventDefault())},[K,X]),J=(0,yc.u)(Y),ee=jA(k),et=g.length,er=(0,H.useRef)(g.length);(0,H.useEffect)(()=>{er.current=et});let ea="iteration"===k?"Save and create":"Save",en=yR();return t?(0,O.jsx)(xj.w,{anchorRef:a,renderAnchor:null,open:t,onClose:K,width:"medium",overlayProps:{...(0,ef.f)("add-column-menu"),initialFocusRef:c,role:"dialog","aria-label":"Create a new field configuration",sx:h?{maxHeight:h,overflowY:"auto",overflowX:"visible"}:{overflow:"visible"}},focusZoneSettings:{bindKeys:xv.Qw.Tab,containerRef:a},children:(0,O.jsxs)("form",{onSubmit:e=>e.preventDefault(),children:[(0,O.jsxs)(cX.Z,{required:!0,sx:{p:3,pb:0,mb:2,position:"relative"},children:[(0,O.jsx)(cX.Z.Label,{children:"Field name"}),(0,O.jsx)(yk.F,{...en,sx:{width:"100%"},children:(0,O.jsx)(pw.Z,{...J,onFocus:e=>e.currentTarget.select(),value:d,className:G?"":"error",onChange:$,ref:c,"aria-invalid":!G,...(0,ef.f)("add-column-name-input"),validationStatus:G?void 0:"error"})}),!G&&(0,O.jsx)(cX.Z.Validation,{variant:"error",children:U})]}),(0,O.jsxs)(cX.Z,{id:"add-column-type",sx:{px:3,mb:2},children:[(0,O.jsx)(cX.Z.Label,{children:"Field type"}),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{"aria-label":"Type",sx:{width:"100%",pr:2,gridTemplateColumns:"min-content 1fr min-content","[data-component=text]":{textAlign:"left"},"[data-component=buttonContent]":{flex:0}},id:"add-column-type",...(0,ef.f)("add-column-type"),children:(0,O.jsxs)(eO.Z,{sx:{flexGrow:1,alignItems:"center",display:"flex"},children:[(0,O.jsx)(eO.Z,{children:(0,O.jsx)(eZ.Z,{icon:ee,sx:{mr:1,color:"fg.muted"}})}),(0,O.jsx)(eO.Z,{children:N.text})]})}),(0,O.jsx)(fj.P.Overlay,{children:(0,O.jsx)(mx.S,{selectionVariant:"single",children:S.map((e,t)=>(0,O.jsxs)(mx.S.Item,{selected:N===e,onSelect:()=>P(e),...e,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(e.leadingVisual,{})}),e.text]},t))})})]})]}),k===eA.SingleSelect&&(0,O.jsxs)(eO.Z,{sx:{border:0,padding:0,margin:0,px:3,pt:2,flexWrap:"wrap"},as:"fieldset",children:[(0,O.jsx)(eO.Z,{sx:{fontWeight:"bold"},as:"legend",children:"Options"}),(0,O.jsx)(DR,{options:g,canRemoveOption:w,onAddOption:y,onUpdateOption:x,onRemoveOption:b,onDrop:v})]}),k===eA.Iteration&&(0,O.jsxs)(eO.Z,{sx:{padding:0,margin:0,px:3,pt:2,flexWrap:"wrap",border:0},as:"fieldset",children:[(0,O.jsx)(eO.Z,{sx:{fontWeight:"bold"},as:"legend",children:"Options"}),(0,O.jsx)(eO.Z,{sx:{pl:2},children:(0,O.jsx)(Eg,{duration:M,onDurationChange:L,onValidChange:Z,startDate:E,onStartDateChange:A,minStartDate:D})})]}),(0,O.jsxs)(eO.Z,{sx:{justifyContent:"flex-end",px:3,py:2,mt:4,borderTop:"1px solid",borderColor:"border.muted",display:"flex",backgroundColor:e=>`${e.colors.canvas.default}`},children:[(0,O.jsx)(cd.r,{...z,onClick:()=>K(),children:"Cancel"}),(0,O.jsx)(cd.r,{variant:"primary",...(0,ef.f)("add-column-modal-save"),...z,onClick:X,disabled:!q||!F,sx:{ml:1},children:ea})]})]})}):null});try{Ag.displayName||(Ag.displayName="AddColumnModal")}catch{}try{(S=SelectedIcon).displayName||(S.displayName="SelectedIcon")}catch{}var Ay=r(82751);let Ax=(0,H.createContext)(null),Ab=()=>{let e=(0,H.useContext)(Ax);if(!e)throw Error("useDragAndDrop can only be accessed from a DropSideContext.Provider component");return{getDropSide:t=>e.overId===t?e.dropSide:null,moveToPosition:e.moveToPosition}};function Av(e,t){let r=(0,H.useRef)(!1);(0,H.useEffect)(()=>(t?(document.body.classList.add(e),r.current=!0):(r.current&&document.body.classList.remove(e),r.current=!1),()=>{r.current&&document.body.classList.remove(e),r.current=!1}),[e,t])}let Aw=({collisionRect:e,droppableRects:t,droppableContainers:r})=>{let a=(e.top+e.bottom)/2,n=[];for(let e of r){let{id:r}=e,i=t.get(r);if(i){let t=Math.abs(a-(i.top+i.bottom)/2);n.push({id:r,data:{droppableContainer:e,value:t}})}}return n.sort((e,t)=>e.data.value-t.data.value)},Aj={display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderColor:"border.default",borderRadius:"5px"},AC={display:"flex",padding:"16px",justifyContent:"space-between",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"border.default"},AI="hideReorderKeyboardInstructions",AS=({isOpen:e,onClose:t})=>e?(0,O.jsx)(eO.Z,{onKeyDown:e=>{e.stopPropagation(),"Escape"===e.key&&t()},children:(0,O.jsx)(wE.V,{title:"How to move objects via keyboard",subtitle:"This navigation is only available when move mode is activated.",onClose:t,renderFooter:()=>(0,O.jsx)(wE.V.Footer,{sx:{display:"flex"},children:(0,O.jsx)(Ak,{onClose:t})}),children:(0,O.jsxs)(eO.Z,{sx:Aj,children:[(0,O.jsxs)(eO.Z,{sx:AC,children:[(0,O.jsx)(eB.Z,{children:rF.cancelDrag}),(0,O.jsx)(Ip.u,{keys:"esc"})]}),(0,O.jsxs)(eO.Z,{sx:AC,children:[(0,O.jsx)(eB.Z,{children:rF.moveDown}),(0,O.jsx)(Ip.u,{keys:"down"})]}),(0,O.jsxs)(eO.Z,{sx:AC,children:[(0,O.jsx)(eB.Z,{children:rF.moveUp}),(0,O.jsx)(Ip.u,{keys:"up"})]}),(0,O.jsxs)(eO.Z,{sx:{...AC,borderBottom:"none"},children:[(0,O.jsx)(eB.Z,{children:rF.endDrag}),(0,O.jsxs)(eO.Z,{children:[(0,O.jsx)(Ip.u,{keys:"enter"}),(0,O.jsx)(eB.Z,{children:" or "}),(0,O.jsx)(Ip.u,{keys:"space"})]})]})]})})}):null,Ak=({onClose:e})=>{let[t,r]=(0,ae._)(AI,!1);return(0,O.jsxs)(eO.Z,{sx:{width:"100%",display:"flex",justifyContent:"space-between"},children:[(0,O.jsxs)(cX.Z,{sx:{display:"flex",alignItems:"center","> :first-child":{display:"contents"}},children:[(0,O.jsx)(uz.Z,{checked:t,onChange:()=>r(!t)}),(0,O.jsx)(cX.Z.Label,{children:"Don't show this again"})]}),(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:(0,O.jsx)(cd.r,{onClick:e,children:"Close"})})]})};try{AS.displayName||(AS.displayName="KeyboardReorderInstructionsModal")}catch{}try{Ak.displayName||(Ak.displayName="KeyboardReorderInstructionsFooter")}catch{}let AT={start:[IZ.g4.Space,IZ.g4.Enter],cancel:[IZ.g4.Esc],end:[IZ.g4.Space,IZ.g4.Enter]},AN=[IZ.DL,IZ.lv],A_=(0,s9.Z)(e=>{(0,jg.x)(e,{assertive:!0})},100),AR=class CustomKeyboardSensor extends IZ.Lg{};AR.activators=[{eventName:"onKeyDown",handler:(e,{keyboardCodes:t=AT,onActivation:r},{active:a})=>{let{code:n}=e.nativeEvent;if(t.start.includes(n)){let t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),r?.({event:e.nativeEvent,returnFocusRef:a.activatorNode}),!0)}return!1}},{eventName:"onClick",handler:(e,{onActivation:t},{active:r})=>{e.preventDefault();let a=new KeyboardEvent("keydown",{key:"Enter",code:"Enter"});return t?.({event:a,returnFocusRef:r.activatorNode}),!0}}];let AP=()=>"",AD=({onDrop:e,itemIds:t,titleMap:r={},children:a})=>{let[n,i]=(0,H.useState)(!1),[l,s]=(0,H.useState)(0),[o,d]=(0,H.useState)(!1),[u,c]=(0,H.useState)(null),[m,p]=(0,H.useState)(null),[f,h]=(0,H.useState)(null),[g,y]=(0,H.useState)(!1),[x]=(0,ae._)(AI,!1);gQ(g,u),Av("is-dragging",n);let b=(0,H.useCallback)(()=>{y(!1),i(!0)},[]),v=(0,H.useCallback)(e=>{if(!e.active)return;(0,jg.x)(rF.instructions(r[e.active.id]??e.active.id),{assertive:!0});let t=e.active.data.current?.metadata;h(t?.id??null),s(e.active.data.current?.sortable.index??0),p(b8.BEFORE)},[r]),w=(0,H.useCallback)(e=>{let r=e.over?.data.current?.metadata,a=r?.id??null,n=b7(e);if(p(n),h(a),d(!0),i(!0),e.over&&e.over.data.current){let r=e.over.data.current.sortable.index;n===b8.AFTER&&r===t.length-1&&r++,s(r)}},[t]);(0,H.useEffect)(()=>{if(n&&o){if(0===l)A_(rF.firstItemInList);else if(l===t.length)A_(rF.lastItemInList);else{let e=t[l-1],a=t[l];A_(rF.movedBetween(r[e],r[a]))}}},[n,o,l,r,t]);let j=(0,H.useCallback)(e=>{(0,jg.x)(`${r[e.active.id]??e.active.id} not moved.`,{assertive:!0}),i(!1),d(!1)},[r]),C=(0,H.useCallback)(a=>{if(i(!1),d(!1),!a.active||!a.over)return;let n=a.active.data.current?.metadata,s=a.over.data.current?.metadata;if(n?.id!==s?.id&&m&&e({dragMetadata:n,dropMetadata:s,side:m}),h(null),0===l)(0,jg.x)(rF.successfulMoveTop(r[a.active.id]??""),{assertive:!0});else if(l===t.length)(0,jg.x)(rF.successfulMoveBottom(r[a.active.id]??""),{assertive:!0});else{let e=t[l-1],n=t[l];(0,jg.x)(rF.successfulMove(r[a.active.id]??"",r[e],r[n]),{assertive:!0})}},[e,m,r,t,l]),I=(0,H.useCallback)((r,a,n)=>{h(t[a]??null);let i=t[r],l=t[a];i&&l&&e({dragMetadata:{id:i},dropMetadata:{id:l},side:n?b8.BEFORE:b8.AFTER})},[t,e]),S=gY(),k=(0,H.useCallback)((e,t)=>{let{currentCoordinates:r,context:a}=t,n=a.active?.rect.current.initial?.height??25,i={...r};switch(e.code){case"ArrowDown":case"ArrowRight":i.y=i.y+n;break;case"ArrowUp":case"ArrowLeft":i.y=i.y-n;break;case"Tab":e.preventDefault();break;default:return}let l=[],s=Array.from(a.droppableRects.values());for(let e of s)l.push(e.top),s[s.length-1]===e&&l.push(e.bottom);return i.y=l.reduce((e,t)=>Math.abs(t-i.y)<Math.abs(e-i.y)?t:e),i},[]),T=(0,H.useMemo)(()=>({returnFocusRef:e})=>{o||x||(y(!0),c(e))},[x,c,o]),N=(0,IZ.Dy)((0,IZ.VT)(IZ.MA),(0,IZ.VT)(AR,{coordinateGetter:k,onActivation:T}));return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(AS,{isOpen:g,onClose:b}),(0,O.jsx)(IZ.LB,{collisionDetection:Aw,modifiers:AN,sensors:N,onDragStart:v,onDragMove:w,onDragOver:w,onDragEnd:C,onDragCancel:j,accessibility:(0,H.useMemo)(()=>({container:S,announcements:{onDragStart:AP,onDragOver:AP,onDragMove:AP,onDragEnd:AP,onDragCancel:AP}}),[S]),children:(0,O.jsx)(IZ.Fo,{items:t,strategy:IZ.qw,children:(0,O.jsx)(Ax.Provider,{value:(0,H.useMemo)(()=>({dropSide:m,overId:f,moveToPosition:I}),[m,f,I]),children:a})})})]})};try{AD.displayName||(AD.displayName="VerticalSortableContext")}catch{}function AE({columns:e,...t}){let{memex_sub_issues:r}=n9(),a=(0,H.useMemo)(()=>e.filter(e=>DF(e,{memex_sub_issues:r})).sort(rh),[e,r]),n=(0,H.useMemo)(()=>a.map(e=>e.databaseId),[a]),i=(0,H.useCallback)(({dragMetadata:r,dropMetadata:a,side:n})=>{let i=-1;if(a)i=a.id;else{let t=e.at(-1);if(!t)return;i=t.databaseId}let l=i;if(n===b8.BEFORE){let t=e.findIndex(({databaseId:e})=>e===i),r=e[t-1];l=r?r.databaseId:null}(!l||e.findIndex(({databaseId:e})=>e===l)+1!==e.findIndex(({databaseId:e})=>e===r.id))&&t.onReorderColumnCallback?.(r.id,l)},[e,t]);return(0,O.jsx)(AD,{onDrop:i,itemIds:n,children:(0,O.jsx)(AM,{columns:a,...t})})}let AA=(0,Y.ZP)(eO.Z).withConfig({displayName:"column-list-nav__BoxFeedbackCommitState",componentId:"sc-d4486f70-0"})(["&.reorder-commit-state-feedback{opacity:0;}&.reorder-commit-state-feedback.enter{opacity:1;}&.reorder-commit-state-feedback.enter-done{opacity:0;transition:opacity ","ms;}"],1e3);function AM({columns:e,reorderCommitState:t,addNewAnchorRef:r,onAddColumnCallback:a,onFieldNavCallback:n}){let i=(0,H.useRef)(null),l=(0,H.useRef)(!1),{getDropSide:s}=Ab();return(0,O.jsxs)(fb.$.Group,{sx:{position:"relative",minWidth:220},title:"Custom fields",...(0,ef.f)("project-column-settings-list"),children:[(0,O.jsxs)(mx.S.Item,{ref:r,role:"button",sx:{color:"accent.fg",position:"absolute",top:0,right:0,width:"auto",py:1},onSelect:()=>{l.current=!l.current,a(l.current)},children:[(0,O.jsx)(mx.S.LeadingVisual,{sx:{color:"inherit"},children:(0,O.jsx)(eF.PlusIcon,{})}),"New field"]}),(0,H.useMemo)(()=>e.map(e=>(0,O.jsx)(AF,{column:e,dropSide:s(e.databaseId),onLinkClick:t=>{n&&n(e.id,t)}},e.id)),[e,s,n]),(0,O.jsx)(Ay.Z,{in:"success"===t,nodeRef:i,timeout:1e3,className:"reorder-commit-state-feedback",children:(0,O.jsxs)(AA,{as:"li","aria-live":"polite",ref:i,sx:{color:"success.fg",textAlign:"right",p:1,mx:2,userSelect:"none"},children:[(0,O.jsx)(eB.Z,{sx:{color:"inherit",px:1},children:(0,O.jsx)(eF.CheckIcon,{})}),"Saved"]})})]})}let AL=(0,Y.ZP)(eO.Z).attrs({sx:{position:"relative",display:"flex",userSelect:"none"}}).withConfig({displayName:"column-list-nav__BoxWithDropSash",componentId:"sc-d4486f70-1"})(["a{user-drag:none;}&:after,&:before{content:'';display:none;position:absolute;left:-6px;right:-6px;background-color:",";height:",";border:0;border-radius:6px;z-index:12;}body.is-dragging &.show-sash-after{&:after{display:block;bottom:-6px;transform:translateY(50%);}}body.is-dragging &.show-sash-before{&:before{display:block;top:-6px;transform:translateY(-50%);}}body.is-dragging &.show-sash-before,body.is-dragging &.show-sash-after{.projectColumItemLeadingVisual .projectColumnGrabber{display:none;}.projectColumItemLeadingVisual .projectColumnIcon{display:inline-block;}}.projectColumItemLeadingVisual .projectColumnGrabber{display:none;cursor:grab;}body:not(.is-dragging) &:hover{.projectColumItemLeadingVisual .projectColumnGrabber{display:inline-block;}.projectColumItemLeadingVisual .projectColumnIcon{display:none;}}"],(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("space.1"));function AF({column:e,dropSide:t,onLinkClick:r}){let a=(0,H.useMemo)(()=>({id:e.databaseId}),[e.databaseId]),n=ur(),i=jA(e.dataType),{setNodeRef:l,setActivatorNodeRef:s,listeners:o}=(0,IZ.nB)({id:e.databaseId,data:{metadata:a}}),d=(0,IL.W)({[`show-sash-${t}`]:t}),u=!!DM(e);return(0,O.jsxs)(fw,{to:{pathname:eI.generatePath({...n,fieldId:encodeURIComponent(e.id)})},onClick:r,...(0,ef.f)(`ColumnSettingsItem{id: ${e.name}}`),children:[(0,O.jsxs)(AL,{ref:l,className:d,children:[(0,O.jsxs)(fb.$.LeadingVisual,{className:"projectColumItemLeadingVisual",...(0,ef.f)(`ColumnSettingsItemIcon{id: ${e.name}}`),children:[(0,O.jsx)("span",{className:"projectColumnGrabber",ref:s,...o,children:(0,O.jsx)(eF.GrabberIcon,{})}),(0,O.jsx)("span",{className:"projectColumnIcon",children:(0,O.jsx)(i,{})})]}),e.name]}),u&&(0,O.jsx)(fb.$.TrailingVisual,{...(0,ef.f)(`ColumnSettingsItemBadge{id: ${e.name}}`),children:(0,O.jsx)(y8.Z,{variant:"attention",children:"Action required"})})]})}try{AE.displayName||(AE.displayName="ReorderableColumnListNav")}catch{}try{AA.displayName||(AA.displayName="BoxFeedbackCommitState")}catch{}try{AM.displayName||(AM.displayName="ColumnListNav")}catch{}try{AL.displayName||(AL.displayName="BoxWithDropSash")}catch{}try{AF.displayName||(AF.displayName="ColumnListItem")}catch{}try{(k=Icon).displayName||(k.displayName="Icon")}catch{}let AZ=(0,H.memo)(function(){let{addToast:e}=e9(),{allColumns:t,setAllColumns:r}=df(),{hasAdminPermissions:a}=i4(),{postStats:n}=os(),[i,l]=(0,H.useState)(!1),[s,o]=(0,H.useState)("idle"),d=(0,H.useRef)(null),u=l$(),c=(0,H.useCallback)(e=>{l(e)},[l]),m=(0,H.useCallback)(async(a,i)=>{o("saving");try{await wT({memexProjectColumnId:a,previousMemexProjectColumnId:i})}catch(t){e({message:"Reorder couldn't be saved",type:"error"}),o("error");return}o("success");let l=t.findIndex(({databaseId:e})=>e===a),s=t[l];if(!s)return;let d=[...t.slice(0,l),...t.slice(l+1)],u=d.findIndex(({databaseId:e})=>e===i);u=u>-1?u:d.length-1;let c=[...d.slice(0,u+1),s,...d.slice(u+1)],m=1;for(let e of c)e.position=m,m+=1;r(c),n({name:"settings_field_reorder",ui:"settings",memexProjectColumnId:a,context:`previousColumnId: ${i}`})},[t,r,n,e,o]),p=(0,H.useCallback)((e,t)=>{n({name:"settings_field",ui:aK,memexProjectColumnId:e,context:`${t.type}: ${t.currentTarget.tagName}`})},[n]),f=ur();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(fb.$,{...(0,ef.f)("settings-side-nav"),"aria-label":"Settings",children:[(0,O.jsxs)(fw,{end:!0,to:eC.generatePath(f),...(0,ef.f)("general-settings-item"),onClick:e=>{n({name:"settings_open",ui:aK,context:`${e.type}: ${e.currentTarget.tagName}`})},children:[(0,O.jsx)(fb.$.LeadingVisual,{children:(0,O.jsx)(eF.GearIcon,{})}),"Project settings"]}),a&&(0,O.jsxs)(fw,{to:eS.generatePath(f),...(0,ef.f)("manage-access-item"),children:[(0,O.jsx)(fb.$.LeadingVisual,{children:(0,O.jsx)(eF.PeopleIcon,{})}),"Manage access"]}),(0,O.jsx)(AE,{columns:t,reorderCommitState:s,addNewAnchorRef:d,onAddColumnCallback:c,onReorderColumnCallback:m,onFieldNavCallback:p})]}),(0,O.jsx)(Ag,{isOpen:i,setOpen:l,anchorRef:d,onSave:(0,H.useCallback)(e=>{u(eI.generatePath({...f,fieldId:e.id}))},[u,f])},t.length)]})});try{AZ.displayName||(AZ.displayName="ReorderableSettingsSideNav")}catch{}let AO=()=>(0,O.jsxs)(ue.X,{containerWidth:"full",sx:{height:"100%",padding:0,m:0,[`& > ${eO.Z}`]:{minHeight:"100%"}},children:[(0,O.jsx)(ue.X.Pane,{position:"start",sx:{padding:[3,null,null,4],borderRight:"1px solid",borderColor:"border.subtle"},children:(0,O.jsx)(AZ,{})}),(0,O.jsx)(ue.X.Content,{width:"large",sx:{padding:[3,null,null,4]},children:(0,O.jsx)(Ad.S,{fallback:(0,O.jsx)(Ac,{}),children:(0,O.jsx)(K.j3,{})})})]});try{AO.displayName||(AO.displayName="SettingsView")}catch{}function AV(){return dX(),(0,O.jsx)(dY,{...(0,ef.f)("settings-page"),children:(0,O.jsx)(AO,{})})}try{AV.displayName||(AV.displayName="SettingsPage")}catch{}async function AB(){let e=aa("memex-without-limits-beta-signup-api-data"),{data:t}=await ac(e.url,{method:"POST"});return t}async function A$(e){let t=aa("memex-dismiss-notice-api-data");try{let{ok:r}=await ac(t.url,{method:"POST",body:e});return{success:r}}catch(e){return{success:!1}}}let Az='#__primerPortalRoot__, [id$="-portal-root"], [id^="__omnibarPortalRoot__"]';function AW(){let e=[...document.querySelectorAll(Az)],t=e.some(e=>e.childNodes.length>0);return e&&t}function AG(e){return!!e&&null!==e.closest(Az)}function AU(e,t){return e&&t?{type:"SET_DROP_TARGET",dragID:e,side:t}:{type:"SET_DROP_TARGET",dragID:null,side:null}}function AH(e,t){return{type:"BEGIN_AWAITING_DROP",dropID:e,dropType:t}}function Aq(e,t){let r=function(e,t){switch(t.type){case"BEGIN_AWAITING_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!0,dragID:t.dragID,dragAxis:t.dragAxis,dragOffset:t.dragOffset,dragType:t.dragType,dragOrigin:t.dragOrigin};case"BEGIN_DRAG":return{...e,isDragging:!0,isAwaitingDrag:!1};case"STOP_DRAG":return{...e,isDragging:!1,isAwaitingDrag:!1,dragID:null,dragType:null,dropID:null,dropType:null};case"BEGIN_AWAITING_DROP":return{...e,dropID:t.dropID,dropType:t.dropType};case"STOP_AWAITING_DROP":return{...e,dropID:null,dropType:null};case"SET_DROP_TARGET":return{...e,dropTarget:t.dragID,dropSide:t.side}}}(e,t);return(0,mt.Z)(e,r)?e:r}let AK="data-dnd-drag-id",AQ="data-dnd-drag-type",AX="data-dnd-drop-type";function AY(e,t,r=!1){return[...r?["fixed-sash"]:[],"show-sash",`show-sash-${e}`,`show-sash-${t}`]}function AJ(e,t,r){requestAnimationFrame(()=>{A0(),e&&t&&e.classList.add(...AY(t,r))})}function A0(){for(let e of document.querySelectorAll(".show-sash:not(.fixed-sash)"))e.classList.remove("show-sash","show-sash-after","show-sash-before","show-sash-card","show-sash-column","show-sash-view")}function A1(e){let t=e.dropZone.getBoundingClientRect();return function e(t,r,a=10,n=0){let i;let{point:l,dropType:s,dragAxis:o}=t,d="horizontal"===o?{...l,x:l.x+n}:{...l,y:l.y+n},u=r.top<d.y&&r.right>d.x&&r.bottom>d.y&&r.left<d.x;if(!u&&a<0)return null;if(!u)return e(t,r,-a,0);if("horizontal"===o){let e=r.top+r.height/2;i=document.elementFromPoint(d.x,e)}else{let e=r.left+r.width/2;i=document.elementFromPoint(e,d.y)}let c=i?.closest(`[${AQ}=${s}]`)??null;if(!c)return e(t,r,a,n+a);let m=c.getBoundingClientRect();return[c,"horizontal"===o&&l.x>m.left+m.width/2||"horizontal"!==o&&l.y>m.top+m.height/2?"after":"before"]}(e,t)}let A2=(0,H.createContext)(null),A5=(0,H.createContext)(null),A3=(0,H.createContext)({isDragging:!1,dragType:null}),A4=(0,H.createContext)(null);function A8(e){let[t,r]=(0,H.useReducer)(Aq,{isDragging:!1,isAwaitingDrag:!1,dragID:null,dragAxis:null,dragOffset:null,dragType:null,dragOrigin:null,dropID:null,dropType:null,dropTarget:null,dropSide:null}),a=(0,H.useRef)({onDragStart:null,onDragEnd:null}),n=(0,H.useRef)(t),i=(0,H.useMemo)(()=>new Map,[]),l=(0,H.useMemo)(()=>new Map,[]),s=(0,H.useRef)(null),{onDragStart:o,onDragEnd:d}=a.current,u=(0,H.useCallback)(()=>{r({type:"STOP_DRAG"}),d&&d();let e=s.current?.element;e&&e.remove(),requestAnimationFrame(()=>{A0()})},[d]),c=(0,H.useCallback)(()=>{r({type:"BEGIN_DRAG"}),o&&o(),removeEventListener("mousemove",c)},[o]),m=(0,H.useCallback)(e=>{let r=s.current;r&&requestAnimationFrame(()=>{t.dragAxis&&"vertical"!==t.dragAxis||(r.element.style.top=`${e.clientY-(t.dragOffset?.y??0)}px`),t.dragAxis&&"horizontal"!==t.dragAxis||(r.element.style.left=`${e.clientX-(t.dragOffset?.x??0)}px`)})},[t.dragAxis,t.dragOffset?.x,t.dragOffset?.y]),p=(0,H.useCallback)(e=>{0===e.button&&u()},[u]);Av("is-dragging",t.isDragging),(0,H.useEffect)(()=>{n.current=t},[t]),(0,H.useEffect)(()=>(t.isAwaitingDrag?(addEventListener("mousemove",c),addEventListener("mouseup",u)):(removeEventListener("mousemove",c),removeEventListener("mouseup",u)),()=>{removeEventListener("mousemove",c),removeEventListener("mouseup",u)}),[c,u,t.isAwaitingDrag]),(0,H.useEffect)(()=>(t.isDragging&&(addEventListener("mousedown",u),addEventListener("mousemove",m),addEventListener("mouseup",p)),()=>{removeEventListener("mousedown",u),removeEventListener("mousemove",m),removeEventListener("mouseup",p)}),[u,m,p,t.isDragging]);let f=(0,H.useMemo)(()=>({state:t,stateRef:n,dispatch:r,dragRef:s,dropMap:i,metaMap:l,eventHandlersRef:a}),[i,l,t]),h=(0,H.useMemo)(()=>({stateRef:n,dispatch:r,dragRef:s,dropMap:i,metaMap:l,eventHandlersRef:a}),[i,l]),g=(0,H.useMemo)(()=>({isDragging:t.isDragging,dragType:t.isDragging?t.dragType:null}),[t.dragType,t.isDragging]);return(0,O.jsx)(A2.Provider,{value:f,children:(0,O.jsx)(A5.Provider,{value:h,children:(0,O.jsx)(A3.Provider,{value:g,children:(0,O.jsx)(A4.Provider,{value:t.dropID,children:e.children})})})})}try{A2.displayName||(A2.displayName="Context")}catch{}try{A5.displayName||(A5.displayName="StatelessContext")}catch{}try{A3.displayName||(A3.displayName="IsDraggingContext")}catch{}try{A4.displayName||(A4.displayName="DropIDContext")}catch{}try{A8.displayName||(A8.displayName="DragDropWithIdsContext")}catch{}function A6(e){let t=function(e){let{dispatch:t,dragRef:r,eventHandlersRef:a}=A9(),n=(0,H.useCallback)(n=>{var i,l,s;let o=n.nativeEvent.target?.nodeName;if(0!==n.nativeEvent.button||"INPUT"===o||"TEXTAREA"===o||n.defaultPrevented)return;let d=document.activeElement?.nodeName;if("INPUT"!==d&&"TEXTAREA"!==d&&n.preventDefault(),e.dragRef.current&&"card"===e.dragType){let t=e.dragRef.current.getBoundingClientRect(),a=e.dragRef.current.cloneNode(!0);a.style.position="fixed",a.style.top=`${t.top}px`,a.style.left=`${t.left}px`,a.style.opacity="0.5",a.style.display="none",a.style.zIndex="11",a.style.width=`${t.width}px`,a.style.height=`${t.height}px`,a.style.pointerEvents="none",requestAnimationFrame(()=>{let t=e.dragRef.current?.parentElement;t&&t.appendChild(a)}),r.current={element:a,rect:t}}else r.current=null;let u={x:n.clientX-(r.current?.rect.left??0),y:n.clientY-(r.current?.rect.top??0)};a.current={...a.current,onDragStart:e.onDragStart??null,onDragEnd:e.onDragEnd??null},t((i=e.dragID,l=e.dragType,s=e.dragOrigin,{type:"BEGIN_AWAITING_DRAG",dragID:i,dragType:l,dragOffset:u,dragAxis:e.dragAxis??null,dragOrigin:s??null}))},[t,r,a,e.dragAxis,e.dragID,e.dragOrigin,e.dragRef,e.dragType,e.onDragEnd,e.onDragStart]);return{props:e.disable?{}:{onMouseDown:n}}}(e),{metaMap:r}=A9(),{dragType:a,dragID:n,metadata:i}=e;return(0,H.useEffect)(()=>((function(e,t,r,a){let n=e.get(t);n?n.set(r,a):e.set(t,new Map([[r,a]]))})(r,a,n,i),()=>{(function(e,t,r){let a=e.get(t);a&&(a.delete(r),0===a.size&&e.delete(t))})(r,a,n)}),[n,a,r,i]),{handle:t,props:{[AK]:e.dragID,[AQ]:e.dragType,"data-dnd-drag-index":e.dragIndex,"data-dnd-drag-transform-disable":!!e.disable}}}function A7(e){let{stateRef:t,dispatch:r,dragRef:a,dropMap:n,metaMap:i}=A9(),l=(0,H.useRef)(null);(0,H.useEffect)(()=>(n.set(e.dropID,[e.dropType,e.dropRef]),()=>{n.delete(e.dropID)}),[n,e.dropID,e.dropRef,e.dropType]);let{onDragOver:s,disableSash:o}=e,d=(0,H.useCallback)(n=>{let{dragType:i,dragAxis:d,dropID:u}=t.current;u||e.dropType!==t.current.dropType||requestAnimationFrame(()=>{A0()});let c={x:n.clientX,y:n.clientY};if(l.current=c,i===e.dropType){u!==e.dropID&&r(AH(e.dropID,e.dropType)),s&&s();let t=A1({dropZone:n.currentTarget,point:c,dropType:e.dropType,dragAxis:d});if(!t){r(AU(null));return}r(AU(t[0].getAttribute(AK),t[1])),o||AJ(t[0],t[1],e.dropType),a.current&&(a.current.element.style.display="block")}},[t,e.dropType,e.dropID,s,r,o,a]),{onDrop:u}=e,c=(0,H.useCallback)(()=>{let r=t.current;if(r.isDragging&&r.dropID===e.dropID&&r.dropType===e.dropType&&r.dragType===e.dropType&&u){let e=Me(i,r.dragType,r.dragID);if(!e)throw Error(`No metadata found for ${r.dragType} ${r.dragID}`);let t=Me(i,r.dropType,r.dropTarget)??null;u({state:r,dragMetadata:e,dropMetadata:t,side:r.dropSide})}},[i,u,e.dropID,e.dropType,t]),m=(0,H.useCallback)(a=>{let n=l.current;if(!n)return;let{dragType:i,dragAxis:s,dropID:d}=t.current;if(i===e.dropType){d!==e.dropID&&r(AH(e.dropID,e.dropType));let t=A1({dropZone:a.currentTarget,point:n,dropType:e.dropType,dragAxis:s});if(!t||o)return;AJ(t[0],t[1],e.dropType)}},[o,r,e.dropID,e.dropType,t]);return{props:{onMouseMove:d,onMouseUp:c,onMouseLeave:(0,H.useCallback)(()=>{let{dropID:a}=t.current;a===e.dropID&&(l.current=null,r({type:"STOP_AWAITING_DROP"}))},[r,e.dropID,t]),onScroll:m,"data-dnd-drop-id":e.dropID,[AX]:e.dropType}}}function A9(){let e=(0,H.useContext)(A5);if(null==e)throw Error("useStatelessDragDrop must be used within a DragDropContext");return e}function Me(e,t,r){return e.get(t)?.get(r)??null}var Mt=r(111);function Mr(e){let t=(0,H.useRef)(null),r=(0,H.useRef)(null),a=(0,H.useRef)(null),n=(0,H.useRef)({x:e.bufferX??[0,0],y:e.bufferY??[0,0]}),i="x"===e.axis,l="y"===e.axis,s=(0,H.useRef)(null),o=e.maxBufferX??300,d=e.maxBufferY??200,u=e.deadZoneRatioX??.1,c=e.deadZoneRatioY??.1,m=(0,H.useMemo)(()=>(0,Mt.Z)(()=>{let t=e.scrollRef?.current;if(!t)return;let r=t.getBoundingClientRect(),a=Math.min(r.width/2-r.width*u/2,o),i=Math.min(r.height/2-r.height*c/2,d);n.current={x:e.bufferX??[a,a],y:e.bufferY??[i,i]}},50),[e.scrollRef,e.bufferX,e.bufferY,u,o,c,d]);(0,H.useEffect)(()=>((void 0===e.bufferX||void 0===e.bufferY)&&(m(),addEventListener("resize",m)),()=>{removeEventListener("resize",m)}),[e.bufferX,e.bufferY,m]),(0,H.useEffect)(()=>{(void 0!==e.bufferX||void 0!==e.bufferY)&&(n.current={x:e.bufferX??[0,0],y:e.bufferY??[0,0]})},[e.bufferX,e.bufferY]);let p=(0,H.useCallback)(()=>{t.current&&cancelAnimationFrame(t.current),t.current=null,r.current=null,a.current=null},[]),f=(0,H.useCallback)(()=>{let n=e.scrollRef?.current;n&&(r.current&&!i&&(n.scrollTop+=r.current*e.strength),a.current&&!l&&(n.scrollLeft+=a.current*e.strength),t.current=requestAnimationFrame(f))},[i,l,e.scrollRef,e.strength]),h=(0,H.useCallback)(e=>{t.current&&0===e.button&&(p(),s.current=null)},[p]),g=(0,H.useCallback)(e=>{0===e.button&&(s.current={x:e.clientX,y:e.clientY})},[s]),y=(0,H.useCallback)(i=>{let l=e.scrollRef?.current,o=e?.mouseMoveThresholdX??15,d=e?.mouseMoveThresholdY??15;if(!e.active||!l||!s.current){p();return}let u=l.getBoundingClientRect();a.current=Ma({mousePos:i.clientX,containerStart:u.left,containerEnd:u.right,ease:e.ease,buffer:n.current.x,mouseOrigin:s.current.x,mouseMoveThreshold:o}),r.current=Ma({mousePos:i.clientY,containerStart:u.top,containerEnd:u.bottom,ease:e.ease,buffer:n.current.y,mouseOrigin:s.current.y,mouseMoveThreshold:d}),null==r.current&&null==a.current&&p(),t.current||f()},[e.active,e.ease,e.scrollRef,p,f,e.mouseMoveThresholdX,e.mouseMoveThresholdY]);(0,H.useEffect)(()=>(addEventListener("mousemove",y),addEventListener("mouseup",h),addEventListener("mousedown",g),()=>{removeEventListener("mousemove",y),removeEventListener("mouseup",h),removeEventListener("mousedown",g)}),[y,h,g])}function Ma({mousePos:e,containerStart:t,containerEnd:r,ease:a,buffer:n,mouseOrigin:i,mouseMoveThreshold:l}){let s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:n,d=t+s,u=r-o;return Math.abs(e-i)<l?null:e<d&&e<i?Mn(-((d-Math.max(e-l,t))/s),a):e>u&&e>i?Mn((Math.min(e-l,r)-u)/o,a):null}function Mn(e,t){return t?e<0?-t(-e):t(e):e}function Mi(e){let t=(0,H.useRef)({horizontalScrollbarSize:null,verticalScrollbarSize:null}),r=(0,H.useCallback)(t=>{let{current:r}=e;if(!r)return()=>void 0;let a=new ResizeObserver(t);return a.observe(r),()=>{a.unobserve(r),a.disconnect()}},[e]);return(0,H.useSyncExternalStore)(r,()=>{let{current:r}=e;if(!r)return t.current;let a={horizontalScrollbarSize:r?r.offsetHeight-r.clientHeight:null,verticalScrollbarSize:r?r.offsetWidth-r.clientWidth:null};return(0,mt.Z)(t.current,a)||(t.current=a),t.current})}let Ml=(0,H.createContext)(null),Ms=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(!1),a=(0,H.useMemo)(()=>({showAddFieldModal:t,setShowAddFieldModal:r}),[t]);return(0,O.jsx)(Ml.Provider,{value:a,children:e})});try{Ml.displayName||(Ml.displayName="AddFieldModalContext")}catch{}try{Ms.displayName||(Ms.displayName="AddFieldModalContextProvider")}catch{}let Mo=()=>{let e=(0,H.useContext)(Ml);if(!e)throw Error("useAddFieldModal must be used within a AddFieldModalContextProvider");return e},Md=(0,H.createContext)(null),Mu=(0,H.memo)(function({children:e}){let t=(0,H.useRef)(null);return(0,O.jsx)(Md.Provider,{value:(0,H.useMemo)(()=>({anchorRef:t}),[]),children:e})}),Mc=()=>{let e=(0,H.useContext)(Md);if(!e)throw Error("useViewOptionsMenu must be used within a ViewOptionsMenuRefContextProvider");return e};try{Md.displayName||(Md.displayName="ViewOptionsMenuRefContext")}catch{}try{Mu.displayName||(Mu.displayName="ViewOptionsMenuRefContextProvider")}catch{}var Mm=r(10160);let Mp=(e,t,r)=>{let[a,n]=(0,H.useState)(t);return r&&e in r?[r[e],fV.Z,!0]:[a,n,!1]},Mf=e=>{let[t,r,a]=Mp("isOpen",!1,e),n=(0,H.useRef)(!1),i=a?fV.Z:()=>{r(!0)},l=a?fV.Z:()=>{!1===n.current&&r(!1)},s=(0,H.useCallback)(()=>a?fV.Z:()=>{n.current=!1},[a]);return{isOpen:t,setIsOpen:r,itemOnMouseDown:a?fV.Z:()=>{n.current=!0},inputOnBlur:l,inputOnFocus:i,onResetListInteraction:s}},Mh=1,Mg=(e,t,r,a)=>{if(r?.[a]){let t=r[a];"function"==typeof t&&t(e)}t(e)},My=(e,t)=>{let[r,a]=Mp("inputValue","",e),{isOpen:n,setIsOpen:i,inputOnBlur:l,inputOnFocus:s,itemOnMouseDown:o,onResetListInteraction:d}=Mf(e),u=(0,H.useRef)(null),c=(0,H.useRef)(e.items),m=(0,H.useRef)(),p=(0,H.useRef)(e.onSelectedItemChange),f=(0,H.useRef)(Mh++),h=(0,H.useRef)(`combobox-input-${f.current}`),g=(0,H.useRef)(`combobox-list-${f.current}`),y=function(e){let t=(0,H.useRef)(null);return e??t}(t);c.current!==e.items&&(c.current=e.items),p.current!==e.onSelectedItemChange&&(p.current=e.onSelectedItemChange);let x=(0,H.useCallback)(e=>{if(c.current){let t=c.current[e];t&&p.current(t),d(),y.current&&y.current.focus(),i(!1)}},[d,i,y]),b=(0,H.useCallback)(e=>{let t=e.target.getAttribute("data-list-index");t&&x(parseInt(t))},[x]);(0,H.useEffect)(()=>{n?m.current?.start():m.current?.stop()},[n]);let v=(0,e5.Z)(b);(0,H.useEffect)(()=>{let e=u.current;if(y.current&&u.current){m.current=new Mm.Z(y.current,u.current);let t=e=>{v.current(e)};return u.current.addEventListener("combobox-commit",t),function(){m.current?.destroy(),e?.removeEventListener("combobox-commit",t)}}},[y,v]),(0,H.useEffect)(()=>{n?m.current?.start():m.current?.stop()},[n]);let w=e=>{a(e.target.value),n||i(!0)};return{inputValue:r,setInputValue:a,getInputProps:e=>({ref:y,id:h.current,type:"text",value:r,onFocus:t=>{Mg(t,s,e,"onFocus")},onBlur:t=>{Mg(t,l,e,"onBlur")},onChange:t=>{Mg(t,w,e,"onChange")}}),getListProps:()=>({ref:u,id:g.current}),getItemProps:(e,t,r)=>({role:"option",id:`combobox-${f.current}-item-${t}`,"data-list-index":t,onMouseDown:e=>{Mg(e,o,r,"onMouseDown")}}),isOpen:n,selectFirstItem:()=>{y.current&&u.current&&(m.current?.clearSelection(),m.current?.navigate(1))}}};function Mx(e,t,r,a,n){let[i,l]=(0,H.useState)("left"),[s,o]=(0,H.useState)("top"),d=(0,H.useCallback)(()=>{if(!e?.current||!t.current)return;let{top:r,left:a,xAlign:d,yAlign:u,hasContentDimensions:c}=mv({originRef:e,contentRef:t,alignment:{xAlign:n?.xAlign??i,yAlign:n?.yAlign??s,yTopOffset:0}});t.current.style.top=`${r}px`,t.current.style.left=`${a}px`,!i&&c&&l(d),!s&&c&&o(u)},[e,t,i,s,n]);return(0,uG.b)(()=>{r||(l(void 0),o(void 0)),d();let e=new ResizeObserver(d);return e.observe(document.documentElement),()=>{e.unobserve(document.documentElement),e.disconnect()}},[d,r,...a]),{adjustPickerPosition:d}}let Mb=(0,H.forwardRef)((e,t)=>(0,O.jsx)(eO.Z,{as:"ul",role:"listbox",ref:t,...e,sx:{width:`calc(100vw - ${e.offsetX??52}px)`,maxHeight:`calc(100vh - ${e.offsetY??60}px)`,overflowY:"auto",p:0,m:0,listStyle:"none",bg:"canvas.default",border:"1px solid",borderColor:"border.default",borderRadius:2,boxShadow:"shadow.medium",position:"absolute",zIndex:100,fontSize:"12px","@media (min-width: 544px)":{width:"auto",minWidth:"400px"},...e.sx},children:e.children}));Mb.displayName="PickerList";let Mv={cursor:"pointer",display:"block",fontSize:"12px",p:2,"&:first-child":{borderTopLeftRadius:2,borderTopRightRadius:2},'&[aria-selected="true"]':{color:"fg.default",textDecoration:"none",bg:"canvas.subtle"}},Mw=(0,H.forwardRef)((e,t)=>(0,O.jsx)(eO.Z,{as:"li",ref:t,...e,sx:Mv,children:e.children}));Mw.displayName="PickerItem";let Mj=(0,O.jsxs)(O.Fragment,{children:["You can use ",(0,O.jsx)(Ip.u,{format:"full",keys:"Control+Space"})," to add an item"]}),MC=({focusedPlaceholder:e,inputHasFocus:t,unfocusedPlaceholder:r,value:a,descriptionId:n})=>""===a&&(t||r)?(0,O.jsx)(eO.Z,{sx:{position:"absolute",height:"100%",display:"flex",alignItems:"center",paddingLeft:"20px"},children:(0,O.jsxs)(eB.Z,{sx:{fontSize:1,color:"fg.muted"},children:[!t&&(0,O.jsx)("span",{"aria-hidden":!0,children:r}),(0,O.jsx)("span",{id:n,hidden:!t,children:e})]})}):null;try{Mj.displayName||(Mj.displayName="DefaultOmnibarPlaceholder")}catch{}try{MC.displayName||(MC.displayName="OmnibarPlaceholder")}catch{}let MI={position:"relative",width:"100%",cursor:"text",display:"flex"},MS=({isOpen:e,inputRef:t,renderInput:r,newItemAttributes:a,onCloseSuggestions:n,onCloseIssueCreator:i})=>{let[l,s]=function(){let[e,t]=(0,H.useState)({current:null}),r=(0,H.useCallback)(r=>{e.current!==r&&t({current:r})},[e]);return[e,r]}(),o=hK(),d=(0,H.useMemo)(()=>{let e=[];return o?e.push({icon:eF.IssueOpenedIcon,title:"Create new issue",action:"createIssue"}):e.push({icon:eF.IssueDraftIcon,title:"Create a draft",action:"createDraft"}),e.push({icon:eF.RepoIcon,title:"Add item from repository",shortcutIcon:eF.ArrowRightIcon,action:"openSidePanel",shortcutContent:(0,O.jsx)(eZ.Z,{icon:eF.ArrowRightIcon,sx:{color:"fg.muted"}})}),e},[o]),u=function(e){let t=(0,H.useRef)({top:0,left:0});return(0,H.useSyncExternalStore)(MT,()=>{let r=t.current;if(e.current){let{top:a,left:n}=e.current.getBoundingClientRect();(a!==r.top||n!==r.left)&&(t.current={top:a,left:n})}return t.current})}(t),{openPaneBulkAdd:c}=dq(),m=(0,H.useCallback)(e=>{if(e)switch(e.action){case"createDraft":(0,uU.flushSync)(()=>{n("")}),t.current?.focus();break;case"createIssue":o&&o.start({},a,t,i);break;case"openSidePanel":n(""),c("omnibar_discovery_suggestions_ui",void 0,"Add item from repository"!==e.title?e.title:void 0,a)}},[n,c,t,a,o,i]),{getInputProps:p,getListProps:f,getItemProps:h}=My({items:d,onSelectedItemChange:m,isOpen:e},t),g=(0,H.useCallback)(()=>{(0,uU.flushSync)(()=>{n(t.current?.value)}),t.current?.focus()},[n,t]),y=(0,H.useId)();return(0,O.jsxs)(eO.Z,{sx:MI,ref:s,children:[(0,O.jsx)(MC,{focusedPlaceholder:rI.newItemPlaceholder,inputHasFocus:!0,value:t.current?.value,descriptionId:y}),r({...p({onChange:g}),fontSize:1,pl:"12px",lineHeight:1.5,"aria-label":rI.newItemPlaceholderAriaLabel,"aria-describedby":y,autoFocus:!0,autoComplete:"off",onKeyDown:t=>{switch(t.key){case"Escape":n("");break;case"ArrowDown":case"ArrowUp":e&&t.stopPropagation()}}}),(0,O.jsx)(Mk,{...f(),containerRef:l,isOpen:e,items:d,getItemProps:h,itemOnMouseDown:m,coordinates:u})]})},Mk=(0,H.forwardRef)(({items:e,getItemProps:t,itemOnMouseDown:r,isOpen:a,containerRef:n,coordinates:i,...l},s)=>{let o=(0,H.useRef)(null);(0,my.z)(s,o);let{adjustPickerPosition:d}=Mx(n,o,a,[i,e],{yAlign:"bottom"});return(0,O.jsx)(mC,{onMount:d,children:(0,O.jsx)(Mb,{...l,...(0,ef.f)("discovery-suggestions"),ref:o,hidden:!a||!e.length,sx:{p:[null,0],width:[null,"300px"],maxWidth:[null,"300px"]},"aria-label":"Discovery suggestions",children:a&&e.map((a,n)=>(0,O.jsxs)(H.Fragment,{children:[(0,O.jsx)(Mw,{style:{padding:14},value:a.title,...(0,ef.f)("issue-picker-item"),...t(a,n,{onMouseDown:()=>r(a)}),children:(0,O.jsxs)(eO.Z,{sx:{justifyContent:"space-between",overflow:"hidden",flex:1,display:"flex"},children:[(0,O.jsxs)("span",{children:[(0,O.jsx)(eZ.Z,{icon:a.icon,sx:{ml:2,color:"fg.muted"}}),(0,O.jsx)(eB.Z,{sx:{ml:2,color:"fg.muted",fontSize:1},children:a.title})]}),(0,O.jsx)("span",{style:{display:"flex",alignItems:"center"},children:a.shortcutContent})]})}),n!==e.length&&(0,O.jsx)(mx.S.Divider,{sx:{margin:0}})]},n++))})})});Mk.displayName="SuggestedItemList";let MT=e=>{let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}};try{MS.displayName||(MS.displayName="DiscoverySuggestions")}catch{}let MN=({items:e,onSelectedItemChange:t,textExpanderOnChange:r,expansionKey:a="#",...n},i)=>{let{inputOnBlur:l,isOpen:s,setIsOpen:o,itemOnMouseDown:d,onResetListInteraction:u}=Mf(),c=e=>{e.target.value.startsWith(a)?(s||o(!0),r(e.target.value.substr(1))):o(!1)},{getInputProps:m,selectFirstItem:p,inputValue:f,getItemProps:h,...g}=My({items:e,isOpen:s,onSelectedItemChange:e=>{u(),o(!1),t(e)},...n},i),y=e=>{f.startsWith(a)&&o(!0)};return(0,H.useEffect)(()=>{f.startsWith(a)?o(!0):o(!1)},[f,o,a]),(0,H.useEffect)(()=>{s&&p()},[s,e,p]),{...g,isOpen:s,selectFirstItem:p,getInputProps:e=>m({onChange:t=>{e?.onChange?.(t),c(t)},onBlur:t=>{e?.onBlur?.(t),l(t)},onFocus:t=>{e?.onFocus?.(t),y(t)}}),getItemProps:(e,t,r)=>h(e,t,{...r,onMouseDown:e=>{r&&r.onMouseDown&&r.onMouseDown(e),d()}}),inputValue:f,textExpanderValue:f.startsWith(a)?f.substr(1):""}},M_={bg:e=>`${e.colors.searchKeyword.hl}`,color:"inherit",fontWeight:"bold"},MR=({text:e,chunks:t,...r})=>(0,O.jsx)(eB.Z,{...r,children:t.map(t=>{let r=e.substr(t.startIndex,t.endIndex-t.startIndex);return t.highlight?(0,O.jsx)(eO.Z,{as:"mark",sx:M_,children:r},t.startIndex.toString()):r})});try{MR.displayName||(MR.displayName="HighlightedText")}catch{}let MP=(0,H.forwardRef)(({isOpen:e,loading:t,repositories:r,getItemProps:a,positionDataMap:n,inputRef:i,...l},s)=>{let o=(0,H.useRef)(null);(0,my.z)(s,o);let{adjustPickerPosition:d}=Mx(i,o,e,[t]),u=mb("__omnibarPortalRoot__");return(0,O.jsx)(mC,{id:u,onMount:d,children:(0,O.jsx)(Mb,{...l,...(0,ef.f)("repo-searcher-list"),className:`repo-searcher-list omnibar-picker ${e&&(t||r.length)?"visible":"hidden"}`,ref:o,hidden:!e||!t&&!r.length,"aria-label":"Repository suggestions",children:t?(0,O.jsx)(eO.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,O.jsx)(u$.Z,{size:"medium"})}):r.map((e,t)=>(0,H.createElement)(MD,{...a(e,t),...(0,ef.f)("repo-searcher-item"),positionData:n.get(e),key:e.id,repository:e}))})})});MP.displayName="RepoList";let MD=({repository:e,positionData:t,...r})=>{let{projectOwner:a}=i5(),n=t?.chunks??[],i=e.nameWithOwner.split("/")[0],l=i?.toLowerCase()!==a?.login.toLowerCase()?i:"";return(0,O.jsxs)(Mw,{...r,children:[(0,O.jsx)(c9,{repository:e}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:l?`${l}/`:""}),(0,O.jsx)(MR,{text:e.name,chunks:n})]})};try{MD.displayName||(MD.displayName="RepoItem")}catch{}let ME=({onRepositorySelected:e,text:t,setText:r,onItemSelected:a,inputRef:n,renderInput:i,defaultPlaceholder:l,isFocused:s,isDisabled:o,groupingMetadata:d})=>{let{suggestRepositories:u}=c7(),[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(),[h,g]=(0,H.useState)(),[y,x]=(0,H.useState)(new WeakMap),b=(0,H.useRef)(),v=(0,H.useRef)(!0),[w,j]=(0,H.useState)(!!s),C=d?.sourceObject.dataType==="issueType"&&"group"===d.sourceObject.kind,I=d?.sourceObject.dataType==="milestone"&&"group"===d.sourceObject.kind?d.value:void 0,S=(0,H.useCallback)(e=>{let t=e.reduce((e,t)=>(e.set(t,{chunks:[{startIndex:0,endIndex:t.name.length,highlight:!1}]}),e),new WeakMap);g(e),x(t),m(!1)},[g,x]),k=(0,H.useCallback)(e=>{r(e.target.value)},[r]),T=(0,H.useCallback)(async e=>{let t=e?await c2({query:e,onlyWithIssueTypes:C,milestone:I}):void 0;n.current?.value!=="#"&&S(t?.repositories??p??[])},[S,p,n,C,I]),N=(0,H.useCallback)(e=>{b.current&&b.current.cancel(),b.current=(0,s9.Z)(()=>T(e),200),m(!0),b.current()},[b,T,m]),{getInputProps:_,getListProps:R,getItemProps:P,isOpen:D}=MN({textExpanderOnChange:e=>{!e&&p&&S(p),e&&N(e)},items:h||[],onSelectedItemChange:t=>{e(t)},inputValue:t},n),{navigationDispatch:E}=i$(),A=(0,H.useCallback)(async e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLInputElement){let n=e.target;switch(e.key){case"Enter":r(""),e.preventDefault(),a(t);break;case"Tab":e.shiftKey||D||!(t.length>0)||(e.preventDefault(),await a(t),r(""),requestAnimationFrame(()=>{j(!1),E(ir({x:io.Second,y:io.Last,focusType:is.Focus}))}));break;case"Escape":D&&(r(""),e.stopPropagation());break;case"ArrowLeft":(0!==n.selectionStart||0!==n.selectionEnd)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowRight":(n.selectionStart!==n.value.length||n.selectionEnd!==n.value.length)&&(e.nativeEvent.preventFocusChange=!0);break;case"ArrowDown":case"ArrowUp":D&&e.stopPropagation()}}},[D,t,r,a,E]),M=(0,yc.u)(A);(0,H.useEffect)(()=>{let e=async()=>{if(void 0===p){m(!0);let e=await u({onlyWithIssueTypes:C,milestone:I});f(e),n?.current?.value==="#"&&S(e)}};v.current&&(v.current=!1,e())},[p,f,u,n,S,C,I]);let L=(0,H.useCallback)(()=>{o||j(!0)},[o]),F=(0,H.useCallback)(()=>{o||j(!1)},[o]),Z=(0,H.useId)(),V=o?(0,O.jsx)(IM,{"aria-disabled":"true",sx:{cursor:"not-allowed",pl:"20px"},children:l}):i({..._({onChange:k,onFocus:L,onBlur:F}),pl:"12px",fontSize:1,lineHeight:1.5,"aria-label":rI.newItemPlaceholderAriaLabel,"aria-describedby":Z,"aria-keyshortcuts":"Control+Space",autoComplete:"off",value:t,...M});return(0,O.jsxs)(eO.Z,{sx:{width:"100%",cursor:"text",display:"flex",position:"relative"},children:[(0,O.jsx)(MC,{descriptionId:Z,focusedPlaceholder:rI.newItemPlaceholder,inputHasFocus:w,unfocusedPlaceholder:l,value:n.current?.value}),V,(0,O.jsx)(MP,{...R(),inputRef:n,isOpen:D,loading:c,positionDataMap:y,getItemProps:P,repositories:h||[]})]})};try{ME.displayName||(ME.displayName="RepoSearcher")}catch{}let MA=({item:e,...t})=>(0,O.jsx)(Mw,{...t,children:(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(u7,{type:e.type,state:e.state,stateReason:e?.stateReason,isDraft:!!e.isDraft})}),(0,O.jsx)(eB.Z,{children:e.title}),(0,O.jsx)(eB.Z,{sx:{ml:1,color:"fg.muted"},children:`#${e.number}`})]})});try{MA.displayName||(MA.displayName="SuggestedItemOption")}catch{}let MM="add_multiple_items",ML="create_issue",MF=(0,H.forwardRef)(({loading:e,items:t,getItemProps:r,isOpen:a,itemOnMouseDown:n,containerRef:i,...l},s)=>{let o=(0,H.useRef)(null);(0,my.z)(s,o);let{items:d}=dP(),{adjustPickerPosition:u}=Mx(i,o,a,[e,t,d]),{theme:c}=(0,$.Fg)(),m=mb("__omnibarPortalRoot__");return(0,O.jsx)(mC,{id:m,onMount:u,children:(0,O.jsx)(Mb,{...l,...(0,ef.f)("issue-picker-list"),ref:o,className:`issue-picker-list omnibar-picker ${a&&(e||t.length)?"visible":"hidden"}`,hidden:!a||!e&&!t.length,"aria-label":"Suggestions",children:e?(0,O.jsx)(eO.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,O.jsx)(u$.Z,{size:"medium"})}):t.map((e,t)=>e.type===ML?(0,O.jsx)(Mw,{style:{borderTop:"1px solid",borderColor:c?.colors.border.muted},...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,ef.f)("create-new-issue"),children:(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(eZ.Z,{icon:eF.PlusCircleIcon,sx:{color:"fg.muted"}})}),(0,O.jsxs)(eB.Z,{sx:{flexGrow:1},children:["Create new issue"," ",e.title?(0,O.jsxs)(O.Fragment,{children:['"',(0,O.jsx)(eB.Z,{sx:{fontWeight:600},children:e.title}),'"']}):null]})]})},"create"):e.type===MM?(0,O.jsx)(Mw,{...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,ef.f)("add-multiple-items"),children:(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(eZ.Z,{icon:eF.RepoIcon,sx:{color:"fg.muted"}})}),(0,O.jsxs)(eB.Z,{sx:{flexGrow:1},children:["Add items from ",(0,O.jsx)(eB.Z,{sx:{fontWeight:600},children:e.repository.nameWithOwner})]}),(0,O.jsx)(eO.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,O.jsx)(eZ.Z,{icon:eF.ArrowRightIcon,sx:{color:"fg.muted"}})})]})},"multiple"):(0,O.jsx)(MA,{item:e,...r(e,t,{onMouseDown:t=>n(t,e)}),...(0,ef.f)("issue-picker-item")},e.number))})})});MF.displayName="SuggestedItemList";let MZ=({repository:e})=>(0,O.jsxs)(eO.Z,{sx:{alignItems:"center",display:"flex"},...(0,ef.f)("repo-searcher-selected-repo"),children:[(0,O.jsx)(eB.Z,{sx:{fontSize:1,mr:0,color:"fg.subtle"},children:"repo:"}),(0,O.jsx)(eB.Z,{sx:{fontSize:1,color:"accent.fg",mr:2},children:e.name})]});try{MZ.displayName||(MZ.displayName="SelectedRepositoryPill")}catch{}let MO=({onItemSelected:e,onRemovePicker:t,onFilterTextChanged:r,inputRef:a,renderInput:n,loading:i,filteredItems:l,repository:s})=>{let{isOpen:o,setIsOpen:d,inputOnBlur:u,itemOnMouseDown:c,onResetListInteraction:m,inputOnFocus:p}=Mf(),f=(0,H.useRef)(null),{navigationDispatch:h}=i$(),g=null!==hK(),[y,x]=(0,H.useState)(),b=(0,H.useMemo)(()=>{let e=Array.from(l);return g&&e.push({type:ML,title:y,repository:s}),l.length>1&&e.push({type:MM,title:y,repository:s}),e},[l,g,y,s]),v=(0,H.useCallback)(async t=>{m(),e(t),k(""),x(""),S()},[b,m]),{getInputProps:w,getListProps:j,getItemProps:C,inputValue:I,selectFirstItem:S,setInputValue:k}=My({items:b,onSelectedItemChange:v,isOpen:o},a);(0,H.useEffect)(()=>{o&&S()},[o,b,S]);let T=(0,H.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),c()},[c]),N=(0,H.useCallback)(()=>{d(!1)},[d]);return(0,O.jsxs)("div",{ref:f,onBlur:N,style:{position:"relative",width:"100%",cursor:"text",display:"flex"},children:[n({...w({onFocus:p,onBlur:u,onChange:e=>{x(e.target.value),r(e.target.value)}}),fontSize:1,lineHeight:1.5,placeholder:rI.newItemFindIssuePlaceholder(g),"aria-label":rI.newItemFindIssuePlaceholder(g),autoFocus:!0,autoComplete:"off",onKeyDown:e=>{switch(e.key){case"Backspace":I||(e.preventDefault(),t());break;case"Escape":t(),e.stopPropagation();break;case"ArrowDown":case"ArrowUp":o&&e.stopPropagation();break;case"Tab":t(),requestAnimationFrame(()=>{h(ir({x:io.Second,y:io.Last,focusType:is.Focus}))})}}}),(0,O.jsx)(MF,{...j(),containerRef:f,isOpen:o,loading:i,items:b,getItemProps:C,itemOnMouseDown:T,"aria-label":rI.newItemFindIssuePlaceholder(g)})]})};MO.displayName="SuggestedItemPicker";let MV=[],MB=(0,H.memo)(function(e){let{repository:t,filteredItemIds:r=MV,newItemAttributes:a,inputRef:n,onItemSelected:i,onRemovePicker:l,renderInput:s,...o}=e,[d,u]=(0,H.useState)(!0),{refresh:c,items:m,removeItem:p}=d3(u),{openPaneBulkAdd:f}=dq(),h=(0,H.useMemo)(()=>m?m.filter(e=>!r.includes(e.id)):[],[r,m]),g=(0,H.useCallback)(e=>c(t.id,e),[c,t]),y=hK(),x=(0,H.useCallback)(async e=>{u(!0),e.type===MM?f("omnibar_add_item_suggestions_ui",t,e.title,a):e.type===ML?y?.start({issueTitle:e.title,repo:hB(e.repository.nameWithOwner)},a,n):(await i(e),await c(t.id,"",!0),p(e)),u(!1)},[t,f,a,i,c,p,y,n]);return(0,H.useEffect)(()=>{y?.prefetch(hB(t.nameWithOwner)),g("")},[t.nameWithOwner,y,g]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{...o,sx:{flexShrink:0,display:"flex",...o.sx},children:(0,O.jsx)(MZ,{repository:t})}),(0,O.jsx)(MO,{onRemovePicker:l,onItemSelected:x,inputRef:n,renderInput:s,loading:d,filteredItems:h,onFilterTextChanged:g,repository:t})]})});MB.displayName="SuggestionsForRepository";let M$={[eA.TrackedBy]:r$.addedUnsupportedItemToast,[eA.ParentIssue]:rz.addedUnsupportedItemToast,[eA.IssueType]:rX.addedUnsupportedItemToast,[eA.Milestone]:rN.addedUnsupportedItemToast},Mz=e=>e.dataType in M$,MW=e=>M$[e.dataType],MG=(0,H.memo)((0,H.forwardRef)(({onAddItem:e,newItemAttributes:t,scrollRef:r,...a},n)=>{let{addToast:i}=e9(),{createMemexItem:l}=hH(),s=(0,H.useCallback)((t,r,a,n,i,s)=>l({contentType:t.type,content:{id:t.id,repositoryId:r},memexProjectColumnValues:a,localColumnValues:n,previousMemexProjectItemId:i},s).then(t=>(e?.(t),t)),[l,e]),o=(0,H.useCallback)((a,n,s,o,d)=>{let u=a.trim(),{updateColumnActions:c=[]}=t??{};return u?l({contentType:eL.DraftIssue,content:{title:yf(u)},memexProjectColumnValues:n,localColumnValues:s,previousMemexProjectItemId:o},d).then(t=>{for(let a of(e?.(t),c))if(Mz(a)&&t.contentType!==eL.Issue){let e=MW(a);e&&i({message:e,type:e$.warning}),r?.current?.scrollTo({left:0,top:r.current?.scrollHeight,behavior:"smooth"});break}return t}):Promise.resolve(null)},[i,l,t,e,r]);return(0,O.jsx)(MU,{onAddItem:s,onAddDraftItem:o,newItemAttributes:t,...a,ref:n})}));MG.displayName="OmnibarInternal";let MU=(0,H.forwardRef)(({onAddItem:e,onAddDraftItem:t,onInputFocus:r,filteredItemIds:a,newItemAttributes:n,isFixed:i,defaultPlaceholder:l,groupingMetadata:s,disabled:o,childElementRole:d,...u},c)=>{let m=(0,H.useRef)(null);(0,my.z)(c,m);let[p,f]=(0,H.useState)(!1),[h,g]=(0,H.useState)(!1),{navigationDispatch:y}=i$(),x=hK(),b=(0,H.useCallback)(()=>{m.current?.focus()},[m]),v=(0,IL.W)({"is-focused":p,"is-fixed":i}),w=(0,IL.W)({"is-focused":p,"is-disabled":o}),{isTemplatesDialogOpen:j,showTemplateDialog:C,shouldOpenDiscoveryMenu:I,setShouldOpenDiscoveryMenu:S}=jD(),{viewType:k}=hL();(0,H.useEffect)(()=>{S(!1)},[S]),(0,H.useEffect)(()=>{k===fQ.Table&&I&&g(!0)},[j,k,C,g,I]);let T=(0,H.useCallback)(()=>{g(!1),f(!1)},[g]),N=(0,H.useCallback)(e=>{e.preventDefault(),g(!h)},[h,g]),_=(0,H.useCallback)(()=>{x?.prefetch()},[x]),R=(0,H.useCallback)(()=>{r&&r(),f(!0)},[r]),P=(0,H.useCallback)(()=>{y(iV())},[y]);return(0,O.jsxs)(Mq,{className:v,onClick:b,...(0,ef.f)("omnibar"),...u,children:[(0,O.jsx)(eO.Z,{role:d,sx:{height:"100%",padding:"3px 1px 3px 3px"},children:(0,O.jsx)(mq.h,{"aria-label":rI.createNewItemOrAddExistingIssueAriaLabel,className:w,onClick:N,onFocus:P,onMouseEnter:_,disabled:o,...(0,ef.f)("new-item-button"),icon:eF.PlusIcon,variant:"invisible",size:"small",sx:{height:"100%",color:"fg.subtle"}})}),(0,O.jsx)(eO.Z,{role:d,className:v,sx:{display:"flex",flex:"auto","&.is-focused":{boxShadow:e=>`inset 0 0 0 2px ${e.colors.accent.emphasis}`,borderRadius:"2px"},"&.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.border.default}`},"&.is-focused.is-fixed":{boxShadow:e=>`inset 1px 0 0 0 ${e.colors.accent.muted}`}},children:(0,O.jsx)(MQ,{ref:m,isFocused:p,isFixed:i,filteredItemIds:a,showDiscoveryMenu:h,setShowDiscoveryMenu:g,onAddItem:e,onAddDraftItem:t,newItemAttributes:n,onFocus:R,onBlur:T,defaultPlaceholder:l,groupingMetadata:s,disabled:o})})]})});MU.displayName="BaseOmnibar";let MH=(0,Y.F4)(["0%{opacity:0;}100%{opacity:1;}"]),Mq=(0,Y.ZP)(eO.Z).withConfig({displayName:"omnibar__StyledOmnibar",componentId:"sc-53d3b6b9-0"})(["align-items:stretch;display:flex;flex:auto;height:","px;max-height:","px;&.is-fixed{animation:"," 0.25s ease-in;height:","px;max-height:","px;width:100%;background-color:",";box-shadow:inset -1px 0 0 0 ",",inset 1px 0 0 0 ",",inset 0px 1px 0 0 ",",inset 0px -1px 0 0 ",",",";border-radius:6px;&.is-focused{box-shadow:inset 0 0 0 2px ",";}}"],37,37,MH,45,45,(0,U.U2)("colors.canvas.overlay"),(0,U.U2)("colors.border.default"),(0,U.U2)("colors.border.default"),(0,U.U2)("colors.border.default"),(0,U.U2)("colors.border.default"),(0,U.U2)("shadows.shadow.medium"),(0,U.U2)("colors.accent.emphasis")),MK=[],MQ=(0,H.memo)((0,H.forwardRef)(({onAddItem:e,onAddDraftItem:t,onFocus:r,onBlur:a,filteredItemIds:n=MK,isFocused:i,showDiscoveryMenu:l,setShowDiscoveryMenu:s,newItemAttributes:o,defaultPlaceholder:d,groupingMetadata:u,disabled:c,isFixed:m},p)=>{let f=(0,H.useRef)(null),{clearCachedSuggestions:h}=c7(),g=hZ({updateActions:o?.updateColumnActions,previousItemId:o?.previousItemId,onAddItem:e,onAddDraftItem:t,groupId:o?.groupId}),y=u?.sourceObject.dataType==="repository"&&"name"in u.sourceObject.value?u.sourceObject.value:null,[x,b]=(0,H.useState)(""),[v,w]=(0,H.useState)(y);(0,H.useEffect)(()=>{w(y)},[y]);let j=(0,H.useCallback)(e=>{(0,uU.flushSync)(()=>{w(e),b("")}),f.current?.focus()},[]),C=(0,H.useCallback)((e="")=>{b(e),w(null)},[]);(0,H.useImperativeHandle)(p,()=>({focus:()=>f.current?.focus(),blur:()=>f.current?.blur(),isInputElement:e=>e===f.current}),[]);let I=(0,H.useCallback)(async e=>(h(),(0,uU.flushSync)(()=>{b("")}),e===MM)?void 0:"string"==typeof e?g(e):e?.type!==MM&&e?.type!==ML&&v?g({...e,repositoryId:v.id}):void 0,[v,h,g]),S=(0,H.useCallback)(e=>{let{width:t,size:n,...i}=e;return y&&!1===m&&(i.autoFocus=!1),(0,O.jsx)(pT,{...i,ref:f,sx:{color:"fg.default",paddingLeft:"20px"},onFocus:t=>{e.onFocus&&e.onFocus(t),r&&r()},onBlur:t=>{e.onBlur&&e.onBlur(t),a&&a()},className:c?"is-disabled":void 0,...(0,ef.f)("repo-searcher-input")})},[y,m,c,r,a]),k=(0,H.useCallback)(e=>{s&&(s(!1),void 0!==e&&(0,uU.flushSync)(()=>{C(e)}),f.current?.focus())},[s,C]),T=(0,H.useCallback)(()=>{s?.(!0)},[s]),N=(0,H.useCallback)(()=>{y||((0,uU.flushSync)(()=>{w(null)}),f.current?.focus())},[y]);return f.current?.value||v||!l?v?(0,O.jsx)(MB,{onRemovePicker:N,filteredItemIds:n,newItemAttributes:o,onItemSelected:I,repository:v,inputRef:f,renderInput:S,sx:{alignItems:"center",pl:3}}):(0,O.jsx)(ME,{onItemSelected:I,inputRef:f,isFocused:i,isDisabled:c,renderInput:S,defaultPlaceholder:d,text:x,setText:b,onRepositorySelected:j,groupingMetadata:u}):(0,O.jsx)(MS,{isOpen:!0,inputRef:f,renderInput:S,newItemAttributes:o,onCloseSuggestions:k,onCloseIssueCreator:T})}));MQ.displayName="OmnibarInput";try{Mq.displayName||(Mq.displayName="StyledOmnibar")}catch{}let MX=({verticalScrollbarSize:e,isFixed:t,horizontalScrollbarSize:r,effectiveTableHeight:a,disableBlur:n})=>{let i={alignItems:"center",pl:"8px",width:e?`calc(100% - ${e}px)`:"100%",right:e?`${e}px`:"",pointerEvents:"none",">:first-child":{pointerEvents:"all"}};return t?{...i,backdropFilter:n?"unset":"blur(12px)",pb:r?0:"12px",position:"absolute",bottom:r?`${r}px`:0,pr:e?0:"8px"}:{...i,backgroundColor:"canvas.default",pb:"1px",position:"absolute",top:`${a}px`,height:"37px",borderBottom:"1px solid",borderBottomColor:"border.default",boxShadow:"shadow.medium"}},MY=(0,H.forwardRef)(({horizontalScrollbarSize:e,disableBlur:t,verticalScrollbarSize:r,isFixed:a,effectiveTableHeight:n,sx:i,children:l,...s},o)=>(0,O.jsx)(eO.Z,{...s,ref:o,sx:{display:"flex",zIndex:10,...MX({isFixed:a,verticalScrollbarSize:r,horizontalScrollbarSize:e,effectiveTableHeight:n,disableBlur:t}),...i},...(0,ef.f)("omnibar-container"),children:l}));MY.displayName="OmnibarContainer";let MJ={position:"absolute",width:"100%",pointerEvents:"none"},M0=(0,H.forwardRef)(({horizontalScrollbarSize:e,children:t},r)=>(0,O.jsx)(eO.Z,{ref:r,sx:{bottom:e?`${e??12}px`:0,...MJ},...(0,ef.f)("omnibar-drawer"),children:t}));function M1({applyTransientFilter:e}={applyTransientFilter:"include"}){let{items:t}=dP(),{matchesSearchQuery:r,query:a,transientQuery:n,baseQuery:i}=dv(),l=!!(a||i||e&&n.normalisedQuery);return{filteredItems:(0,H.useMemo)(()=>l?t.filter(t=>r(t,e)):t,[l,t,r,e])}}function M2(e,t,r,a,n,i){let l;let s=a&&a(t,i),o=new Map,d=[],u=[],{dataType:c}=t;for(let a of e){let e=r(t,a);if(!e){let e=n?n(a,"none"):a;u.push(e);continue}for(let t of e){let{value:e}=t;s||-1!==d.findIndex(t=>t.value===e)||d.push(t);let r=n?n(a,e):a,i=o.get(e);i?i.push(r):o.set(e,[r])}}l=s?s.map(e=>({...e,rows:o.get(e.value)??[]})):(function(e,t){switch(e){case eA.Assignees:return t.sort(m0);case eA.TrackedBy:return t.sort(m1);default:return t.sort((e,t)=>mJ.compare(e.value,t.value))}})(c,[...d]).map(e=>({...e,rows:o.get(e.value)??[]}));let m=m4(t);return m&&l.push({value:rI.undefined,sourceObject:m,rows:u}),l}function M5(e,t){return{[eA.Assignees]:{getGroupingMetadata:(r,a)=>(function(e,t){let r=e.Assignees;if(!r||0===r.length)return;let{memex_table_without_limits:a}=n7(),n=r.sort(m2);return t||a?n.map(e=>({value:e.login,sourceObject:{dataType:eA.Assignees,kind:"group",value:[e]}})):[{value:n.map(e=>e.login).join("_"),sourceObject:{dataType:eA.Assignees,kind:"group",value:n}}]})(e(a),t?.useDistinctAssigneesGrouping??!1),getAllGroupMetadata:(e,t)=>(function(e,t){if(e.dataType!==eA.Assignees||!t)return;let r=new Map;for(let e of t)for(let t of e.getAssignees())r.set(t.login,t);return Array.from(r.values()).sort(m2).map(e=>({value:e.login,sourceObject:{dataType:eA.Assignees,kind:"group",value:[e]}}))})(e,t)},[eA.Date]:{getGroupingMetadata:(t,r)=>(function(e,t){if(e.dataType!==eA.Date)return;let r=tU(t[e.id]);if(r)return[{value:tY(r.value),sourceObject:{dataType:eA.Date,kind:"group",value:{date:r,columnId:e.id}}}]})(t,e(r))},[eA.Iteration]:{getGroupingMetadata:(t,r)=>(function(e,t){if(e.dataType!==eA.Iteration)return;let r=tz(t[e.id]);if(!r)return;let a=nR(e).find(e=>e.id===r.id);if(a)return[{value:a.id,sourceObject:{dataType:eA.Iteration,kind:"group",value:{iteration:a,columnId:e.id}}}]})(t,e(r)),getAllGroupMetadata:e=>e.dataType!==eA.Iteration?[]:nR(e).sort(nM).map(t=>({value:t.id,sourceObject:{dataType:eA.Iteration,kind:"group",value:{iteration:t,columnId:e.id}}}))},[eA.Labels]:{getGroupingMetadata:(t,r)=>(function(e){let t=e.Labels;if(t)return t.map(e=>({value:e.name,sourceObject:{dataType:eA.Labels,kind:"group",value:e}}))})(e(r)),getAllGroupMetadata:(e,t)=>(function(e,t){if(e.dataType!==eA.Labels||!t)return;let r=new Map;for(let e of t)for(let t of e.getLabels())r.set(t.name,t);return Array.from(r.values()).sort(m5).map(e=>({value:e.name,sourceObject:{dataType:eA.Labels,kind:"group",value:e}}))})(e,t)},[eA.LinkedPullRequests]:void 0,[eA.Milestone]:{getGroupingMetadata:(t,r)=>(function(e){let t=e.Milestone;if(t)return[{value:t.title,sourceObject:{dataType:eA.Milestone,kind:"group",value:t}}]})(e(r))},[eA.Number]:{getGroupingMetadata:(t,r)=>(function(e,t){if(e.dataType!==eA.Number)return;let r=t$(t[e.id]);if(r)return[{value:`${r.value}`,sourceObject:{dataType:eA.Number,kind:"group",value:{number:r,columnId:e.id}}}]})(t,e(r))},[eA.ParentIssue]:{getGroupingMetadata:(t,r)=>(function(e){let t=e[eM.ParentIssue];if(t)return[{value:t.nwoReference,sourceObject:{dataType:eA.ParentIssue,kind:"group",value:t}}]})(e(r))},[eA.Repository]:{getGroupingMetadata:(t,r)=>(function(e){let t=e.Repository;if(t)return[{value:t.nameWithOwner,sourceObject:{dataType:eA.Repository,kind:"group",value:t}}]})(e(r))},[eA.Reviewers]:void 0,[eA.SingleSelect]:{getGroupingMetadata:(t,r)=>(function(e,t){if(e.dataType!==eA.SingleSelect)return;let r=tz(t[e.id]);if(!r)return;let a=(e.settings.options||[]).find(e=>e.id===r.id);if(a)return[{value:r.id,sourceObject:{dataType:eA.SingleSelect,kind:"group",value:{option:a,columnId:e.id}}}]})(t,e(r)),getAllGroupMetadata:e=>e.dataType!==eA.SingleSelect?[]:e.settings.options.map(t=>({value:t.id,sourceObject:{dataType:eA.SingleSelect,kind:"group",value:{option:t,columnId:e.id}}}))},[eA.SubIssuesProgress]:void 0,[eA.Text]:{getGroupingMetadata:(t,r)=>(function(e,t){if(e.dataType!==eA.Text)return;let r=tB(t[e.id]);if(r)return[{value:r.raw,sourceObject:{dataType:eA.Text,kind:"group",value:{text:r,columnId:e.id}}}]})(t,e(r))},[eA.Title]:void 0,[eA.TrackedBy]:{getGroupingMetadata:(t,r)=>(function(e){let t=e["Tracked by"];if(t&&0!==t.length)return t.map(e=>({value:e.url,sourceObject:{dataType:eA.TrackedBy,kind:"group",value:e}}))})(e(r))},[eA.Tracks]:void 0,[eA.IssueType]:{getGroupingMetadata:(t,r)=>(function(e){let t=e[eM.IssueType];if(t)return[{value:t.name,sourceObject:{dataType:eA.IssueType,kind:"group",value:t}}]})(e(r))}}}M0.displayName="OmnibarDrawer";let M3=(0,H.createContext)({slicerItems:null}),M4=()=>(0,H.useContext)(M3),M8=M5(e=>e.columns,{useDistinctAssigneesGrouping:!0}),M6=(0,H.memo)(function({children:e}){let t=or(),{items:r}=dP(),{filteredItems:a}=M1({applyTransientFilter:"exclude"}),{memex_table_without_limits:n}=n7(),i=n?function(){let e=d_({withSliceByValue:!1});return(0,s1.a)({queryKey:st(e),enabled:!1,queryFn:()=>({slices:[]})})}():void 0,l=n?(0,H.useMemo)(()=>{if(!t.sliceField||t.sliceField.dataType===eA.TrackedBy||!i?.data)return[];let e=t.sliceField;return i.data.slices.map(t=>{let{sliceValue:r,sliceMetadata:a,totalCount:n}=t,i=m8(e,r,a);if(i)return{sourceObject:i,value:r,totalCount:n}}).filter(e=>!!e)},[t.sliceField,i?.data]):(0,H.useMemo)(()=>{if(!t.sliceField||t.sliceField.dataType===eA.TrackedBy)return[];let e=M8[t.sliceField.dataType];return(0,J.Z)(e,`No grouping configuration for column ${t.sliceField}`),M2(a,t.sliceField,e.getGroupingMetadata,e.getAllGroupMetadata,void 0,r).map(e=>({value:e.value,sourceObject:e.sourceObject,totalCount:{isApproximate:!1,value:e.rows.length}}))},[r,a,t.sliceField]),s=(0,H.useMemo)(()=>({slicerItems:l}),[l]);return(0,O.jsx)(M3.Provider,{value:s,children:e})});try{M6.displayName||(M6.displayName="SlicerItemsProvider")}catch{}let M7=e=>M9.has(e),M9=new Set([eA.TrackedBy,eA.Iteration,eA.SingleSelect,eA.Assignees,eA.Labels,eA.Milestone,eA.Repository,eA.Text,eA.Number,eA.Date,eA.IssueType,eA.ParentIssue]),Le=(0,H.createContext)(aM);function Lt(){return(0,H.useContext)(Le)}let Lr=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a,ui:n}){let i=Lt(),{clientHeight:l}=xU({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}});return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,ef.f)("slice-by-menu"),role:"dialog","aria-label":"Select a field to slice by",onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,O.jsx)(La,{id:e,setOpen:r,ui:n??i},String(t))})})}),La=(0,H.memo)(function({setOpen:e,id:t,ui:r}){let{currentView:a}=oi(),{viewType:n}=hL(),{allColumns:i}=df(),{sliceField:l,setSliceField:s,clearSliceField:o}=or(),{postStats:d}=os(),{memex_table_without_limits:u}=n9(),c=(0,H.useMemo)(()=>i.slice().filter(e=>M7(e.dataType)).sort(rh).map(t=>{let i=jA(t.dataType);return(0,O.jsxs)(mx.S.Item,{onSelect:i=>{if(!a)return;let u=l===t;u?o(a.number):s(a.number,t),e(!1),i.stopPropagation(),d({name:u?nn:na,memexProjectColumnId:t.id,ui:r,context:JSON.stringify({layout:n})})},selected:l===t,disabled:u&&!Tr(t.dataType),...(0,ef.f)(`slice-${t.name}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(i,{})}),t.name]},t.id)}),[i,l,u,a,e,d,r,n,o,s]),m=(0,H.useCallback)(()=>{let t=!!l;a&&o(a.number),e(!1),t&&d({name:nn,ui:r,context:JSON.stringify({layout:n})})},[o,a,d,e,l,r,n]);return(0,O.jsx)(mx.S,{id:t,selectionVariant:"single",children:(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Slice by"}),c,(0,O.jsxs)(mx.S.Item,{selected:!l,onSelect:m,...(0,ef.f)("slice-none"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.XIcon,{})}),"No slicing"]},"slice-none")]},"slice")})}),Ln=(0,O.jsx)(O.Fragment,{children:(0,O.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 1.5H6.5V5H10C10.4142 5 10.75 5.33579 10.75 5.75C10.75 6.16421 10.4142 6.5 10 6.5H6.5V7.75C6.5 8.16421 6.16421 8.5 5.75 8.5C5.33579 8.5 5 8.16421 5 7.75V6.5H1.5V14.5H5V12.75C5 12.3358 5.33579 12 5.75 12C6.16421 12 6.5 12.3358 6.5 12.75V14.5H14.5V1.5ZM5 1.5V5H1.5V1.5H5ZM0 14.5V5.75V1.5C0 0.671573 0.671573 0 1.5 0H5.75H14.5C15.3284 0 16 0.671573 16 1.5V14.5C16 15.3284 15.3284 16 14.5 16H5.75H1.5C0.671573 16 0 15.3284 0 14.5ZM9.62012 9.58516C10.8677 9.59206 11.8826 8.58286 11.8826 7.33544V6.32279C11.8826 5.90857 12.2184 5.57279 12.6326 5.57279C13.0468 5.57279 13.3826 5.90857 13.3826 6.32279V7.33544C13.3826 9.4147 11.6909 11.0966 9.61182 11.0851L9.3826 11.0839L9.3826 12.9995C9.3826 13.2178 9.12245 13.3312 8.96248 13.1827L6.07989 10.506C5.97337 10.4071 5.97337 10.2385 6.07989 10.1396L8.96248 7.46291C9.12245 7.31438 9.3826 7.42782 9.3826 7.64611V9.58384L9.62012 9.58516Z"})});function Li(){return(0,O.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",className:"octicon",style:{display:"inline-block",userSelect:"none",overflow:"visible"},children:Ln})}try{Lr.displayName||(Lr.displayName="SliceByMenu")}catch{}try{La.displayName||(La.displayName="Options")}catch{}try{(T=Icon).displayName||(T.displayName="Icon")}catch{}try{Li.displayName||(Li.displayName="SlicerIcon")}catch{}var Ll=r(9996),Ls=r.n(Ll);function Lo(e){let{variant:t,color:r,hideNumerals:a}=function(){let{allColumnsRef:e}=cE();return e.current.find(Ld)}()?.settings.progressConfiguration||{};return(0,O.jsx)(EN,{variant:t,color:r,hideNumerals:a,...e})}function Ld(e){return e.dataType===eA.SubIssuesProgress}try{Lo.displayName||(Lo.displayName="SubIssuesProgressBar")}catch{}let Lu=r(48652),Lc=()=>{let e=(0,uN.useRelayEnvironment)(),{issue_types:t}=n9(),[r,a]=(0,H.useState)(void 0),{projectOwner:n,projectData:i}=i5(),l=(0,H.useCallback)(async(r,n)=>{try{if(e&&t&&r&&n){let t=await (0,uN.fetchQuery)(e,Lu,{login:r,number:n},{fetchPolicy:"store-or-network"}).toPromise();a(t?.organization?.projectV2?.suggestedIssueTypeNames||[])}}catch{return[]}},[e,t]);return(0,H.useEffect)(()=>{l(n?.login,i?.number)},[l,n?.login,i?.number]),{suggestedIssueTypeNames:r}},Lm=e=>e.replace(/[\\/:"*?<>|]/g,""),Lp=()=>{let{itemsToCsv:e}=ko(),{currentView:t}=oi(),{matchesSearchQuery:r}=dv(),{items:a}=dP(),n=r8().title;return(0,H.useCallback)(()=>{if(!t)return;let i=e(a.filter(e=>r(e)),{withHeaders:!0});if(!i)return;let l=`${Lm(n)} - ${Lm(t.name)}.tsv`,s=new Blob([i],{type:al.CSV}),o=URL.createObjectURL(s),d=document.createElement("a");d.style.display="none",d.href=o,d.download=l,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(o)},[t,a,e,r,n])},Lf=()=>{let e=dl(()=>{let e=document.querySelector("command-palette");return e&&e.closest("details")}),t=(0,H.useCallback)(t=>{if(!e.current)return()=>void 0;let r=new MutationObserver(t);return r.observe(e.current,{attributes:!0}),()=>{r.disconnect()}},[e]),r=(0,H.useCallback)(()=>{let t=e.current;return!!(t&&t.hasAttribute("open"))},[e]);return{isCommandPaletteVisible:(0,H.useSyncExternalStore)(t,r)}},Lh=["memex_placeholder_notice","memex_issue_types_rename_prompt"],Lg=Lh.reduce((e,t)=>(e[t]=!1,e),{}),Ly=(0,H.createContext)(null),Lx=()=>{let e={...Lg},t=eP("memex-user-notices");if(t)for(let r of t)e[r]=!0;return e},Lb=()=>Lh.reduce((e,t)=>(e[t]="unset",e),{}),Lv=(0,H.memo)(function({children:e}){let[t,r]=(0,H.useState)(Lx()),[a,n]=(0,H.useState)(Lb()),{postStats:i}=os(),l=(0,H.useCallback)((e,t)=>{n(r=>({...r,[e]:t}))},[]),s=(0,H.useCallback)(async e=>{r(t=>({...t,[e]:!1})),l(e,"unset")},[l]),o=(0,H.useCallback)(async(e,t=!1)=>{s(e);try{await A$({notice:e}),i({name:"dismissed_user_notice",context:JSON.stringify({notice:e,tookAction:t})})}catch(e){}},[s,i]),d=(0,H.useMemo)(()=>({userNotices:t,hideUserNotice:s,dismissUserNotice:o,userNoticeVariants:a,setUserNoticeVariant:l}),[t,s,o,a,l]);return(0,O.jsx)(Ly.Provider,{value:d,children:e})}),Lw=()=>{let e=(0,H.useContext)(Ly);if(!e)throw Error("useUserNotices must be used within a UserNoticesContext.Provider");return e};try{Ly.displayName||(Ly.displayName="UserNoticesContext")}catch{}try{Lv.displayName||(Lv.displayName="UserNoticesStateProvider")}catch{}function Lj(e,t){let r="none";return t===eA.Iteration?r="iteration_field":t===eA.Date&&(r=`${e}_date_field${1===e?"":"s"}`),{dateFields:r}}let LC=(0,H.createContext)(null),LI=()=>{let e=(0,H.useContext)(LC);if(null===e)throw Error("useRoadmapDateFieldsMenu must be used within a RoadmapDateFieldsMenuContext");return e},LS={VisibleFieldGroup:"VisibleFieldGroup",HiddenFieldGroup:"HiddenFieldGroup"},Lk=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=Ry({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}});return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ef.f)("column-visibility-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,O.jsx)(LT,{id:e,setOpen:r},String(t))})})}),LT=(0,H.memo)(function({id:e,setOpen:t}){let{currentView:r}=oi(),{setShowAddFieldModal:a,showAddFieldModal:n}=Mo(),{allColumns:i}=df(),{isFieldVisible:l,toggleField:s,visibleFields:o}=Sb(),{hasWritePermissions:d}=i4(),u=Lt(),c=(0,H.useCallback)(e=>{a(!0),t(!1),e.stopPropagation()},[t,a]),m=(0,H.useCallback)((e,t,a)=>{let n=l(e),i=e.dataType===eA.Title,o=jA(e.dataType);return(0,O.jsxs)(L_,{groupId:t,dragProps:{column:e,index:a},disabled:i,onSelect:i?void 0:t=>{rf(t),r&&(s(r.number,e,void 0,u),t.stopPropagation())},selected:n,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(o,{})}),e.name]},e.id)},[r,l,s,u]),[p,f]=(0,H.useMemo)(()=>{let e=new Set(o.map(e=>e.databaseId)),t=i.filter(t=>!e.has(t.databaseId)),r=[],a=[];for(let[e,t]of o.entries())r.push(m(t,LS.VisibleFieldGroup,e));for(let[e,r]of t.entries())a.push(m(r,LS.HiddenFieldGroup,e));return[r,a]},[i,m,o]),h=(0,H.useMemo)(()=>d&&!n,[d,n]);return(0,O.jsx)(A8,{children:(0,O.jsxs)(mx.S,{id:e,sx:{width:"max-content"},...(0,ef.f)("visible-columns-menu"),children:[(0,O.jsx)(mx.S.Group,{children:(0,O.jsxs)(mx.S.Item,{disabled:!h,onSelect:e=>{rf(e),c(e)},...(0,ef.f)("new-field-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PlusIcon,{})}),"New field"]},"new-field")}),(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"multiple",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Visible fields"}),p]}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"multiple",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Hidden fields"}),f]})]})})}),LN={position:"relative",mb:1,userSelect:"none","&:not(.hide-sash):not(.is-dragging)":{"&::after, &::before":{content:"''",display:"none",position:"absolute",width:"100%",bg:"accent.emphasis",height:"4px",border:0,borderRadius:"6px",zIndex:12},"&.show-sash-before":{"&::before":{display:"block",top:"-4px",left:0}},"&.show-sash-after":{"&::after":{display:"block",bottom:"-4px",right:0}}}},L_=(0,H.memo)(function({dragProps:e,groupId:t,...r}){let{currentView:a}=oi(),{groupedByColumn:n}=dI(),{moveField:i,hideField:l,isFieldVisible:s}=Sb(),{findColumnByDatabaseId:o}=cA(),d=(0,H.useRef)(null),[u,c]=(0,H.useState)(!1),[m]=function(e,t=150){let[r,a]=(0,H.useState)(()=>e?"none":"auto"),n=(0,e5.Z)(t);return(0,H.useEffect)(function(){if(!e)return;let t=!0,r=setTimeout(()=>{t&&a("none")},n.current);return()=>{t=!1,clearTimeout(r)}},[e,n]),(0,H.useEffect)(function(){e||a("auto")},[e]),[r,a]}(u),p=Lt(),f=A6({dragID:String(e?.column.databaseId),dragType:"add-column-option",dragRef:d,dragIndex:e?.index??-1,dragOrigin:LS.VisibleFieldGroup,metadata:{},disable:!e,onDragStart(){c(!0)},onDragEnd(){c(!1)}}),h=A7({dropRef:d,dropID:String(e?.column.databaseId),dropType:"add-column-option",onDrop({state:{dragID:r}}){if(!r||!a)return;let s=o(Number(r));if(s&&r!==String(e?.column.databaseId)){if(t===LS.HiddenFieldGroup){if(n===s||s.dataType===eA.Title)return;l(a.number,s)}if(e&&t===LS.VisibleFieldGroup){i(a.number,s,e.index,p);return}}}}),g=(0,IL.W)({"hide-sash":!e||!s(e.column)||u});return(0,O.jsx)(mx.S.Item,{...(0,ef.f)(function(e,t){let r=oQ(t);return`${e?"visible":"hidden"}-column-item-${r}`}(s(e.column),e?.column.name)),...f.props,...f.handle.props,...h.props,...r,sx:{...LN,...r.sx,boxShadow:u?e=>`0 0 0 1px ${e.colors.accent.emphasis}`:void 0,":hover":u?{background:"initial"}:void 0,pointerEvents:m},className:g})});try{Lk.displayName||(Lk.displayName="AddColumnMenu")}catch{}try{LT.displayName||(LT.displayName="Options")}catch{}try{(N=Icon).displayName||(N.displayName="Icon")}catch{}try{L_.displayName||(L_.displayName="DragAndDroppableActionListItem")}catch{}function LR({direction:e,index:t}){return(0,O.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",verticalAlign:"text-bottom"},children:["desc"===e?(0,O.jsx)(eF.SortDescIcon,{}):(0,O.jsx)(eF.SortAscIcon,{}),void 0!==t&&(0,O.jsx)(eB.Z,{sx:{px:"2px",fontWeight:"bold",fontSize:0},role:"presentation",children:t+1})]})}try{LR.displayName||(LR.displayName="ColumnSortIcon")}catch{}let LP=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=xU({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}});return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ef.f)("field-sum-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,O.jsx)(LD,{id:e},String(t))})})}),LD=(0,H.memo)(function({id:e}){let{currentView:t}=oi(),{allColumns:r}=df(),a=(0,H.useMemo)(()=>r.filter(e=>e.dataType===eA.Number).sort(rh),[r]),{hideItemsCount:n,sum:i,toggleItemsCount:l,addFieldAggregation:s,removeFieldAggregation:o}=CV(),{postStats:d}=os(),u=t?.localViewStateDeserialized?.viewType,c=Lt(),m=(0,H.useMemo)(()=>{let e=e=>{t&&(l(t.number),d({name:n?"aggregation_settings_show_items_count":"aggregation_settings_hide_items_count",ui:c,context:u}),e.stopPropagation())};return(0,O.jsx)(mx.S.Item,{selected:!n,onSelect:t=>{rf(t),e(t)},...(0,ef.f)("sum-of-items"),children:"Count"},"items-count")},[n,t,l,d,c,u]),p=(0,H.useMemo)(()=>a.map(e=>{let r=i.some(t=>t.id===e.id),a=a=>{t&&(r?o(t.number,"sum",e):s(t.number,"sum",e),d({name:r?"aggregation_settings_sum_removed":"aggregation_settings_sum_applied",ui:c,memexProjectColumnId:e.id,context:u}),a.stopPropagation())};return(0,O.jsx)(mx.S.Item,{selected:r,onSelect:e=>{rf(e),a(e)},...(0,ef.f)(`sum-of-${e.name}`),children:e.name},e.id)}),[s,i,t,a,o,d,c,u]);return(0,O.jsx)(mx.S,{id:e,selectionVariant:"multiple",children:(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Field sum"}),m,p]})})});try{LP.displayName||(LP.displayName="FieldSumMenu")}catch{}try{LD.displayName||(LD.displayName="MenuOptions")}catch{}function LE(e){return e.name.toLocaleLowerCase().trim()}function LA(e){switch(e.dataType){case eA.Date:case eA.Iteration:case eA.Milestone:case eA.IssueType:case eA.Number:case eA.SingleSelect:case eA.Repository:case eA.Text:case eA.Assignees:case eA.TrackedBy:case eA.ParentIssue:return!0;default:return!1}}let LM=(0,H.memo)(function({open:e,setOpen:t,anchorRef:r,children:a}){let{clientHeight:n}=xU({onResize:()=>{e&&((0,uU.flushSync)(()=>{t(!1)}),t(!0))}});return(0,O.jsx)(fj.P,{open:e,anchorRef:r,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ef.f)("group-by-menu"),onEscape:()=>t(!1),onClickOutside:()=>t(!1),children:a})})}),LL=(0,H.memo)(function({id:e,groupedByColumn:t,setGroupedBy:r,isValidGroupByColumn:a,handleClearGroupBy:n,title:i,setOpen:l}){let{currentView:s}=oi(),{viewType:o}=hL(),{allColumns:d}=df(),{postStats:u}=os(),c=Lt(),{memex_table_without_limits:m}=n9(),p=(0,H.useMemo)(()=>d.filter(a).sort(rh).map(e=>{let a=jA(e.dataType);return(0,O.jsxs)(mx.S.Item,{selected:t===e,onSelect:a=>{if(!s)return;let i=t===e;if(i){if(!n)return;n()}else r(s.number,e);u({groupByEnabled:!i,memexProjectColumnId:e.id,key:aL,ui:c,context:o}),l(!1),a.stopPropagation()},disabled:m&&!Te(e.dataType),...(0,ef.f)(`group-by-${e.name}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(a,{})}),e.name]},e.id)}),[d,a,t,m,s,u,c,o,l,n,r]);return(0,O.jsx)(mx.S,{id:e,selectionVariant:"single",children:(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:i}),p,n&&(0,O.jsxs)(mx.S.Item,{selected:!t,onSelect:e=>{rf(e),n()},...(0,ef.f)("group-by-none"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.XIcon,{})}),"No grouping"]},"group-by-none")]})})});try{LM.displayName||(LM.displayName="GroupByMenu")}catch{}try{LL.displayName||(LL.displayName="GroupByMenuOptions")}catch{}try{(_=Icon).displayName||(_.displayName="Icon")}catch{}let LF=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,O.jsx)(LM,{open:t,setOpen:r,anchorRef:a,children:(0,O.jsx)(LZ,{id:e,setOpen:r},String(t))})}),LZ=(0,H.memo)(function({id:e,setOpen:t}){let{groupedByColumn:r,setGroupedBy:a,clearGroupedBy:n}=dI(),{currentView:i}=oi(),l=(0,H.useCallback)(()=>{i&&n(i.number),t(!1)},[n,i,t]);return(0,O.jsx)(LL,{id:e,groupedByColumn:r,setGroupedBy:a,isValidGroupByColumn:LA,handleClearGroupBy:l,title:"Group by",setOpen:t})});try{LF.displayName||(LF.displayName="HorizontalGroupByMenu")}catch{}try{LZ.displayName||(LZ.displayName="HorizontalGroupByMenuOptions")}catch{}let LO=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let[n,i]=(0,H.useState)(!1),{clientHeight:l}=xU({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}}),{dateFields:s,setDateFields:o}=Ie(),{currentView:d}=oi(),u=(0,H.useCallback)(e=>{if(!d||!C1(e))return;let[t=fH,a=fH]=s;if(t===fH||a===fH){let r=[];r=t===fH?nH(e)&&a===fH?[e,e]:[e,a]:[t,e],o(d.number,r)}r(!0)},[d,s,o,r]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:l,overflow:"auto"},role:"dialog","aria-label":"Select date fields",...(0,ef.f)("roadmap-date-fields-menu"),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,O.jsx)(L$,{id:e,setOpen:r,setAddFieldOpen:i},String(t))})}),(0,O.jsx)(Ag,{isOpen:!t&&n,setOpen:i,anchorRef:a,onSave:u,limitedTypes:[eA.Date,eA.Iteration]})]})}),LV=({dateFields:e,currentValue:t,onSelect:r,variant:a})=>(0,O.jsx)(O.Fragment,{children:e.map(e=>{let n=jA(e.dataType);return(0,O.jsxs)(mx.S.Item,{selected:e.id===t,onSelect:t=>{t.preventDefault(),r(e,a)},...(0,ef.f)(`date-field-${a}-${e.name}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(n,{})}),`${e.name} ${nH(e)?rO.iterationSuffix(a):""}`]},e.id)})});function LB(e,t){return C1(e)&&C1(t)&&e.id===t.id&&nK(e)}let L$=(0,H.memo)(function({id:e,setOpen:t,setAddFieldOpen:r}){let{currentView:a}=oi(),{allColumns:n}=df(),i=(0,H.useMemo)(()=>n.filter(e=>C1(e)).sort(rh),[n]),{hasWritePermissions:l}=i4(),{postStats:s}=os(),o=Lt(),d=(0,H.useCallback)(e=>{r(!0),t(!1),e.stopPropagation()},[r,t]),{dateFields:u,setDateFields:c}=Ie(),[m=fH,p=fH]=u,f=(0,H.useCallback)((e,t)=>{if(!a)return;let r=[];if("start"===t){let t=C1(e)&&nH(e)?e:fH,a=LB(e,p);r.push(e,a?t:p)}else{let t=LB(e,m);r.push(t?fH:m,e)}s({name:"roadmap_date_field_selected",ui:o,context:"start"===t?"start":"target",...C1(e)?{memexProjectColumnId:e.databaseId}:{}}),c(a.number,r)},[a,s,o,c,p,m]);return(0,O.jsxs)(mx.S,{id:e,children:[(0,O.jsx)(mx.S.Group,{children:(0,O.jsxs)(mx.S.Item,{disabled:!l,onSelect:e=>{rf(e),d(e)},...(0,ef.f)("roadmap-new-field-button"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PlusIcon,{})}),"New field"]},"new-field")}),(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"single",children:[(0,O.jsx)(mx.S.GroupHeading,{children:rO.startDate}),(0,O.jsx)(LV,{dateFields:i,currentValue:m===fH?m:m?.id,onSelect:f,variant:"start"}),(0,O.jsx)(mx.S.Item,{selected:m===fH,onSelect:e=>{e.preventDefault(),f(fH,"start")},...(0,ef.f)("date-field-no-start"),children:rO.noStartDate},"none")]}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"single",children:[(0,O.jsx)(mx.S.GroupHeading,{children:rO.endDate}),(0,O.jsx)(LV,{dateFields:i,currentValue:p===fH?p:p?.id,onSelect:f,variant:"end"}),(0,O.jsx)(mx.S.Item,{disabled:!i,selected:p===fH,onSelect:e=>{e.preventDefault(),f(fH,"end")},...(0,ef.f)("date-field-no-end"),children:rO.noEndDate},"none")]})]})});try{LO.displayName||(LO.displayName="RoadmapDateFieldsMenu")}catch{}try{LV.displayName||(LV.displayName="DateFields")}catch{}try{(R=Icon).displayName||(R.displayName="Icon")}catch{}try{L$.displayName||(L$.displayName="MenuOptions")}catch{}let Lz=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,O.jsx)(LM,{open:t,setOpen:r,anchorRef:a,children:(0,O.jsx)(LW,{id:e,setOpen:r},String(t))})}),LW=(0,H.memo)(function({setOpen:e,id:t}){let{groupedByColumn:r,setGroupedBy:a,clearGroupedBy:n}=dI(),{currentView:i}=oi(),l=(0,H.useCallback)(()=>{i&&n(i.number),e(!1)},[n,i,e]);return(0,O.jsx)(LL,{id:t,groupedByColumn:r,setGroupedBy:a,isValidGroupByColumn:LA,handleClearGroupBy:l,title:"Group by",setOpen:e})});try{Lz.displayName||(Lz.displayName="RoadmapGroupByMenu")}catch{}try{LW.displayName||(LW.displayName="RoadmapGroupByMenuOptions")}catch{}let LG=new Set([eA.Iteration,eA.Milestone,eA.Date]);function LU(e){return LG.has(e.dataType)}let LH=()=>{let{allColumns:e}=df();return(0,H.useMemo)(()=>e.filter(LU).sort(rh),[e])},Lq=()=>{let{isRoadmapMarkerFieldsDirty:e}=Ie(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(eF.LocationIcon,{})})};function LK({id:e}){let{currentView:t}=oi(),r=LH(),{markerFields:a,toggleMarkerField:n}=Ie(),i=(0,H.useMemo)(()=>new Set(a),[a]),{postStats:l}=os(),s=Lt(),o=(0,H.useCallback)(e=>{if(!t)return;let r=i.has(e);n(t.number,e),l({name:r?"roadmap_marker_hide":"roadmap_marker_show",ui:s,memexProjectColumnId:e.id})},[t,i,n,l,s]);return(0,O.jsx)(mx.S,{...(0,ef.f)("roadmap-markers-menu"),id:e,selectionVariant:"multiple",children:(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Markers"}),r.map(e=>{let t=jA(e.dataType);return(0,O.jsxs)(mx.S.Item,{selected:i.has(e),onSelect:t=>{rf(t),o(e)},children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(t,{})}),e.name]},e.id)})]})})}let LQ=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let{clientHeight:n}=Ry({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}});return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:n,overflow:"auto"},...(0,ef.f)("column-marker-menu"),role:"dialog",onEscape:()=>r(!1),onClickOutside:()=>r(!1),"aria-label":"Configure vertical markers to display on roadmap",children:(0,O.jsx)(LK,{id:e})})})});try{LG.displayName||(LG.displayName="MarkerFields")}catch{}try{Lq.displayName||(Lq.displayName="MarkerDirtyIcon")}catch{}try{LK.displayName||(LK.displayName="RoadmapMarkerMenu")}catch{}try{(P=Icon).displayName||(P.displayName="Icon")}catch{}try{LQ.displayName||(LQ.displayName="MarkerColumnMenu")}catch{}let LX=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let n=Is(),{clientHeight:i}=xU({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}});return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{maxHeight:i,overflow:"auto"},...(0,ef.f)("roadmap-zoom-level-menu"),role:"dialog","aria-label":rO.zoomMenuDialogAriaLabel(n),onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:(0,O.jsx)(L0,{id:e,setOpen:r},String(t))})})}),LY=[{type:fq.Month,label:rO.zoomLevelOptions.month},{type:fq.Quarter,label:rO.zoomLevelOptions.quarter},{type:fq.Year,label:rO.zoomLevelOptions.year}],LJ=(0,H.memo)(function({currentValue:e,onSelect:t}){return(0,O.jsx)(O.Fragment,{children:LY.map(r=>(0,O.jsx)(mx.S.Item,{selected:r.type===e,onSelect:e=>{e.preventDefault(),t(r.type)},...(0,ef.f)(`zoom-level-${r.type}`),children:r.label},r.type))})}),L0=(0,H.memo)(function({id:e,setOpen:t}){let{currentView:r}=oi(),a=Is(),n=Id(),{postStats:i}=os(),l=Lt(),s=(0,H.useCallback)(e=>{r&&(n(r.number,e),i({name:"roadmap_zoom_level_set",ui:l,context:e}),t(!1))},[r,n,i,l,t]);return(0,O.jsx)(mx.S,{id:e,children:(0,O.jsxs)(mx.S.Group,{selectionVariant:"single",...(0,ef.f)("roadmap-zoom-list"),children:[(0,O.jsx)(mx.S.GroupHeading,{children:rO.zoomLevel}),(0,O.jsx)(LJ,{currentValue:a,onSelect:s})]})})});try{LX.displayName||(LX.displayName="RoadmapZoomLevelMenu")}catch{}try{LJ.displayName||(LJ.displayName="ZoomLevels")}catch{}try{L0.displayName||(L0.displayName="MenuOptions")}catch{}let L1=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){let n=(0,H.useId)(),i=e??n,{clientHeight:l}=xU({onResize:()=>{t&&((0,uU.flushSync)(()=>{r(!1)}),r(!0))}}),s=`${i}_label`,o=`${i}_description`;return(0,O.jsx)(fj.P,{open:t,anchorRef:a,onOpenChange:fV.Z,children:(0,O.jsxs)(fj.P.Overlay,{sx:{maxHeight:l,overflow:"auto"},...(0,ef.f)("sort-by-menu"),role:"dialog","aria-label":"Select a field to sort by",onEscape:()=>r(!1),onClickOutside:()=>r(!1),children:[(0,O.jsx)(eO.Z,{id:s,sx:{fontWeight:"bold",m:3,mb:2,fontSize:0,color:"fg.muted"},children:"Sort by"}),(0,O.jsx)(eO.Z,{id:o,sx:{mx:3,my:1,fontSize:0,color:"fg.muted"},children:"Select up to 2 fields"}),(0,O.jsx)(L2,{id:i,setOpen:r,labelledBy:s,describedBy:o},String(t))]})})}),L2=(0,H.memo)(function({setOpen:e,id:t,labelledBy:r,describedBy:a}){let{allColumns:n}=df(),{sorts:i,isSorted:l,clearSortedBy:s,setColumnSort:o}=dN(),{postStats:d}=os(),u=Lt(),{memex_table_without_limits:c}=n9(),m=(0,H.useMemo)(()=>n.slice().sort(rh).map(e=>{let t=i.findIndex(t=>t.column.id===e.id),r=i[t],a=a=>{let n=Tn(r?.direction??null),i=r?t:0;o(e,n),d({name:"desc"===n?aV:aO,ui:u,context:e.id,index:i}),a.stopPropagation()},n=jA(e.dataType),l=i.length>1;return(0,O.jsxs)(mx.S.Item,{onSelect:e=>{rf(e),a(e)},selected:void 0!==r,...(0,ef.f)(`sort-by-${e.name}`),disabled:c&&!k6(e.dataType),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(n,{})}),e.name,void 0!==r&&(0,O.jsxs)(mg.T,{children:["(",l?`${Ti(t)} `:"","sort:"," ","asc"===r.direction?"ascending":"descending",")"]}),void 0!==r&&(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(LR,{direction:r.direction,index:l?t:void 0})})]},e.id)}),[n,i,c,o,d,u]),p=(0,H.useCallback)(()=>{s(),e(!1)},[s,e]);return(0,O.jsxs)(mx.S,{id:t,selectionVariant:"single","aria-labelledby":r,"aria-describedby":a,children:[m,(0,O.jsxs)(mx.S.Item,{selected:!l,onSelect:p,...(0,ef.f)("sort-by-none"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.XIcon,{})}),"No sorting"]},"sort-by-none")]})});try{L1.displayName||(L1.displayName="SortByMenu")}catch{}try{L2.displayName||(L2.displayName="Options")}catch{}try{(D=Icon).displayName||(D.displayName="Icon")}catch{}let L5=(0,H.memo)(function({id:e,open:t,setOpen:r,anchorRef:a}){return(0,O.jsx)(LM,{open:t,setOpen:r,anchorRef:a,children:(0,O.jsx)(L3,{id:e,setOpen:r},String(t))})}),L3=(0,H.memo)(function({id:e,setOpen:t}){let{groupedByColumn:r,setGroupedBy:a}=dk();return(0,O.jsx)(LL,{id:e,groupedByColumn:r,setGroupedBy:a,setOpen:t,isValidGroupByColumn:n4,title:"Column by"})});try{L5.displayName||(L5.displayName="VerticalGroupByMenu")}catch{}try{L3.displayName||(L3.displayName="VerticalGroupByMenuOptions")}catch{}function L4(){let{isVisibleFieldsDirty:e}=Sb(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(eF.NoteIcon,{})})}function L8(){let{isGroupedByDirty:e}=dI(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(eF.RowsIcon,{})})}function L6(){let{isGroupedByDirty:e}=dk(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(eF.ColumnsIcon,{})})}function L7(){let{isSortedByDirty:e}=dN(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(eZ.Z,{icon:eF.ArrowBothIcon,sx:{transform:"rotate(90deg)"}})})}function L9(){let{isAggregationSettingsDirty:e}=CV(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,...(0,ef.f)("aggregation-settings-dirty"),children:(0,O.jsx)(eF.NumberIcon,{})})}let Fe=()=>{let{hasWritePermissions:e}=i4(),{isRoadmapDateFieldsDirty:t}=Ie();return(0,O.jsx)(Pn,{isDirty:t,hideDirtyState:!e,...(0,ef.f)("roadmap-date-fields-dirty"),children:(0,O.jsx)(eF.CalendarIcon,{})})},Ft=()=>{let{hasWritePermissions:e}=i4(),{isRoadmapZoomLevelDirty:t}=Ie();return(0,O.jsx)(Pn,{isDirty:t,hideDirtyState:!e,...(0,ef.f)("roadmap-zoom-level-dirty"),children:(0,O.jsx)(eF.ZoomInIcon,{})})};function Fr(){let{isSliceByDirty:e}=or(),{hasWritePermissions:t}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!t,children:(0,O.jsx)(Li,{})})}try{L4.displayName||(L4.displayName="VisibleFieldsLeadingVisual")}catch{}try{L8.displayName||(L8.displayName="GroupLeadingVisual")}catch{}try{L6.displayName||(L6.displayName="VerticalGroupLeadingVisual")}catch{}try{L7.displayName||(L7.displayName="SortLeadingVisual")}catch{}try{L9.displayName||(L9.displayName="AggregationLeadingVisual")}catch{}try{Fe.displayName||(Fe.displayName="RoadmapDateFieldsDirtyIcon")}catch{}try{Ft.displayName||(Ft.displayName="RoadmapZoomLevelIcon")}catch{}try{Fr.displayName||(Fr.displayName="SlicerLeadingVisual")}catch{}function Fa(e){return{hideIf:()=>!1,...e}}let Fn=Fa({icon:Fr,title:"Slice by",MenuComponent:Lr,testId:"slice-by-menu",useHasValue:()=>{let{sliceField:e}=or();return!!e},TextContent(){let{sliceField:e}=or();return(0,O.jsx)(FI,{active:!!e,title:"Slice by",children:e?e.name:"none"})}}),Fi=Fa({icon:L4,title:"Fields",MenuComponent:Lk,testId:"add-field-menu",useHasValue:()=>{let{visibleFields:e}=Sb();return e.length>0},TextContent(){let{visibleFields:e}=Sb();return(0,O.jsx)(FI,{active:e.length>0,title:"Fields",children:re(e.map(e=>e.name))})}}),Fl=Fa({icon:L8,title:"Group by",MenuComponent:LF,testId:"group-by-menu",useHasValue:()=>{let{groupedByColumn:e}=dI();return!!e},TextContent(){let{memex_table_without_limits:e,memex_mwl_swimlanes:t}=n9(),{viewType:r}=hL(),{groupedByColumn:a}=dI(),n=a&&(!(e&&r===fQ.Board)||t);return(0,O.jsx)(FI,{active:!!a,title:"Group by",children:n?a.name:"none"})}}),Fs=Fa({icon:L7,title:"Sort by",MenuComponent:L1,testId:"sort-by-menu",useHasValue:()=>{let{isSorted:e}=dN();return e},TextContent(){let{sorts:e,isSorted:t}=dN();return(0,O.jsx)(FI,{active:t,title:"Sort by",children:t?e.map((t,r)=>(0,O.jsxs)(H.Fragment,{children:[(0,O.jsx)(LR,{direction:t.direction})," ",t.column.name,(0,O.jsx)(mg.T,{children:"asc"===t.direction?" (ascending)":" (descending)"}),r!==e.length-1&&", "]},t.column.id)):"manual"})}}),Fo=Fa({icon:L9,title:"Field sum",MenuComponent:LP,testId:"field-sum-menu",useHasValue:()=>{let{sum:e,hideItemsCount:t}=CV();return!!e[0]||!t},TextContent(){let{hideItemsCount:e,sum:t}=CV(),r=e?"":"Count";if(t.length){let e=t[0];null!=e&&(r+=`${r?", ":""}${e.name}`),t.length>1&&(r+=` and ${t.length-1} more`)}return(0,O.jsx)(FI,{active:!!r,title:"Field sum",children:r||"none"})}}),Fd=Fa({...Fo,hideIf:({currentView:e})=>!!e&&0===e.localViewState.groupBy.length}),Fu=Fa({icon:L6,title:"Column by",MenuComponent:L5,testId:"column-by-menu",useHasValue:()=>!0,TextContent(){let{groupedByColumn:e}=dk();return(0,O.jsx)(FI,{active:!!e,title:"Column by",children:e?e.name:"none"})}}),Fc=Fa({...Fl,MenuComponent:Lz,TextContent(){let{groupedByColumn:e}=dI();return(0,O.jsx)(FI,{active:!!e,title:"Group by",children:e?e.name:"none"})}}),Fm=Fa({icon:Lq,title:"Marker fields",MenuComponent:LQ,testId:"markers-menu",useHasValue:()=>{let{markerFields:e}=Ie();return e.length>0},TextContent(){let{markerFields:e}=Ie(),t=e.length>0;return(0,O.jsx)(FI,{active:t,title:"Markers",children:t?re(e.map(e=>e.name)):"none"})}}),Fp=Fa({icon:Fe,title:"Dates",MenuComponent:LO,testId:"date-fields-menu",ToolbarItemComponent:Fb,useHasValue:()=>{let{dateFields:e}=Ie();return new Set(e.filter(C1).map(e=>e.name)).size>0},TextContent(){let{dateFields:e}=Ie(),t=re(Array.from(new Set(e.filter(C1).map(e=>e.name))).filter(e=>!!e));return(0,O.jsx)(FI,{active:!!t,title:"Dates",children:t||"none"})}}),Ff=Fa({icon:Ft,title:"Zoom level",MenuComponent:LX,testId:"zoom-level",useHasValue:()=>!0,TextContent(){let e=Is();return(0,O.jsx)(FI,{active:!0,title:"Zoom level",children:rO.zoomLevelOptions[e]})}}),Fh={[fQ.Table]:[Fi,Fl,Fs,Fd,Fn],[fQ.Board]:[Fi,Fu,Fl,Fs,Fo,Fn],[fQ.Roadmap]:[Fc,Fm,Fs,Fp,Ff,Fd,Fn]},Fg={top:"32px",left:"-5px"},Fy={position:"absolute"},Fx={position:"relative"};function Fb({MenuComponent:e,title:t,icon:r,testId:a,useHasValue:n}){let i=(0,H.useRef)(null),[l,s]=(0,mH.g)({contentRef:i,"aria-label":t}),{dateFields:o,areDateFieldsDefault:d}=Ie(),u=n(),{isDateFieldsPopoverDisabled:c}=It(),m=new Set(o.filter(C1).map(e=>e.name)),{isDateConfigurationMenuOpen:p,setOpenDateConfigurationMenu:f}=LI(),{currentView:h}=oi(),{postStats:g}=os(),y=0===m.size,x=h?.serverViewState.layout!==fW.Roadmap&&h?.localViewState.layout===fW.Roadmap,b=!y&&d&&x,v=o.some(e=>C1(e)&&"iteration"===e.dataType)?"iteration":"date",w=!c&&(y||b),j=(0,H.useId)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mq.h,{ref:i,size:"small",icon:r,sx:Fx,variant:u?"default":"invisible","aria-label":t,onClick:()=>f(!p),"aria-haspopup":"menu","aria-controls":j,"aria-expanded":p,...l,...(0,ef.f)(`quick-action-toolbar-${a}`)}),(0,O.jsx)(e,{id:j,anchorRef:i,open:p,setOpen:f}),w?(0,O.jsx)(gM.Z,{style:Fy,open:w,caret:"top",relative:!1,sx:Fg,children:(0,O.jsxs)(gM.Z.Content,{sx:{mt:2},children:[(0,O.jsx)(eO.Z,{sx:{fontSize:2,fontWeight:"bold"},children:rO.gettingStarted.popoverTitle}),(0,O.jsx)(eO.Z,{sx:{marginTop:2,marginBottom:3},children:b?rO.gettingStarted.fieldsSelectedByDefault(v):rO.gettingStarted.projectNeedsField}),(0,O.jsx)(cd.r,{onClick:()=>{f(!0),g({name:aZ,ui:aF,context:JSON.stringify(Lj(m.size,v))})},children:rO.gettingStarted.popoverDismissButton})]})}):null,s]})}let Fv={display:"flex",justifyContent:"space-between",whiteSpace:"nowrap",width:"100%",maxWidth:"100%"},Fw={color:"fg.muted",fontStyle:"normal"},Fj={maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",fontStyle:"normal"},FC={...Fj,fontStyle:"italic"};function FI({title:e,active:t,children:r}){return(0,O.jsxs)(eB.Z,{sx:Fv,children:[(0,O.jsxs)(eB.Z,{sx:Fw,children:[e,": "]}),(0,O.jsx)(eB.Z,{sx:t?Fj:FC,children:r})]})}try{Fb.displayName||(Fb.displayName="DateConfigurationMenuNew")}catch{}try{FI.displayName||(FI.displayName="ListItemContent")}catch{}let FS=(0,H.memo)((0,H.forwardRef)(({title:e,testId:t,children:r,disabled:a,icon:n,onSelect:i},l)=>(0,O.jsxs)(mx.S.Item,{ref:l,disabled:a,...(0,ef.f)(`view-options-menu-item-${t}`),onSelect:t=>{i(e),t.preventDefault()},children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(n,{})}),r,(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(eF.ChevronRightIcon,{})})]}))),Fk=(0,H.memo)((0,H.forwardRef)(({onSelect:e,selectedOption:t},r)=>{let{viewType:a}=hL(),{currentView:n}=oi(),i=n9(),l=Fh[a];return l&&n?(0,O.jsxs)(mx.S.Group,{variant:"subtle",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Configuration"}),l.map(l=>{if(l.hideIf({currentView:n,enabledFeatures:i}))return null;let s=i.memex_table_without_limits&&!i.memex_mwl_swimlanes&&"Group by"===l.title&&a===fQ.Board;return(0,H.createElement)(FS,{...l,ref:l.title===t?r:void 0,disabled:s,key:l.title,onSelect:e},(0,O.jsx)(l.TextContent,{}))})]}):null})),FT=(0,H.memo)(function({currentMenu:e,setShowSubMenu:t,anchorRef:r}){let{viewType:a}=hL(),{currentView:n}=oi(),i=n9(),l=Fh[a];return l&&n?(0,O.jsx)(O.Fragment,{children:l.map(({MenuComponent:a,title:l,...s})=>s.hideIf({currentView:n,enabledFeatures:i})?null:(0,O.jsx)(a,{anchorRef:r,open:e===l,setOpen:e=>{t(e?l:null)}},l))}):null});try{FS.displayName||(FS.displayName="ListItem")}catch{}try{Fk.displayName||(Fk.displayName="ConfigurationItems")}catch{}try{FT.displayName||(FT.displayName="ConfigurationItemMenus")}catch{}var FN=r(72278);let F_=[{type:fQ.Table,Icon:eF.TableIcon,title:"Table"},{type:fQ.Board,Icon:eF.ProjectIcon,title:"Board"},{type:fQ.Roadmap,Icon:eF.ProjectRoadmapIcon,title:"Roadmap"}],FR={px:3,py:1},FP={display:"block",color:"fg.muted",fontSize:0,fontWeight:"bold",py:2},FD=(0,H.memo)(function({view:e,setOpen:t}){let{isViewTypeDirty:r,viewType:a,setViewType:n}=hL(),{hasWritePermissions:i}=i4(),{postStats:l}=os(),s=(0,H.useCallback)((e,t)=>(0,O.jsx)(Pn,{isDirty:r,hideDirtyState:!t.selected||!i,children:(0,O.jsx)(e,{})}),[i,r]),o=(0,H.useCallback)(r=>{let a=F_[r];a&&(n(e,a.type,aM),l({name:aG,ui:aM,context:a.type}),t(!1))},[n,e,l,t]),d=(0,H.useId)(),u=(0,H.useId)();return(0,O.jsxs)(cX.Z,{id:d,sx:FR,children:[(0,O.jsx)(cX.Z.Label,{id:u,sx:FP,children:"Layout"}),(0,O.jsx)(FN.s,{"aria-labelledby":u,fullWidth:!0,onChange:o,...(0,ef.f)("view-options-menu-layout"),children:F_.map(e=>(0,O.jsx)(FN.s.Button,{leadingIcon:()=>s(e.Icon,{selected:a===e.type}),selected:a===e.type,...(0,ef.f)(`view-type-${e.type}`),children:e.title},e.type))})]})});try{FD.displayName||(FD.displayName="LayoutToggle")}catch{}let FE={display:"flex",alignItems:"center",justifyContent:"center",px:0,py:0,height:18,width:18},FA=({isViewStateDirty:e})=>(0,O.jsx)(FM,{isViewStateDirty:e,children:(0,O.jsx)(eF.GearIcon,{})}),FM=({isViewStateDirty:e,children:t,onClick:r})=>{let{hasWritePermissions:a}=i4();return(0,O.jsx)(Pn,{isDirty:e,hideDirtyState:!a,onClick:r,...e?(0,ef.f)("view-options-dirty"):void 0,children:t})},FL=(0,H.forwardRef)(function(e,t){let{isViewStateDirty:r}=oi(),{userNotices:a}=Lw(),n=a.memex_issue_types_rename_prompt?{direction:"nw",anchorSide:"outside-top"}:{direction:"sw",anchorSide:"outside-bottom"},i=(0,H.useRef)(null);(0,H.useImperativeHandle)(t,()=>i.current);let[l,s]=(0,mH.g)({contentRef:i,"aria-label":"View options",open:!e.open&&void 0,includeAriaAttributes:!1,...n});return(0,O.jsxs)(FM,{isViewStateDirty:r,onClick:e.onClick,children:[(0,O.jsx)(mq.h,{...l,...e,ref:i,icon:eF.TriangleDownIcon,sx:FE,"aria-label":`View options for ${e.viewName}`,...(0,ef.f)("view-options-menu-toggle")}),s]})});try{FA.displayName||(FA.displayName="DirtyConfigIcon")}catch{}try{FM.displayName||(FM.displayName="DirtyViewIndicator")}catch{}try{FL.displayName||(FL.displayName="MenuAnchor")}catch{}let FF=()=>{let{roadmapTruncateTitles:e,roadmapShowDateFields:t}=k5();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(FZ,{option:e}),(0,O.jsx)(FZ,{option:t})]})};function FZ({option:e}){return(0,O.jsx)(mx.S.Item,{role:"menuitemcheckbox",selected:e.enabled,onSelect:e.toggleEnabled,children:e.label},e.name)}try{FF.displayName||(FF.displayName="RoadmapUserSettingsMenu")}catch{}try{FZ.displayName||(FZ.displayName="OptionsElement")}catch{}let FO=(0,H.memo)(function({view:e,handleRenameViewClick:t,handleDuplicateView:r,handleDestroyView:a,viewsLength:n}){return(0,O.jsxs)(O.Fragment,{children:[e.isDeleted?null:(0,O.jsxs)(mx.S.Item,{...(0,ef.f)("view-options-menu-item-rename-view"),onSelect:t,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PencilIcon,{})}),"Rename view"]}),(0,O.jsxs)(mx.S.Item,{...(0,ef.f)("view-options-menu-item-duplicate-view"),onSelect:r,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.VersionsIcon,{})}),rI.duplicateView({isDirty:e.isViewStateDirty})]}),(0,O.jsxs)(mx.S.Item,{...(0,ef.f)("view-options-menu-item-delete-view"),onSelect:a,disabled:n<=1,variant:"danger",children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),e.isDeleted?"Remove deleted view":"Delete view"]})]})});try{FO.displayName||(FO.displayName="ViewActionItems")}catch{}function FV({view:e,setOpen:t}){let{hasWritePermissions:r}=i4(),{saveCurrentViewState:a,resetViewState:n}=oi(),i=(0,H.useCallback)(async()=>{await a(e.number,{ui:aM}),t(!1)},[a,t,e.number]),l=(0,H.useCallback)(async()=>{n(e.number,{ui:aM}),t(!1)},[n,t,e.number]);return(0,O.jsxs)(O.Fragment,{children:[r&&!e.isDeleted?(0,O.jsx)(mx.S.Item,{onSelect:i,disabled:!e.isViewStateDirty,...(0,ef.f)("view-options-menu-save-changes-button"),sx:{flex:"auto",color:"accent.fg",borderRight:"1px solid",borderColor:"border.default",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:rI.saveChanges}):null,(0,O.jsx)(mx.S.Item,{onSelect:l,...(0,ef.f)("view-options-menu-reset-changes-button"),sx:{flex:"auto",color:"fg.muted",borderRadius:0,my:-2,mx:0,py:3,textAlign:"center",fontWeight:"normal","&:hover":{bg:"canvas.inset"}},children:rI.discardChanges})]})}try{FV.displayName||(FV.displayName="ViewChangeButtons")}catch{}let FB={overflow:"auto"},F$=(0,H.memo)(function({view:e,viewOptionMenuTriggerRef:t,showViewOptionsMenu:r}){let{memex_header_redesign:a}=n9(),{hideUserNotice:n}=Lw(),[i,l]=(0,H.useState)(!1),[s,o]=(0,H.useState)(null),{clientHeight:d}=xU({onResize:()=>{i&&((0,uU.flushSync)(()=>{l(!1)}),l(!0))}}),{query:u}=dv(),{views:c,currentView:m,duplicateCurrentViewState:p,destroyCurrentView:f}=oi(),{hasWritePermissions:h}=i4(),{isInsightsChartViewEnabled:g}=Cu(),{anchorRef:y}=Mc(),x=(0,H.useRef)(null);(0,H.useEffect)(()=>{i&&o(null)},[i]);let b=(0,H.useCallback)(async()=>{f(e.number,{ui:aM},()=>{l(!1),y.current?.focus()})},[f,e.number,y]),v=(0,H.useCallback)(async()=>{m&&(await p(m.number,void 0,{ui:aM}),l(!1))},[m,p]),w=(0,H.useCallback)(()=>{l(!1),o("rename-view")},[]);(0,H.useImperativeHandle)(t,()=>y.current);let{isCommandPaletteVisible:j}=Lf(),C=(0,H.useCallback)(()=>(0,O.jsx)(FA,{isViewStateDirty:e.isViewTypeDirty}),[e.isViewTypeDirty]),I=Lp(),S=ur();return(0,O.jsxs)(eO.Z,{sx:{position:"relative"},children:[a?null:(0,O.jsx)(FL,{ref:y,onClick:()=>{n("memex_issue_types_rename_prompt"),l(e=>!e)},viewName:e.name,open:i}),(0,O.jsxs)(fj.P,{anchorRef:y,open:i&&!j,onOpenChange:(0,H.useCallback)(e=>l(e),[]),children:[a?(0,O.jsx)(fj.P.Button,{...(0,ef.f)("view-options-menu-toggle"),size:"small",trailingAction:null,leadingVisual:C,children:"View options"}):(0,O.jsx)(O.Fragment,{}),(0,O.jsxs)(fj.P.Overlay,{...(0,ef.f)("view-options-menu-modal"),width:"medium",sx:FB,style:{maxHeight:d},children:[(0,O.jsx)(FD,{view:e,setOpen:l}),(0,O.jsxs)(mx.S,{sx:{pt:0},children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsx)(Fk,{selectedOption:"rename-view"===s?null:s,onSelect:e=>{o(e)},ref:x}),(0,O.jsx)(FT,{anchorRef:x,currentMenu:"rename-view"===s?null:s,setShowSubMenu:o}),e.localViewState.layout===fW.Roadmap?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"multiple",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"User settings"}),(0,O.jsx)(FF,{})]})]}):null,g?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsx)(mx.S.Group,{children:(0,O.jsxs)(mx.S.LinkItem,{as:lz,...(0,ef.f)("view-options-menu-item-show-insights"),to:{pathname:ek.generatePath(S),search:u?`${new URLSearchParams({filterQuery:u})}`:void 0},children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.GraphIcon,{})}),"Generate chart"]})})]}):null,h?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsx)(FO,{handleRenameViewClick:w,handleDuplicateView:v,handleDestroyView:b,viewsLength:c.length,view:e})]}):null,(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Item,{onClick:I,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.DownloadIcon,{})}),"Export view data"]}),!a&&e.isViewStateDirty?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsx)(mx.S.Group,{sx:{"& > ul":{display:"flex"}},children:(0,O.jsx)(FV,{setOpen:l,view:e})})]}):null]})]})]}),m?(0,O.jsx)(FW,{anchorRef:y,open:"rename-view"===s,setOpen:e=>o(()=>e?"rename-view":null),view:m,showViewOptionsMenu:r},e.id):null]})}),Fz=e=>{e.stopPropagation()},FW=(0,H.memo)(function({open:e,setOpen:t,anchorRef:r,view:a,showViewOptionsMenu:n}){let{renameView:i}=oi(),[l,s]=yh(a.name),{hasWritePermissions:o}=i4(),d=(0,H.useRef)(null),u=(0,H.useCallback)(()=>{s(a.name)},[s,a.name]),c=yR(),m=(0,H.useCallback)(async e=>{switch(e.key){case"Enter":l.trim().length>0&&l!==a.name&&(await i(a.number,l,{ui:aM}),t(!1),n?.()),e.preventDefault();break;case"Escape":u()}},[l,a.name,a.number,i,t,n,u]),p=(0,yc.u)(m),f=(0,H.useCallback)(e=>{s(e.target.value)},[s]);return((0,H.useEffect)(function(){e&&setTimeout(()=>d.current?.focus())},[e]),e)?(0,O.jsx)(wE.V,{title:"Rename view",width:"small",onClose:()=>{t(!1),setTimeout(()=>r.current?.focus())},footerButtons:[{content:rI.cancelChanges,onClick:e=>{e.preventDefault(),u(),t(!1)}},{content:rI.saveChanges,buttonType:"primary",onClick:async e=>{e.preventDefault(),0!==l.trim().length&&l!==a.name&&(await i(a.number,l,{ui:aM}),t(!1),n?.())}}],children:(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{children:"View name"}),(0,O.jsx)(yk.F,{sx:{width:"100%"},...c,children:(0,O.jsx)(pw.Z,{ref:d,block:!0,autoComplete:"off",value:l,onChange:f,onMouseDown:Fz,disabled:!o||a.isDeleted,...p})}),0===l.trim().length?(0,O.jsx)(cX.Z.Validation,{variant:"error",children:rI.viewNameRequired}):null]})}):null});try{F$.displayName||(F$.displayName="ViewOptionsMenu")}catch{}try{(E=DirtyConfigIconForView).displayName||(E.displayName="DirtyConfigIconForView")}catch{}try{FW.displayName||(FW.displayName="RenameViewMenu")}catch{}let FG={position:"relative","& .dirty-icon-container":{lineHeight:0}},FU=({MenuComponent:e,title:t,icon:r,testId:a,hideIf:n,useHasValue:i})=>{let{currentView:l}=oi(),s=n9(),o=i(),d=(0,H.useRef)(null),[u,c]=(0,mH.g)({contentRef:d,"aria-label":t}),[m,p]=(0,H.useState)(!1),f=(0,H.useId)(),h=(0,H.useCallback)(()=>p(e=>!e),[]);return!l||n({currentView:l,enabledFeatures:s})?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mq.h,{ref:d,size:"small",variant:o?"default":"invisible",icon:r,sx:FG,"aria-pressed":o?"true":"false","aria-label":t,onClick:h,"aria-haspopup":"menu","aria-controls":f,"aria-expanded":m,...u,...(0,ef.f)(`quick-action-toolbar-${a}`)}),(0,O.jsx)(e,{id:f,open:m,anchorRef:d,setOpen:p}),c]})},FH={position:"relative",display:"flex",gap:1},Fq=(0,H.memo)(function(){let e=(0,H.useRef)(null);(0,xw.v)({containerRef:e,bindKeys:xv.Qw.ArrowHorizontal});let{currentView:t}=oi(),{viewType:r}=hL(),a=n9();if(!t)return null;let n=Fh[r];return n?(0,O.jsx)(Le.Provider,{value:aA,children:(0,O.jsx)(eO.Z,{role:"toolbar",sx:FH,ref:e,...(0,ef.f)("quick-action-toolbar"),children:n.map(({ToolbarItemComponent:e=FU,...r})=>r.hideIf({currentView:t,enabledFeatures:a})?null:(0,H.createElement)(e,{...r,key:r.title}))})}):null});try{FU.displayName||(FU.displayName="ActionMenuWithTooltip")}catch{}try{Fq.displayName||(Fq.displayName="ViewOptionsToolbar")}catch{}let FK={display:"flex",alignItems:"center",p:"12px 16px",gridArea:"1/2"},FQ=(0,H.memo)(function({isFocused:e,...t}){let{searchInputRef:r}=dv();return(0,H.useEffect)(()=>{e&&r.current?.focus()},[e,r]),(0,O.jsx)(FX,{...t})}),FX=(0,H.memo)(function(e){let{currentView:t,isViewStateDirty:r,saveCurrentViewState:a,resetViewState:n}=oi(),{hasWritePermissions:i}=i4(),l=t?.number,s=(0,H.useCallback)(async()=>{void 0!==l&&await a(l,{ui:aW})},[l,a]),o=(0,H.useCallback)(async()=>{void 0!==l&&n(l,{ui:aW})},[l,n]),{memex_header_redesign:d}=n9();return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(FY,{onResetChanges:r?o:void 0,onSaveChanges:!t?.isDeleted&&r?s:void 0,hideSaveButton:!i,...e,children:d&&t?(0,O.jsx)(FJ,{view:t}):null})})}),FY=(0,H.memo)(function({dispatchInputFocusEvent:e,filterCount:t,children:r,...a}){let{currentView:n}=oi(),{query:i,setQuery:l,searchInputRef:s,addSpaceToQuery:o,clearSearchQuery:d}=dv(),u=(0,H.useRef)(null),c=(0,H.useMemo)(()=>(0,s9.Z)(l,200),[l]),m=n?.number;(0,H.useImperativeHandle)(s,()=>u.current);let[p,f]=yh(i),h=(0,e5.Z)(o),g=(0,H.useCallback)(()=>{w.current?.classList.add("is-focused"),e&&e()},[e]),y=(0,H.useCallback)(()=>{w.current?.classList.remove("is-focused")},[]),x=(0,H.useCallback)(e=>{void 0!==m&&(c.cancel(),f(e),c(m,e))},[m,c,f]),b=(0,H.useCallback)(e=>{x(e.target.value)},[x]),v=(0,H.useCallback)(e=>{x(e)},[x]);pi((0,H.useCallback)(()=>{g(),h.current()},[g,h]));let w=(0,H.useRef)(null),j=(0,H.useCallback)(()=>{void 0!==m&&d(m)},[d,m]),C=(0,H.useCallback)(()=>{s.current&&s.current.selectionStart&&s.current.value.length&&s.current.selectionStart>=s.current.value.length&&h.current()},[s,h]);return(0,O.jsx)(eO.Z,{sx:FK,children:(0,O.jsx)(F0,{children:(0,O.jsx)(pK,{height:"32px",containerRef:w,value:p,onChange:b,onChangeValue:v,onBlur:y,onFocus:g,onInputClick:C,inputRef:u,filterCount:i.length>0?t:null,onClearButtonClick:j,setValueFromSuggestion:x,...a,children:r})})})});FQ.displayName="BaseProjectViewFilterInput";let FJ=(0,H.memo)(function({view:e}){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Fq,{}),(0,O.jsx)(F$,{view:e})]})}),F0=(0,H.memo)(function({children:e}){let{items:t}=dP(),{suggestedIssueTypeNames:r}=Lc(),a=(0,H.useMemo)(()=>({items:t,issueTypeSuggestedNames:r}),[t,r]);return(0,O.jsx)(mD.Provider,{value:a,children:e})});try{FX.displayName||(FX.displayName="BaseProjectInputWithActions")}catch{}try{FY.displayName||(FY.displayName="ProjectInputWithSearchContext")}catch{}try{FJ.displayName||(FJ.displayName="ViewOptionsArea")}catch{}try{F0.displayName||(F0.displayName="MemexItemsSuggestionsProvider")}catch{}function F1(e){return"number"==typeof e?e:e.key.itemId}function F2({trackedBy:e,invisibleButtonVariant:t=!0,ui:r="grouped ui"}){let{tasklist_block:a}=n9(),{addAllItemsText:n,itemsNotInProjectText:i}=r$,{postStats:l}=os(),{parentIssuesById:s,getChildrenTrackedByParent:o,removeChildIssues:d}=hu(),{createMemexItemOptimisitcally:u}=hH(),{setChildParentRelationship:c}=hm(),{addSelectedItemsRequest:m}=d9(),{items:p}=dP(),f=i5().projectLimits.projectItemLimit,{addToast:h}=e9(),g=(0,H.useRef)(null),[y,x]=(0,H.useState)(!1),[b,v]=(0,H.useState)([]),[w,j]=(0,H.useState)(!1),{clientHeight:C}=xU({onResize:()=>{y&&((0,uU.flushSync)(()=>{x(!1)}),x(!0))}}),I=(0,H.useCallback)(async e=>{let t=await o(e);t&&t.count&&v(t.items.map(e=>({key:{ownerId:e.ownerId,itemId:e.itemId,primaryKey:{uuid:e.uuid}},title:e.title,url:e.url,state:e.state,repoName:e.repositoryName,repoId:e.repositoryId,userName:e.ownerLogin,number:e.displayNumber,labels:e.labels,assignees:e.assignees,stateReason:e.stateReason})))},[o]);(0,H.useEffect)(()=>{I(F1(e))},[I,e]);let S=(0,H.useCallback)(e=>{e.stopPropagation(),x(!0)},[]),k=(0,H.useCallback)(t=>{if("number"==typeof e)return;let r=[],a=m3({dataType:eA.TrackedBy,value:e,kind:"group"});if(a){let e=d4(a);e&&r.push(e)}for(let a of t)u({contentType:eL.Issue,content:{id:a.key.itemId,repositoryId:a.repoId},localColumnValues:r},[{memexProjectColumnId:"Title",value:{title:{raw:a.title,html:a.title},state:a.state,number:a.number,issueId:a.key.itemId}},{memexProjectColumnId:eM.TrackedBy,value:[e]}],a.url),c(a.key.itemId)},[u,c,e]),T=(0,H.useCallback)(async(e,t=b)=>{if(e.stopPropagation(),p.length+t.length>f){h({message:`Adding these items will exceed the ${f} project item limit`,type:e$.error});return}j(!0),await m.perform(t),l({name:"bulk_add_tracked_by_items",context:t.length.toString(),ui:r}),k(t),d(b.map(e=>e.key.itemId)),j(!1)},[b,p.length,f,m,l,r,k,d,h]);if(!a)return null;let N=s.get(F1(e))?.count??0,_=(0,O.jsx)(fj.P,{anchorRef:g,open:y,onOpenChange:fV.Z,children:(0,O.jsx)(fj.P.Overlay,{sx:{width:"353px",maxHeight:C,overflow:"auto"},onEscape:()=>x(!1),onClickOutside:()=>x(!1),children:w?(0,O.jsx)(eO.Z,{sx:{justifyContent:"center",my:4,display:"flex"},children:(0,O.jsx)(u$.Z,{size:"medium"})}):(0,O.jsxs)(mx.S,{...(0,ef.f)("tracked-by-missing-issues-menu"),children:[N>1&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Group,{children:(0,O.jsxs)(mx.S.Item,{onSelect:e=>T(e,void 0),...(0,ef.f)("tracked-by-missing-issues-menu-add-all"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PlusIcon,{})}),n(N)]})}),(0,O.jsx)(mx.S.Divider,{})]}),(0,O.jsx)(mx.S.Group,{...(0,ef.f)("tracked-by-missing-issues-menu-add-individual"),children:b.map(e=>(0,O.jsxs)(mx.S.Item,{onSelect:t=>T(t,[e]),...(0,ef.f)(`tracked-by-missing-issue-row-${e.title}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(u7,{type:"Issue",state:e.state,stateReason:e.stateReason,isDraft:!1})}),e.title]},e.key.primaryKey.uuid))})]})})});return 0===N?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(cd.r,{ref:g,onClick:S,sx:{paddingRight:"8px"},variant:t?"invisible":"default",...(0,ef.f)("tracked-by-missing-issues-button"),children:[(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",fontWeight:"normal",pr:2,overflow:"hidden",textOverflow:"ellipsis"},children:i(N)}),(0,O.jsx)(eZ.Z,{icon:eF.TriangleDownIcon,size:"small",sx:{verticalAlign:"middle",color:"fg.muted"}})]}),_]})}try{F2.displayName||(F2.displayName="TrackedByMissingIssuesButton")}catch{}let F5={display:"flex",alignItems:"flex-start",justifyContent:"flex-start",flexDirection:"row",gap:2,maxWidth:"unset",mx:0,pl:3,pr:2},F3={display:"flex",marginTop:"10px"},F4={pr:2,ml:1,display:"flex",justifyContent:"flex-end",minWidth:"45px"},F8={color:"fg.muted",lineHeight:"normal"},F6={display:"flex",alignItems:"center",justifyContent:"space-between",flex:"1"},F7={pr:2,display:"flex",justifyContent:"flex-end",flex:1,alignItems:"center",maxWidth:"175px"},F9={"& ul":{padding:"0 0 0 12px",listStyleType:"none"},"& .actionlistitem":{minHeight:"40px",position:"relative",p:0,m:0},"li:not(:last-child) .actionlistitem-container > :not(:first-child)":{borderBottom:"1px solid",borderColor:"border.subtle"},".actionlistitem-active":{backgroundColor:"var(--control-transparent-bgColor-selected, var(--color-action-list-item-default-selected-bg))","&::before":{content:'""',position:"absolute",top:"8px",bottom:"8px",left:"-8px",width:"4px",backgroundColor:"accent.fg",borderRadius:2}}},Ze=Ls()(F9,{"& .actionlistitem-leadingcontent":{minWidth:"40px"}}),Zt=Ls()(F9,{"& .actionlistitem-leadingcontent":{minWidth:"16px",paddingRight:"0"}}),Zr={backgroundColor:"canvas.subtle",borderBottom:"1px solid",borderBottomColor:"border.muted",borderTop:"1px solid",borderTopColor:"border.muted",color:"fg.muted",fontWeight:"bold",my:1,pl:3,py:1},Za={ml:2,borderColor:"accent.emphasis",color:"accent.fg"},Zn={ml:"auto",mr:"12px",mt:"8px",color:"fg.muted",fontWeight:"normal"},Zi={display:"flex",flexWrap:"nowrap",gap:1,color:"fg.muted",fontWeight:"normal",fontSize:0,alignItems:"center"},Zl={fontSize:1,fontWeight:"normal",textAlign:"left",whiteSpace:"normal"},Zs=new Set([eA.Text,eA.Number,eA.Date,eA.IssueType]),Zo=({count:e})=>(0,O.jsx)(eO.Z,{sx:F4,children:(0,O.jsx)(pm.Z,{...(0,ef.f)("slicer-item-count"),sx:F8,children:e})}),Zd=({children:e,hasLeadingIcons:t=!0})=>(0,O.jsx)(eO.Z,{sx:t?Ze:Zt,children:e}),Zu=({fieldGrouping:e,count:t,onSliceValueChange:r,sliceValue:a})=>(0,O.jsx)(Zc,{onClick:()=>r(e.value.iteration.title),isActive:a===e.value.iteration.title,icon:(0,O.jsx)(eZ.Z,{icon:eF.IterationsIcon,sx:{color:"fg.muted"}}),title:e.value.iteration.titleHtml,description:(0,O.jsx)(eO.Z,{sx:Zi,children:nN(e.value.iteration)}),metadata:(0,O.jsxs)(O.Fragment,{children:[nj(new Date,e.value.iteration)&&(0,O.jsx)(eO.Z,{children:(0,O.jsx)(vz,{sx:{ml:2}})}),(0,O.jsx)(Zo,{count:t})]})}),Zc=({onClick:e,isActive:t,icon:r,title:a,description:n,metadata:i,trailingContent:l})=>(0,O.jsx)(mx.S.Item,{onClick:e,className:(0,IL.W)(t&&"actionlistitem-active","actionlistitem"),children:(0,O.jsxs)(eO.Z,{className:"actionlistitem-container",sx:{display:"flex",height:"100%"},children:[(0,O.jsx)(eO.Z,{className:"actionlistitem-leadingcontent",sx:F5,children:(0,O.jsx)(eO.Z,{sx:F3,children:r})}),(0,O.jsxs)(eO.Z,{className:"actionlistitem-maincontent",sx:F6,children:[(0,O.jsxs)(eO.Z,{sx:{flexGrow:1,pr:2,py:2,textAlign:"left"},children:[(0,O.jsx)(u5,{as:"h3",sx:Zl,children:a}),n]}),i]}),l&&(0,O.jsx)(eO.Z,{className:"actionlistitem-trailingcontent",sx:F7,children:l})]})}),Zm=({group:e,onSliceValueChange:t,sliceValue:r})=>{let a=e.totalCount.value;if("empty"===e.sourceObject.kind){let n=e.sourceObject;return(0,O.jsx)(Zc,{isActive:r===oe,title:n.value.titleHtml,onClick:()=>t(oe),metadata:(0,O.jsx)(Zo,{count:a})},oe)}switch(e.sourceObject.dataType){case eA.SingleSelect:{let n=e.sourceObject,i=n.value.option.name;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),title:n.value.option.nameHtml,icon:(0,O.jsx)(mu,{color:n.value.option.color}),description:n.value.option.descriptionHtml?(0,O.jsx)(eO.Z,{sx:Zi,children:(0,O.jsx)(u5,{children:n.value.option.descriptionHtml})}):void 0,metadata:(0,O.jsx)(Zo,{count:a})},n.value.option.id)}case eA.Assignees:{let n=e.sourceObject.value[0];if(!n)return null;return(0,O.jsx)(Zc,{onClick:()=>t(n.login),isActive:r===n.login,icon:(0,O.jsx)(mo.O,{loading:"lazy",alt:n.login,src:n.avatarUrl},n.id),title:n.login,metadata:(0,O.jsx)(Zo,{count:a})},n.id)}case eA.Labels:{let n=e.sourceObject,i=n.value.name;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),icon:(0,O.jsx)(v7,{color:n.value.color}),title:n.value.nameHtml,metadata:(0,O.jsx)(Zo,{count:a})},n.value.id)}case eA.Milestone:{let n=e.sourceObject,i=n.value.title;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),icon:(0,O.jsx)(eZ.Z,{icon:eF.MilestoneIcon,sx:{color:"fg.muted"}}),title:i,metadata:(0,O.jsx)(Zo,{count:a})},n.value.id)}case eA.ParentIssue:{let a=e.sourceObject.value,{total:n,completed:i,percentCompleted:l}=a.subIssueList;return(0,O.jsx)(Zc,{isActive:r===a.nwoReference,onClick:()=>t(a.nwoReference),icon:(0,O.jsx)(u7,{isDraft:!1,state:a.state,stateReason:a.stateReason,type:eL.Issue,sx:{mr:2}}),title:a.title,trailingContent:(0,O.jsx)(Lo,{total:n,completed:i,percentCompleted:l})},a.id)}case eA.IssueType:{let n=e.sourceObject,i=n.value.name;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),title:i,metadata:(0,O.jsx)(Zo,{count:a})},n.value.id)}case eA.Repository:{let n=e.sourceObject,i=n.value.nameWithOwner;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),icon:(0,O.jsx)(c9,{repository:n.value,sx:{color:"fg.muted"}}),title:i,metadata:(0,O.jsx)(Zo,{count:a})},n.value.id)}case eA.Text:{let n=e.sourceObject,i=n.value.text.raw;return(0,O.jsx)(Zc,{isActive:r===i,onClick:()=>t(i),title:u1(n.value.text.html),metadata:(0,O.jsx)(Zo,{count:a})},i)}case eA.Number:{let n=e.sourceObject.value.number.value.toString();return(0,O.jsx)(Zc,{onClick:()=>t(n),isActive:r===n,title:n,metadata:(0,O.jsx)(Zo,{count:a})},e.sourceObject.value.number.value.toString())}case eA.Date:{let n=e.sourceObject.value.date.value,i=tX(n),l=tY(n),s=ri(l)?"Today":void 0;return(0,O.jsx)(Zc,{onClick:()=>t(l),isActive:r===l,title:i,metadata:(0,O.jsxs)(O.Fragment,{children:[s&&(0,O.jsx)(eO.Z,{children:(0,O.jsx)(y8.Z,{sx:Za,children:s})}),(0,O.jsx)(Zo,{count:a})]})},n.toString())}case eA.Iteration:return(0,O.jsx)(Zu,{fieldGrouping:e.sourceObject,count:a,onSliceValueChange:t,sliceValue:r},e.sourceObject.value.iteration.id);default:return null}},Zp=({sliceValue:e,onSliceValueChange:t,slicerItems:r,showEmptySlicerItems:a,setShowEmptySlicerItems:n})=>{let[i,l]=nx(r,e=>e.totalCount.value>0),s=l.length>0,o=r[0]?.sourceObject.dataType,d=!(o&&Zs.has(o));return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Zd,{hasLeadingIcons:d,children:[(0,O.jsx)(cG.Z,{as:"h2",className:"sr-only",children:"Project items group"}),(0,O.jsxs)(mx.S,{"aria-labelledby":"slicer-panel-title",children:[i.map(r=>Zm({group:r,sliceValue:e,onSliceValueChange:t})),a&&l.map(r=>Zm({group:r,sliceValue:e,onSliceValueChange:t}))]})]}),(0,O.jsx)(Zj,{hasEmptySlicerItems:s,showEmptySlicerItems:a,setShowEmptySlicerItems:n})]})},Zf=({onSliceValueChange:e,sliceValue:t})=>(0,O.jsx)(Zc,{onClick:()=>e(oe),isActive:t===oe,title:r$.noTrackedBy}),Zh={display:"flex",gap:"4px",alignItems:"center",justifyContent:"flex-end"},Zg={color:"fg.muted",overflow:"hidden",textAlign:"left",whiteSpace:"normal",textDecoration:"none",textOverflow:"ellipsis",fontSize:0,wordBreak:"break-all"},Zy={display:"flex",marginTop:"8px",button:{minWidth:"48px","[data-component=buttonContent]":{flex:"1 1"},"[data-component=text]":{display:"flex"}}},Zx=({item:e,onSliceValueChange:t,sliceValue:r,onOpenSidePanel:a})=>{let n=e.columns,i=n.Repository,l=n.Title,s=n.Tracks,o=l&&"number"in l.value?`#${l.value.number}`:"",d=i?`${i.nameWithOwner}${o}`:"",u=r===d,c=e.content.id,{tasklist_block:m}=n9(),{getChildrenTrackedByParent:p,parentIssuesById:f}=hu(),h=m?f.get(c)?.count??0:0,g=(0,H.useRef)(null),[y,x]=(0,mH.g)({contentRef:g,direction:"n","aria-label":s?.total?rI.progressPercentCount(Math.floor(s.completed/s.total*100)):void 0});(0,H.useEffect)(()=>{m&&u&&p(c)},[m,c,p,u]);let b=l?.contentType===eL.Issue?(0,O.jsx)(u9,{title:l}):void 0,v=s?(0,O.jsxs)(eO.Z,{sx:Zh,children:[(0,O.jsx)(bl,{ref:g,sx:{cursor:"pointer",mr:2},progress:s,...y}),x]}):void 0;return u?(0,O.jsx)(eO.Z,{as:"li",sx:{pl:0,pr:3},children:(0,O.jsx)(eO.Z,{onClick:()=>t(d),className:(0,IL.W)(u&&"actionlistitem-active","actionlistitem"),children:(0,O.jsxs)(eO.Z,{className:"actionlistitem-container",sx:{display:"flex"},children:[(0,O.jsx)(eO.Z,{className:"actionlistitem-leadingcontent",sx:F5,children:(0,O.jsx)(eO.Z,{sx:F3,children:b})}),(0,O.jsxs)(eO.Z,{className:"actionlistitem-maincontent",sx:F6,children:[(0,O.jsxs)(eO.Z,{sx:{flexGrow:1,pr:2,py:2,textAlign:"left"},children:[(0,O.jsx)(u5,{as:"h3",sx:Zl,children:e.getHtmlTitle()}),d&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(uB.Z,{sx:Zg,target:"_blank",rel:"noreferrer",href:e.content.url,onClick:t=>a(t,e),...(0,ef.f)("issue-link"),children:d}),h?(0,O.jsx)(eO.Z,{sx:Zy,children:(0,O.jsx)(F2,{trackedBy:c,invisibleButtonVariant:!1,ui:nr})}):null]})]}),v]})]})})}):(0,O.jsx)(Zc,{onClick:()=>t(d),isActive:u,icon:b,title:e.getHtmlTitle(),description:d?(0,O.jsx)(eO.Z,{sx:Zg,children:d}):void 0,metadata:v})},Zb=({item:e,...t})=>{switch(e?.contentType){case eL.Issue:return(0,O.jsx)(Zx,{item:e,...t},e.id);case void 0:return(0,O.jsx)(Zf,{...t},"no-tracked-by-item");default:return null}},Zv=({sliceValue:e,onSliceValueChange:t,onOpenSidePanel:r})=>{let{filteredItems:a}=M1({applyTransientFilter:"exclude"}),n=a.map(a=>Zb({item:a,sliceValue:e,onSliceValueChange:t,onOpenSidePanel:r})),i=Zb({item:void 0,sliceValue:e,onSliceValueChange:t,onOpenSidePanel:r});return n.push(i),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(FY,{filterCount:(0,H.useDeferredValue)(a.length),hideSaveButton:!0,hideResetChangesButton:!0,...(0,ef.f)("slicer-panel-filter-input")}),(0,O.jsxs)(Zd,{children:[(0,O.jsx)(cG.Z,{as:"h2",className:"sr-only",children:"Project filtered items"}),(0,O.jsx)(mx.S,{"aria-labelledby":"slicer-panel-title",children:n})]})]})},Zw=({slicerItems:e,sliceValue:t,onSliceValueChange:r,showEmptySlicerItems:a,setShowEmptySlicerItems:n})=>{let i=[],l=new Map,s=null;for(let t of e)if(t.sourceObject.dataType===eA.Iteration){if("empty"!==t.sourceObject.kind){let e=t.sourceObject.value.iteration;i.push(e),l.set(e.id,t)}else s=t}let o=nE(i);if(!o.iterations.length&&!o.completedIterations.length)return null;let d=e.some(e=>0===e.totalCount.value);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(Zd,{children:[(0,O.jsx)(cG.Z,{as:"h2",className:"sr-only",children:"Project iterations list"}),(0,O.jsxs)(mx.S,{"aria-labelledby":"slicer-panel-title",children:[o.iterations.length>0&&(0,O.jsx)(O.Fragment,{children:o.iterations.map(e=>{let n=l.get(e.id);return n&&(a||n.totalCount.value)?Zm({group:n,sliceValue:t,onSliceValueChange:r}):null})}),s&&Zm({group:s,sliceValue:t,onSliceValueChange:r})]}),o.completedIterations.length>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{"data-testid":"completed-iteration-header",sx:Zr,children:rI.iterationLabel.completed}),(0,O.jsx)(mx.S,{"aria-label":"Completed iterations",children:o.completedIterations.map(e=>{let n=l.get(e.id);return n&&(a||n.totalCount.value)?n&&Zm({group:n,sliceValue:t,onSliceValueChange:r}):null})})]})]}),(0,O.jsx)(Zj,{hasEmptySlicerItems:d,showEmptySlicerItems:a,setShowEmptySlicerItems:n})]})},Zj=({hasEmptySlicerItems:e,showEmptySlicerItems:t,setShowEmptySlicerItems:r})=>e?(0,O.jsxs)(cd.r,{onClick:()=>r(!t),size:"small",variant:"invisible",sx:Zn,...(0,ef.f)("toggle-empty-slicer-items"),children:[t?"Hide":"Show"," empty values"]}):null;try{Zo.displayName||(Zo.displayName="ListItemCountMetadata")}catch{}try{Zd.displayName||(Zd.displayName="ListContainer")}catch{}try{Zu.displayName||(Zu.displayName="SlicerIterationItem")}catch{}try{Zc.displayName||(Zc.displayName="StandardSlicerItem")}catch{}try{Zp.displayName||(Zp.displayName="SlicerGroupByItems")}catch{}try{Zf.displayName||(Zf.displayName="SlicerNoTrackedByItem")}catch{}try{Zx.displayName||(Zx.displayName="SlicerTrackedByItem")}catch{}try{Zv.displayName||(Zv.displayName="SlicerTrackedByItems")}catch{}try{Zw.displayName||(Zw.displayName="SlicerIterationItems")}catch{}try{Zj.displayName||(Zj.displayName="ToggleItemsButton")}catch{}let ZC=({width:e,onResetSize:t})=>{let r="slicer-panel-resizer-sash",{attributes:a,listeners:n,setNodeRef:i,isDragging:l}=(0,IZ.O1)({id:r,attributes:{role:"separator"}});return Av("is-resizing-slicer-panel",l),(0,O.jsx)(eO.Z,{ref:i,sx:{bg:l?"accent.fg":"border.default",cursor:"col-resize",position:"relative",transitionDelay:"0.1s",width:"1px",outline:"none"},"aria-valuenow":e,"aria-valuemin":176,"aria-valuemax":800,"aria-orientation":"vertical",id:r,...a,...(0,ef.f)("slicer-panel-resizer-sash"),children:(0,O.jsx)(eO.Z,{sx:{cursor:"col-resize",inset:"0 -3px",position:"absolute",height:"100%"},...n,onDoubleClick:t})})},ZI=({onResize:e,onResizeEnd:t,width:r})=>{let[a,n]=(0,H.useState)(r),i=e=>{e!==a&&t(e)};return(0,O.jsx)(IZ.LB,{autoScroll:!1,onDragCancel:()=>{e(a)},onDragEnd:()=>{i(r)},onDragMove:({delta:t,active:r})=>{let a=r.rect.current.initial;if(!a)return;let n=Math.floor((a.left+a.width/2)??0)+t.x;n>800&&(n=800),n<176&&(n=176),e(Math.round(n))},onDragStart:()=>{n(r)},children:(0,O.jsx)(ZC,{onResetSize:()=>{i(392)},width:r})})};try{ZC.displayName||(ZC.displayName="SlicerPanelResizerSash")}catch{}try{ZI.displayName||(ZI.displayName="SlicerPanelResizer")}catch{}let ZS={display:"flex",justifyContent:"space-between",margin:"12px 12px 0 12px"},Zk={minHeight:"34px",minWidth:"48px",display:"flex",alignItems:"center"},ZT={...Zk,flexshrink:1,color:"fg.default","[data-component=buttonContent]":{flex:"1 1"}},ZN={display:"block",fontSize:1,fontWeight:"bold",maxWidth:"400px"},Z_={...Zk,flexShrink:0,color:"fg.muted",fontWeight:"normal"},ZR={baseQuery:"-no:tracks",isMainProjectFilter:!1,viewStateActionType:dy.SetSliceByFilter,getSearchQueryFromView:e=>e?.localViewState?.sliceBy?.filter??"",getSearchIsDirty:e=>e?.isSliceByFilterDirty??!1};function ZP({slicerItems:e,openSidePanel:t}){let{sliceField:r,sliceValue:a,setSliceValue:n,sliceByPanelWidth:i,setSliceByPanelWidth:l}=or(),[s,o]=(0,H.useState)(!1),[d,u]=(0,H.useState)(!1),{currentView:c}=oi(),{viewType:m}=hL(),{postStats:p}=os(),{hasWritePermissions:f}=i4(),[h,g]=(0,H.useState)({}),y=(0,H.useRef)(null),x=(0,H.useCallback)(e=>{if(!r||!c)return;let t=e!==a;n(c.number,t?e:null),p({name:t?"slice_item_selected":"slice_item_deselected",memexProjectColumnId:r.id,ui:nr,context:JSON.stringify({layout:m})})},[r,c,a,n,p,m]),b=(0,H.useCallback)(()=>{r&&c&&(n(c.number,null),p({name:"slicer_deselect",memexProjectColumnId:r.id,ui:nr,context:JSON.stringify({layout:m})}))},[r,c,n,p,m]),v=(0,H.useCallback)(e=>{r&&c&&(u(e),p({name:e?"slicer_show_empty":"slicer_hide_empty",memexProjectColumnId:r.id,ui:nr,context:JSON.stringify({layout:m})}))},[r,c,p,m]),w=(0,H.useCallback)((e,r)=>{let n=e.ctrlKey||e.metaKey;(a===e.currentTarget.textContent||n)&&e.stopPropagation(),n||(t(r),e.preventDefault())},[t,a]),j=(0,H.useCallback)(()=>{if(!r||!e)return null;switch(r.dataType){case eA.TrackedBy:return(0,O.jsx)(dw,{config:ZR,children:(0,O.jsx)(Zv,{sliceValue:a,onSliceValueChange:x,onOpenSidePanel:w})});case eA.Iteration:return(0,O.jsx)(Zw,{sliceValue:a,onSliceValueChange:x,slicerItems:e,showEmptySlicerItems:d,setShowEmptySlicerItems:v});default:return(0,O.jsx)(Zp,{sliceValue:a,onSliceValueChange:x,slicerItems:e,showEmptySlicerItems:d,setShowEmptySlicerItems:v})}},[r,e,a,x,w,d,v]),C=(0,H.useCallback)(e=>{c&&g(t=>({...t,[c.number]:e}))},[c,g]),I=(0,H.useCallback)(e=>{c&&(g(e=>{let t={...e};return delete t[c.number],t}),l(e))},[c,l]);if(!c)return null;let S=h[c.number]??i??392;return(0,O.jsxs)(eO.Z,{sx:{gridArea:"1/1/-1",display:"flex",height:0,minHeight:"100%"},children:[(0,O.jsx)(eO.Z,{...(0,ef.f)("slicer-panel"),sx:{left:0,backgroundColor:pv("colors.canvas.default"),color:pv("colors.fg.default"),height:"100%",overflow:"auto",...!f&&{borderColor:pv("colors.border.muted"),borderWidth:"1px",borderRightStyle:"solid"}},style:{width:`${S}px`},children:(0,O.jsx)(d7,{children:r&&e?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:ZS,children:[(0,O.jsx)(cd.r,{variant:"invisible",sx:ZT,ref:y,"aria-expanded":s,onClick:()=>o(!s),trailingVisual:eF.TriangleDownIcon,children:(0,O.jsx)(md.Z,{...(0,ef.f)("slicer-panel-title"),id:"slicer-panel-title",title:r.name,sx:ZN,children:r.name})}),a&&(0,O.jsx)(cd.r,{variant:"invisible",sx:Z_,"aria-label":"Deselect selection",title:"Deselect selection",onClick:b,size:"small",...(0,ef.f)("deselect-slice-selection"),children:"Deselect"})]}),(0,O.jsx)(Lr,{anchorRef:y,open:s,setOpen:o,ui:nr}),j()]}):null})}),f&&(0,O.jsx)(ZI,{onResize:C,onResizeEnd:I,width:S})]})}try{ZP.displayName||(ZP.displayName="SlicerPanel")}catch{}var ZD=r(51081);let ZE=(0,H.memo)((0,H.forwardRef)(({onClick:e},t)=>{let r=(0,H.useRef)(null),[a,n]=(0,H.useReducer)(e=>e+1,0),[i,l]=(0,H.useState)(!1),{dragType:s}=function(){let e=(0,H.useContext)(A3);if(null==e)throw Error("useIsDragging must be used within a DragDropContext");return e}(),{orderedTokenizedFilters:o,insertFilter:d}=dv(),{groupedByColumn:u}=dk(),{postStats:c}=os(),m=(0,H.useRef)(null),p=(0,H.useId)(),{projectLimits:{singleSelectColumnOptionsLimit:f}}=i5();(0,H.useEffect)(()=>{let e=e=>{"Escape"===e.key&&l(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);let[h,g]=(0,H.useMemo)(()=>{let e=n3(u),t=u?.name&&oQ(u.name),{included:r,excluded:a}=o.filter(e=>"field"===e.type&&e.field===t).reduce((e,t)=>{if("field"===t.type)for(let r of oU(t.value))e[t.exclude?"excluded":"included"].add(r);return e},{included:new Set,excluded:new Set}),n=e.filter(e=>e.id!==nQ).length;return[e.filter(e=>e.id!==nQ).map(e=>({id:e.id,text:e.name,selected:function(e,t,r){let a=LE(e);return!(t.size>0&&!of(Array.from(t),a)||of(Array.from(r),a))}(e,r,a)})),n]},[u,o]),[y,x]=nx(h,e=>e.selected);(0,H.useEffect)(()=>{a>0&&r.current&&r?.current?.scrollIntoView()},[a]);let b=(0,H.useRef)(g);(0,H.useEffect)(()=>{g>0&&g===b.current+1&&r?.current?.scrollIntoView({behavior:"smooth"}),b.current=g},[g]);let v=(0,H.useCallback)(e=>{if(u?.name){let{dataType:t,databaseId:r,name:a}=u;d(oQ(a),e),n(),c({name:"board_column_plus_show",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[n,u,d,c]),w=(0,H.useCallback)(e=>{if(u?.name){let{dataType:t,databaseId:r,name:a}=u;d(`-${oQ(a)}`,e),n(),c({name:"board_column_plus_hide",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[n,u,d,c]),j=(0,H.useCallback)(()=>{l(!0)},[]);return"column"===s?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ZD.u,{text:"Add a new column to the board",ref:m,type:"label",children:(0,O.jsx)(cd.r,{leadingVisual:eF.PlusIcon,"aria-haspopup":"true","aria-expanded":i,onClick:j,size:"small",...(0,ef.f)("add-new-column-button")})}),(0,O.jsx)(fj.P,{open:i,anchorRef:m,children:(0,O.jsx)(fj.P.Overlay,{onEscape:()=>l(!1),onClickOutside:()=>l(!1),"aria-labelledby":p,children:(0,O.jsxs)(mx.S,{...(0,ef.f)("add-new-column-menu"),children:[(0,O.jsx)(mx.S.Group,{children:(0,O.jsxs)(mx.S.Item,{as:"button",onSelect:e,disabled:u?.dataType==="singleSelect"&&g>=f,ref:t,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PlusIcon,{})}),"New Column"]},"new-column-button")}),(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"multiple",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Visible columns"}),y.map(e=>(0,O.jsx)(mx.S.Item,{selected:!0,onSelect:()=>w(e.text),children:e.text},e.text))]}),(0,O.jsxs)(mx.S.Group,{selectionVariant:"multiple",children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Hidden columns"}),x.map(e=>(0,O.jsx)(mx.S.Item,{selected:!1,onSelect:()=>v(e.text),role:"menuitemcheckbox",children:e.text},e.text))]})]})})})]})}));ZE.displayName="AddNewColumnOption";let ZA=(e,t)=>{let{orderedTokenizedFilters:r}=dv(),{allColumns:a}=df(),n=a.find(t=>t.id===e);return{groupByFieldOptions:(0,H.useMemo)(()=>{if(!n)return;let e=r.reduce((e,t)=>{if(n&&"field"===t.type&&a.find(e=>e.name.toLowerCase()===oK(t.field))===n)for(let r of oU(t.value.toLowerCase()))e[t.exclude?"exclude":"include"].add(r);return e},{include:new Set,exclude:new Set}),i=t(n,{includeAllCompletedIterations:nH(n)&&e.include.size+e.exclude.size>0});return function(e,t,{include:r,exclude:a}){return t.reduce((t,n)=>{let i={...n,nameHtml:u1(n.nameHtml)};if(nq(e)){let e=LE(n),l=0===r.size||of(Array.from(r),e),s=of(Array.from(a),e);l&&!s&&t.push(i)}else if(nH(e)){let l=0===r.size||oN(Array.from(r),e,!1,n.id),s=oN(Array.from(a),e,!1,n.id);l&&!s&&t.push(i)}return t},[])}(n,i,e)},[n,r,t,a]),groupByField:n}},ZM=()=>{let{groupedByColumnId:e}=dk();return{...ZA(e,n3),groupedByColumnId:e}};function ZL(){let{sorts:e}=dN();return{sortUngroupedItems:(0,H.useCallback)(t=>[...t].sort(_H(e)),[e])}}let ZF=(e,t)=>r=>M2(r,e,t.getGroupingMetadata,t.getAllGroupMetadata),ZZ=[];function ZO(){let{memex_table_without_limits:e}=n9(),{filteredItems:t}=M1(),{groupedByColumnId:r,groupByFieldOptions:a=ZZ}=ZM(),{groupedByColumn:n,collapsedGroups:i}=dI(),{sortUngroupedItems:l}=ZL(),{missingRequiredColumnData:s}=oi(),{allColumns:o}=df(),d=(0,H.useMemo)(()=>o.filter(n4),[o]),u=(0,H.useMemo)(()=>(function(e,t){if(t){let r=e.find(e=>e.id===t);if(r)switch(r.dataType){case eA.SingleSelect:case eA.Iteration:return r.id}}return eM.Status})(d,r),[d,r]),c=(0,H.useMemo)(()=>o.find(e=>e.id===u),[o,u]),m=Z$(),p=e?dR():null,f=(0,H.useMemo)(()=>{let r;if(r=e&&p?Object.fromEntries(Object.entries(p.itemQueriesByGroup).map(([e,t])=>(function(e,t,r){if(!r)throw Error(`Column with id ${t} is used for grouping but does not have a valid model`);let a=nQ;return e.groupMetadata&&"string"==typeof e.groupMetadata.id&&(a=e.groupMetadata.id),[a,{items:e.queries.flatMap(e=>e.data?.nodes??[]),totalCount:e.totalCount?.value,groupedColumnId:e.groupId}]})(t,u,c))):Object.fromEntries(Object.entries(ZV(t,u,a,s,nQ)).map(([e,t])=>[e,{items:l(t),totalCount:t.length}])),!e&&n){let e=m[n?.id],o=e?.groupingConfig?.(t).map(e=>{let t=Object.fromEntries(Object.entries(ZV(e.rows,u,a,s,nQ)).map(([e,t])=>[e,{items:l(t)}]));return{...e,isCollapsed:i.includes(e.value),itemsByVerticalGroup:t}}).filter(e=>e.rows.length>0)??[];if(o.length>0)return{isHorizontalGrouped:!0,horizontalGroupedByColumn:n,allItemsByVerticalGroup:r,horizontalGroups:o}}return{isHorizontalGrouped:!1,allItemsByVerticalGroup:r,horizontalGroups:[{value:rI.undefined,isCollapsed:!1,itemsByVerticalGroup:r,rows:t}]}},[e,p,n,t,u,c,a,s,l,m,i]);return(0,H.useMemo)(()=>({groupByFieldOptions:a,groupByFieldId:u,groupByField:c,compatibleColumns:d,filteredItems:t,groupedItems:f}),[a,u,c,d,t,f])}function ZV(e,t,r,a,n){let i=Object.fromEntries([[n,[]],...r.map(e=>[e.id,[]])]);if(a)return i;for(let r of e){let e=function(e,t,r){if(-1===t)return r;let a=e[t];return a&&a.id?a.id:r}(r.columns,t,n);(e in i||e===n)&&i[e]?.push(r)}return i}let ZB=M5(e=>e.columns),Z$=()=>{let{allColumns:e}=df();return(0,H.useMemo)(()=>Object.fromEntries(e.map(e=>{let t=ZB[e.dataType];return[e.id,{...e,groupingConfig:t?ZF(e,t):void 0}]})),[e])},Zz=(0,H.createContext)(null),ZW=(0,H.memo)(function({children:e}){return(0,O.jsx)(Zz.Provider,{value:ZO(),children:e})}),ZG=()=>{let e=ZU();return(0,J.Z)(null!=e),e},ZU=()=>(0,H.useContext)(Zz);try{Zz.displayName||(Zz.displayName="BoardContext")}catch{}try{ZW.displayName||(ZW.displayName="BoardContextProvider")}catch{}async function ZH({memexProjectItemId:e}){let t=new URL(aa("memex-item-suggested-issue-types-api-data").url,window.location.origin);t.searchParams.set("memexProjectItemId",`${e}`);let{data:r}=await ad(t);return r}let Zq={ErrorToast:"error-toast",ConfirmDialog:"confirm-dialog",Alert:"alert"},ZK={Success:"success",Failure:"failure",Pending:"pending"},ZQ=(e,t)=>(0,O.jsxs)(O.Fragment,{children:["Please create the ",(0,O.jsx)("code",{children:e.title})," milestone in the"," ",(0,O.jsx)("a",{href:`${t.url}/milestones`,children:t.nameWithOwner})," repository before adding to this milestone group."]}),ZX=(e,t)=>{let r=t.nameWithOwner.split("/")[0],a=t.url.replace(t.nameWithOwner,""),n=`${a}${r}`;return(0,O.jsxs)(O.Fragment,{children:["There is no ",(0,O.jsx)("code",{children:e.name})," issue type in the ",(0,O.jsx)("a",{href:n,children:r})," organization."]})},ZY=async(e,t)=>{if(!t)return{status:ZK.Success};let r={itemId:e.id,columnId:eM.Milestone};if(e.contentType===eL.DraftIssue)return{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.Milestone.Alerts.NeedsConversion,stats:{...r,status:aH.FAILURE}};if(e.columns.Milestone&&e.columns.Milestone.id===t.id)return{status:ZK.Success};let a=(await h_({memexProjectItemId:e.id})).suggestions.find(e=>e.title===t.title);return a?{status:ZK.Success,stats:{...r,status:aH.SUCCESS},updateColumnActionOverride:{dataType:eA.Milestone,value:a}}:{status:ZK.Failure,action:Zq.Alert,alertOptions:{...rD.Milestone.Alerts.NeedsTransfer,content:ZQ(t,e.columns.Repository)},stats:{...r,status:aH.FAILURE}}},ZJ=async(e,t)=>{if(!t)return{status:ZK.Success};let r={itemId:e.id,columnId:eM.IssueType};if(e.contentType===eL.DraftIssue)return{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.IssueType.Alerts.NeedsConversion,stats:{...r,status:aH.FAILURE}};if(e.contentType===eL.PullRequest)return{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.IssueType.Alerts.CannotAssignPulls,stats:{...r,status:aH.FAILURE}};if(e.columns[eM.IssueType]?.id===t.id)return{status:ZK.Success};let a=[];try{a=(await ZH({memexProjectItemId:e.id})).suggestions}catch(t){let e=t instanceof api_error_ApiError?t.message:rI.genericErrorMessage;return{status:ZK.Failure,action:Zq.Alert,alertOptions:{...rD.IssueType.Alerts.NeedsTransfer,content:e},stats:{...r,status:aH.FAILURE}}}let n=a.find(e=>e.name===t.name);return n?{status:ZK.Success,stats:{...r,status:aH.SUCCESS},updateColumnActionOverride:{dataType:eA.IssueType,value:n}}:0===a.length?{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.IssueType.Alerts.NoTypesForRepo,stats:{...r,status:aH.FAILURE}}:{status:ZK.Failure,action:Zq.Alert,alertOptions:{...rD.IssueType.Alerts.NeedsTransfer,content:ZX(t,e.columns.Repository)},stats:{...r,status:aH.FAILURE}}},Z0=e=>(0,O.jsxs)("div",{children:["You can transfer this issue to a different repository from the\xa0",(0,O.jsx)(uB.Z,{inline:!0,target:"_blank",href:e,children:"issue page"}),"."]}),Z1=(e,t)=>{if(!t)return{status:ZK.Success};let r={itemId:e.id,columnId:eM.Repository,status:aH.FAILURE};return e.contentType===eL.DraftIssue?{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.Repository.Alerts.NeedsConversion,stats:r}:e.contentType===eL.PullRequest?{status:ZK.Failure,action:Zq.Alert,alertOptions:rD.Repository.Alerts.CannotTransferPulls,stats:r}:e.contentType===eL.Issue&&e.columns.Repository?.nameWithOwner!==t.nameWithOwner&&e.content&&"url"in e.content?{status:ZK.Failure,action:Zq.Alert,alertOptions:{...rD.Repository.Alerts.IssueNeedsTransfer,content:Z0(e.content.url)},stats:r}:{status:ZK.Success}},Z2=(e,t)=>t.length>0&&(e.contentType===eL.DraftIssue||e.contentType===eL.PullRequest)?{status:ZK.Failure,action:Zq.ErrorToast,toastOptions:r$.Toasts.DraftAndPullsNotSupported,stats:{status:aH.FAILURE,itemId:e.id,columnId:eM.TrackedBy}}:(e.columns[eM.TrackedBy]?.length??0)>1&&0===t.length?{status:ZK.Pending,action:Zq.ConfirmDialog,confirmOptions:r$.moveMultipleTrackedByNoTrackedWarning}:{status:ZK.Success},Z5=(e,t)=>t&&(e.contentType===eL.DraftIssue||e.contentType===eL.PullRequest)?{status:ZK.Failure,action:Zq.ErrorToast,toastOptions:rz.toasts.draftAndPullsNotSupported,stats:{status:aH.FAILURE,itemId:e.id,columnId:eM.ParentIssue}}:{status:ZK.Success};async function Z3(e,t){switch(t.dataType){case eA.Repository:return Z1(e,t.value);case eA.Milestone:return await ZY(e,t.value);case eA.TrackedBy:return Z2(e,t.value);case eA.IssueType:return ZJ(e,t.value);case eA.ParentIssue:return Z5(e,t.value)}return{status:ZK.Success}}let Z4=(0,H.createContext)(null),Z8=e=>{let[t,r]=(0,H.useState)(!1);(0,H.useEffect)(()=>{let e=e=>{r(e.ctrlKey)};return window.addEventListener("mousedown",e),window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("mousemove",e)}}),(0,H.useEffect)(()=>{let e=e=>{r(e.ctrlKey)};return window.addEventListener("keydown",e),window.addEventListener("keyup",e),()=>{window.removeEventListener("keydown",e),window.addEventListener("keyup",e)}});let a=(0,H.useMemo)(()=>({ctrlKey:t}),[t]);return(0,O.jsx)(Z4.Provider,{value:a,children:e.children})},Z6=()=>{let e=(0,H.useContext)(Z4);if(!e)throw Error("useKeyPress can only be accessed from a KeyPressProvider component");return e};try{Z4.displayName||(Z4.displayName="KeyPress")}catch{}let Z7=()=>{let{theme:e,colorMode:t,dayScheme:r,nightScheme:a}=(0,$.Fg)();return(0,H.useCallback)(n=>(function(e,{content:t,...r}){return new Promise(a=>{let n=document.createElement("div"),i=(0,B.s)(n);i.render((0,O.jsx)(H.StrictMode,{children:(0,O.jsx)($.f6,{...e,children:(0,O.jsx)(z.Z,{display:"contents",children:(0,O.jsx)(E7,{...r,onClose:e=>{i.unmount(),a("confirm"===e)},children:t})})})}))})})({theme:e,colorMode:t,dayScheme:r,nightScheme:a},n),[e,t,r,a])},Z9=e=>"overItemGroup"in e&&void 0!==e.overItemGroup,Oe=e=>"overItem"in e&&void 0!==e.overItem,Ot={title:rI.cannotEditTitle,content:rI.cannotEditItemContent,confirmButtonContent:rI.confirmDialog},Or=()=>{let e=Z7(),t=(0,at.N)(),{addToast:r}=e9(),{postStats:a}=os(),n=(0,H.useCallback)((e,t,r)=>{a({name:"item_drag_and_drop",context:e,memexProjectItemId:t,memexProjectColumnId:r})},[a]),{memex_group_by_multi_value_changes:i}=n9(),{ctrlKey:l}=Z6();return{getUpdateForGroupDropEvent:(0,H.useCallback)(async a=>{if(!Z9(a))return;let s=function(e,t,r={memex_group_by_multi_value_changes:!1,ctrlKeyPressed:!1},a=null){switch((0,J.Z)(e.dataType!==eA.Labels,"Drag and drop not yet supported for labels"),e.dataType){case eA.Iteration:{let t="group"===e.kind?{id:e.value.iteration.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.SingleSelect:{let t="group"===e.kind?{id:e.value.option.id}:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.Text:{let t="group"===e.kind?e.value.text.raw:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.Number:{let t="group"===e.kind?e.value.number:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.Date:{let t="group"===e.kind?e.value.date:void 0;return{dataType:e.dataType,memexProjectColumnId:e.value.columnId,value:t}}case eA.Milestone:case eA.IssueType:case eA.ParentIssue:case eA.Repository:return{dataType:e.dataType,value:"group"===e.kind?e.value:void 0};case eA.Assignees:{let a="group"===e.kind?e.value:[];if(a.length>0&&r.memex_group_by_multi_value_changes)for(let e of t.Assignees||[])a.find(t=>t.id===e.id)||a.push(e);return{dataType:e.dataType,value:a}}case eA.TrackedBy:{let n="group"===e.kind?[e.value]:[];if(n.length>0)for(let e of t["Tracked by"]||[]){let t=n.find(t=>t.key.itemId===e.key.itemId),i=a?.dataType===eA.TrackedBy&&a?.kind==="group"&&a?.value.key.itemId===e.key.itemId;if(!t){if(i&&!r.ctrlKeyPressed)continue;n.push(e)}}return{dataType:e.dataType,value:n,appendOnly:!1}}default:ij(e)}}(a.overItemGroup.sourceObject,a.activeItem.columns,{memex_group_by_multi_value_changes:i,ctrlKeyPressed:l},a.activeItemGroup.sourceObject),o=await Z3(a.activeItem,s);if(o.stats&&n(o.stats.status,o.stats.itemId,o.stats.columnId),o.updateColumnActionOverride&&(s=Object.assign({},s,o.updateColumnActionOverride)),o.status===ZK.Failure&&o.action===Zq.Alert)await e(o.alertOptions);else if(o.status===ZK.Failure&&o.action===Zq.ErrorToast)r(o.toastOptions);else if(o.status!==ZK.Pending||await t(o.confirmOptions))return s},[r,e,t,l,i,n]),handleGroupDropRequestError:(0,H.useCallback)(t=>!function(e){return!!tF(e)&&403===e.status}(t)?tF(t)?r({message:t.message,type:e$.error}):void 0:e(Ot),[e,r])}},Oa={TOP:"top"},On=(0,H.createContext)(null),Oi=({groupByFieldId:e,horizontalGroupByFieldId:t,children:r})=>{let{updateAndReorderItem:a}=vr(),{groupedItems:n}=ZO(),{bulkUpdateMultipleColumnValues:i}=IY(),{getUpdateForGroupDropEvent:l,handleGroupDropRequestError:s}=Or(),{memex_table_without_limits:o}=n9(),d=(0,H.useCallback)(async(t,r,n,i,o,d,u)=>{if(t.id===r)return;let c=[],m=!1;if(d?.sourceObject&&u?.sourceObject&&d.value!==u.value){let e=await l({activeItem:t,activeItemGroup:d,overItemGroup:u});e?c.push(e):m=!0}i&&!m&&c.push({dataType:eA.SingleSelect,memexProjectColumnId:e,value:{id:i.groupMetadata?.id??""}});let p="top"===n?b8.BEFORE:b8.AFTER,f=va(c,null!=r?{overItemId:r,side:p}:void 0);if(f)try{await a(t.id,f,{})}catch(e){s(e)}},[l,e,s,a]),u=(0,H.useCallback)(async(t,r,i,o,d,u,c)=>{if(t.id===r)return;let m=[],p=!1;if(u?.sourceObject&&c?.sourceObject&&u.value!==c.value){let e=await l({activeItem:t,activeItemGroup:u,overItemGroup:c});e?m.push(e):p=!0}o&&o.id!==d&&!p&&m.push({dataType:eA.SingleSelect,memexProjectColumnId:e,value:{id:o.groupMetadata?.id??""}});let f="top"===i?b8.BEFORE:b8.AFTER,h=va(m,null!=r?{overItemId:r,side:f}:{overGroupId:n.allItemsByVerticalGroup[o?.id||""]?.groupedColumnId||""});if(h)try{await a(t.id,h,{})}catch(e){s(e)}},[l,e,n.allItemsByVerticalGroup,s,a]),c=o?u:d,m=(0,H.useCallback)(async(e,t,r)=>{let i=n.allItemsByVerticalGroup[t]?.items,l=r===Oa.TOP?i?.at(0):i?.at(-1);if(!l)return;let s=va(void 0,{overItemId:l.id,side:r===Oa.TOP?b8.BEFORE:b8.AFTER});s&&await a(e,s,{})},[n.allItemsByVerticalGroup,a]),p=(0,H.useCallback)(async(r,a,n,o)=>{if(!t&&function(e,t,r){return e.every(e=>{let a=e.columns[r];return a?t7(a)&&a.id===t.groupMetadata?.id:t.id===nQ})}(r,a,e))return;let d=[],u=!1;for(let t of r){let r=[];if(n?.sourceObject&&o?.sourceObject){let e=await l({activeItem:t,activeItemGroup:n,overItemGroup:o});if(e)r.push(e);else{u=!0;break}}a&&!u&&r.push({dataType:eA.SingleSelect,memexProjectColumnId:e,value:{id:a.groupMetadata?.id??""}}),d.push({itemId:t.id,updates:r})}if(!u)try{await i(d)}catch(e){s(e)}},[i,l,e,s,t]),f=(0,H.useMemo)(()=>({moveCard:c,moveCards:p,moveCardToPosition:m}),[c,m,p]);return(0,O.jsx)(On.Provider,{value:f,children:r})};function Ol(){let e=(0,H.useContext)(On);if(null==e)throw Error("useBoardCardActions must be used within a BoardCardActionsContext");return e}try{On.displayName||(On.displayName="BoardCardActionsContext")}catch{}let Os={RESET_STATE:"RESET_STATE",SET_DROP:"SET_DROP"},Oo={dropId:void 0,dropSide:void 0};function Od(e,t){switch(t.type){case Os.RESET_STATE:return{...Oo};case Os.SET_DROP:return{...e,dropId:t.dropId,dropSide:t.dropSide};default:return e}}let Ou={TOGGLE_SELECTED:"TOGGLE_SELECTED",TOGGLE_ALL_SELECTED:"TOGGLE_ALL_SELECTED",EXPAND_COLUMN_SELECTION:"EXPAND_COLUMN_SELECTION",EXPAND_COLUMN_SELECTION_VIA_KEYS:"EXPAND_COLUMN_SELECTION_VIA_KEYS",SELECT_ALL_CYCLE:"SELECT_ALL_CYCLE",INIT:"INIT"},Oc=(e,t)=>({type:Ou.TOGGLE_SELECTED,itemId:e,state:t}),Om=e=>({type:Ou.TOGGLE_ALL_SELECTED,state:e}),Op=e=>({type:Ou.INIT,state:e}),Of=(e,t,r)=>({type:Ou.EXPAND_COLUMN_SELECTION,anchorColumnIndex:e,anchorId:t,targetId:r}),Oh=(e,t,r)=>({type:Ou.EXPAND_COLUMN_SELECTION_VIA_KEYS,anchorColumnIndex:e,anchorId:t,direction:r}),Og=e=>({type:Ou.SELECT_ALL_CYCLE,columnIndex:e}),Oy=(e,t)=>{let r=t.state,a=e.selected[t.itemId]??!1;return{selected:{...e.selected,[t.itemId]:void 0!==r?r:!a}}},Ox=(e,t)=>{if(!0!==t.state)return{selected:{}};{let t=e.current.cardGrid.flatMap(e=>e.verticalGroups.flatMap(e=>e.items)),r={selected:{}};return t.map(e=>r.selected[e.id]=!0),r}},Ob=(e,t,r)=>{let a=t.current.cardGrid.flatMap(e=>e.verticalGroups[r.anchorColumnIndex]?.items??[]),n=a.findIndex(e=>e.id===r.anchorId),i=a.findIndex(e=>e.id===r.targetId);if(!(n>-1)||!(i>-1))return e;{let t=[];if(i<n?t=a.slice(i,n+1):i>n&&(t=a.slice(n,i+1)),!t.length)return e;{let e={selected:{}};for(let r of t)e.selected[r.id]=!0;return e}}},Ov=(e,t,r)=>{let a=t.current.cardGrid.flatMap(e=>e.verticalGroups[r.anchorColumnIndex]?.items??[]),n=a.reduce((e,t,r)=>(e[t.id]=r,e),{}),i=n[r.anchorId];if(void 0===i)return e;{let{selected:t}=e,l=Object.keys(t).filter(e=>t[e]&&void 0!==n[e]).sort((e,t)=>(n[e]??0)-(n[t]??0)),s=n[l[0]]??i,o=n[l[l.length-1]]??i,d=r.direction===ky.Up,u=r.direction===ky.Down,c=[];if(l.length<=1?d?c=a.slice(s-1,s+1):u&&(c=a.slice(s,s+2)):i<o?d?c=a.slice(s,o):u&&(c=a.slice(s,o+2)):d&&0!==s?c=a.slice(s-1,i+1):u&&(c=a.slice(s+1,i+1)),!c.length)return e;{let e={selected:{}};return c.map(t=>e.selected[t.id]=!0),e}}},Ow=(e,t,r)=>{let a=Object.keys(e.selected).filter(t=>!0===e.selected[t]),n=t.current.cardGrid.reduce((e,t)=>e+t.verticalGroups.reduce((e,t)=>e+t.items.length,0),0),i=t.current.cardGrid.flatMap(e=>e.verticalGroups[r.columnIndex]?.items??[]),l=0===a.length||a.length<i.length,s=a.length===n,o=i.every(e=>a.includes(e.id.toString()));if(l){let e={selected:{}};return i.map(t=>e.selected[t.id]=!0),e}return s?{selected:{}}:o?Ox(t,Om(!0)):e},Oj=(e,t)=>(0,H.useReducer)((e,r)=>{switch(r.type){case Ou.TOGGLE_SELECTED:return Oy(e,r);case Ou.TOGGLE_ALL_SELECTED:return Ox(t,r);case Ou.EXPAND_COLUMN_SELECTION:return Ob(e,t,r);case Ou.EXPAND_COLUMN_SELECTION_VIA_KEYS:return Ov(e,t,r);case Ou.SELECT_ALL_CYCLE:return Ow(e,t,r);case Ou.INIT:return r.state;default:return e}},e),{CardSelectionProvider:OC,useCardSelectionDispatch:OI}=(()=>{let e=(0,H.createContext)({state:{selected:{}},selectionDispatch:()=>void 0}),t=(0,H.memo)(function({initialState:t,metaRef:r,children:a}){let[n,i]=Oj(t,r),l=(0,H.useMemo)(()=>({state:n,selectionDispatch:i}),[n,i]);return Av("is-keyboard-moving-card",Object.keys(n.selected).length>0),(0,O.jsx)(e.Provider,{value:l,children:a})});return{CardSelectionContext:e,CardSelectionProvider:t,useCardSelectionDispatch:()=>(0,H.useContext)(e)}})();try{(A=CardSelectionContext).displayName||(A.displayName="CardSelectionContext")}catch{}try{OC.displayName||(OC.displayName="CardSelectionProvider")}catch{}function OS(e,t,r,a){let{selectionDispatch:n,state:{selected:i}}=OI(),{findMemexItem:l}=hi(),{navigationDispatch:s,stateRef:o}=iu(),d=(0,H.useCallback)((e,t)=>{n(Oc(e,t))},[n]),u=(0,H.useCallback)(e=>{n(Om(e))},[n]),c=(0,H.useCallback)(e=>{u(!1),d(e,!0)},[u,d]),m=(0,H.useCallback)(()=>{n(Op({selected:{}}))},[n]),p=(0,H.useCallback)((e,t,r)=>{n(Of(e,t,r))},[n]),f=(0,H.useCallback)(e=>{if(o.current?.focus?.type==="coordinate"){let{x:t,y:r}=o.current.focus.details;n(Oh(t,r,e))}},[o,n]),h=Object.keys(i).filter(e=>!0===i[e]).map(Number),g=(0,H.useMemo)(()=>h.map(e=>l(e)).filter(ro).filter(e=>e.contentType!==eL.RedactedItem),[l,h]),[y,x]=(0,H.useMemo)(()=>{let e=g.map(e=>e.id);return[e,new Set(e)]},[g]);return{expandColumnSelectionViaKeys:f,onCardClick:(0,H.useCallback)(n=>{if(e&&e.contentType!==eL.RedactedItem&&!n.defaultPrevented){if(t?.current?.contains(n.target)){n.stopPropagation();return}if(n.shiftKey&&o.current?.focus?.type==="coordinate"){let{x:t,y:r}=o.current.focus.details;p(t,r,e.id)}else if(rc(n)&&o.current?.focus?.type==="coordinate"){if(0===h.length){let{y:e}=o.current.focus.details;d(e,!0)}d(e.id),void 0!==a&&void 0!==r&&s(ih(r,a,e.id))}else g.length>1&&!x.has(e.id)?m():AW()||m();n.stopPropagation()}},[r,a,t,p,x,g.length,o,e,s,m,h.length,d]),resetSelection:m,filteredSelectedCardIds:y,selectSingleCard:c,state:i,toggleAllSelected:u,toggleCardSelected:d,selectAllCycle:(0,H.useCallback)(()=>{void 0!==a&&n(Og(a))},[a,n]),filteredSelectedCards:g}}let Ok={CARD:"card",COLUMN:"column"};function OT(e){return!!e&&"object"==typeof e&&"type"in e&&"string"==typeof e.type&&(e.type===Ok.CARD||e.type===Ok.COLUMN)}function ON(e){return OT(e)&&e.type===Ok.CARD}function O_(e){return OT(e)&&e.type===Ok.COLUMN}function OR({children:e,setDraggingItem:t}){let{groupedItems:r}=ZG(),{moveCard:a,moveCards:n}=Ol(),{resetSelection:i,filteredSelectedCards:l}=OS(),{navigationDispatch:s}=iu(),[{dropId:o,dropSide:d},u]=(0,H.useReducer)(Od,Oo),{postStats:c}=os(),{isSorted:m}=dN(),p=m||l.length>1,f=(0,IZ.Dy)((0,IZ.VT)(IZ.we,{activationConstraint:{distance:2}})),h=gY(),g=(0,H.useRef)(!1),y=(0,H.useCallback)(()=>{t(null),u({type:Os.RESET_STATE}),requestAnimationFrame(()=>{A0()}),g.current=!1},[u,t]),x=(0,H.useCallback)(e=>{y();let t=e.active.data.current,i=e.over?.data.current;if(ON(i)&&ON(t)){let e=r.horizontalGroups[t.horizontalGroupIndex],u=r.horizontalGroups[i.horizontalGroupIndex];(0,J.Z)(e),(0,J.Z)(u);let[m,p]=function(e,t,r){if(null==t||"top"===r)return[t,r];let a=e.findIndex(({id:e})=>e===t),n=e[a+1];return n?[n.id,"top"]:[t,r]}(u.itemsByVerticalGroup[i.verticalGroup.id]?.items??[],o?Number(o):void 0,d===b8.BEFORE?"top":"bottom");s(ih(i.horizontalGroupIndex,i.columnIndex,t.item.id)),l.length>1?n(l,i.verticalGroup,e,u):a(t.item,m,p,i.verticalGroup,t.verticalGroup.id,e,u),c({name:nu,ui:nc.MouseMove,context:JSON.stringify({fieldId:i.verticalGroup.groupMetadata?.id??nQ,...l.length>1?{itemIds:l.map(e=>e.id)}:{itemId:t.item.id}})})}else if(O_(i)&&ON(t)){let e=r.horizontalGroups[t.horizontalGroupIndex],d=r.horizontalGroups[i.horizontalGroupIndex];(0,J.Z)(e),(0,J.Z)(d),s(ih(i.horizontalGroupIndex,i.index,t.item.id)),l.length>1?n(l,i.verticalGroup,e,d):a(t.item,o,"bottom",i.verticalGroup,t.verticalGroup.id,e,d),c({name:nu,ui:nc.MouseMove,context:JSON.stringify({fieldId:i.verticalGroup.groupMetadata?.id??nQ,...l.length>1?{itemIds:l.map(e=>e.id)}:{itemId:t.item.id}})})}},[y,o,d,s,l,c,n,a,r.horizontalGroups]),b=(0,H.useCallback)(e=>{l.length<=1&&i(),g.current=!0;let r=e.active.data.current;ON(r)&&t(r.item)},[i,l.length,t]),v=(0,H.useCallback)(()=>y(),[y]),w=(0,H.useCallback)(e=>{if(!e.over||!g.current){A0();return}let t=e.over?.data.current;if(!t){u({type:Os.RESET_STATE});return}if(ON(t)){let r=t?.item.id,a=b7(e);t.ref.current&&r&&(u({type:Os.SET_DROP,dropId:r,dropSide:a}),p||AJ(t.ref.current,a,Ok.CARD))}else if(O_(t)){let e=r.horizontalGroups[t.horizontalGroupIndex];(0,J.Z)(e);let a=e.itemsByVerticalGroup[t.verticalGroup.id]?.items.at(-1)?.id,n=a?document.querySelector(`[data-board-card-id="${a}"]`):void 0,i=b8.AFTER;u({type:Os.SET_DROP,dropId:a,dropSide:i}),!p&&n?AJ(n,i,Ok.CARD):A0()}},[p,u,r.horizontalGroups]);return(0,O.jsx)(IZ.LB,{sensors:f,autoScroll:!1,accessibility:(0,H.useMemo)(()=>({container:h}),[h]),onDragStart:b,onDragMove:w,onDragEnd:x,onDragCancel:v,children:e})}try{OR.displayName||(OR.displayName="BoardDndContext")}catch{}function OP(){let{memex_table_without_limits:e}=n9();if(!e)return 0;let{totalCount:t}=dR();return t.value}let OD=()=>{let{navigationDispatch:e}=iu();return{enableOmnibar:(0,H.useCallback)((t={horizontalGroupIndex:0})=>{var r,a;e((r=t.columnId,a=t.horizontalGroupIndex,ir({focusType:is.Focus,details:{type:"footer",verticalGroupId:r,horizontalGroupIndex:a}})))},[e]),disableOmnibar:(0,H.useCallback)(()=>{e(iy())},[e])}},OE=(0,H.memo)(function(){let{navigationDispatch:e}=iu(),{state:{focus:t,previousFocus:r}}=id(),a=(0,H.useCallback)(()=>{e(ir({focusType:is.Focus,details:{type:"search-input"}}))},[e]),{memex_table_without_limits:n}=n9(),{filteredItems:i,groupedItems:l,groupByFieldOptions:s}=ZG(),o=n?OP():i.length,{enableOmnibar:d}=OD(),u=(0,H.useCallback)(t=>{if(r&&mz(t)===mV.ESCAPE){e(ig());return}for(let[t,r]of l.horizontalGroups.entries())if(!r.isCollapsed)for(let[a,n]of s.entries()){let i=r.itemsByVerticalGroup[n.id]?.items;if(i&&i.length>0){let r=i[0]?.id;if(!r)return;e(ih(t,a,r));return}}d(),t.preventDefault(),t.stopPropagation()},[r,d,e,l.horizontalGroups,s]),c=(0,H.useCallback)(e=>{switch(mz(e)){case mV.ESCAPE:case mV.ARROW_DOWN:u(e);return}},[u]),m=(0,H.useCallback)(e=>{if(mz(e)===mV.ARROW_DOWN){u(e);return}},[u]);return(0,O.jsx)(FQ,{onInputKeyDown:c,onClearButtonKeyDown:m,dispatchInputFocusEvent:a,isFocused:ip(t),filterCount:(0,H.useDeferredValue)(o)})});try{OE.displayName||(OE.displayName="BoardFilterInput")}catch{}let OA=(0,Y.ZP)(eO.Z).withConfig({displayName:"card-base__CardBase",componentId:"sc-91d1e0e1-0"})(["&:hover{border-color:",";}body:not(.is-keyboard-moving-card) &:focus-within :not(.js-disable-context-menu).js-context-menu-trigger,body:not(.is-keyboard-moving-card) &:focus :not(.js-disable-context-menu).js-context-menu-trigger,&:hover :not(.js-disable-context-menu).js-context-menu-trigger{opacity:unset;}body:not(.is-keyboard-moving-card) &:focus,body:not(.is-keyboard-moving-card) &.suspended-focus,body:not(.is-keyboard-moving-card) &.board-view-column-card:focus,body.is-keyboard-moving-card &.selected:not(.show-sash):focus{outline:none;border-color:",";box-shadow:0 0 0 1px ",";}body.is-keyboard-moving-card &{outline:none;}&.selected:not(:focus,.suspended-focus),body.is-keyboard-moving-card &.selected{outline:none;border-color:",";}"],(0,U.U2)("colors.border.default"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("colors.accent.emphasis"));try{OA.displayName||(OA.displayName="CardBase")}catch{}let OM=(0,Y.ZP)(OA).withConfig({displayName:"card-base-with-sash__CardBaseWithSash",componentId:"sc-5c6ba234-0"})(["position:relative;&::after,&::before{content:'';display:none;position:absolute;width:100%;background-color:",";height:",";border:0;border-radius:6px;z-index:12;}&.show-sash-card.show-sash-after{&::after{bottom:-7px;display:block;}}&.show-sash-card.show-sash-before{&::before{top:-7px;display:block;}}&.show-sash-card.show-sash-before:first-child{&::before{top:0;}}"],(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("space.1"));try{OM.displayName||(OM.displayName="CardBaseWithSash")}catch{}let OL=(e,t)=>{let{toggleFilter:r}=dv();return(0,H.useCallback)(a=>{a.target instanceof HTMLAnchorElement?a.stopPropagation():a.shiftKey||a.metaKey||r(e,t)},[e,t,r])},OF=(0,H.forwardRef)(({parentIssue:e,sx:t,as:r="a",...a},n)=>{let{openParentIssue:i}=kp();return e?(0,O.jsx)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",height:"20px",display:"flex"},children:(0,O.jsx)(yJ.Z,{onClick:()=>i(e),ref:n,as:r,target:"_blank",rel:"noreferrer","data-hovercard-url":`${e.url}/hovercard`,"data-hovercard-type":"issue",leadingVisual:()=>(0,O.jsx)(u7,{isDraft:!1,state:e.state,stateReason:e.stateReason,type:eL.Issue,size:bQ(a.size)}),sx:{"&, &:hover":{bg:"canvas.default"},...t},text:`${e.title} #${e.number}`,...(0,ef.f)("parent-issue-token"),...a})}):null});function OZ(e){return{...e.reviewer,hovercardUrl:"User"===e.reviewer.type?`/hovercards?user_id=${e.reviewer.id}`:`${e.reviewer.url}/hovercard`}}OF.displayName="ParentIssueToken";let OO=(0,H.forwardRef)(({reviews:e,...t},r)=>(0,O.jsx)(bX,{ref:r,avatars:e.map(OZ),text:rI.reviewersCount(e.length),...(0,ef.f)("reviewers-token"),...t}));OO.displayName="ReviewersToken";let OV=()=>{let{items:e}=dP(),{openProjectItemInPane:t,openPaneHierarchyHistoryItem:r}=dq(),{getAllProjectRelationships:a}=hu();return{createSidePanelHandler:(0,H.useCallback)(n=>{let i=xq(function(e){let{title:t,state:r,stateReason:a,url:n,number:i,repoId:l,repoName:s,userName:o,assignees:d,labels:u,trackedByTitle:c}=e;return{ownerId:e.key.ownerId,uuid:e.key.primaryKey.uuid,itemId:e.key.itemId,title:t,state:r,stateReason:a,url:n,displayNumber:i,repositoryId:l,repositoryName:s,ownerLogin:o,assignees:d,labels:u,position:0,trackedByTitle:c}}(n)),l=n.url.includes("/pull/");return s=>{if(s.ctrlKey||s.metaKey||!i.item||l)return;s.preventDefault();let o=e.find(e=>e.content.id===n.key.itemId&&e.contentType!==eL.DraftIssue);if(o)t(o);else{let n=a().get(i.item.itemId()),l=e.find(e=>e.content.id===n?.at(0));l&&(t(l),r(i))}}},[a,e,r,t])}},OB=(0,H.forwardRef)(({trackedBy:e,issueId:t,noPrefix:r=!1,projectOwner:a,as:n="a",...i},l)=>{let{createSidePanelHandler:s}=OV(),o=e.url.includes("/pull/"),{tasklist_tracked_by_redesign:d}=n9();d&&(r=!0);let u={as:"a","data-hovercard-type":o?"pull_request":d?"tracking":"issue","data-hovercard-url":d?`${e.url}/tracking/${t}/hovercard`:`${e.url}/hovercard`,href:e.url,onClick:s(e),rel:"noreferrer",target:"_blank"},c="a"===n,m=(0,O.jsxs)(O.Fragment,{children:[!r&&r$.trackedBy," ",(0,O.jsx)(u7,{state:e.state,stateReason:e.stateReason,type:o?"PullRequest":"Issue",isDraft:!1,sx:{mr:1,height:"14px",width:"14px"}}),d?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eB.Z,{sx:{color:"fg.default",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:e.title}),(0,O.jsxs)(eB.Z,{sx:{fontWeight:"normal",whiteSpace:"pre"},children:[" #",e.number]})]}):(0,O.jsx)(eB.Z,{sx:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},children:iI(e,a)})]}),p=d?{display:"flex",maxWidth:"285px"}:{},f=c?d?(0,O.jsx)(eO.Z,{sx:p,children:m}):m:(0,O.jsx)(uB.Z,{...u,sx:{color:"inherit",...p},children:m});return(0,O.jsx)(yJ.Z,{ref:l,text:f,...c?u:{},...i})});OB.displayName="TrackedByToken";let O$=({label:e,children:t})=>(0,O.jsxs)(eB.Z,{as:"li",sx:{p:0,m:0,maxWidth:"100%"},children:[null!==e&&(0,O.jsxs)(mg.T,{children:[e,": "]}),t]}),Oz=({content:e,fieldName:t,filterValue:r})=>{let a=(0,H.useRef)(null),[n,i]=(0,mH.g)({contentRef:a,"aria-label":`${t}: ${t3(e.toString())}`});return(0,O.jsxs)(O$,{label:t,children:[(0,O.jsx)(yJ.Z,{onClick:OL(t,r),as:"button",ref:a,text:(0,O.jsx)(u5,{children:e}),...(0,ef.f)(`custom-label-${t}`),...n,"aria-describedby":void 0}),i]})},OW=({fieldName:e,milestone:t})=>{let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e}: ${t.title}`});return(0,O.jsxs)(O$,{label:e,children:[(0,O.jsx)(ws,{ref:r,...a,milestone:t,onClick:OL(e,t.title),as:"button"}),n]})},OG=({fieldName:e,iteration:t})=>{let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e}: ${t.title}
${nN(t)}`});return(0,O.jsxs)(O$,{label:e,children:[(0,O.jsx)(vX,{ref:r,...a,iteration:t,onClick:OL(e,t.title),as:"button"}),n]})},OU=({progress:e,item:t})=>{let{openPane:r}=dQ(),a=(0,H.useRef)(null),n=(0,H.useCallback)(()=>{t&&t.contentType===eL.Issue&&r(t)},[t,r]),i=rI.progressPercentCount(e.percent),[l,s]=(0,mH.g)({contentRef:a,"aria-label":i});return 0===e.total?null:(0,O.jsxs)(O$,{label:"Progress",children:[(0,O.jsx)(bl,{ref:a,constantWidth:!0,progress:e,onClick:n,...l,...(0,ef.f)("tracks-label")}),s]})},OH=({trackedByItem:e,issueId:t,projectOwner:r})=>{let a=(0,H.useRef)(null);return(0,O.jsx)(O$,{label:null,children:(0,O.jsx)(OB,{...(0,ef.f)(`tracked-by-label-${e.key.itemId}`),as:"button",ref:a,onClick:OL("tracked-by",iC(e)),trackedBy:e,issueId:t,projectOwner:r})})},Oq=({fieldName:e,parentIssue:t})=>{let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e}: ${t.title} #${t.number}`});return(0,O.jsxs)(O$,{label:e,children:[(0,O.jsx)(OF,{as:"button",...a,ref:r,parentIssue:t,onClick:OL(e,t.nwoReference)}),n]})},OK=({fieldName:e,label:t})=>(0,O.jsx)(O$,{label:"Label",children:(0,O.jsx)(v6,{label:t,as:"button",onClick:OL(e,t.name),...(0,ef.f)("issue-label")})});function OQ({field:e,option:t}){let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e.name}: ${t.name}`});return(0,O.jsxs)(O$,{label:e.name,children:[(0,O.jsx)(y0,{option:t,...a,onClick:OL(e.name,t.name),as:"button",ref:r}),n]})}function OX({fieldName:e,issueType:t}){let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e}: ${t.name}`});return(0,O.jsxs)(O$,{label:e,children:[(0,O.jsx)(bK,{issueType:t,...a,onClick:OL(e,t.name),as:"button",ref:r}),n]})}function OY({fieldName:e,repository:t}){let r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":`${e}: ${t.nameWithOwner}`});return(0,O.jsxs)(O$,{label:e,children:[(0,O.jsx)(bJ,{withOwner:!0,repository:t,...a,onClick:OL(e,t.nameWithOwner),as:"button",ref:r,...(0,ef.f)("repository-label")}),n]})}function OJ({progress:e,parentIssue:t}){let r;let a=t.getItemIdentifier(),n=OL("parent-issue",a?`${a.owner}/${a.repo}#${a.number}`:""),{findColumn:i}=gt(),l=i(eM.SubIssuesProgress);return l instanceof SubIssuesProgressColumnModel&&(r=l.settings.progressConfiguration),(0,O.jsx)(eO.Z,{as:"button",sx:{marginTop:2,padding:0,width:"100%",background:"none",border:"none"},onClick:e=>{a&&n(e)},children:(0,O.jsx)(EN,{completed:e.completed,consistentContentSizing:!0,name:"Sub-issues progress",percentCompleted:e.percent_completed,total:e.total,variant:ET.SOLID,color:r?.color})})}let O0=(0,H.memo)(({field:e,columnData:t,item:r})=>{let{projectOwner:a}=i5(),n=null;switch(e.dataType){case eA.Labels:n=t[eM.Labels]?.map(t=>O.jsx(OK,{fieldName:e.name,label:t},t.id));break;case eA.LinkedPullRequests:n=t[eM.LinkedPullRequests]?.slice(0,10).map(e=>O.jsx(O$,{label:"Linked pull request",children:O.jsx(bY,{linkedPullRequest:e})},e.id));break;case eA.Reviewers:{let e=t[eM.Reviewers];n=e&&e.length>0&&(0,O.jsx)(O$,{label:"Reviewers",children:(0,O.jsx)(OO,{reviews:e,sx:{bg:"canvas.default"}})});break}case eA.Milestone:{let r=t[eM.Milestone];n=r&&(0,O.jsx)(OW,{milestone:r,fieldName:e.name});break}case eA.Iteration:{let r=t[e.id],a=r&&t7(r)?nR(e).find(e=>e.id===r.id):void 0;n=a&&(0,O.jsx)(OG,{iteration:a,fieldName:e.name});break}case eA.Tracks:{let e=t[eM.Tracks];n=e&&(0,O.jsx)(OU,{progress:e,item:r});break}case eA.ParentIssue:{let r=t[eM.ParentIssue];n=r&&(0,O.jsx)(Oq,{fieldName:e.name,parentIssue:r});break}case eA.TrackedBy:n=t[eM.TrackedBy]?.slice(0,10).map(e=>O.jsx(OH,{issueId:r.itemId(),trackedByItem:e,projectOwner:a},e.key.itemId));break;case eA.SingleSelect:{let r=t[e.id],a=r&&t7(r)?e.settings.options?.find(e=>e.id===r.id):void 0;n=a&&(0,O.jsx)(OQ,{option:a,field:e});break}case eA.Date:{let r=t[e.id];if(r&&t6(r)){let t=tH(r),a=tY(new Date(r.value));n=t&&(0,O.jsx)(Oz,{content:t,fieldName:e.name,filterValue:a})}break}case eA.Number:{let r=t[e.id];n=r&&t8(r)&&(0,O.jsx)(Oz,{content:r.value.toString(),fieldName:e.name,filterValue:r.value.toString()});break}case eA.Text:{let r=t[e.id];n=r&&t4(r)&&(0,O.jsx)(Oz,{content:r.raw,fieldName:e.name,filterValue:r.raw});break}case eA.Repository:{let r=t[eM.Repository];n=r&&(0,O.jsx)(OY,{fieldName:e.name,repository:r});break}case eA.IssueType:{let r=t[eM.IssueType];n=r&&(0,O.jsx)(OX,{fieldName:e.name,issueType:r});break}case eA.SubIssuesProgress:{let e=t[eM.SubIssuesProgress];n=e&&e.total>0&&(0,O.jsx)(OJ,{progress:e,parentIssue:r})}case eA.Assignees:case eA.Title:}return(0,O.jsx)(O.Fragment,{children:n})});O0.displayName="CardLabel";try{O$.displayName||(O$.displayName="LabelledLabel")}catch{}try{Oz.displayName||(Oz.displayName="CustomFieldLabel")}catch{}try{OW.displayName||(OW.displayName="MilestoneLabel")}catch{}try{OG.displayName||(OG.displayName="IterationLabel")}catch{}try{OU.displayName||(OU.displayName="TracksLabel")}catch{}try{OH.displayName||(OH.displayName="TrackedByLabel")}catch{}try{Oq.displayName||(Oq.displayName="ParentIssueLabel")}catch{}try{OK.displayName||(OK.displayName="LabelLabel")}catch{}try{OQ.displayName||(OQ.displayName="SingleSelectLabel")}catch{}try{OX.displayName||(OX.displayName="IssueTypeLabel")}catch{}try{OY.displayName||(OY.displayName="RepositoryLabel")}catch{}try{OJ.displayName||(OJ.displayName="SubIssuesProgressLabel")}catch{}let O1=e=>(function(){let{hasColumnData:e}=Tu();return t=>e(t)})()(e);var O2=r(99278);let O5=(0,U.U2)("colors.neutral.subtle"),O3=(0,U.U2)("colors.neutral.muted"),O4=(0,Y.F4)(["from{background-position:-200px 0;}to{background-position:200px 0;}"]),O8=(0,Y.iv)(["background-image:linear-gradient( to right,"," 0%,"," 40%,"," 50%,"," 100% );background-color:",";background-size:200px 50px;animation:"," 1.5s linear infinite;"],O5,O3,O5,O5,(0,U.U2)("colors.border.muted"),O4),O6=Y.ZP.div.withConfig({displayName:"placeholders__TextPlaceholder",componentId:"sc-8cee5be7-0"})(["display:inline-block;width:","px;height:4px;border-radius:6px;"," ",""],e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth)),O8,O2.Dh),O7=Y.ZP.div.withConfig({displayName:"placeholders__PillPlaceholder",componentId:"sc-8cee5be7-1"})(["--width:","px;display:inline-block;width:var(--width);height:14px;border-radius:100px;"," ",""],e=>e.minWidth+Math.floor(Math.random()*(e.maxWidth-e.minWidth)),O8,O2.Dh),O9=Y.ZP.div.withConfig({displayName:"placeholders__AvatarPlaceholder",componentId:"sc-8cee5be7-2"})(["display:inline-block;width:20px;height:20px;border-radius:20px;"," ",""],O8,O2.Dh),Ve={zIndex:0},Vt={cursor:"pointer",borderRadius:"50%",flexShrink:0,"&:focus-visible":{outline:e=>`2px solid ${e.colors.fg.danger}`,outlineOffset:0},".pc-AvatarItem":{display:"block"}},Vr=({assignee:e,...t})=>{let{toggleFilter:r}=dv(),a=(0,H.useCallback)(t=>{t.shiftKey||t.metaKey||r("assignee",e.login)},[r,e.login]),n=(0,H.useCallback)(t=>{"Enter"===t.key&&r("assignee",e.login)},[r,e.login]),i=(0,H.useRef)(null),[l,s]=(0,mH.g)({contentRef:i,"aria-label":e.login}),o=t.onFocus;return delete t.onFocus,(0,O.jsxs)(eB.Z,{sx:{...Vt,...t.sx},onClick:a,onFocus:o,onKeyDown:n,tabIndex:0,className:"pc-AvatarItem memex-AvatarItem",role:"button","aria-label":e.login,...(0,ef.f)("AvatarItemFilterButton"),children:[(0,O.jsx)(mo.O,{...t,ref:i,loading:"lazy",alt:e.login,src:e.avatarUrl,...l}),s]})},Va={all:"unset",m:0,p:0},Vn={".pc-AvatarStackBody:focus-within":{width:"auto"},".pc-AvatarStackBody:focus-within .pc-AvatarItem:first-child":{mr:"0px !important"},".pc-AvatarStackBody:focus-within .pc-AvatarItem":{mr:"4px !important",ml:"0px !important",opacity:1}},Vi=({assignees:e,alignRight:t=!1,sx:r,avatarProps:a,wrapperSx:n,...i})=>{let l=O1(eM.Assignees);return void 0===e||0===e.length?null:l?(0,O.jsxs)(eO.Z,{as:"figure",...i,sx:{...n,...Vn,...Va},children:[(0,O.jsxs)(mg.T,{as:"figcaption",children:["Assignees: ",function(e,t={reverse:!1}){if(0===e.length)return"none";let r=e.map(e=>e.login);return re(t.reverse?r.reverse():r)}(e,{reverse:t})]}),(0,O.jsx)(vs.Z,{alignRight:t,sx:{...Ve,...r},children:e.map(e=>(0,O.jsx)(Vr,{assignee:e,...a},e.id))})]}):(0,O.jsx)(O9,{})};try{Vr.displayName||(Vr.displayName="ClickableAvatar")}catch{}try{Vi.displayName||(Vi.displayName="AssigneeStack")}catch{}let Vl=()=>(0,O.jsx)(eO.Z,{sx:{width:"16px",height:"16px",bg:"border.muted",borderRadius:10,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),Vs=(0,H.memo)(function({item:e,columnData:t,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,disableContextMenu:s,verticalGroupId:o,...d}){let u=t.Assignees,{postStats:c}=os(),m=(0,H.useRef)(null),[p,f]=(0,H.useState)(!1),{hasWritePermissions:h}=i4(),g=null,y=(0,O.jsx)(Vi,{assignees:u,alignRight:!0,...(0,ef.f)("board-card-assignees")}),x=t.Title;if(!x)return null;switch(x.contentType){case eL.RedactedItem:g=(0,O.jsx)(Vo,{contextMenuRef:l,Icon:(0,O.jsx)(eZ.Z,{icon:eF.LockIcon,sx:{color:"fg.muted"}}),Title:(0,O.jsx)(eO.Z,{sx:{width:"48px",height:"4px",bg:"border.muted",borderRadius:1,borderWidth:"0",borderStyle:"solid",borderColor:"border.default"}}),Avatars:(0,O.jsx)(Vl,{}),item:e,disableContextMenu:!0,removeItem:a,verticalGroupId:o});break;case eL.DraftIssue:g=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Vo,{ref:m,contextMenuRef:l,Icon:(0,O.jsx)(eZ.Z,{icon:eF.IssueDraftIcon,"aria-label":"Draft issue",sx:{color:"fg.muted"}}),Title:(0,O.jsx)(eB.Z,{sx:{fontSize:0,color:"fg.muted"},children:"Draft"}),Avatars:y,item:e,convertToIssue:()=>f(!0),removeItem:a,archiveItem:r,disableContextMenu:s||!h,moveItemToTop:n,moveItemToBottom:i,verticalGroupId:o}),(0,O.jsx)(w0,{anchorRef:m,isOpen:p,item:e,onOpenChange:e=>f(e),onSuccess:()=>c({name:aD,ui:"card-context-menu",memexProjectItemId:e.id}),...(0,ef.f)("card-menu-repo-picker")})]});break;case eL.Issue:case eL.PullRequest:{let d=t.Repository?.name;g=(0,O.jsx)(Vo,{ref:m,contextMenuRef:l,Icon:(0,O.jsx)(u9,{title:x,size:16}),Title:(0,O.jsxs)(eB.Z,{sx:{fontSize:0,color:"fg.muted"},children:[d," #",x.value.number]}),Avatars:y,item:e,archiveItem:r,removeItem:a,disableContextMenu:s||!h,moveItemToTop:n,moveItemToBottom:i,verticalGroupId:o})}}return g?(0,O.jsx)(eO.Z,{...d,children:g}):null}),Vo=(0,H.forwardRef)(({Avatars:e,...t},r)=>(0,O.jsxs)(eO.Z,{sx:{display:"flex",justifyContent:"space-between"},ref:r,children:[(0,O.jsx)(Vc,{...t}),(0,O.jsx)(eO.Z,{sx:{display:"flex",flexShrink:0,justifyContent:"flex-end",alignItems:"center"},children:e})]}));Vo.displayName="HeaderInternal";let Vd={ARCHIVE_ITEM:"archive-item",DELETE_FROM_PROJECT:"delete-from-project"},Vu={height:"24px",alignItems:"center",userSelect:"none",cursor:"default",display:"flex","&:not(.js-disable-context-menu):not(.js-context-menu-open) .js-context-menu-trigger":{opacity:0},".js-context-menu-trigger:hover > div, &.js-context-menu-open .js-context-menu-trigger > div":{bg:"canvas.subtle"}},Vc=({Icon:e,Title:t,contextMenuRef:r,item:a,convertToIssue:n,archiveItem:i,removeItem:l,moveItemToBottom:s,moveItemToTop:o,disableContextMenu:d,verticalGroupId:u})=>{let[c,m]=(0,H.useState)(!1),[p,f]=(0,H.useState)(""),{filteredSelectedCardIds:h,state:g}=OS(),y=a.contentType!==eL.RedactedItem&&g[a.id],x=h.length<=1,b=a.contentType===eL.Issue||a.contentType===eL.PullRequest,v=a.contentType===eL.Issue||a.contentType===eL.DraftIssue,{isSorted:w}=dN(),{groupedItems:j,groupByField:C,groupByFieldOptions:I}=ZG(),S=(0,H.useRef)(null),[k,T]=(0,H.useState)(!1),[N,_]=(0,H.useState)(null);(0,H.useEffect)(()=>{let e=new URL(window.location.href);e.searchParams.append(ly,aR.ISSUE),e.searchParams.append(lx,a.id.toString()),f(e.href)},[a.id]),(0,H.useEffect)(()=>{N?.current&&c&&(setTimeout(()=>{N?.current?.focus()}),_(null))},[c,N]);let R=(0,H.useCallback)((e,t)=>{"selection"===t?(T(!1),setTimeout(()=>{let e=document.querySelector(`[data-board-card-id="${a.id}"] [aria-label="More actions"]`);e?.focus()})):"click-outside"===t?T(!1):(T(!1),m(!0),_(S))},[a.id]),P=(0,IL.W)({"js-disable-context-menu":d,"js-context-menu-open":c||k}),D=j.allItemsByVerticalGroup[u??""]?.items,E=D?.at(0)?.id===a.id,A=D?.at(-1)?.id===a.id,M=(j.allItemsByVerticalGroup[nQ]?.items.length??0)>0,L=(0,H.useCallback)(e=>{let t=I.some(t=>t.id===e);return e===nQ?M:t},[I,M]),{postStats:F}=os(),Z=(0,H.useCallback)(e=>{C&&F({name:nu,ui:nc.ContextMenu,context:JSON.stringify({type:"column",itemId:a.id,fieldId:C.databaseId,nextValue:e.nextValue,currentValue:e.currentValue})})},[C,a.id,F]),V=(0,H.useCallback)(e=>{m(e),e&&T(!1)},[]);return(0,O.jsxs)(eO.Z,{sx:Vu,className:P,children:[(0,O.jsx)(eO.Z,{sx:{mr:1},children:e}),t,!d&&(0,O.jsx)(eO.Z,{sx:{mr:0},className:"js-context-menu-trigger",children:(0,O.jsxs)(fj.P,{open:c,onOpenChange:V,anchorRef:r,children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{variant:"invisible",icon:eF.KebabHorizontalIcon,...(0,ef.f)("card-context-menu-trigger"),"aria-label":"More actions",sx:{ml:1,color:"fg.muted",width:"24px",height:"24px",padding:0}})}),(0,O.jsx)(fj.P.Overlay,{anchorSide:"inside-right",onMouseDown:e=>e.stopPropagation(),children:(0,O.jsxs)(mx.S,{children:[x&&(0,O.jsxs)(O.Fragment,{children:[n?(0,O.jsxs)(mx.S.Item,{onSelect:n,...(0,ef.f)("card-context-menu-convert-to-issue"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.IssueOpenedIcon,{})}),"Convert to issue"]}):null,b?(0,O.jsxs)(mx.S.LinkItem,{target:"_blank",href:a.getUrl(),rel:"noopener noreferrer",...(0,ef.f)("card-context-menu-open-in-new-tab"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.LinkExternalIcon,{})}),"Open in new tab"]}):null,b?(0,O.jsx)(Vf,{label:"Copy link",url:a.getUrl(),testId:"card-context-menu-copy-link"}):null,v?(0,O.jsx)(Vf,{label:"Copy link in project",url:p,testId:"card-context-menu-copy-link-in-project"}):null,(0,O.jsx)(mx.S.Divider,{}),!w&&(o||s)?(0,O.jsxs)(O.Fragment,{children:[o&&(0,O.jsxs)(mx.S.Item,{disabled:E,onSelect:()=>o(nc.ContextMenu),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.MoveToTopIcon,{})}),"Move to top"]}),s&&(0,O.jsxs)(mx.S.Item,{disabled:A,onSelect:()=>s(nc.ContextMenu),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.MoveToBottomIcon,{})}),"Move to bottom"]})]}):null,(0,O.jsxs)(mx.S.Item,{onSelect:()=>T(!0),ref:S,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArrowBothIcon,{})}),"Move to column",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(eF.ChevronRightIcon,{})})]}),(0,O.jsx)(mx.S.Divider,{})]}),i?(0,O.jsxs)(mx.S.Item,{id:Vd.ARCHIVE_ITEM,onSelect:()=>i?.(a3),...(0,ef.f)("card-context-menu-archive-item"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),y&&h.length>1?`Archive ${h.length} selected items`:"Archive",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(Ih,{})})]}):null,(0,O.jsxs)(mx.S.Item,{id:Vd.DELETE_FROM_PROJECT,variant:"danger",onSelect:()=>l(a3),...(0,ef.f)("card-context-menu-delete"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),y&&h.length>1?`Delete ${h.length} selected items from project`:"Delete from project",(0,O.jsx)(mx.S.TrailingVisual,{children:(0,O.jsx)(If,{})})]})]})})]})}),!d&&k&&C&&(0,O.jsxs)(O.Fragment,{children:[C.dataType===eA.SingleSelect&&(0,O.jsx)(Vm,{model:a,groupByField:C,onOpenChange:R,anchorRef:r,isColumnVisible:L,onChangeField:Z}),C.dataType===eA.Iteration&&(0,O.jsx)(Vp,{model:a,groupByField:C,onOpenChange:R,anchorRef:r,isColumnVisible:L,onChangeField:Z})]})]})};function Vm({model:e,groupByField:t,onOpenChange:r,anchorRef:a,isColumnVisible:n,onChangeField:i}){let[l,s]=(0,H.useState)(""),o=tz(e.columns[t.id]),{options:d,saveSelected:u}=wI({model:e,columnModel:t,selectedValueId:o?o.id:null}),c=(0,H.useMemo)(()=>[...d,{id:nQ,label:`No ${t.name}`,color:"GRAY",description:"",descriptionHtml:"",name:`No ${t.name}`,nameHtml:`No ${t.name}`,selected:null===o}],[t.name,d,o]),m=c.every(e=>"GRAY"===e.color),p=(0,H.useCallback)(e=>wC(e,!m),[m]),f=(0,H.useMemo)(()=>{let e=c.filter(e=>n(e.id));return""!==l?wv(l,e,10).filteredItems:e},[l,n,c]),h=(0,H.useMemo)(()=>f.map(p),[p,f]),g=(0,H.useMemo)(()=>h.find(e=>e.selected),[h]);return e.contentType===eL.RedactedItem?null:(0,O.jsx)(c1.b,{open:!0,onOpenChange:r,items:h,selected:g,filterValue:l,onFilterChange:s,onSelectedChange:e=>{e&&e.id!==nQ?(u(d.filter(t=>t.id===e.id)),i({nextValue:e.id??null,currentValue:o?o.id:null})):(u([]),i({nextValue:null,currentValue:o?o.id:null}))},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,O.jsx)("div",{...t,children:e}),anchorRef:a,...(0,ef.f)("move-to-single-select-field-menu")})}function Vp({model:e,groupByField:t,onOpenChange:r,anchorRef:a,isColumnVisible:n,onChangeField:i}){let[l,s]=(0,H.useState)(""),o=e.getCustomField(t.id),d=nP(t.settings.configuration).find(e=>e.id===o?.id)??null,{activeOptions:u,completedOptions:c,filterChange:m,saveSelected:p}=vQ({model:e,columnModel:t,iteration:d}),f=(0,H.useMemo)(()=>[...u,...c,{id:nQ,label:`No ${t.name}`,selected:void 0===o,duration:0,startDate:"",title:`No ${t.name}`,titleHtml:`No ${t.name}`}],[u,c,t.name,o]),h=(0,H.useMemo)(()=>(""!==l?m(l,f,10).filteredItems:f).filter(e=>n(e.id)),[m,l,n,f]),g=(0,H.useMemo)(()=>h.map(vH),[h]),y=(0,H.useMemo)(()=>g.find(e=>e.selected),[g]);return e.contentType===eL.RedactedItem?null:(0,O.jsx)(c1.b,{open:!0,onOpenChange:r,items:g,selected:y,filterValue:l,onFilterChange:s,onSelectedChange:e=>{e&&e.id!==nQ?(p(f.filter(t=>t.id===e.id)),i({nextValue:e.id??null,currentValue:o?o.id:null})):(p([]),i({nextValue:null,currentValue:o?o.id:null}))},placeholderText:"Filter options",renderAnchor:({children:e,...t})=>(0,O.jsx)("div",{...t,children:e}),anchorRef:a,...(0,ef.f)("move-to-iteration-field-menu")})}let Vf=({url:e,label:t,testId:r})=>{let a=(0,H.useCallback)(()=>{try{navigator.clipboard.writeText(e)}catch(e){}},[e]);return(0,O.jsxs)(mx.S.Item,{onSelect:a,...(0,ef.f)(r),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.CopyIcon,{})}),t]})};try{Vl.displayName||(Vl.displayName="RedactedAvatar")}catch{}try{Vs.displayName||(Vs.displayName="Header")}catch{}try{Vc.displayName||(Vc.displayName="IconAndTitle")}catch{}try{Vm.displayName||(Vm.displayName="MoveToSingleSelectFieldMenu")}catch{}try{Vp.displayName||(Vp.displayName="MoveToIterationFieldMenu")}catch{}try{Vf.displayName||(Vf.displayName="CopyUrl")}catch{}let Vh={fontSize:1},Vg=({item:e,disableFocus:t})=>{let r=t0(e.columns.Title);switch(e.contentType){case eL.RedactedItem:return(0,O.jsx)(u5,{sx:Vh,children:r});case eL.DraftIssue:case eL.Issue:return(0,O.jsx)(Vx,{item:e,disableFocus:t});case eL.PullRequest:return r?(0,O.jsx)(uB.Z,{href:e.content.url,target:"_blank",rel:"noreferrer",onClick:e=>e.stopPropagation(),sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default",textAlign:"left",fontSize:1,"&:hover":{textDecoration:"underline",color:"accent.fg"}},tabIndex:t?-1:0,...(0,ef.f)("card-title-external-link"),children:(0,O.jsx)(u5,{children:r})}):null}},Vy=(0,H.memo)(Vg);Vy.displayName="Title";let Vx=(0,H.forwardRef)(({item:e,disableFocus:t},r)=>{let a=e.getHtmlTitle(),{openProjectItemInPane:n}=dq(),{openPane:i}=dQ(),l="#";e.contentType===eL.Issue&&(l=e.getUrl());let s=(0,H.useRef)(null),o=(0,H.useCallback)(t=>{if((t.metaKey||t.ctrlKey)&&e.contentType!==eL.DraftIssue){t.stopPropagation();return}s?.current===document.activeElement?n(e,()=>{s?.current&&s.current.focus()}):i(e),t.preventDefault()},[e,i,n]);return(0,O.jsx)(uB.Z,{ref:s,role:"button",href:l,target:"_blank",rel:"noreferrer",onClick:o,tabIndex:t?-1:0,...(0,ef.f)("card-side-panel-trigger"),children:(0,O.jsx)(u5,{ref:r,sx:{code:{fontFamily:"fonts.mono",fontSize:0},color:"fg.default","&:hover":{cursor:"pointer",color:"accent.fg",textDecoration:"underline"}},children:a})})});Vx.displayName="SidePanelLink";try{Vg.displayName||(Vg.displayName="TitleFunc")}catch{}let Vb=new Set([eM.Labels,eM.Milestone,eM.LinkedPullRequests,eM.Repository,eM.Reviewers,eM.Status,eM.Tracks,eM.TrackedBy,eM.IssueType,eM.SubIssuesProgress,eM.ParentIssue]),Vv=(0,H.memo)(function({item:e,verticalGroupId:t,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,isDragging:s=!1}){let{groupedByColumnId:o}=dk(),{visibleFields:d}=Sb(),{state:u}=OS(),c=d.find(e=>e.id===eM.SubIssuesProgress),m=d.filter(e=>e.id!==o&&(e.userDefined||Vb.has(e.id))&&e.id!==c?.id),p=e.columns,f=m.length>0||void 0!==c,h=Number(p["Sub-issues progress"]?.total)>0,g=e.contentType===eL.RedactedItem,y=!g&&!!u[e.id],x=(0,H.useId)();return(0,O.jsxs)(eO.Z,{sx:{borderRadius:2,borderWidth:"0",pt:2,pb:"12px",lineHeight:1.3,backgroundColor:e=>`${y?e.colors.accent.subtle:e.colors.canvas.overlay}`,borderStyle:"solid",borderColor:e=>`${e.colors.border.default}`,color:e=>`${g?e.colors.fg.muted:e.colors.fg.default}`},children:[(0,O.jsxs)(eO.Z,{sx:{px:"12px"},children:[(0,O.jsx)(Vs,{...(0,ef.f)("board-card-header"),item:e,verticalGroupId:t,columnData:p,mb:1,archiveItem:r,removeItem:a,moveItemToTop:n,moveItemToBottom:i,contextMenuRef:l,disableContextMenu:s}),(0,O.jsx)(Vy,{item:e,disableFocus:s})]}),f&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{...(0,ef.f)("card-labels"),as:"ul","aria-label":"Fields","aria-describedby":x,sx:{flexWrap:"wrap",display:"flex",gap:1,m:0,p:0,mt:2,mb:0,px:"12px",listStyle:"none"},children:[m.map(t=>(0,O.jsx)(O0,{field:t,item:e,columnData:p},t.id)),c&&h&&(0,O.jsx)(O0,{field:c,item:e,columnData:p},c.id)]}),(0,O.jsx)(mg.T,{id:x,children:"Click a value to filter the view"})]})]})});try{Vv.displayName||(Vv.displayName="CardInternalContent")}catch{}function Vw({item:e}){return(0,O.jsx)(OM,{inert:"inert",sx:{opacity:.5,borderRadius:2,borderColor:"border.muted",borderWidth:"1px",borderStyle:"solid",boxShadow:"shadow.medium"},...(0,ef.f)("drag-overlay"),children:(0,O.jsx)(Vv,{item:e,contextMenuRef:(0,H.useRef)(null),removeItem:fV.Z,isDragging:!0})})}try{Vw.displayName||(Vw.displayName="DragOverlayCard")}catch{}let Vj={mr:"8px",width:"350px",minWidth:"350px",display:"flex",flexDirection:"column",overflowY:"hidden",borderRadius:"radii.2",bg:"canvas.inset","&.only":{borderRadius:e=>`${e.radii[2]} ${e.radii[2]} 0 0`,borderBottomColor:"transparent"},"&.hidden:not(.last-group)":{borderRadius:0,borderTopColor:"transparent",borderBottomColor:"transparent"},"&.hidden.last-group":{borderRadius:e=>`0 0 ${e.radii[2]} ${e.radii[2]}`,borderTopColor:"transparent"},"&.drag-outline:not(.only)":{borderColor:"accent.emphasis",boxShadow:e=>`0 0 0 1px ${e.colors.accent.emphasis}`},"&::after, &::before":{content:'""',display:"none",position:"absolute",top:"8px",width:"4px",bg:"accent.emphasis",height:"calc(100% - 16px)",border:0,borderRadius:"6px",zIndex:12},"body.is-dragging &.show-sash-column.show-sash-after":{"&::after":{ml:"352px",display:"block"}},'body.is-dragging &.show-sash-column.show-sash-before:not([data-dnd-drag-id="no_vertical_group"])':{"&::before":{ml:"-6px",display:"block"}}},VC=(0,H.memo)((0,H.forwardRef)(({headerContent:e,testingName:t,children:r,...a},n)=>(0,O.jsxs)(eO.Z,{...a,sx:{...Vj,...a.sx},ref:n,"data-board-column":t,...(0,ef.f)("board-view-column"),children:[(0,O.jsx)(eO.Z,{sx:{flexDirection:"column",flexShrink:0,display:"flex"},children:e}),r]})));VC.displayName="ColumnFrame";let VI=(e,t)=>{switch(e.dataType){case eA.Iteration:return nR(e).find(e=>e.id===t)??void 0;case eA.SingleSelect:return e.settings.options?.find(e=>e.id===t)??void 0}},VS=(e,t)=>{let r=VI(e,t);return r?"title"in r?r.title:r.name:void 0},Vk=()=>{let{updateIterationConfiguration:e}=DY();return{destroyColumnIteration:(0,H.useCallback)(async(t,r)=>{if(t.dataType!==eA.Iteration)return;let a=VI(t,r);if(!a||!t.settings.configuration)return;let n=D4(t.settings.configuration,a);await e(t,n)},[e])}},VT=e=>{let{workflowsUsingColumnOption:t}=uO(),{destroyColumnOption:r}=wR(),{destroyColumnIteration:a}=Vk(),n=(0,H.useCallback)(async(e,t)=>nq(e)?r(e,{id:t}):nH(e)?a(e,t):void 0,[a,r]),i=(0,H.useCallback)(e=>nq(e)||nH(e),[]),{items:l}=dP(),s=(0,H.useCallback)((e,r)=>t(e,r),[t]),o=(0,H.useCallback)(t=>e?l.map(t=>t.columns[e.id]).filter(e=>e&&"id"in e&&e.id===t).length:0,[e,l]),d=Dj(),u=(0,H.useCallback)(async t=>{if(!e||!i(e))return;let r=VS(e,t),a=o(t);if(!r||!e)return;let l=s(e.databaseId,t).length;if(await d({field:e,values:[r],affectedItems:a,affectedWorkflows:l}))return n(e,t)},[e,i,o,s,d,n]);return{deleteGroup:e&&i(e)?u:void 0}},VN=({groupId:e})=>{let t=(0,H.useRef)(null),{isVisible:r}=uK({ref:t}),a=(0,H.useRef)(!1),{isFetchingNextPage:n,isFetchingNextPageForGroupedItems:i,fetchNextPage:l,fetchNextPageForGroupedItems:s,hasNextPage:o,hasNextPageForGroupedItems:d}=dR();return(0,H.useEffect)(()=>{if(a.current===r||(a.current=r,!r))return;let t=e?{groupId:e}:void 0;t&&d(t)&&!i(t)?s(t):o&&!n&&l()},[r,o,l,n,e,s,d,i]),(0,H.useMemo)(()=>({ref:t,hasNextPage:e?d({groupId:e}):o}),[e,o,d])},V_={borderRadius:2,transition:"transform 75ms",border:"1px solid",borderColor:"border.default"},VR=({groupId:e})=>{let{ref:t,hasNextPage:r}=VN({groupId:e}),a=e?(0,O.jsx)(VE,{}):(0,O.jsx)(VA,{});return(0,O.jsx)("div",{ref:t,...(0,ef.f)(`board-pagination${e?`-${e}`:""}`),children:r?a:null})},VP=()=>(0,O.jsx)(OM,{...(0,ef.f)("placeholder-card"),className:"board-view-column-card",sx:{display:"flex",flexDirection:"column",gap:2,p:2,backgroundColor:"canvas.overlay",borderColor:"border.default",borderStyle:"solid",borderRadius:2,borderWidth:"1px"},children:[...[,,,,,].keys()].map(e=>(0,O.jsx)(O6,{style:{height:8},minWidth:80,maxWidth:200,...(0,ef.f)("placeholder")},e))}),VD=()=>(0,O.jsx)(VC,{sx:{...V_,p:2,gap:2},className:"visible",headerContent:(0,O.jsx)(O6,{style:{height:12},minWidth:80,maxWidth:200,...(0,ef.f)("placeholder-column-header")}),children:(0,O.jsx)(VE,{})}),VE=(0,H.memo)(VP),VA=(0,H.memo)(VD);try{VR.displayName||(VR.displayName="BoardPagination")}catch{}try{VP.displayName||(VP.displayName="PlaceholderCardUnmemoized")}catch{}try{VD.displayName||(VD.displayName="PlaceholderColumnUnmemoized")}catch{}try{VE.displayName||(VE.displayName="PlaceholderCard")}catch{}try{VA.displayName||(VA.displayName="PlaceholderColumn")}catch{}let VM=e=>{e.kind;return rI.addItem},VL={loaded:"loaded",missing:"missing",loading:"loading"};function VF(){let[e,t]=(0,H.useState)(!1),{missingRequiredColumnData:r}=oi();return((0,H.useEffect)(()=>{if(!r)return;let e=!0,a=window.setTimeout(()=>{e&&t(!0)},300);return()=>{e=!1,window.clearTimeout(a)}},[r]),(0,H.useEffect)(()=>{!r&&e&&t(!1)},[e,r]),e&&r)?{loadingState:VL.loading}:r?{loadingState:VL.missing}:{loadingState:VL.loaded}}let VZ=({aggregates:e,hideItemsCount:t,itemsCount:r,columnLimit:a,counterSx:n})=>{let{itemCountContent:i,sx:l}=function({columnLimit:e,itemsCount:t}){return void 0===e?{itemCountContent:t,sx:VO.default}:{itemCountContent:`${t} / ${e}`,sx:function({columnLimit:e,itemsCount:t}){return e<t?VO.danger:VO.default}({columnLimit:e,itemsCount:t})}}({columnLimit:a,itemsCount:r});return(0,O.jsxs)(O.Fragment,{children:[!t&&(0,O.jsx)(pm.Z,{sx:{...n,...l},...(0,ef.f)("column-items-counter"),children:i}),e.map(e=>(0,H.createElement)(y8.Z,{sx:{...n,color:"fg.muted"},...(0,ef.f)(`column-sum-${e.name}`),key:`aggregate-sum-${e.name}`,children:[e.name,": ",function(e){return Number.isInteger(e.sum)?e.sum.toString():e.sum.toFixed(e.maxDecimalPlaces).replace(/\.?0+$/,"")}(e)]}))]})},VO={default:{color:"fg.muted"},danger:{color:"danger.fg",backgroundColor:"danger.subtle"}};try{VZ.displayName||(VZ.displayName="AggregateLabels")}catch{}let VV={position:"sticky",right:0,mr:1},VB=({name:e,isColumn:t=!1,onRename:r,onEditLimit:a,onEditDetails:n,onHide:i,onDelete:l,items:s})=>{let o=(0,H.useMemo)(()=>s.filter(e=>e.contentType!==eL.RedactedItem),[s]),{openArchiveConfirmationDialog:d}=b$(),{openRemoveConfirmationDialog:u}=bU(),c=(0,H.useCallback)(()=>{0!==s.length&&d(s.map(e=>e.id),a8,rI.archiveGroupItemsConfirmationTitle,rI.archiveGroupItemsConfirmationMessage(s.length))},[d,s]),m=(0,H.useCallback)(()=>{0!==s.length&&u(s.map(e=>e.id),a8,{title:rI.deleteGroupItemsConfirmationTitle,content:rI.deleteGroupItemsConfirmationMessage(s.length)})},[u,s]),p=[];return r&&p.push((0,O.jsx)(V$,{onSelect:r},"rename")),a&&p.push((0,O.jsx)(Vz,{onSelect:a},"editLimit")),n&&p.push((0,O.jsx)(VW,{onSelect:n},"editDetails")),i&&p.push((0,O.jsx)(VG,{onSelect:i},"hide")),l&&p.push((0,O.jsx)(VU,{onSelect:l},"delete")),(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(ZD.u,{type:"label",text:rI.groupHeaderMenu(e,t),children:(0,O.jsx)(cd.r,{variant:"invisible",leadingVisual:eF.KebabHorizontalIcon,size:"small",sx:VV})})}),(0,O.jsx)(fj.P.Overlay,{align:"end",children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Items"}),(0,O.jsx)(VH,{disabled:0===o.length,onSelect:c}),(0,O.jsx)(Vq,{disabled:0===o.length,onSelect:m})]}),p.length>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:t?"Column":"Group"}),p]})]})]})})]})},V$=e=>(0,O.jsxs)(mx.S.Item,{...e,...(0,ef.f)("group-context-menu-rename"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PencilIcon,{})}),"Rename"]}),Vz=e=>(0,O.jsxs)(mx.S.Item,{...e,...(0,ef.f)("group-context-menu-set-column-limit"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.NumberIcon,{})}),"Set limit"]}),VW=e=>(0,O.jsxs)(mx.S.Item,{...e,...(0,ef.f)("group-context-menu-edit-option"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.PencilIcon,{})}),"Edit details"]}),VG=e=>(0,O.jsxs)(mx.S.Item,{...e,...(0,ef.f)("group-context-menu-hide-column"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.EyeClosedIcon,{})}),"Hide from view"]}),VU=e=>(0,O.jsxs)(mx.S.Item,{variant:"danger",...e,...(0,ef.f)("group-context-menu-delete"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete"]}),VH=e=>(0,O.jsxs)(mx.S.Item,{...e,...(0,ef.f)("group-context-menu-archive-cards"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ArchiveIcon,{})}),"Archive all"]}),Vq=e=>(0,O.jsxs)(mx.S.Item,{variant:"danger",...e,...(0,ef.f)("group-context-menu-delete-cards"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TrashIcon,{})}),"Delete all"]});try{VB.displayName||(VB.displayName="GroupMenu")}catch{}try{V$.displayName||(V$.displayName="RenameGroupAction")}catch{}try{Vz.displayName||(Vz.displayName="EditGroupLimitAction")}catch{}try{VW.displayName||(VW.displayName="EditGroupDetailsAction")}catch{}try{VG.displayName||(VG.displayName="HideGroupAction")}catch{}try{VU.displayName||(VU.displayName="DeleteGroupAction")}catch{}try{VH.displayName||(VH.displayName="ArchiveItemsAction")}catch{}try{Vq.displayName||(Vq.displayName="DeleteItemsAction")}catch{}let VK="INPUT",VQ=(0,H.memo)((0,H.forwardRef)(function({item:e,scrollIntoView:t,index:r,verticalGroup:a,columnIndex:n,horizontalGroupIndex:i,onMouseDown:l,focusType:s,keyboardMovingCard:o,isDragDisabled:d,isVisible:u,size:c,...m},p){let f=(0,H.useContext)(Y.Ni),h=(0,H.useRef)(null),g=(0,H.useRef)(null);(0,my.z)(p,g);let{moveCard:y,moveCards:x,moveCardToPosition:b}=Ol(),{navigationDispatch:v,stateRef:w}=iu(),{expandColumnSelectionViaKeys:j,filteredSelectedCardIds:C,onCardClick:I,resetSelection:S,selectSingleCard:k,selectAllCycle:T,state:N}=OS(e,h,i,n),{clearClipboard:_,copyItems:R}=ko(),{openPane:P}=dQ(),{supportedItemTypes:D}=dq(),{hasWritePermissions:E}=i4(),{findMemexItem:A}=hi(),{isSorted:M}=dN(),{postStats:L}=os(),F=e.contentType===eL.RedactedItem,Z=!F&&!!N[e.id],V=o?.cardIds.includes(e.id),B=(o?.cardIds.length??0)>1,$=s===is.Focus&&o&&o.cardIds.length<=1,z=s===is.Focus?o?.sashSide:void 0,W=(0,H.useCallback)(()=>{v(ih(i,n,e.id))},[i,n,e,v]),G=(0,H.useCallback)(()=>{var t;S(),v((t=e.id,ir({focusType:is.Focus,details:{type:"nearestCard",indexOfCardWithinColumn:r,columnIndex:n,cardId:t,findMemexItem:A,horizontalGroupIndex:i}})))},[S,v,r,n,i,e.id,A]),{openRemoveConfirmationDialog:U}=bU(void 0,G,W),{openArchiveConfirmationDialog:q}=b$(void 0,G,W),K=(0,H.useCallback)(t=>{let r=Z&&C.length>1?C:[e.id];r.every(e=>{let t=A(e);return!!t&&bR(t.contentType)})&&q(r,t)},[Z,C,e.id,A,q]),Q=(0,H.useCallback)(t=>{U(Z&&C.length>1?C:[e.id],t)},[C,Z,e.id,U]),X=(0,H.useCallback)(t=>{E&&(b(e.id,a.id,"top"),L({name:nu,ui:t,context:JSON.stringify({type:"top",fieldId:a.groupMetadata?.id??nQ,itemId:e.id})}))},[E,e.id,b,L,a.groupMetadata?.id,a.id]),J=(0,H.useCallback)(t=>{E&&(b(e.id,a.id,"bottom"),L({name:nu,ui:t,context:JSON.stringify({type:"bottom",fieldId:a.groupMetadata?.id??nQ,itemId:e.id})}))},[E,e.id,b,L,a.groupMetadata?.id,a.id]),ee=(0,H.useCallback)(()=>{R(Z&&C.length>1?C.reduce((e,t)=>{let r=A(t);return r&&e.push(r),e},[]):[e],{withHeaders:!0})},[Z,C,e,A,R]),et=u?"unset":`${c}px`,er=(0,H.useMemo)(()=>({...m.sx,borderRadius:2,borderColor:f.colors.border.default,borderWidth:"1px",borderStyle:"solid",boxShadow:f.shadows.shadow.medium,height:et,"&:hover":{cursor:F?"not-allowed":d?"default":"grab"}}),[m.sx,f.colors.border.default,f.shadows.shadow.medium,et,F,d]),ea=(0,H.useCallback)(()=>{if(o&&S(),0===C.length&&k(e.id),E){let t=C.length>1?C:[e.id],r=w.current?.focus?.type==="coordinate"?w.current.focus.details.y:void 0;r&&v(ia({type:"coordinate",focusType:is.Focus,details:{x:n,y:r,meta:{horizontalGroupIndex:i,keyboardMovingCard:{sashSide:"after",cardIds:t,returnFocus:{horizontalGroupIndex:i,columnIndex:n,cardId:r}}}}}))}else v(ih(i,n,e.id))},[o,C,E,S,k,i,e.id,w,v,n]),en=(0,H.useCallback)((t,r)=>{let l=A(t);if(!l)return;y(l,e.id,r,a);let s=a.groupMetadata?.id??nQ;L({name:nu,ui:nc.KeyboardShortcut,context:JSON.stringify({fieldId:s,itemId:t})}),S(),v(ih(i,n,t))},[A,y,e.id,a,L,S,v,i,n]),ei=(0,H.useCallback)(e=>{let t=e.map(e=>A(e)).filter(ro);x(t,a);let r=a.groupMetadata?.id??nQ;L({name:nu,ui:nc.KeyboardShortcut,context:JSON.stringify({fieldId:r,itemIds:t.map(e=>e.id)})}),o&&v(ih(i,n,o.returnFocus.cardId))},[x,a,L,o,A,v,i,n]);(0,H.useEffect)(()=>{s===is.Focus&&g.current&&(g.current.focus(),g.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[s,g]),(0,H.useEffect)(()=>{t&&g.current?.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})},[t]);let el=(0,H.useCallback)(t=>{let r=w.current?.focus?.type==="coordinate";if(t.shiftKey||rc(t)&&r)return t.preventDefault();o&&S(),s!==is.Edit&&(function(e,t){if(e.current){let r=t.target.closest("[data-suspend-card-focus]");return null!=r&&e.current.contains(r)}return!1}(g,t)?(t.stopPropagation(),v(ih(i,n,e.id,is.Suspended))):(v(ih(i,n,e.id)),l&&l(t)))},[w,o,s,S,v,n,e.id,l,i]),es=(0,H.useCallback)(t=>{let r=t.target;if(s===is.Focus&&r.nodeName!==VK){let r=kg(fV.Z,t);if(r.action){if(kf(t),(M||B)&&o&&r.action.navigation.y)return;v(r.action),o||S()}else if((r.keyAsShortcut===mV.DELETE||r.keyAsShortcut===mV.BACKSPACE)&&E&&!F)Q(a4),kf(t);else if(r.keyAsShortcut===mV.ARCHIVE)K(a4),kf(t);else if(r.keyAsShortcut===mV.SHIFT_ARROW_UP||r.keyAsShortcut===mV.SHIFT_ARROW_DOWN)o&&W(),j(r.keyAsShortcut===mV.SHIFT_ARROW_UP?ky.Up:ky.Down),kf(t);else if(r.keyAsShortcut===mV.ENTER&&o){let e="before"===z?"top":"bottom";if(1===o.cardIds.length){let t=o.cardIds[0];t&&en(t,e)}else ei(o.cardIds)}else r.keyAsShortcut!==mV.SHIFT_SPACE&&r.keyAsShortcut!==mV.ENTER||F?r.keyAsShortcut===mV.SPACE&&D.has(e.contentType)?P(e):r.keyAsShortcut===mV.META_A?(T(),kf(t)):r.keyAsShortcut===mV.ESCAPE?(_(),S(),o&&v(ih(o.returnFocus.horizontalGroupIndex,o.returnFocus.columnIndex,o.returnFocus.cardId))):r.keyAsShortcut===mV.META_C&&E&&!F?ee():r.keyAsShortcut===mV.TAB&&(S(),o?v(ih(o.returnFocus.horizontalGroupIndex,o.returnFocus.columnIndex,o.returnFocus.cardId)):v(iy())):ea()}},[s,E,F,o,D,e,M,B,v,S,Q,K,j,W,z,en,ei,ea,P,T,_,ee]),eo=(0,H.useCallback)(()=>{!function(e,t,r){if(!e?.focus?.details||"coordinate"!==e.focus.type)return!1;let a=e.focus.details;return a.y===t&&a.x===r}(w.current,e.id,n)&&document.activeElement===g.current&&v(ih(i,n,e.id))},[w,e.id,n,v,i]),ed=(0,H.useCallback)(e=>{if(!e.relatedTarget){S(),v(iy());return}s===is.Suspended&&g.current&&(g.current.contains(document.activeElement)||document.activeElement===document.body)&&e.preventDefault()},[s,S,v]),eu=(0,H.useMemo)(()=>$&&z&&!M?Object.fromEntries(AY(z,"card",!0).map(e=>[e,!0])):{},[M,z,$]);return(0,O.jsx)(OM,{...(0,ef.f)("board-view-column-card"),sx:{...er,flexDirection:"column",flexShrink:0,mb:"8px",overflow:"visible"},ref:g,"data-board-card-id":e.id,"data-hovercard-subject-tag":i7(e),onMouseDown:el,onClick:I,onFocus:eo,onBlur:ed,onKeyDown:es,className:(0,IL.W)({...eu,"keyboard-moving-card":V,"suspended-focus":s===is.Suspended,selected:Z,"board-view-column-card":!0}),...m,"data-test-card-is-selected":Z||void 0,"data-test-keyboard-moving-card":V||void 0,"data-test-card-is-focused":s===is.Focus||void 0,children:u?(0,O.jsx)(Vv,{item:e,verticalGroupId:a.id,archiveItem:K,removeItem:Q,moveItemToTop:X,moveItemToBottom:J,contextMenuRef:h}):null})}));VQ.displayName="Card";let VX=(0,H.memo)(function(e){let t=(0,H.useRef)(null),{isVisible:r,size:a}=uK({ref:t}),{item:n,verticalGroup:i,columnIndex:l,isDragDisabled:s}=e,{attributes:o,listeners:d,setNodeRef:u}=(0,IZ.O1)({id:n.id,data:{type:"card",item:n,ref:t,verticalGroup:i,columnIndex:l,horizontalGroupIndex:e.horizontalGroupIndex},disabled:s||!r}),{setNodeRef:c}=(0,IZ.Zj)({id:n.id,data:{type:"card",item:n,ref:t,verticalGroup:i,columnIndex:l,horizontalGroupIndex:e.horizontalGroupIndex},disabled:!r});return c(t.current),u(t.current),(0,O.jsx)(VQ,{size:a,ref:t,...e,isVisible:r,...o,...d})});try{VX.displayName||(VX.displayName="DraggableCard")}catch{}let VY=(0,Y.ZP)(eO.Z).withConfig({displayName:"styled-keyboard-moving-card-placeholder__StyledKeyboardMovingCardPlaceholder",componentId:"sc-a0031960-0"})(["background-color:",";height:",";border:0;border-radius:6px;z-index:12;outline:none;"],(0,U.U2)("colors.accent.emphasis"),(0,U.U2)("space.1"));try{VY.displayName||(VY.displayName="StyledKeyboardMovingCardPlaceholder")}catch{}let VJ=(0,H.memo)((0,H.forwardRef)(function({keyboardMovingCard:e,verticalGroup:t,columnIndex:r,focusType:a,horizontalGroupIndex:n,...i},l){let s=(0,H.useRef)(null);(0,my.z)(l,s);let{moveCard:o,moveCards:d}=Ol(),{navigationDispatch:u}=iu(),{resetSelection:c}=OS(void 0,void 0,n,r),{isSorted:m}=dN(),{findMemexItem:p}=hi(),{postStats:f}=os(),h=(0,H.useCallback)(()=>{if(1===e.cardIds.length){let r=e.cardIds[0];if(r){let a="after"===e.sashSide?"bottom":"top",n=p(r);n&&o(n,void 0,a,t)}}else d(e.cardIds.map(e=>p(e)).filter(ro),t);f({name:nu,ui:nc.KeyboardShortcut,context:JSON.stringify({fieldId:t.groupMetadata?.id??nQ,...e.cardIds.length>1?{itemIds:e.cardIds}:{itemId:e.cardIds[0]}})}),u(ih(n,r,e.returnFocus.cardId))},[n,e.cardIds,e.returnFocus.cardId,e.sashSide,u,r,o,t,d,p,f]);(0,H.useEffect)(()=>{s.current?.focus()},[s]);let g=(0,H.useCallback)(t=>{let r=t.target;if(a===is.Focus&&r.nodeName!==VK){let r=kg(u,t);r.action?kf(t):r.keyAsShortcut===mV.ENTER?h():(r.keyAsShortcut===mV.ESCAPE||r.keyAsShortcut===mV.TAB)&&(c(),u(ih(e.returnFocus.horizontalGroupIndex,e.returnFocus.columnIndex,e.returnFocus.cardId)))}},[a,u,h,c,e.returnFocus.horizontalGroupIndex,e.returnFocus.columnIndex,e.returnFocus.cardId]),y=e.cardIds.length>1;return(0,O.jsx)(VY,{...(0,ef.f)("board-view-keyboard-moving-card-placeholder"),ref:s,"data-board-card-id":-1,tabIndex:0,onKeyDown:g,className:(0,IL.W)({"suspended-focus":a===is.Suspended}),...i,"data-test-card-is-focused":!0,sx:{opacity:m||y?0:1}})}));try{VJ.displayName||(VJ.displayName="KeyboardMovingCardPlaceholder")}catch{}try{VJ.displayName||(VJ.displayName="KeyboardMovingCardPlaceholder")}catch{}let V0=()=>(0,O.jsx)(eO.Z,{sx:{content:"",display:"block",width:"100%",backgroundColor:"accent.emphasis",height:pv("space.1"),border:"0",borderRadius:2}});try{V0.displayName||(V0.displayName="EmptyColumnSash")}catch{}let V1=e=>{let{currentView:t,viewStateDispatch:r}=oi(),{groupedByColumn:a}=dk(),n=t?.number,i=a?.databaseId,{perform:l}=d1({request:(0,H.useCallback)(async a=>{"number"==typeof n&&"number"==typeof i&&t&&(await jw({viewNumber:n,view:{...hp(t.serverViewState,["id","number","createdAt","updatedAt","priority"]),layoutSettings:{...t.serverViewState.layoutSettings,board:{...t.serverViewState.layoutSettings.board,columnLimits:{...t.serverViewState.layoutSettings.board?.columnLimits,[i]:{...t.serverViewState.layoutSettings.board?.columnLimits?.[i],[e.id]:a}}}}}}),r({type:dy.UpdateBoardColumnLimit,limit:a,columnDatabaseId:i,optionId:e.id,viewNumber:n}))},[n,i,t,r,e.id])});return{updateColumnLimit:l,columnLimit:a?t?.localViewStateDeserialized.layoutSettings.board?.columnLimits?.[a.databaseId]?.[e.id]:void 0}},V2=e=>{"Enter"===e.key&&rc(e)&&e.currentTarget.requestSubmit()},V5=({initialColumnLimit:e,onSave:t,onCancel:r})=>{let[a,n]=(0,H.useState)(!1),[i,l]=(0,H.useState)(e??""),s=(0,H.useRef)(null);(0,H.useEffect)(()=>s.current?.focus(),[]);let o=(0,H.useRef)(null);(0,yY.t)({containerRef:o,onClickOutside:e=>e.preventDefault()});let d=(0,H.useId)();return(0,O.jsx)(wE.V,{title:`${e&&e>0?rI.edit:rI.set} column limit`,onClose:r,role:"dialog","aria-modal":"true",width:"medium",ref:o,footerButtons:[{type:"button",onClick:r,content:"Cancel"},{form:d,type:"submit",content:"Save",buttonType:"primary"}],children:(0,O.jsx)(eO.Z,{id:d,as:"form",onSubmit:e=>(e.preventDefault(),t(""===i?void 0:i)),onInvalid:e=>{e.preventDefault(),n(!0)},onKeyDown:V2,children:(0,O.jsx)(V3,{ref:s,value:i,onChange:l,invalidSubmission:a})})})},V3=(0,H.forwardRef)(function({value:e,onChange:t,invalidSubmission:r},a){let n=function(e){if(""!==e){if(Number.isNaN(e)||!Number.isInteger(e))return rI.fieldMustBeAnInteger;if(e>1e6)return rI.columnLimitExceeded;if(e<0)return rI.fieldMustBePositiveOrZero}}(e),i=r&&void 0!==n;return(0,O.jsxs)(cX.Z,{children:[(0,O.jsx)(cX.Z.Label,{children:"Column limit"}),(0,O.jsx)(pw.Z,{ref:a,value:e,onChange:e=>t(Number.isNaN(e.target.valueAsNumber)?"":e.target.valueAsNumber),onKeyDown:e=>{["e","E","+","-","."].includes(e.key)&&e.preventDefault()},block:!0,name:"Column limit",validationStatus:i?"error":void 0,"aria-invalid":i?"true":void 0,type:"number",min:0,max:1e6,...(0,ef.f)("column-limit-text-input")}),i&&(0,O.jsx)(cX.Z.Validation,{variant:"error",children:n}),(0,O.jsx)(cX.Z.Caption,{children:"A limit on the number of items in a column"})]})});try{V5.displayName||(V5.displayName="ColumnLimitModal")}catch{}try{V3.displayName||(V3.displayName="ColumnLimitInput")}catch{}let V4="24px",V8={fontSize:2,fontWeight:"bold"},V6=(0,H.memo)(({columnLimit:e,counterSx:t,hideItemsCount:r,itemsCount:a,verticalGroup:n,isEditing:i,loadingState:l,setIsEditing:s,onNameChange:o,isUserEditable:d,initialFocus:u,placeholder:c})=>{let[m,p]=yh(n.name),f=(0,H.useRef)(null),h=(0,H.useRef)(null),g=(0,H.useRef)(i);(0,H.useEffect)(()=>{i&&h.current?.focus()},[i]);let y=(0,H.useRef)(u);(0,H.useEffect)(()=>{y.current&&f.current?.focus()},[]),(0,H.useEffect)(()=>{!i&&g.current&&f.current?.focus(),g.current=i},[i]);let x=mj(null,[],{stopPropagation:!0,preventDefault:!1}),b=(0,H.useCallback)(e=>{p(e.currentTarget.value)},[p]),v=(0,H.useCallback)(()=>{d&&(p(n.name),s(!0))},[d,n.name,s,p]),w=(0,H.useCallback)(()=>{p(n.name),s(!1)},[n.name,s,p]),j=(0,H.useCallback)(()=>{o(m),w()},[m,o,w]),C=(0,H.useCallback)(e=>{switch(mz(e)){case mV.ESCAPE:i&&w();return;case mV.ENTER:i?j():v();return}},[i,v,w,j]),I=(0,yc.u)(C),S=i?{boxShadow:"primer.shadow.focus",borderRadius:"2px"}:d?{"&:focus-within":{boxShadow:"primary.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:e=>`0 0 0 3px ${e.colors.border.default}`,borderRadius:"2"}}:{},k=yR();return(0,O.jsxs)(eO.Z,{ref:f,onClick:v,onKeyDown:i?void 0:C,tabIndex:d?0:-1,...(0,ef.f)("board-view-column-title"),sx:{...S,display:"flex",alignItems:"center",height:V4,my:1,mr:2,overflow:"hidden",columnGap:2},children:[nX(n.groupMetadata)&&(0,O.jsx)(mu,{color:n.groupMetadata.color}),i?(0,O.jsx)(yk.F,{...k,children:(0,O.jsx)(pI,{as:pT,ref:h,onChange:b,onBlur:j,onMouseDown:x,...I,type:"text",value:m,placeholder:c,sx:{height:V4},...V8})}):(0,O.jsx)(u5,{role:d?"button":void 0,...(0,ef.f)("board-view-column-title-text"),sx:{lineHeight:V4,cursor:"default",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},...V8,children:n.nameHtml}),l===VL.loaded&&(0,O.jsx)(VZ,{aggregates:[],counterSx:{flexShrink:0,...t},hideItemsCount:r,columnLimit:e,itemsCount:a})]})});V6.displayName="EditableColumnName";let V7=(0,H.memo)(function({verticalGroup:e,groupedColumnId:t,items:r,index:a,scrollToItemId:n,initialNameFocus:i,onDelete:l,onUpdateDetails:s,isDraggable:o,isUserEditable:d,isCurrentIteration:u,iterationDateRange:c,hidden:m,horizontalGroup:p,horizontalGroupIndex:f,headerType:h="visible",isLastGroup:g,totalCount:y=0}){var x;let{groupMetadata:b}=e,{currentView:v}=oi(),w=v?.number,j=(0,H.useRef)(null),C=(0,H.useRef)(null),I=(0,IZ.Cj)(),S=null!==I.active,[k,T]=(0,H.useState)(!1),[N,_]=(0,H.useState)(!1),[R,P]=(0,H.useState)(!1),{enableOmnibar:D}=OD(),{state:E}=id(),{hasWritePermissions:A}=i4(),{resetSelection:M,filteredSelectedCards:L}=OS(),{insertFilter:F}=dv(),{groupedByColumn:Z}=dk(),{postStats:V}=os(),{isSorted:B}=dN(),{columnLimit:$,updateColumnLimit:z}=V1(e),W=I.over?.data.current,G=I.active?.data.current,U=p&&"value"in p?p.value:void 0,q=O_(W)&&W.verticalGroup.id===e.id&&f===W.horizontalGroupIndex,K=ON(W)&&W.verticalGroup.id===e.id&&f===W.horizontalGroupIndex,Q=(0,H.useRef)(null),{navigationDispatch:X}=iu(),{memex_table_without_limits:Y}=n9(),J=q||K,ee=J&&0===r.length&&!B&&L.length<=1,et=(0,H.useMemo)(()=>({id:e.id}),[e.id]),er=p?.sourceObject&&(p.sourceObject.kind,!1),ea=A6({dragAxis:"horizontal",dragID:e.id,dragType:"column",dragIndex:a,dragRef:j,disable:!d||!o,metadata:et}),{setNodeRef:en}=(0,IZ.Zj)({id:U?`${U}-${e.id}`:e.id,data:{verticalGroup:e,type:"column",ref:j,index:a,horizontalGroupIndex:f}});en(j.current),Mr({active:ON(G)&&K,scrollRef:C,strength:50,deadZoneRatioY:.5});let ei=E.focus?.type==="coordinate"?E.focus:null,el=ei?.details.x===a&&!!ei?.details.meta.keyboardMovingCard,es=J||el,eo=es&&(L.length>1||(ei?.details.meta.keyboardMovingCard?.cardIds.length??0)>1),ed=B&&es||eo,eu=(0,H.useCallback)(()=>{if(Z?.name){let{dataType:t,databaseId:r,name:a}=Z;F(`-${oQ(Z.name)}`,e.name),V({name:"board_column_menu_hide",context:JSON.stringify({dataType:t,databaseId:r,name:a})})}},[Z,e.name,F,V]),ec=(0,H.useCallback)(()=>{T(!0)},[]),em=(0,H.useCallback)(t=>{e.groupMetadata?.id&&s({id:e.groupMetadata?.id,name:t},{id:e.groupMetadata?.id,name:e.nameHtml})},[s,e.nameHtml,e.groupMetadata?.id]),ep=async e=>{await z(e),P(!1)},eh=e=>{b&&s(e,b),_(!1)},eg=(0,H.useCallback)(()=>{D({columnId:e.id,horizontalGroupIndex:f})},[D,e.id,f]),ey=(0,H.useCallback)(e=>{e.stopPropagation(),eg()},[eg]),ex=(0,H.useCallback)(()=>{M()},[M]),eb=(x=E.focus,x?.type==="add-item"&&!er&&E.focus.details.verticalGroupId===e.id&&f===E.focus.details.horizontalGroupIndex),ev=!!im(E.focus)&&E.focus.details.verticalGroupId===e.id&&f===E.focus.details.horizontalGroupIndex,ew=!!im(E.focus)&&E.focus.details.verticalGroupId===e.id&&!U&&!Y;(0,uG.b)(()=>{g2(C.current)},[w]),(0,H.useEffect)(()=>{eb&&Q.current&&(Q.current.focus(),Q.current.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}))},[eb]);let ej=(0,H.useCallback)(e=>{kg(X,e).action&&kf(e)},[X]),{loadingState:eC}=VF(),{hideItemsCount:eI,getAggregatesForItems:eS}=CV(),ek=(0,H.useMemo)(()=>eS(r),[r,eS]),eT=nq(Z)?"singleSelectDetails":"name",eN=(0,IL.W)(h,{"last-group":g,"drag-outline":ed});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(VC,{id:e.id,testingName:e.name,sx:V_,ref:j,...ea.props,onClick:ex,hidden:m,"data-board-column-has-outline":ed,className:eN,headerContent:"hidden"===h?null:(0,O.jsxs)(eO.Z,{sx:{bg:"canvas.inset",alignItems:"flex-start",justifyContent:"space-between",maxWidth:"350px",pt:2,pb:1,px:3,display:"flex"},...ea.handle.props,children:[(0,O.jsxs)(eO.Z,{sx:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"90%",flexWrap:"wrap"},children:[(0,O.jsx)(V6,{hideItemsCount:eI,columnLimit:$,itemsCount:y,verticalGroup:e,onNameChange:em,isUserEditable:d&&"name"===eT,initialFocus:i,isEditing:k,loadingState:eC,setIsEditing:T}),eC===VL.loaded&&(0,O.jsx)(VZ,{aggregates:ek,counterSx:{mr:2,mt:1,mb:1},hideItemsCount:!0,itemsCount:y}),u&&(0,O.jsx)(vz,{sx:{my:1}})]}),(0,O.jsx)(eO.Z,{sx:{backgroundColor:"canvas.inset",alignItems:"center",display:"flex"},children:eC===VL.loading?(0,O.jsx)(u$.Z,{size:"small","aria-label":"Loading data required to properly display view",...(0,ef.f)("view-loading-indicator")}):eC===VL.missing?null:d&&(0,O.jsx)(VB,{items:r,name:e.name,isColumn:!0,onRename:"name"===eT?ec:void 0,onEditDetails:"singleSelectDetails"===eT?()=>_(!0):void 0,onEditLimit:()=>P(!0),onHide:eu,onDelete:b&&l?()=>l(b.id):void 0})})]}),children:["hidden"!==h&&c&&(0,O.jsx)(eO.Z,{sx:{bg:"canvas.inset",maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",mt:-1,pb:2,px:3,color:"fg.muted",flexShrink:0},...(0,ef.f)(`${e.id}-date-range-board-header`),children:c}),"hidden"!==h&&(0,O.jsx)(u5,{sx:{mt:-1,pb:2,px:3,maxWidth:"350px",color:"fg.muted"},children:nX(b)?b.descriptionHtml:""}),(0,O.jsxs)(eO.Z,{ref:C,className:"column-drop-zone",...(0,ef.f)(`drop-zone-${e.name}`),[AX]:"card",sx:{flexDirection:"column",backgroundColor:"canvas.inset",flexGrow:1,overflowY:"auto",position:"relative",px:2,py:"4px",display:"flex",scrollPaddingBottom:"7px"},children:[ee&&(0,O.jsx)(V0,{}),(0,O.jsxs)(uq,{rootRef:null,sizeEstimate:125,disableHide:S,children:["only"!==h&&r.length>0&&r.map((t,r)=>{let i=ei?.details.x===a&&ei?.details.y===t.id?ei.focusType:void 0,l=!A||t.contentType===eL.RedactedItem;return(0,O.jsx)(VX,{item:t,scrollIntoView:t.id===n,index:r,verticalGroup:e,columnIndex:a,focusType:i,keyboardMovingCard:ei?.details.meta.keyboardMovingCard,isDragDisabled:l,horizontalGroupId:U,horizontalGroupIndex:f},t.id)}),0===r.length&&"only"!==h&&ei?.details.x===a&&ei?.details.meta.horizontalGroupIndex===f&&ei?.details.meta.keyboardMovingCard&&(0,O.jsx)(VJ,{horizontalGroupIndex:f,verticalGroup:e,columnIndex:a,focusType:ei.focusType,keyboardMovingCard:ei.details.meta.keyboardMovingCard})]}),"only"!==h&&(0,O.jsx)(V9,{isVisible:ev,shouldScroll:ew}),Y&&t&&(0,O.jsx)(VR,{groupId:t})]}),"only"!==h&&A&&(0,O.jsx)(cd.r,{onClick:ey,ref:Q,variant:"invisible",sx:{color:"fg.muted",display:"flex",py:2,'& [data-component="buttonContent"]':{flex:0}},block:!0,size:"large",leadingVisual:eF.PlusIcon,...(0,ef.f)("board-view-add-card-button"),disabled:er,onKeyDown:ej,title:p?.sourceObject&&VM(p.sourceObject)||rI.addItem,children:rI.addItem})]}),R&&(0,O.jsx)(V5,{initialColumnLimit:$,onCancel:()=>P(!1),onSave:ep}),N&&nX(b)&&(0,O.jsx)(wZ,{initialOption:b,onCancel:()=>_(!1),onSave:e=>eh({...b,...e})})]})}),V9=({isVisible:e,shouldScroll:t})=>{let r=(0,H.useRef)(null);return(0,H.useEffect)(()=>{t&&r.current?.scrollIntoView({behavior:"smooth"})},[t]),e?(0,O.jsx)(Bt,{ref:r,sx:{flexShrink:0,height:"8px",bg:"accent.emphasis",border:"0",borderRadius:"6px",mb:"12px"},...(0,ef.f)("board-view-add-card-indicator")}):null},Be=(0,Y.F4)(["from{opacity:0;}to{opacity:1;}"]),Bt=(0,Y.ZP)(eO.Z).withConfig({displayName:"column__StyledPlaceholder",componentId:"sc-a34f95ba-0"})(["animation:"," 0.2s ease-out;"],Be);try{V7.displayName||(V7.displayName="Column")}catch{}try{V9.displayName||(V9.displayName="IsAddingItemsIndicator")}catch{}try{Bt.displayName||(Bt.displayName="StyledPlaceholder")}catch{}let Br=()=>{let{updateIterationConfiguration:e}=DY();return{updateColumnIterationTitle:(0,H.useCallback)(async(t,r)=>{if(t.dataType!==eA.Iteration)return;let a=nR(t).find(e=>e.id===r.id);if(!a||!t.settings.configuration)return;a.title=r.name;let{iterations:n,completedIterations:i}=t.settings.configuration;await e(t,{iterations:n,completedIterations:i})},[e])}},Ba=()=>{let{updateColumnOption:e}=wR(),{updateColumnIterationTitle:t}=Br();return{updateVerticalGroup:(0,H.useCallback)(async(r,a,n=!1)=>nq(r)?e(r,a,n):nH(r)?t(r,a):void 0,[t,e])}},Bn=e=>{let{updateVerticalGroup:t}=Ba(),{perform:r}=d1({request:(0,H.useCallback)(async r=>{e&&await t(e,r)},[e,t]),rollback:(0,H.useCallback)(r=>{e&&t(e,r,!0)},[e,t])});return{updateColumnDetails:r}},Bi=[];function Bl({groupByFieldOptions:e,itemsGroupedByField:t,groupByField:r,scrollToItemId:a,lastNewColumnNameRef:n,horizontalGroup:i,horizontalGroupIndex:l,headerType:s="visible",hideColumn:o,isLastGroup:d}){let{hasWritePermissions:u}=i4(),{deleteGroup:c}=VT(r),{updateColumnDetails:m}=Bn(r),{memex_table_without_limits:p}=n9(),f=(0,H.useCallback)(e=>!!(r&&r.dataType===eA.Iteration&&nY(e.groupMetadata))&&nj(new Date,e.groupMetadata),[r]);return(0,O.jsxs)(O.Fragment,{children:[e.map((e,p)=>{let h=t[e.id],g=h?.items??Bi,y=u&&e.id!==nQ,x=r?.dataType!==eA.Iteration;return(0,O.jsx)(V7,{hidden:o(e),verticalGroup:e,groupedColumnId:h?.groupedColumnId,totalCount:h?.totalCount,items:g,index:p,onDelete:c,onUpdateDetails:m,scrollToItemId:a,initialNameFocus:n.current===e.name,isUserEditable:y,isDraggable:x,isCurrentIteration:f(e),iterationDateRange:nY(e.groupMetadata)?nN(e.groupMetadata)??"":"",horizontalGroup:i,headerType:s,isLastGroup:d,horizontalGroupIndex:l},e.id)}),p&&(0,O.jsx)(VR,{})]})}try{Bl.displayName||(Bl.displayName="Columns")}catch{}let Bs=e=>{let{addColumnOption:t}=wR(),{perform:r}=d1({request:(0,H.useCallback)(async r=>{e?.dataType===eA.SingleSelect&&await t(e,r)},[t,e])});return{addColumn:r}},Bo=e=>{let{moveColumnOption:t}=wR();return{moveColumn:(0,H.useCallback)(async(r,a,n)=>{if(e?.dataType!==eA.SingleSelect||r===a)return;let i=e.settings.options.findIndex(e=>e.id===r)+1,l=e.settings.options.findIndex(e=>e.id===a)+1,s="before"===n?l:l+1;i<l&&s--,await t(e,{id:r,position:Math.max(s,1)})},[e,t])}},Bd={is:e=>(0,IO.Z)(e)&&"groupedValue"in e&&"string"==typeof e.groupedValue},Bu=({groupId:e,groupedValue:t,isCollapsed:r,isEmpty:a})=>{let{toggleGroupCollapsed:n}=dI(),i=(0,IZ.Zj)({id:`droppable-group-${e}`,data:{groupedValue:t},disabled:!(r||a)}),l=e3(()=>n(t),500);return(0,H.useEffect)(()=>{if(i.isOver&&r){let e=l();return()=>e.cancel()}},[i.isOver,r,l]),i};function Bc({onCollapseToggle:e,isCollapsed:t,expandCollapseLabel:r,...a}){return(0,O.jsx)(mq.h,{variant:"invisible",size:"small",onClick:e,sx:{color:"fg.muted","&:hover, > svg:hover, > span:hover":{color:"accent.fg",textDecoration:"none"}},icon:t?eF.ChevronRightIcon:eF.ChevronDownIcon,...a,"aria-label":r})}try{Bc.displayName||(Bc.displayName="GroupHeaderExpansionButton")}catch{}let Bm={backgroundColor:"canvas.default",borderBottomColor:"border.default",borderBottomStyle:"solid",borderBottomWidth:"1px",paddingLeft:3,height:"44px",display:"flex",gap:3,alignItems:"center",position:"relative","&.collapsed":{borderBottomColor:"transparent"},"&.board":{borderRightColor:"border.default",borderRightStyle:"solid",borderRightWidth:"1px",borderTopColor:"border.default",borderTopStyle:"solid",borderTopWidth:"1px",borderLeft:"1px solid",borderLeftColor:"border.default",marginRight:"8px",paddingLeft:2,gap:2},"&.board.collapsed":{borderBottomColor:"border.default"},"&.board.collapsed:has(+ .board)":{borderBottomColor:"transparent"},"&.sticky":{position:"sticky",top:0,zIndex:1},"&.highlighted":{borderTop:"1px solid",borderTopColor:"accent.fg"},"&.highlighted + &":{borderTop:"1px solid",borderTopColor:"accent.fg"}},Bp=(0,H.forwardRef)(({topOffset:e,style:t,sx:r,...a},n)=>(0,O.jsx)(eO.Z,{ref:n,sx:{...Bm,...r},style:{top:e??0,...t},...a}));Bp.displayName="StyledGroupHeader";let Bf=(0,H.forwardRef)(({isCollapsed:e,isHighlighted:t,metadata:r,itemsInGroup:a,children:n,sticky:i,swimlanesHeaderRef:l,...s},o)=>{let{sourceObject:d}=r,{groupedByColumnId:u,groupedByColumn:c,toggleGroupCollapsed:m}=dI(),{postStats:p}=os(),{viewType:f}=hL(),h=iN(d),g=i_(d),[y,x]=(0,H.useState)(!1),b=c?.dataType===eA.SingleSelect&&d.dataType===eA.SingleSelect&&"empty"!==d.kind,v=b?d.value.option:null,w=c?.dataType===eA.Iteration&&d.dataType===eA.Iteration&&"empty"!==d.kind,j="empty"===d.kind,C=(0,H.useCallback)(()=>{let t=!e;u&&p({key:"memex_project_field_group_by_collapse_toggle",groupTitle:ru(h),memexProjectColumnId:u,collapsed:t,numberOfRows:a.length}),m(r.value)},[e,u,m,r,p,h,a]),{updateColumnOption:I}=wR(),S=e=>{b&&(I(c,e),x(!1))},k=void 0!==c&&"empty"!==r.sourceObject.kind,{insertFilter:T}=dv(),N=(0,H.useCallback)(()=>{k&&(T(`-${oQ(c.name)}`,h),p({name:"group_hide",context:JSON.stringify(r.sourceObject)}))},[k,T,c,h,p,r.sourceObject]),{deleteGroup:_}=VT(c),R=(0,H.useMemo)(()=>_&&(()=>{b?_(d.value.option.id):w&&_(d.value.iteration.id)}),[_,w,b,d]),P=e?`Expand group ${h}`:`Collapse group ${h}`;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Bp,{className:(0,IL.W)({collapsed:e,board:f===fQ.Board,sticky:i,highlighted:t}),topOffset:l?.current?.getBoundingClientRect().height??0,...(0,ef.f)(`group-header-${g}`),ref:o,...s,children:(0,O.jsxs)(eO.Z,{className:(0,IL.W)({board:f===fQ.Board,roadmap:f===fQ.Roadmap}),sx:{position:"sticky",height:"44px",left:"16px",gap:3,display:"flex",alignItems:"center",overflow:"hidden","&.board":{left:"-8px"},"&.roadmap":{position:"relative",width:"100%",left:"unset"}},children:[(0,O.jsx)(Bc,{onCollapseToggle:C,isCollapsed:e,expandCollapseLabel:P,...(0,ef.f)(`group-by-toggle-collapsed-${g}`)}),(0,O.jsx)(eO.Z,{sx:{alignItems:"center",display:"flex",overflow:"hidden",cursor:"default",gap:2},children:n}),(0,O.jsx)(VB,{name:h,items:a,onEditDetails:b?()=>x(!0):void 0,onHide:k?N:void 0,onDelete:j?void 0:R})]})}),y&&v&&(0,O.jsx)(wZ,{initialOption:v,onCancel:()=>x(!1),onSave:e=>S({...v,...e})})]})});function Bh({titleHtml:e,sx:t}){return(0,O.jsx)(u5,{sx:{color:"fg.default",fontWeight:"bold",fontSize:2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",...t},...(0,ef.f)("group-name"),children:e})}Bf.displayName="GroupHeader";try{Bh.displayName||(Bh.displayName="SanitizedGroupHeaderText")}catch{}function Bg({assignees:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){let i=re(e.map(e=>e.login));return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(vs.Z,{sx:{zIndex:0},children:e.map(e=>(0,O.jsx)(mo.O,{loading:"lazy",alt:e.login,src:e.avatarUrl},e.id))}),(0,O.jsx)(Bh,{titleHtml:i,sx:n}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:r,hideItemsCount:a})]})}try{Bg.displayName||(Bg.displayName="AssigneesGroupHeaderLabel")}catch{}function By({titleHtml:e,label:t,rowCount:r,hideItemsCount:a,aggregates:n,titleSx:i}){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Bh,{titleHtml:e,sx:i}),t&&(0,O.jsx)(y8.Z,{sx:{color:"accent.fg"},...(0,ef.f)("table-group-label"),children:t}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:r,aggregates:n,hideItemsCount:a})]})}try{By.displayName||(By.displayName="DefaultGroupHeaderLabel")}catch{}function Bx({iteration:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){let i=e.titleHtml,l=nk(e),s=nj(new Date,e);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Bh,{titleHtml:i,sx:n}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:r,hideItemsCount:a}),l&&(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted",ml:2,fontSize:(0,U.U2)("fontSizes.1"),textAlign:"left",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",code:{fontFamily:"fonts.mono",fontSize:0}},...(0,ef.f)("group-name-subtitle"),children:[(0,O.jsx)("time",{dateTime:tY(l.startDate),children:nC(l.startDate)})," - ",(0,O.jsx)("time",{dateTime:tY(l.endDate),children:nC(l.endDate)})]}),s&&(0,O.jsx)(vz,{sx:{ml:2}})]})}try{Bx.displayName||(Bx.displayName="IterationGroupHeaderLabel")}catch{}let Bb={[`:not(:has(.${EC.containerRing}))`]:{width:"175px"}},Bv=({parentIssue:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n})=>{let{total:i,completed:l,percentCompleted:s}=e.subIssueList;return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u7,{isDraft:!1,state:e.state,stateReason:e.stateReason,type:eL.Issue}),(0,O.jsx)(Bh,{titleHtml:e.title,sx:n}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:r,hideItemsCount:a}),(0,O.jsx)(eO.Z,{sx:Bb,children:(0,O.jsx)(Lo,{total:i,completed:l,percentCompleted:s})})]})};try{Bv.displayName||(Bv.displayName="ParentIssueGroupHeaderLabel")}catch{}function Bw({repository:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n}){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(c9,{repository:e}),(0,O.jsx)(Bh,{titleHtml:e.nameWithOwner,sx:n}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:r,hideItemsCount:a})]})}try{Bw.displayName||(Bw.displayName="RepositoryGroupHeaderLabel")}catch{}let Bj=({option:e,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:n})=>(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mu,{color:e.color}),(0,O.jsx)(Bh,{titleHtml:e.nameHtml,sx:n}),(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:t,aggregates:r,hideItemsCount:a}),e.descriptionHtml&&(0,O.jsx)(u5,{sx:{color:"fg.muted",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200ch",flexBasis:0,flexGrow:1,mb:"-2px"},children:e.descriptionHtml})]});try{Bj.displayName||(Bj.displayName="SingleSelectGroupHeaderLabel")}catch{}var BC=r(98888);let BI=({trackedBy:e,titleSx:t,showOwnerOnFocus:r=!1,rowCount:a,aggregates:n,hideItemsCount:i})=>{let{projectOwner:l}=i5(),{getParentCompletion:s}=hc(),{getChildrenTrackedByParent:o}=hu(),{createSidePanelHandler:d}=OV(),[u,c]=(0,H.useState)(),m=(0,H.useRef)(!1),[p,f]=(0,H.useState)(!1),h=(0,H.useRef)(null),g=(0,H.useRef)(null),y=Mx(h,g,p,[u],{xAlign:"center",yAlign:"top"}),x=(0,H.useCallback)(async e=>{if(!m.current)return;let t=s(e);if(t){c(t);return}await o(e)},[o,s]);(0,H.useEffect)(()=>(m.current=!0,x(e.key.itemId),()=>{m.current=!1}),[e.key.itemId,x]);let b=u?(0,O.jsxs)(cd.r,{variant:"invisible",sx:{p:0,borderRadius:3,"&:hover:not([disabled]), &:focus:not([disabled])":{backgroundColor:"transparent",color:"fg.default"}},onClick:d(e),ref:h,tabIndex:-1,onPointerEnter:()=>f(!0),onPointerLeave:()=>f(!1),...(0,ef.f)("tracked-by-completion-pill"),children:[(0,O.jsx)(BC.h,{direction:"n",open:p,"aria-label":rI.progressPercentCount(Math.floor(u.completed/u.total*100)),ref:g,id:`${e.key.itemId}-tracked-by-completion-value`,"aria-live":"polite",portalProps:{onMount:y.adjustPickerPosition}}),(0,O.jsx)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",display:"flex"},children:(0,O.jsx)(bl,{progress:u})})]}):(0,O.jsx)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1 0 auto",display:"flex",ml:2},children:(0,O.jsx)(O7,{marginLeft:2,minWidth:40,maxWidth:80,...(0,ef.f)("placeholder")})});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(u7,{state:e.state,stateReason:e.stateReason,type:"Issue",isDraft:!1,sx:{mr:2}},e.key.itemId),(0,O.jsx)(Bh,{titleHtml:e.title,sx:t}),r?(0,O.jsxs)(uB.Z,{target:"_blank",rel:"noreferrer",href:e.url,onClick:d(e),sx:{color:"fg.subtle",display:"flex",alignItems:"center",":focus-within .tracked-by-item-owner-repo":{display:"block"},":hover .tracked-by-item-owner-repo":{display:"block"}},"aria-label":iI(e,l),children:[(0,O.jsx)(eO.Z,{className:"tracked-by-item-owner-repo",sx:{display:"none"},children:function(e,t){var r;return t&&e.userName.toLowerCase()===t.login.toLowerCase()?e.repoName:(r=e,`${r.userName}/${r.repoName}`)}(e,l)}),`#${e.number}`]},e.url):(0,O.jsx)(uB.Z,{target:"_blank",rel:"noreferrer",href:e.url,onClick:d(e),sx:{color:"fg.subtle",display:"flex",alignItems:"center",ml:2},children:iI(e,l)},e.url),b,(0,O.jsx)(VZ,{counterSx:{color:"fg.muted"},itemsCount:a,aggregates:n,hideItemsCount:i})]})};try{BI.displayName||(BI.displayName="TrackedByGroupHeaderLabel")}catch{}let BS=({sourceObject:e,rowCount:t,aggregates:r,hideItemsCount:a,showTrackedByOwnerOnFocus:n=!1,titleSx:i})=>{if("empty"===e.kind)return(0,O.jsx)(By,{titleHtml:e.value.titleHtml,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i});switch(e.dataType){case eA.Assignees:return(0,O.jsx)(Bg,{assignees:e.value,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i});case eA.Date:{let n=tX(e.value.date.value),l=ri(tY(e.value.date.value))?"Today":void 0;return(0,O.jsx)(By,{titleHtml:n,label:l,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i})}case eA.Repository:return(0,O.jsx)(Bw,{repository:e.value,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i});case eA.Iteration:return(0,O.jsx)(Bx,{iteration:e.value.iteration,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i});case eA.ParentIssue:return(0,O.jsx)(Bv,{parentIssue:e.value,aggregates:r,hideItemsCount:a,rowCount:t,titleSx:i});case eA.TrackedBy:return(0,O.jsx)(BI,{trackedBy:e.value,showOwnerOnFocus:n,titleSx:i,rowCount:t,aggregates:r,hideItemsCount:a});case eA.SingleSelect:return(0,O.jsx)(Bj,{option:e.value.option,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i});default:{let n=function(e){if("empty"===e.kind)return e.value.titleHtml;switch(e.dataType){case eA.SingleSelect:return e.value.option.nameHtml;case eA.Milestone:return e.value.title;case eA.IssueType:return e.value.name;case eA.ParentIssue:return e.value.nwoReference;case eA.Number:return`${e.value.number.value}`;case eA.Text:return e.value.text.html;case eA.Labels:return e.value.nameHtml;default:ij(e)}}(e);return(0,O.jsx)(By,{titleHtml:n,rowCount:t,aggregates:r,hideItemsCount:a,titleSx:i})}}};try{BS.displayName||(BS.displayName="GroupHeaderLabel")}catch{}let Bk={display:"flex",backgroundColor:"canvas.default"};function BT({aggregates:e,groupByField:t,groupByFieldOptions:r,groupedItems:a,headerRef:n,hideColumn:i,hideItemsCount:l,horizontalGroup:s,index:o,lastNewColumnNameRef:d,scrollToItemId:u,draggingItems:c,scrollRef:m}){let p=(0,H.useRef)(null),f=(Object.values(s.itemsByVerticalGroup)||[]).reduce((e,t)=>e>t.items.length?e:t.items.length,0),{isVisible:h,size:g}=uK({ref:p,defaultHeight:s.isCollapsed?0:133*f+45+8}),y=c.some(e=>s.rows.includes(e)),{setNodeRef:x,isOver:b}=Bu({groupId:s.value,groupedValue:s.value,isCollapsed:s.isCollapsed,isEmpty:0===s.rows.length}),v=h?"unset":`${g}px`,w=(h||y)&&!s.isCollapsed,j=(0,H.useRef)(s.isCollapsed);return(0,uG.b)(()=>{if(s.isCollapsed!==j.current){let e=!1,t=()=>{if(!p.current||!m.current||!n.current)return 0;let{top:e}=p.current.getBoundingClientRect(),{top:t}=m.current.getBoundingClientRect();return e-(n.current.getBoundingClientRect().height+44)-t},r=()=>{requestAnimationFrame(()=>{if(!m.current)return;let r=t();(e||r<0)&&(m.current.scrollTop=m.current.scrollTop+r,e=!0)})};r(),setTimeout(()=>{r()},10)}j.current=s.isCollapsed},[s.isCollapsed,n,m]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Bf,{sticky:!0,isCollapsed:s.isCollapsed,metadata:s,itemsInGroup:s.rows,swimlanesHeaderRef:n,ref:x,isHighlighted:b,children:(0,O.jsx)(BS,{sourceObject:s.sourceObject,rowCount:s.rows.length,aggregates:e,hideItemsCount:l})}),(0,O.jsx)(eO.Z,{ref:p,style:{height:v},children:w?(0,O.jsx)(eO.Z,{sx:Bk,"data-board-horizontal-group":iN(s.sourceObject),children:(0,O.jsx)(Bl,{groupByFieldOptions:r,itemsGroupedByField:s.itemsByVerticalGroup,groupByField:t,scrollToItemId:u,lastNewColumnNameRef:d,headerType:"hidden",hideColumn:i,horizontalGroup:s,isLastGroup:a.horizontalGroups.length-1===o,horizontalGroupIndex:o})}):null})]})}try{BT.displayName||(BT.displayName="HorizontalGroup")}catch{}let BN=(0,H.memo)((0,H.forwardRef)(function(e,t){return(0,O.jsx)(ZW,{children:(0,O.jsx)(BM,{ref:t})})})),B_=[],BR={flex:"auto",height:"0",p:2,px:"16px",overflowY:"hidden",position:"relative",display:"flex"},BP={...BR,flexDirection:"column",overflowY:"auto",py:0,pb:2},BD={display:"flex",position:"sticky",top:0,zIndex:1},BE={isolation:"isolate",height:"fit-content",width:"fit-content"},BA={selected:{}},BM=(0,H.memo)((0,H.forwardRef)(function(e,t){let{currentView:r}=oi(),{memex_disable_autofocus:a}=n9(),{setGroupedBy:n}=dk(),{groupedItems:i,groupByFieldOptions:l,compatibleColumns:s}=ZG(),{showTemplateDialog:o}=jD(),d=(0,H.useRef)(null);(0,my.z)(t,d);let u=r?.number,c=(0,H.useRef)(void 0);(0,H.useEffect)(()=>{a||o||c.current===u||(c.current=u,setTimeout(()=>d.current?.focusIn()))},[u,o,a]),ep(()=>{if(!r)return null;let e=[],t=["c","Column field by...",e];for(let[t,a]of Object.entries(s))e.push([t,`Column field by: ${a.name}`,"column.field",()=>n(r.number,a)]);return t},[s,r,n]);let m=(0,e5.Z)({cardGrid:i.horizontalGroups.map(e=>({horizontalGroupId:e.value,isCollapsed:e.isCollapsed,isFooterDisabled:!!e.sourceObject&&iS(e.sourceObject),verticalGroups:l.map(t=>{let r=e.itemsByVerticalGroup[t.id]?.items??B_;return{verticalGroupId:t.id,items:r}})}))});return(0,O.jsx)(M6,{children:(0,O.jsx)(A8,{children:(0,O.jsx)(OC,{initialState:BA,metaRef:m,children:(0,O.jsxs)(ic,{metaRef:m,children:[(0,O.jsx)(OE,{}),(0,O.jsx)(BL,{ref:d})]})})})})})),BL=(0,H.memo)((0,H.forwardRef)(function(e,t){let{groupedItems:r,groupByField:a,groupByFieldId:n,groupByFieldOptions:i}=ZG(),{groupedByColumn:l}=dI(),{sliceField:s}=or(),{slicerItems:o}=M4(),{addColumn:d}=Bs(a),{moveColumn:u}=Bo(a),{updateIterationConfiguration:c}=DY(),m=(0,H.useRef)(null),[p,f]=(0,H.useState)(!1),h=(0,H.useRef)(null),g=(0,H.useRef)(!1),y=(0,H.useRef)(null),{navigationDispatch:x,stateRef:b}=iu(),{resetSelection:v,filteredSelectedCards:w}=OS(),{openPane:j}=dQ(),{missingRequiredColumnData:C}=oi(),I=(0,H.useCallback)(({dragMetadata:e,dropMetadata:t,side:a})=>{if(!e||!t)return;let n=e.id,i=t.id;i===nQ&&(i=Object.keys(r.allItemsByVerticalGroup)[1],a="before"),u(n,i,a||"before")},[r.allItemsByVerticalGroup,u]),[S,k]=(0,H.useState)(null),T=(0,H.useMemo)(()=>w.length>1?w:S?[S]:B_,[S,w]),N=A7({dropID:"board",dropType:"column",dropRef:m,onDrop:I});Mr({active:!!S,scrollRef:m,strength:50,deadZoneRatioX:.5,maxBufferX:350});let _=(0,H.useCallback)(e=>{y.current=e.name,d(e),f(!1)},[d]),R=(0,H.useCallback)(()=>{g.current=!0,f(!1)},[]);(0,uG.b)(()=>{g.current&&(g.current=!1,h.current?.focus())});let P=(0,H.useRef)(null),{enableOmnibar:D,disableOmnibar:E}=OD(),{horizontalScrollbarSize:A}=Mi(m),{memex_table_without_limits:M}=n9(),L=(0,H.useCallback)(e=>{switch(mz(e)){case mV.CTRL_SPACE:P.current?.isInputElement(e.target)?E():D();break;case mV.ESCAPE:P.current?.isInputElement(e.target)&&E()}},[E,D]),F=(0,H.useCallback)(()=>{b.current&&im(b.current.focus)&&E()},[E,b]),Z=(0,H.useCallback)(e=>{if(e.defaultPrevented)return;let t=e.relatedTarget;e.currentTarget.contains(t)||P.current?.isInputElement(t)||(x(iy()),AW()||v())},[v,x]);(0,H.useEffect)(()=>(addEventListener("keydown",L),()=>{removeEventListener("keydown",L)}),[L]);let V=(0,H.useCallback)(()=>{for(let[e,t]of r.horizontalGroups.entries())for(let[a,n]of i.entries()){if(!(n&&r.allItemsByVerticalGroup[n.id]?.items.length))continue;let i=t.itemsByVerticalGroup[n.id]?.items[0]?.id;if(i)return ih(e,a,i)}return null},[i,r.allItemsByVerticalGroup,r.horizontalGroups]);(0,H.useImperativeHandle)(t,()=>({focusIn:()=>{let e=V();e?x(e):D({columnId:nQ,horizontalGroupIndex:0})}}));let{scrollToItemId:B,onNewItem:$}=BZ(),{hasWritePermissions:z}=i4(),W=(0,H.useCallback)(async()=>{if(a){if(a.dataType===eA.Iteration){let{configuration:e}=a.settings;if(!e)return;let t=D5(e,a.name);await c(a,t);return}f(!0)}},[a,c]);Av("is-dragging",!!S);let{hideItemsCount:G,getAggregatesForItems:U}=CV(),{setShowAddFieldModal:q,showAddFieldModal:K}=Mo(),{anchorRef:Q}=Mc(),X=(0,H.useCallback)(e=>0===(r.allItemsByVerticalGroup[e.id]?.items??B_).length&&e.id===nQ&&!C,[r.allItemsByVerticalGroup,C]),Y=(0,H.useMemo)(()=>358*i.filter(e=>!X(e)).length,[i,X]),J=(0,H.useRef)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Oi,{groupByFieldId:n,horizontalGroupByFieldId:l?.id,children:(0,O.jsxs)(OR,{setDraggingItem:k,children:[(0,O.jsxs)(eO.Z,{sx:{flexDirection:"column",flex:"auto",overflowY:"hidden",display:"flex",position:"relative"},"data-hpc":!0,children:[(0,O.jsx)(uq,{rootRef:m,children:(0,O.jsxs)(eO.Z,{...(0,ef.f)("board-view"),ref:m,onPointerDown:F,onBlur:Z,...N.props,sx:r.isHorizontalGrouped?BP:BR,children:[r.isHorizontalGrouped?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:BD,children:[(0,O.jsx)(eO.Z,{ref:J,sx:Bk,children:(0,O.jsx)(Bl,{groupByFieldOptions:i,itemsGroupedByField:r.allItemsByVerticalGroup,groupByField:a,scrollToItemId:B,lastNewColumnNameRef:y,headerType:"only",hideColumn:X,horizontalGroupIndex:0})}),z&&!p&&(0,O.jsx)("div",{children:(0,O.jsx)(ZE,{ref:h,onClick:W})})]}),(0,O.jsx)(eO.Z,{sx:BE,style:{minWidth:`${Y}px`},...(0,ef.f)("swimlanes-container"),children:r.horizontalGroups.map((e,t)=>{let n=U(e.rows);return(0,O.jsx)(BT,{horizontalGroup:e,headerRef:J,aggregates:n,hideItemsCount:G,groupByFieldOptions:i,groupByField:a,scrollToItemId:B,lastNewColumnNameRef:y,hideColumn:X,groupedItems:r,index:t,draggingItems:T,scrollRef:m},e.value)})})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Bl,{groupByFieldOptions:i,itemsGroupedByField:r.horizontalGroups[0].itemsByVerticalGroup,groupByField:a,scrollToItemId:B,lastNewColumnNameRef:y,hideColumn:X,horizontalGroupIndex:0}),z&&!p&&(0,O.jsx)(ZE,{ref:h,onClick:W})]}),p?(0,O.jsx)(wZ,{initialOption:wy,onSave:_,onCancel:R}):null]})}),z&&(0,O.jsx)(BF,{ref:P,horizontalScrollbarSize:A,getPreviousItemId:(e,t)=>{let a=r.horizontalGroups[t]?.itemsByVerticalGroup[e];if(!M)return a?.items.at(-1)?.id},onNewItem:$}),K&&(0,O.jsx)(Ag,{isOpen:K,setOpen:q,anchorRef:Q,onSave:fV.Z})]}),(0,O.jsx)(IZ.y9,{dropAnimation:null,children:T.map(e=>(0,O.jsx)(Vw,{item:e},e.id))})]})}),s&&(0,O.jsx)(ZP,{slicerItems:o,openSidePanel:j})]})})),BF=(0,H.memo)((0,H.forwardRef)(function({horizontalScrollbarSize:e,onNewItem:t,getPreviousItemId:r},a){let{groupedItems:n,groupByFieldOptions:i}=ZG(),l=(0,H.useRef)(null),s=(0,H.useRef)(null),{state:o,navigationDispatch:d}=id(),{enableOmnibar:u,disableOmnibar:c}=OD(),m=im(o.focus),{groupedByColumn:p}=dk(),{memex_table_without_limits:f}=n9(),h=(0,H.useRef)(null);(0,my.z)(a,h),(0,uG.b)(()=>{m?(h.current?.focus(),l.current&&(l.current.scrollTop=0)):h.current?.blur()},[c,m,u,h]);let g=f?(0,H.useMemo)(()=>{if(!im(o.focus)||!p||!n4(p))return null;let e=[],t=o.focus.details.verticalGroupId,a=i.find(e=>e.id===t);a?.groupMetadata&&(p.id,eM.Status,e.push({dataType:p.dataType,memexProjectColumnId:p.id,value:{id:a.groupMetadata.id}}));let l=n.horizontalGroups[o.focus.details.horizontalGroupIndex];if(l){let t="sourceObject"in l?l.sourceObject:void 0;if(t){let r=m3(t);r&&e.push(r)}}return{updateColumnActions:e,previousItemId:r(t,o.focus.details.horizontalGroupIndex),groupId:t}},[o.focus,p,i,n.horizontalGroups,r]):(0,H.useMemo)(()=>{if(!im(o.focus)||!p||!n4(p))return null;let e=[],t=o.focus.details.verticalGroupId,a=i.find(e=>e.id===t);a?.groupMetadata&&(p.id,eM.Status,e.push({dataType:p.dataType,memexProjectColumnId:p.id,value:{id:a.groupMetadata.id}}));let l=n.horizontalGroups[o.focus.details.horizontalGroupIndex];if(l){let t="sourceObject"in l?l.sourceObject:void 0;if(t){let r=m3(t);r&&e.push(r)}}return{updateColumnActions:e,previousItemId:r(t,o.focus.details.horizontalGroupIndex)}},[o.focus,p,i,n.horizontalGroups,r]),y=(0,H.useCallback)(e=>{let t=kg(d,e);t.action?kh(e,t.keyAsShortcut):t.keyAsShortcut===mV.ESCAPE&&(d(ig()),kf(e))},[d]),x=(0,H.useMemo)(()=>{if(!im(o.focus))return;let e=o.focus.details.verticalGroupId,t=i.find(t=>t.id===e),r=n.horizontalGroups[o.focus.details.horizontalGroupIndex];if(!r)return;let a="sourceObject"in r?r.sourceObject:void 0;if(a&&t?.groupMetadata)return{value:t.groupMetadata.id,sourceObject:a}},[o.focus,i,n.horizontalGroups]);return(0,O.jsx)(M0,{ref:l,horizontalScrollbarSize:e,children:(0,O.jsx)(MY,{ref:s,horizontalScrollbarSize:e,disableBlur:!0,isFixed:!0,sx:{position:"static",bottom:"unset",transition:"opacity 0.2s ease-in-out",display:m?"block":"none",opacity:`${m?"1":"0"}`},children:(0,O.jsx)(MG,{ref:h,newItemAttributes:g??void 0,groupingMetadata:x,onAddItem:t,onKeyDown:y,isFixed:!0,defaultPlaceholder:Mj})})})})),BZ=()=>{let e=(0,H.useRef)();return(0,H.useEffect)(()=>{e.current=void 0}),{onNewItem:(0,H.useCallback)(t=>{e.current=t.id},[]),scrollToItemId:e.current}};try{BN.displayName||(BN.displayName="Board")}catch{}try{BN.displayName||(BN.displayName="Board")}catch{}try{BM.displayName||(BM.displayName="InnerBoard")}catch{}try{BM.displayName||(BM.displayName="InnerBoard")}catch{}try{BL.displayName||(BL.displayName="BoardInner")}catch{}try{BL.displayName||(BL.displayName="BoardInner")}catch{}try{BF.displayName||(BF.displayName="BoardOmnibar")}catch{}try{BF.displayName||(BF.displayName="BoardOmnibar")}catch{}function BO(e){let t=e.flatRows.find(e=>!e.isGrouped),r=e.visibleColumns.find(e=>!Im(e));return r&&t?iO(t.id,r.id):null}let BV=e=>{let{currentView:t,missingRequiredColumnData:r}=oi(),[a,n]=(0,H.useState)(()=>BO(e)??iL());return!function({currentViewNumber:e,setInitialFocalPoint:t,table:r,missingRequiredColumnData:a}){let n=(0,H.useRef)(a),i=(0,H.useRef)(e);(0,H.useEffect)(()=>{if(a)return;let l=n.current&&!a;(i.current!==e||l)&&(l&&document.activeElement?.id===p_||t(BO(r)))},[a,e,t,r]),(0,H.useEffect)(()=>{n.current=a,i.current=e})}({currentViewNumber:t?.number,missingRequiredColumnData:r,setInitialFocalPoint:n,table:e}),a};function BB({totalHeight:e,scrollRef:t,table:r}){return(0,H.useSyncExternalStore)(B$,()=>{let a=void 0!==r.groupedRows,n=e+45>(t.current?.clientHeight??0);return!a&&n})}function B$(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}var Bz=r(79521);function BW(e,t,r){let a=e.id.toString();return r?[r.id,a].join("."):a}function BG(e,t,r){return[...e].sort((e,a)=>{for(let n=0;n<t.length;n+=1){let i=t[n],l=!1===r[n]||"desc"===r[n],s=i?.(e,a)??0;if(0!==s)return l?-s:s}return e.index-a.index})}let BU=(e,t,r)=>{},BH=(e,t,r)=>{(0,H.useEffect)(()=>{BU(e,t,r)})},Bq=BH.bind(null,"CellRenderer"),BK=BH.bind(null,"CellEditor"),BQ=(0,H.forwardRef)(({...e},t)=>(0,O.jsx)(cd.r,{...e,sx:{border:"none",boxShadow:"none",minWidth:"16px",p:0,ml:"auto",bg:"transparent",":hover":{bg:"transparent",boxShadow:"none"}},"aria-label":"Dropdown button",...(0,ef.f)("dropdown-button"),tabIndex:-1,ref:t,children:(0,O.jsx)(eZ.Z,{icon:eF.TriangleDownIcon,className:"table-row-dropdown-caret",size:"small",sx:{verticalAlign:"middle",color:"fg.muted",opacity:.3,".is-focused &":{opacity:1}}})}));BQ.displayName="DropdownCaret";let BX=(0,H.forwardRef)(({children:e,isDisabled:t},r)=>(0,O.jsxs)(IM,{sx:{paddingRight:"4px",alignItems:"center",flexGrow:1,display:"flex",justifyContent:"space-between"},disallowSelection:!0,children:[e,t?null:(0,O.jsx)(BQ,{ref:r,sx:{mx:1}})]}));BX.displayName="DropdownCell";var BY=r(8679),BJ=r.n(BY);function B0(e,{nullWhenRedacted:t=!0}={}){let r=e.displayName||e.name||"withCellRenderer(anonymous)",a=r=>t&&r.model.contentType===eL.RedactedItem?null:(0,O.jsx)(e,{...r});return BJ()(a,e),a.displayName=`withCellRenderer(${r})`,(0,H.memo)(a)}let B1=()=>(0,O.jsxs)(IM,{children:[(0,O.jsx)(O9,{...(0,ef.f)("placeholder")}),(0,O.jsx)(O6,{ml:2,minWidth:30,maxWidth:50})]}),B2=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){return(Bq("AssigneesRenderer",t.id),Nm(e))?(0,O.jsx)(B1,{}):Nf(e)?(0,O.jsx)(BX,{ref:r,isDisabled:a,children:(0,O.jsx)(vm,{users:e.value,isDisabled:a})}):t.contentType===eL.DraftIssue?(0,O.jsx)(BX,{ref:r,isDisabled:a}):null});B2.displayName="AssigneesRenderer";try{B1.displayName||(B1.displayName="LoadingAssigneesCell")}catch{}let B5={width:"small",onMouseDown:e=>{e.stopPropagation()}};function B3({model:e,columnId:t,rowIndex:r,renderButton:a,height:n,maxHeight:i,...l}){let{postStats:s}=os(),{navigationDispatch:o}=i$(),d=iW(),u=(0,H.useRef)(null),c=(0,H.useCallback)(e=>(u.current=e.ref.current,(0,O.jsx)("summary",{...e,onClick:e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&o(ir({focusType:is.Focus}))},onKeyDown:e.onKeyDown,role:"button",tabIndex:e.tabIndex,style:{height:36,outline:"none",listStyle:"none"},children:a()})),[a,o]);(0,H.useEffect)(()=>{o(ir({focusType:is.Suspended}))},[e.contentType,o]);let m=(0,H.useCallback)((e,r,a)=>{if(!e)switch(r){case"selection":case"escape":case"click-outside":{let e={focusType:is.Focus},t=a&&"key"in a&&"Enter"===a.key;return"selection"===r&&t&&(e.y=io.Next),o(ir(e))}case"convert-confirmation":if(t===eM.Repository)return o(ir({y:io.Next,focusType:is.Focus}));return;default:return}},[t,o]),p=(0,H.useCallback)(e=>{e.target instanceof Element&&e.target.closest("summary")===u.current||m(!1,"click-outside")},[m]),f=vk({...l,model:e,initialFilterValue:d,onOpenChange:m,columnId:t,renderAnchor:c});return!function({contentType:e},t){if(e!==eL.DraftIssue)return!1;let r=tZ(t);return!!r&&!lK(r)}(e,t)?(0,O.jsx)(c1.b,{...f,overlayProps:{...B5,height:n,maxHeight:i,sx:{...B5.sx,animationDuration:"80ms"},onClickOutside:p,...(0,ef.f)(kc(r,t))}}):(0,O.jsx)(w0,{renderAnchor:c,isOpen:!0,showPrompt:t!==eM.Repository,item:e,onOpenChange:m,onSuccess:()=>s({name:aD,ui:"cell-editor",memexProjectItemId:e.id})})}B3.displayName="SelectPanelEditor";let B4=({currentValue:e,model:t,columnId:r,...a})=>{BK("AssigneesEditor",t.id);let{fetchOptions:n,saveSelected:i}=function({model:e,onSaved:t}){let{updateItem:r}=ve(),{fetchSuggestedAssignees:a}=hS();return{fetchOptions:(0,H.useCallback)(()=>{a(e)},[e,a]),saveSelected:(0,H.useCallback)(async a=>{await r(e,{dataType:eA.Assignees,value:a}),t&&t()},[e,t,r])}}({model:t}),l=(0,H.useMemo)(()=>Nf(e)?e.value:[],[e]),s=(0,H.useCallback)(()=>(0,O.jsx)(B2,{currentValue:e,model:t}),[e,t]);return(0,O.jsx)(B3,{model:t,placeholderText:"Search people",selected:l,fetchOptions:n,filterOptions:b3,getSortAttribute:vi,convertOptionToItem:vl,saveSelected:i,renderButton:s,columnId:r,groupMetadata:[{groupId:"assigned"},{groupId:"suggestions",header:{title:"Suggestions",variant:"filled"}}],...a})},B8=(0,H.memo)(B4);B8.displayName="AssigneesEditor";try{B4.displayName||(B4.displayName="AssigneesEditorFunc")}catch{}let B6=new ScoringCache,B7=B6.sortByWithCache.bind(B6);function B9(e,t,r){return b1(e,t,e=>e.name,B6,B7,r)}let $e=()=>{let{findMemexItem:e}=hi(),{setColumnValue:t}=hr(),{setSuggestedIssueTypesForItem:r}=hI();return{fetchSuggestedIssueTypes:(0,H.useCallback)(async a=>{r(a.getSuggestionsCacheKey(),void 0);let{response:n,error:i}=await hC(()=>{if(a.memexItemId?.())return ZH({memexProjectItemId:a.memexItemId()});if(a.contentType===eL.Issue)return hx({kind:lC.ISSUE,itemId:a.itemId(),repositoryId:a.ownerId()});throw Error(`Unsupported item type: ${a.contentType}`)}),l=e(a.id);l&&!i&&t(l,{memexProjectColumnId:eM.IssueType,value:n?.suggestions.find(e=>e.selected)});let s=n?.suggestions??i;return r(a.getSuggestionsCacheKey(),s),s},[r,t,e])}},$t=e=>({...e,text:e.name,description:e.description&&t3(e.description),descriptionVariant:"block",...(0,ef.f)("table-cell-editor-row")}),$r=e=>e.name,$a=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:80,maxWidth:100,...(0,ef.f)("placeholder")})}),$n=B0(function({currentValue:e,model:t,isDisabled:r}){if(Bq("DateRenderer",t.id),Nm(e))return(0,O.jsx)($a,{});if(Np(e))return null;let a=tX(e.value.value);return(0,O.jsx)(IM,{sx:{justifyContent:"flex-start"},children:(0,O.jsx)(vo,{dangerousHtml:a,isDisabled:r})})});try{$a.displayName||($a.displayName="LoadingDateCell")}catch{}try{$n.displayName||($n.displayName="DateRenderer")}catch{}let $i=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:50,maxWidth:100,...(0,ef.f)("placeholder")})}),$l=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){Bq("IssueTypeRenderer",t.id);let n=Nf(e)?e.value:void 0,i=tt.Yf.find(e=>e===n?.color),l=(0,tt.L7)(i||"GRAY");return Nm(e)?(0,O.jsx)($i,{}):t.contentType===eL.DraftIssue?(0,O.jsx)(BX,{ref:r,isDisabled:a}):(0,O.jsx)(BX,{ref:r,isDisabled:a,children:n&&(0,O.jsx)(eO.Z,{sx:{overflow:"hidden",display:"flex"},children:(0,O.jsx)(yJ.Z,{sx:{my:0,bg:l.bg,color:l.fg,borderColor:l.border},text:n.name})})})});$l.displayName="IssueTypeRenderer";try{$i.displayName||($i.displayName="LoadingIssueTypeCell")}catch{}let $s=({labels:e,dropdownRef:t,isDisabled:r})=>(0,O.jsx)(BX,{ref:t,isDisabled:r,children:(0,O.jsx)(eO.Z,{sx:{overflow:"hidden",display:"flex",gap:1},children:e?.map(e=>O.jsx(v6,{label:e},e.id))})});try{$s.displayName||($s.displayName="LabelGroup")}catch{}let $o=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:30,maxWidth:60,...(0,ef.f)("placeholder")})}),$d=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){Bq("LabelsRenderer",t.id);let n=Nf(e)?e.value:void 0;return Nm(e)?(0,O.jsx)($o,{}):t.contentType===eL.DraftIssue?(0,O.jsx)(BX,{ref:r,isDisabled:a}):(0,O.jsx)($s,{labels:n,dropdownRef:r,isDisabled:a})});$d.displayName="LabelsRenderer";try{$o.displayName||($o.displayName="LoadingLabelsCell")}catch{}let $u=(0,H.forwardRef)((e,t)=>{let r=(0,H.useRef)(null);(0,my.z)(t,r);let a=e.isDisabled?{color:"fg.muted",...e.sx}:e.sx;return(0,O.jsx)(uB.Z,{target:"_blank",rel:"noreferrer",tabIndex:-1,...e,sx:{textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",...a},ref:r})});$u.displayName="LinkCell";let $c=(0,H.memo)(function({milestone:e,isDisabled:t}){return(0,O.jsx)(eO.Z,{sx:{alignItems:"center",overflow:"hidden",flex:"1",height:"20px",display:"flex"},children:e&&(0,O.jsx)($u,{href:e.url,muted:!0,isDisabled:t,children:e.title})})});try{$c.displayName||($c.displayName="Milestone")}catch{}let $m=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:50,maxWidth:100,...(0,ef.f)("placeholder")})}),$p=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){if(Bq("MilestoneRenderer",t.id),Nm(e))return(0,O.jsx)($m,{});if(t.contentType===eL.DraftIssue)return(0,O.jsx)(BX,{ref:r,isDisabled:a});let n=Nf(e)?e.value:void 0;return(0,O.jsx)(BX,{ref:r,isDisabled:a,children:(0,O.jsx)($c,{milestone:n,isDisabled:a})})});$p.displayName="MilestoneRenderer";try{$m.displayName||($m.displayName="LoadingMilestoneCell")}catch{}let $f=()=>(0,O.jsx)(IM,{sx:{justifyContent:"flex-end"},children:(0,O.jsx)(O6,{minWidth:20,maxWidth:30,...(0,ef.f)("placeholder")})}),$h=B0(function({currentValue:e,model:t,isDisabled:r}){return(Bq("NumberRenderer",t.id),Nm(e))?(0,O.jsx)($f,{}):Np(e)?null:(0,O.jsx)(IM,{sx:{justifyContent:"flex-end"},children:(0,O.jsx)(vo,{dangerousHtml:e.value,isDisabled:r})})});$h.displayName="NumberRenderer";try{$f.displayName||($f.displayName="LoadingNumberCell")}catch{}let $g=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:50,maxWidth:100,...(0,ef.f)("placeholder")})}),$y=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){if(Bq("ParentIssueRenderer",t.id),Nm(e))return(0,O.jsx)($g,{});let n=Nf(e)?e.value:void 0;return(0,O.jsx)(BX,{ref:r,isDisabled:a,children:(0,O.jsx)(OF,{parentIssue:n})})});$y.displayName="ParentIssueRenderer";try{$g.displayName||($g.displayName="LoadingParentIssueCell")}catch{}let $x=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:50,maxWidth:120,...(0,ef.f)("placeholder")})}),$b=B0(function({currentValue:e,model:t,dropdownRef:r,isDisabled:a}){if(Bq("RepositoryRenderer",t.id),Nm(e))return(0,O.jsx)($x,{});if(Nf(e)){let t=e.value;return(0,O.jsx)(IM,{children:(0,O.jsxs)($u,{href:t.url,muted:!0,isDisabled:a,children:[(0,O.jsx)(c9,{repository:t}),(0,O.jsx)(eB.Z,{sx:{ml:1},children:t.nameWithOwner})]})})}return t.contentType===eL.DraftIssue?(0,O.jsx)(BX,{ref:r,isDisabled:a}):null});$b.displayName="RepositoryRenderer";try{$x.displayName||($x.displayName="LoadingRepositoryCell")}catch{}let $v=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:40,maxWidth:80,...(0,ef.f)("placeholder")})}),$w=B0(function({currentValue:e,model:t,columnId:r,dropdownRef:a,options:n,isDisabled:i}){if(Bq("SingleSelectRenderer",t.id),!tZ(r))return null;let l=Nf(e)?e.value.id:null,s=n.find(e=>e.id===l);return Nm(e)?(0,O.jsx)($v,{}):s?(0,O.jsx)(BX,{ref:a,isDisabled:i,sx:{overflow:"hidden",display:"flex"},children:(0,O.jsx)(eO.Z,{sx:{overflow:"hidden",display:"flex"},children:(0,O.jsx)(y0,{option:s})})}):(0,O.jsx)(BX,{ref:a,isDisabled:i})});$w.displayName="SingleSelectRenderer";try{$v.displayName||($v.displayName="LoadingSingleSelectCell")}catch{}let $j=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:80,maxWidth:200,...(0,ef.f)("placeholder")})}),$C=B0(function({currentValue:e,model:t,isDisabled:r}){return(Bq("TextRenderer",t.id),Nm(e))?(0,O.jsx)($j,{}):Np(e)?null:(0,O.jsx)(IM,{children:(0,O.jsx)(vo,{dangerousHtml:e.value.html,isDisabled:r})})});$C.displayName="TextRenderer";try{$j.displayName||($j.displayName="LoadingTextCell")}catch{}let $I=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:80,maxWidth:200,...(0,ef.f)("placeholder")})}),$S=B0(function({currentValue:e,model:t,isDisabled:r}){Bq("TitleRenderer",t.id);let a=t1(Nf(e)?e.value:void 0),{openPane:n}=dK(),{memex_new_issue_viewer:i,memex_issue_viewer_prefetch:l}=n9(),s=(0,uN.useRelayEnvironment)(),o=(0,H.useCallback)(()=>{if(i&&l&&t.contentType===eL.Issue){let e=t.getItemIdentifier();if(!e)return;let{number:r,owner:a,repo:n}=e;(0,km.f)(s,a,n,r)}},[s,i,l,t]);return(0,O.jsxs)(IM,{children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(Nh,{titleColumn:e})}),(0,O.jsx)(Nx,{model:t,isDisabled:r,currentValue:e,openPane:n,onHover:o}),tW(a)&&(0,O.jsx)(eO.Z,{sx:{flexShrink:0,ml:2,display:"flex"},children:(0,O.jsxs)(eB.Z,{sx:{color:"fg.muted"},children:[" #",a]})})]})},{nullWhenRedacted:!1});$S.displayName="TitleRenderer";try{$I.displayName||($I.displayName="LoadingTitleCell")}catch{}let $k=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:30,maxWidth:60,...(0,ef.f)("placeholder")})}),$T=()=>(0,O.jsxs)(IM,{sx:{color:"fg.muted"},children:[(0,O.jsx)(eZ.Z,{icon:eF.AlertIcon,sx:{mr:1}}),"Failed to load data"]}),$N=B0(function({currentValue:e,model:t}){Bq("TracksRenderer",t.id);let{openPane:r}=dK(),a=(0,H.useRef)(null),n=(0,H.useRef)(null),[i,l]=(0,H.useState)(!1),s=Mx(a,n,i,[e],{xAlign:"center",yAlign:"top"}),o=(0,H.useCallback)(()=>{t.contentType===eL.Issue&&r(t)},[t,r]),d="found"===e.state&&0===Object.keys(e.value).length;if(Nm(e))return(0,O.jsx)($k,{});if(Np(e)||t.contentType===eL.DraftIssue||0===e.value.total)return null;if(d)return(0,O.jsx)($T,{});let u=t.contentType===eL.PullRequest?{as:"a",href:t.getUrl(),target:"_blank",rel:"noopener noreferrer"}:{as:"button",onClick:o},c=`${t.id}-tracks-completion-value`;return(0,O.jsxs)(IM,{children:[(0,O.jsx)(BC.h,{direction:"n",open:i,"aria-label":rI.progressPercentCount(Math.floor(e.value.completed/e.value.total*100)),ref:n,id:c,"aria-live":"polite",portalProps:{onMount:s.adjustPickerPosition}}),(0,O.jsx)(bl,{progress:e.value,"aria-describedby":c,tabIndex:-1,ref:a,onPointerEnter:()=>l(!0),onPointerLeave:()=>l(!1),...u})]})});$N.displayName="TracksRenderer";try{$k.displayName||($k.displayName="LoadingTracksCell")}catch{}try{$T.displayName||($T.displayName="FailedToLoadDataCell")}catch{}let $_=({currentValue:e,model:t,...r})=>{BK("IssueTypeEditor",t.id);let{fetchOptions:a,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:r}=ve(),{fetchSuggestedIssueTypes:a}=$e();return{fetchOptions:(0,H.useCallback)(()=>{a(e)},[e,a]),saveSelected:(0,H.useCallback)(async a=>{await r(e,{dataType:eA.IssueType,value:a[0]}),t&&t()},[e,t,r])}}({model:t}),i=(0,H.useMemo)(()=>Nf(e)?[e.value]:[],[e]),l=(0,H.useCallback)(()=>(0,O.jsx)($l,{currentValue:e,model:t}),[e,t]);return(0,O.jsx)(B3,{model:t,placeholderText:"Search types",blankslateText:"No types to show.",selected:i,fetchOptions:a,filterOptions:B9,getSortAttribute:$r,convertOptionToItem:$t,saveSelected:n,renderButton:l,...r,singleSelect:!0,height:"auto",maxHeight:"large"})},$R=(0,H.memo)($_);try{$_.displayName||($_.displayName="IssueTypeEditorFunc")}catch{}try{$R.displayName||($R.displayName="IssueTypeEditor")}catch{}let $P=({currentValue:e,model:t,...r})=>{let{fetchOptions:a,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:r}=ve(),{fetchSuggestedLabels:a}=hN();return{fetchOptions:(0,H.useCallback)(()=>{a(e)},[e,a]),saveSelected:(0,H.useCallback)(async a=>{await r(e,{dataType:eA.Labels,value:a}),t&&t()},[e,t,r])}}({model:t});BK("LabelsEditor",t.id);let i=(0,H.useMemo)(()=>(Nf(e)?e.value:[]).map(e=>({...e,selected:!0})),[e]),l=(0,H.useCallback)(()=>(0,O.jsx)($d,{currentValue:e,model:t}),[e,t]);return(0,O.jsx)(B3,{model:t,placeholderText:"Search labels",selected:i,fetchOptions:a,filterOptions:v5,getSortAttribute:v3,convertOptionToItem:v4,saveSelected:n,renderButton:l,...r})},$D=(0,H.memo)($P);try{$P.displayName||($P.displayName="LabelsEditorFunc")}catch{}try{$D.displayName||($D.displayName="LabelsEditor")}catch{}let $E=({currentValue:e,model:t,...r})=>{BK("MilestoneEditor",t.id);let{fetchOptions:a,saveSelected:n}=function({model:e,onSaved:t}){let{updateItem:r}=ve(),{fetchSuggestedMilestones:a}=hR();return{fetchOptions:(0,H.useCallback)(()=>{a(e)},[e,a]),saveSelected:(0,H.useCallback)(async a=>{await r(e,{dataType:eA.Milestone,value:a[0]}),t&&t()},[e,t,r])}}({model:t}),i=(0,H.useMemo)(()=>Nf(e)?[e.value]:[],[e]),l=(0,H.useCallback)(()=>(0,O.jsx)($p,{currentValue:e,model:t}),[e,t]);return(0,O.jsx)(B3,{model:t,placeholderText:"Search milestones",blankslateText:"No milestones to show.",selected:i,fetchOptions:a,filterOptions:wn,getSortAttribute:wi,convertOptionToItem:wl,groupMetadata:[{groupId:"open",header:{title:"Open",variant:"filled"}},{groupId:"closed",header:{title:"Closed",variant:"filled"}}],saveSelected:n,renderButton:l,...r,singleSelect:!0,height:"auto",maxHeight:"large"})},$A=(0,H.memo)($E);try{$E.displayName||($E.displayName="MilestoneEditorFunc")}catch{}try{$A.displayName||($A.displayName="MilestoneEditor")}catch{}function $M(e,t){let[r,a]=(0,H.useState)(!1);(0,uG.b)(()=>{!r&&e.current&&(a(!0),t&&t(),e.current.focus())},[r,e,t])}let $L=({submitValue:e,cleanupFn:t,defaultValue:r})=>{let a=(0,H.useRef)(r),n=(0,H.useCallback)(e=>{a.current=e.target.value},[a]),i=(0,H.useCallback)(()=>{if(null!==a.current){let t=e(a.current.toString());return a.current=null,t}},[a,e]),l=(0,H.useCallback)(()=>{a.current=null},[]);return(0,uG.b)(()=>function(){i(),t&&t()},[]),{onChange:n,protectedSubmitValue:i,cancelSaveOnBlur:l}},$F=({model:e,align:t,columnId:r,defaultValue:a,rowId:n,onUpdate:i,validationFn:l,type:s,emojiPickerDisabled:o=!1})=>{let d=(0,H.useRef)(null),{postStats:u}=os(),{navigationDispatch:c}=i$();$M(d);let m=(0,H.useRef)(!0),{setValidationMessage:p,clearValidationMessage:f,validationMessageId:h}=Ix(n,r),{cancelSaveOnBlur:g,protectedSubmitValue:y,onChange:x}=$L({submitValue:(0,H.useCallback)(t=>{if(u({name:a||"number"==typeof a&&0!==a?a0:a1,memexProjectColumnId:r,memexProjectItemId:e.content.id}),!l)return i(t);let n=!1;return m.current&&(n=i(t)),n&&f(),n},[f,r,a,e.content.id,i,u,l]),cleanupFn:f,defaultValue:a}),b=(0,H.useCallback)(e=>{if(x(e),!l){m.current=!0,f();return}let t=l(e.target.value);t?(m.current=!1,p(t,n,r)):(m.current=!0,f())},[x,l,p,n,r,f]),v=(0,H.useCallback)(e=>{switch(mz(e)){case mV.ENTER:y()&&c(ir({y:io.Next,focusType:is.Focus})),e.stopPropagation(),e.preventDefault();return;case mV.SHIFT_TAB:y()&&c(ir({x:io.Previous,focusType:is.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case mV.TAB:y()&&c(ir({x:io.Next,focusType:is.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case mV.ESCAPE:g(),c(ir({focusType:is.Focus})),e.stopPropagation(),e.preventDefault();return}},[g,c,y]),w=(0,yc.u)(v),j=(0,O.jsx)(pT,{...w,onChange:b,defaultValue:a,ref:d,"aria-describedby":h,"aria-invalid":!m.current,type:s,sx:{textAlign:"right"===t?"right":"left",fontSize:1}}),C=yR();return(0,O.jsx)(IM,{editing:!0,sx:"right"===t?{justifyContent:"flex-end"}:void 0,children:o?(0,O.jsx)(eB.Z,{sx:{width:"100%"},children:j}):(0,O.jsx)(yk.F,{...C,sx:{width:"100%"},children:j})})};try{$F.displayName||($F.displayName="TextCellEditor")}catch{}let $Z=(0,H.memo)(function(e){let{currentValue:t,model:r,columnId:a,rowId:n,replaceContents:i}=e,l=iW(),s=Nf(t)?t.value:null,{updateItem:o}=ve(),d=i||!s?l:s.value,u=(0,H.useCallback)(e=>{let t;let n=s?.value;if(""!==e){let r=tO(e);Number.isNaN(r)?null!=n&&(t={value:n}):t={value:r}}return o(r,{dataType:eA.Number,memexProjectColumnId:a,value:t}),!0},[a,r,s?.value,o]);return(0,O.jsx)($F,{model:r,columnId:a,rowId:n,defaultValue:d,onUpdate:u,validationFn:wc.jg,align:"right",emojiPickerDisabled:!0})});$Z.displayName="NumberEditor";var $O=r(61959);let $V=e=>{let{databaseId:t,state:r,stateReason:a,title:n,number:i}=e;if(t)return{id:t,number:i,state:"CLOSED"===r?"closed":"open",stateReason:"string"==typeof a&&["COMPLETED","NOT_PLANNED","REOPENED"].includes(a)?a.toLocaleLowerCase():void 0,title:n,url:"",repository:"",owner:"",nwoReference:"",subIssueList:{total:0,completed:0,percentCompleted:0}}},$B=({currentValue:e,model:t})=>{BK("ParentIssueEditor",t.id);let{navigationDispatch:r}=i$(),{saveSelected:a}=function({model:e,onSaved:t}){let{updateItem:r}=ve();return{saveSelected:(0,H.useCallback)(async a=>{await r(e,{dataType:eA.ParentIssue,value:a}),t?.()},[e,t,r])}}({model:t}),[n,i]=(0,H.useState)("Issue");(0,H.useEffect)(()=>{r(ir({focusType:is.Suspended}))},[t.contentType,r]);let l=(0,H.useCallback)(async e=>{if(e[0]){let t=$V(e[0]);await a(t)}else await a(void 0)},[a]),s=(0,H.useCallback)(e=>{i(e),e||r(ir({focusType:is.Focus}))},[i,r]),o=(0,H.useCallback)(()=>(0,O.jsx)($y,{currentValue:e,model:t}),[e,t]),d=t.getExtendedRepository();if(!d)return null;let{nameWithOwner:u}=d,c=u.split("/")[0]||"",m="value"in e&&!!e.value;return(0,O.jsx)($O.m,{currentIssueId:t.content.id,onPickerTypeChange:s,onIssueSelection:l,activeIssueIds:m?[e.value.id]:[],defaultRepositoryNameWithOwner:u,organization:c,pickerType:n,anchorElement:e=>(0,O.jsx)("summary",{style:{height:36,outline:"none",listStyle:"none"},role:"button",...e,children:o()})})},$$=(0,H.memo)($B);try{$B.displayName||($B.displayName="ParentIssueEditorFunc")}catch{}try{$$.displayName||($$.displayName="ParentIssueEditor")}catch{}let $z=(0,H.memo)(function(e){let{currentValue:t,model:r,rowId:a,columnId:n}=e,i=iW(),l=Nf(t)?t.value.raw:"",{updateItem:s}=ve(),o=e.replaceContents||!l?i:l,d=(0,H.useCallback)(e=>(s(r,{dataType:eA.Text,memexProjectColumnId:n,value:yf(e)}),!0),[n,r,s]);return(0,O.jsx)($F,{model:r,columnId:n,rowId:a,defaultValue:o,onUpdate:d,validationFn:wc.gu})});$z.displayName="TextEditor";let $W=(0,H.memo)(function(e){let{model:t,currentValue:r}=e,a=t.columns,{navigationDispatch:n}=i$(),i=iW(),l=(0,H.useRef)(null),s=(0,H.useRef)(!0),{updateItem:o}=ve(),{postStats:d}=os(),{setColumnValue:u}=hr();$M(l);let{addToast:c}=e9(),m=e.replaceContents?i:Nf(r)?tJ(r.value):"",{perform:p}=d1({request:(0,H.useCallback)(async e=>{if(l.current){let r=yf(l.current.value);await o(t,{dataType:eA.Title,value:{...e,title:{raw:r,html:r}}})}},[t,o]),rollback:(0,H.useCallback)(async e=>{u(t,{memexProjectColumnId:eM.Title,value:e})},[t,u])}),{cancelSaveOnBlur:f,protectedSubmitValue:h,onChange:g}=$L({submitValue:(0,H.useCallback)(e=>{let r=a.Title;return!!r&&r.contentType!==eL.RedactedItem&&(""===e?c({message:rI.titleCannotBeBlank,type:e$.warning}):(p(r.value,r.value),d({name:aU,ui:"title field",memexProjectItemId:t.content.id})),!0)},[c,a,t.content.id,p,d]),defaultValue:m}),y=(0,H.useCallback)(e=>{switch(mz(e)){case mV.ENTER:h()&&n(ir({y:io.Next,focusType:is.Focus})),e.stopPropagation(),e.preventDefault();return;case mV.SHIFT_TAB:h()&&n(ir({x:io.Previous,focusType:is.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case mV.TAB:h()&&n(ir({x:io.Next,focusType:is.Focus,details:{wrap:!0}})),e.stopPropagation(),e.preventDefault();return;case mV.ESCAPE:f(),n(ir({focusType:is.Focus})),e.stopPropagation(),e.preventDefault();return}},[n,f,h]),x={onChange:(0,H.useCallback)(e=>{g(e),s.current=!0},[g]),...(0,yc.u)(y)},b=yR(),v=a.Title;if(!v)return null;switch(v.contentType){case eL.DraftIssue:return(0,O.jsxs)(IM,{editing:!0,children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(eZ.Z,{icon:eF.IssueDraftIcon,sx:{color:"fg.muted"},"aria-label":"Draft issue"})}),(0,O.jsx)(yk.F,{...b,sx:{width:"100%"},children:(0,O.jsx)(pT,{sx:{color:"fg.muted",fontSize:1},...x,defaultValue:m,ref:l})})]});case eL.Issue:case eL.PullRequest:return(0,O.jsxs)(IM,{editing:!0,children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex"},children:(0,O.jsx)(u9,{title:v})}),(0,O.jsx)(yk.F,{...b,sx:{width:"100%"},children:(0,O.jsx)(pT,{sx:{color:"fg.default",fontSize:1},...x,defaultValue:m,ref:l})})]});default:return null}});$W.displayName="TitleEditor";let $G=e=>e?{value:new Date((0,yU.c)(e,{representation:"date"}))}:void 0,$U=(0,H.memo)(function(e){let{model:t,rowIndex:r,columnId:a,currentValue:n}=e,{updateItem:i}=ve(),{postStats:l}=os(),[s,o]=(0,H.useState)(!0),{navigationDispatch:d}=i$(),u=!e.replaceContents&&Nf(n)?n.value:null,c=(0,H.useCallback)(e=>{(o(!1),"submit-key-press"===e)?d(ir({y:io.Next,focusType:is.Focus})):d(ir({focusType:is.Focus}))},[d]),m=(0,H.useCallback)(async e=>{await i(t,{dataType:eA.Date,memexProjectColumnId:a,value:$G(e)}),l({name:u?a0:a1,memexProjectColumnId:a,memexProjectItemId:t.id})},[a,u,t,l,i]),p=(0,H.useRef)(null),f=(0,H.useCallback)(e=>(p.current=e.ref.current,(0,O.jsx)("summary",{...e,...(0,ef.f)("table-cell-date-editor"),onClick:e=>{e.stopPropagation(),e.preventDefault(),e.nativeEvent.detail<=1&&c()},onKeyDown:e.onKeyDown,role:"button",tabIndex:e.tabIndex,style:{height:36,outline:"none",listStyle:"none"},children:(0,O.jsx)($n,{currentValue:n,model:t})})),[c,n,t]),h=(0,H.useCallback)(e=>{if(e.target instanceof Element&&e.target.closest("summary")===p.current)return},[]);return(0,O.jsx)(yW.DatePicker,{open:s,onChange:m,onClose:c,value:u?new Date(tX(u.value)):null,showTodayButton:!1,showClearButton:!0,anchoredOverlayProps:{overlayProps:{onEscape:()=>c(),onClickOutside:h,onMouseDown:e=>{e.preventDefault()},...(0,ef.f)(kc(r,a.toString()))},focusTrapSettings:{restoreFocusOnCleanUp:!1}},anchor:f})});$U.displayName="DateEditor";let $H=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:40,maxWidth:80,...(0,ef.f)("placeholder")})}),$q=B0(function({currentValue:e,model:t,dropdownRef:r,columnId:a,isDisabled:n}){return(Bq("IterationRenderer",t.id),tZ(a))?Nm(e)?(0,O.jsx)($H,{}):Np(e)?(0,O.jsx)(BX,{ref:r,isDisabled:n}):(0,O.jsx)(BX,{ref:r,isDisabled:n,children:(0,O.jsx)(eO.Z,{sx:{overflow:"hidden",display:"flex"},children:(0,O.jsx)(y8.Z,{sx:{bg:"canvas.subtle",color:"fg.muted",my:0},children:(0,O.jsx)(u5,{children:e.value.titleHtml})})})}):null});$q.displayName="IterationRenderer";try{$H.displayName||($H.displayName="LoadingIterationCell")}catch{}let $K=({currentValue:e,model:t,columnModel:r,...a})=>{let{activeOptions:n,completedOptions:i,selected:l,saveSelected:s,filterChange:o}=vQ({model:t,iteration:Nf(e)?e.value:null,columnModel:r}),d=(0,H.useCallback)(()=>(0,O.jsx)($q,{currentValue:e,model:t,columnId:a.columnId}),[e,t,a.columnId]);return(0,O.jsx)(B3,{model:t,fetchOptions:fV.Z,placeholderText:"Filter options",selected:l,options:[...n,...i.slice(0,3)],filterOptions:o,getSortAttribute:vq,convertOptionToItem:vH,saveSelected:s,renderButton:d,getOptionMatchingFilterValue:vK,groupMetadata:[{groupId:"active"},{groupId:"completed",header:{title:"Completed",variant:"filled"}}],...a,singleSelect:!0,height:"auto",maxHeight:"large"})},$Q=(0,H.memo)($K);try{$K.displayName||($K.displayName="IterationEditorFunc")}catch{}try{$Q.displayName||($Q.displayName="IterationEditor")}catch{}let $X=({model:e,...t})=>(0,O.jsx)(B3,{model:e,fetchOptions:fV.Z,placeholderText:"",selected:[],filterOptions:fV.Z,getSortAttribute:fV.Z,convertOptionToItem:fV.Z,saveSelected:fV.Z,renderButton:fV.Z,...t}),$Y=(0,H.memo)($X);try{$X.displayName||($X.displayName="RepositoryEditorFunc")}catch{}try{$Y.displayName||($Y.displayName="RepositoryEditor")}catch{}let $J=(0,H.memo)(({model:e,columnModel:t,currentValue:r,...a})=>{let{navigationDispatch:n}=i$(),{addColumnOption:i}=wR(),{findColumn:l}=gt(),{projectLimits:{singleSelectColumnOptionsLimit:s}}=i5(),{saveSelected:o,options:d,selected:u}=wI({columnModel:t,model:e,selectedValueId:Nf(r)?r.value.id:null}),c=(0,H.useCallback)(()=>(0,O.jsx)($w,{currentValue:r,model:e,columnId:a.columnId,options:t.settings.options}),[r,e,a.columnId,t]),m=i3(d),[p,f]=(0,H.useState)(null),h=(0,H.useCallback)(async e=>{f(null),await i(t,e);let r=l(t.id),a=nq(r)?r.settings.options.find(({name:t})=>t===e.name):void 0;a&&o([{...a,selected:!0}]),n(ir({focusType:is.Focus}))},[i,t,l,o,n]),g=(0,H.useCallback)(e=>{let t=yf(e);return m?{...(0,ef.f)("table-cell-editor-max-options-length-row"),text:rI.singleSelectOptionLimitWarning(s),disabled:!0}:{description:"Create new option",descriptionVariant:"block",leadingVisual:eF.PlusIcon,children:(0,O.jsx)(eB.Z,{sx:{color:"accent.emphasis",wordBreak:"break-all"},children:(0,O.jsx)("strong",{children:t})}),onAction:async(e,r)=>{r.preventDefault(),f({...wy,name:t})},...(0,ef.f)("add-column-option")}},[m,s]),y=d.every(e=>"GRAY"===e.color),x=(0,H.useCallback)(e=>wC(e,!y),[y]);return p?(0,O.jsx)(wZ,{initialOption:p,onSave:h,onCancel:()=>f(null)}):(0,O.jsx)(B3,{model:e,fetchOptions:fV.Z,placeholderText:"Filter options",selected:u,options:d,filterOptions:wv,getSortAttribute:wj,convertOptionToItem:x,saveSelected:o,renderButton:c,renderCreateNewOption:g,getOptionMatchingFilterValue:ww,singleSelect:!0,height:"initial",maxHeight:"large",...a})});$J.displayName="SingleSelectEditor";let $0=(0,H.memo)($J);try{$0.displayName||($0.displayName="SingleSelectEditor")}catch{}let $1=({linkedPullRequests:e})=>(0,O.jsx)(IM,{sx:{overflow:"hidden",display:"flex",gap:1},children:e?.map(e=>O.jsx(bY,{linkedPullRequest:e,tabIndex:-1},e.id))});try{$1.displayName||($1.displayName="LinkedPullRequestGroup")}catch{}let $2=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:30,maxWidth:60,...(0,ef.f)("placeholder")})}),$5=B0(function({currentValue:e,model:t}){return(Bq("LinkedPullRequestsRenderer",t.id),Nm(e))?(0,O.jsx)($2,{}):t.contentType===eL.DraftIssue||Np(e)?null:(0,O.jsx)($1,{linkedPullRequests:e.value})});$5.displayName="LinkedPullRequestsRenderer";try{$2.displayName||($2.displayName="LoadingLinkedPullRequestsCell")}catch{}let $3=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:30,maxWidth:60,...(0,ef.f)("placeholder")})}),$4=B0(function({currentValue:e,model:t}){return(Bq("ReviewersRenderer",t.id),Nm(e))?(0,O.jsx)($3,{}):t.contentType===eL.DraftIssue||Np(e)?null:(0,O.jsx)(IM,{children:(0,O.jsx)(vm,{users:e.value})})});$4.displayName="ReviewersRenderer";try{$3.displayName||($3.displayName="LoadingReviewersCell")}catch{}var $8=r(26435),$6=r(28287);let $7=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O6,{minWidth:50,maxWidth:100,...(0,ef.f)("placeholder")})}),$9=B0(function({currentValue:e,model:t}){Bq("SubIssuesProgressRenderer",t.id);let r="found"===e.state&&0===Object.keys(e.value).length,a=OL("parent-issue",t.getNameWithOwnerReference());if(Nm(e))return(0,O.jsx)($7,{});if((0,$6.Z)(e))return null;if(r)return(0,O.jsx)($T,{});if(t.contentType===eL.DraftIssue)return null;let n=Nf(e)?e.value:void 0;if(!n||0===n.total)return null;let i=`Sub-issues progress: ${n.completed} of ${n.total} (${n.percent_completed}%)`,l=`${i}. Show sub-issues for: ${t.getRawTitle()}`;return(0,O.jsx)(IM,{sx:{p:1},children:(0,O.jsx)($8.X,{variant:"invisible","aria-label":l,onClick:a,sx:{width:"100%",height:"100%",'[data-component="buttonContent"]':{display:"block"}},children:(0,O.jsx)(Lo,{completed:n.completed,consistentContentSizing:!0,name:"Sub-issues progress",percentCompleted:n.percent_completed,total:n.total})})})});$9.displayName="SubIssuesProgressRenderer";try{$7.displayName||($7.displayName="LoadingSubIssuesProgressCell")}catch{}let ze=()=>(0,O.jsx)(IM,{children:(0,O.jsx)(O7,{minWidth:30,maxWidth:60,...(0,ef.f)("placeholder")})}),zt=B0(({currentValue:e,model:t,projectOwner:r})=>{Bq("TrackedByRenderer",t.id);let a=Nf(e)?e.value:void 0;return a?(0,O.jsx)(IM,{children:a.map(e=>(0,O.jsx)(OB,{trackedBy:e,issueId:t.content.id,projectOwner:r,noPrefix:!0},e.key.itemId))}):null});zt.displayName="TrackedByRenderer";try{ze.displayName||(ze.displayName="LoadingTrackedByCell")}catch{}let zr={title:{typeToEditEnabled:!1,Placeholder:(0,O.jsx)($I,{}),Cell(e){let t=eM.Title,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>a?r?Nd(r):Nc:Nu,[r,a]);return(0,O.jsx)($S,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e,a=eM.Title,n=e.row.original.columns[a],i=O1(a),l=(0,H.useMemo)(()=>i?n?Nd(n):Nc:Nu,[n,i]);return(0,O.jsx)($W,{model:t,replaceContents:r,currentValue:l})}},text:{Placeholder:(0,O.jsx)($j,{}),Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>{if(!a)return Nu;let e=tB(r);return e?Nd(e):Nc},[r,a]);return(0,O.jsx)($C,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${rI.textEditor} ${rI.requiresCustomColumn}`);let{replaceContents:r}=e,a=e.column.columnModel.id,n=e.row.original.columns[a],i=O1(a),l=(0,H.useMemo)(()=>{if(!i)return Nu;let e=tB(n);return e?Nd(e):Nc},[n,i]);return(0,O.jsx)($z,{currentValue:l,model:t,replaceContents:r,columnId:a,rowId:e.row.id})}},number:{Placeholder:(0,O.jsx)($f,{}),Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>{if(!a)return Nu;let e=t$(r);return e?Nd(e.value.toString()):Nc},[r,a]);return(0,O.jsx)($h,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${rI.numberEditor} ${rI.requiresCustomColumn}`);let a=e.column.columnModel.id,n=e.row.original.columns[a],i=O1(a),l=(0,H.useMemo)(()=>{if(!i)return Nu;let e=t$(n);return e?Nd(e):Nc},[n,i]);return(0,O.jsx)($Z,{currentValue:l,model:t,replaceContents:r,rowId:e.row.id,columnId:a})}},singleSelect:{Placeholder:(0,O.jsx)($v,{}),Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>{if(!a)return Nu;let e=tz(r);return e?Nd(e):Nc},[r,a]);if(e.column.columnModel?.dataType!==eA.SingleSelect)throw Error(rI.singleSelectCustomModelError);return(0,O.jsx)($w,{currentValue:n,model:e.row.original,options:e.column.columnModel.settings.options,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=e.column.columnModel?.id||-1,a=e.row.original.columns[r],n=O1(r),i=(0,H.useMemo)(()=>{if(!n)return Nu;let e=tz(a);return e?Nd(e):Nc},[a,n]);if(t.contentType===eL.RedactedItem)return null;if(e.column.columnModel?.dataType!==eA.SingleSelect)throw Error(rI.singleSelectCustomModelError);return(0,O.jsx)($0,{currentValue:i,model:t,rowIndex:e.row.index,columnModel:e.column.columnModel,columnId:e.column.id})}},date:{Placeholder:(0,O.jsx)($a,{}),Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>{if(!a)return Nu;let e=tU(r);return e?Nd(e):Nc},[r,a]);return(0,O.jsx)($n,{currentValue:n,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,{replaceContents:r}=e;if(!e.column.columnModel||!e.column.columnModel.userDefined)throw Error(`${rI.dateEditor} ${rI.requiresCustomColumn}`);let a=e.column.columnModel.id,n=e.row.original.columns[a],i=O1(a),l=(0,H.useMemo)(()=>{if(!i)return Nu;let e=tU(n);return e?Nd(e):Nc},[n,i]);return(0,O.jsx)($U,{currentValue:l,model:t,replaceContents:r,rowIndex:e.row.index,columnId:e.column.columnModel.id})}},assignees:{Placeholder:(0,O.jsx)(B1,{}),Cell(e){let t=eM.Assignees,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a.map(vu)):Nc:Nu,[a,r]);return(0,O.jsx)(B2,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=eM.Assignees,a=O1(r),n=e.row.original.columns[r],i=(0,H.useMemo)(()=>a?n?Nd(n.map(vu)):Nc:Nu,[n,a]);return t.contentType===eL.RedactedItem?null:(0,O.jsx)(B8,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},iteration:{Placeholder:(0,O.jsx)($H,{}),Cell(e){let t=e.column.columnModel?.id||-1,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>{if(!a)return Nu;let t=tz(r);if(!t)return Nc;let n=(nH(e.column.columnModel)?nR(e.column.columnModel):[]).find(e=>e.id===t.id);return n?Nd(n):Nc},[r,a,e.column.columnModel]);return(0,O.jsx)($q,{currentValue:n,model:e.row.original,columnId:e.column.id,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=e.column.columnModel?.id||-1,a=e.row.original.columns[r],n=O1(r),i=(0,H.useMemo)(()=>{if(!n)return Nu;let t=tz(a);if(!t)return Nc;let r=(nH(e.column.columnModel)?nR(e.column.columnModel):[]).find(e=>e.id===t.id);return r?Nd(r):Nc},[a,n,e.column.columnModel]);if(t.contentType===eL.RedactedItem)return null;if(e.column.columnModel?.dataType!==eA.Iteration)throw Error(rI.iterationCustomModelError);return(0,O.jsx)($Q,{currentValue:i,model:t,rowIndex:e.row.index,columnModel:e.column.columnModel,columnId:e.column.id})}},milestone:{Placeholder:(0,O.jsx)($m,{}),Cell(e){let t=eM.Milestone,r=e.row.original.columns[t],a=O1(t),n=(0,H.useMemo)(()=>a?r?Nd(r):Nc:Nu,[r,a]);return(0,O.jsx)($p,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=eM.Milestone,a=e.row.original.columns[r],n=O1(r),i=(0,H.useMemo)(()=>n?a?Nd(a):Nc:Nu,[a,n]);return t.contentType===eL.RedactedItem?null:(0,O.jsx)($A,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},labels:{Placeholder:(0,O.jsx)($o,{}),Cell(e){let t=eM.Labels,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($d,{currentValue:n,model:e.row.original,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=eM.Labels,a=O1(r),n=e.row.original.columns[r],i=(0,H.useMemo)(()=>a?n?Nd(n):Nc:Nu,[n,a]);return t.contentType===eL.RedactedItem?null:(0,O.jsx)($D,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},repository:{Placeholder:(0,O.jsx)($x,{}),Cell(e){let t=eM.Repository,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($b,{currentValue:n,dropdownRef:e.dropdownRef,model:e.row.original,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original;return t.contentType===eL.DraftIssue?(0,O.jsx)($Y,{model:t,rowIndex:e.row.index,columnId:e.column.id}):null}},linkedPullRequests:{Placeholder:(0,O.jsx)($2,{}),Cell(e){let t=eM.LinkedPullRequests,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($5,{model:e.row.original,currentValue:n})},CellEditor:()=>null},reviewers:{Placeholder:(0,O.jsx)($3,{}),Cell(e){let t=eM.Reviewers,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a.map(vd)):Nc:Nu,[a,r]);return(0,O.jsx)($4,{model:e.row.original,currentValue:n})},CellEditor:()=>null},tracks:{Placeholder:(0,O.jsx)($k,{}),Cell(e){let t=eM.Tracks,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($N,{model:e.row.original,currentValue:n})},CellEditor:()=>null},trackedBy:{Placeholder:(0,O.jsx)(ze,{}),Cell(e){let t=eM.TrackedBy,r=O1(t),a=e.row.original.columns[t],{projectOwner:n}=i5(),i=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)(zt,{model:e.row.original,currentValue:i,projectOwner:n})},CellEditor:()=>null},issueType:{Placeholder:(0,O.jsx)($i,{}),Cell(e){let t=eM.IssueType,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($l,{model:e.row.original,currentValue:n,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=eM.IssueType,a=O1(r),n=e.row.original.columns[r],i=(0,H.useMemo)(()=>a?n?Nd(n):Nc:Nu,[n,a]);return t.contentType===eL.DraftIssue||t.contentType===eL.Issue?(0,O.jsx)($R,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id}):null}},parentIssue:{Placeholder:(0,O.jsx)($g,{}),Cell(e){let t=eM.ParentIssue,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($y,{model:e.row.original,currentValue:n,dropdownRef:e.dropdownRef,isDisabled:e.isDisabled})},CellEditor(e){let t=e.row.original,r=eM.ParentIssue,a=O1(r),n=e.row.original.columns[r],i=(0,H.useMemo)(()=>a?n?Nd(n):Nc:Nu,[n,a]);return t.contentType!==eL.Issue?null:(0,O.jsx)($$,{currentValue:i,model:t,rowIndex:e.row.index,columnId:e.column.id})}},subIssuesProgress:{Placeholder:(0,O.jsx)($7,{}),Cell(e){let t=eM.SubIssuesProgress,r=O1(t),a=e.row.original.columns[t],n=(0,H.useMemo)(()=>r?a?Nd(a):Nc:Nu,[a,r]);return(0,O.jsx)($9,{model:e.row.original,currentValue:n})},CellEditor:()=>null}},za=M5(e=>e.original.columns,{useDistinctAssigneesGrouping:!1}),zn=M5(e=>e.original.columns,{useDistinctAssigneesGrouping:!0});function zi(e){return Object.keys(zr).reduce((t,r)=>(t[r]={...t[r],groupingConfiguration:e[r]},t),{...zr})}let zl=zi(za),zs=zi(zn);function zo(e,t){return{...e,id:`${t}-${e.id}`}}let zd=(e,t)=>{let{memex_table_without_limits:r}=n7();return a=>r?function(e,t,r){let a=[];for(let n of e){let e=r(t,n);if(e)for(let t of e){let{value:e}=t;-1===a.findIndex(t=>t.value===e)&&a.push(t)}}let{memex_table_without_limits:n}=n7();if(n&&a.length>0)return a;let i=m4(t);return i&&a.push({value:n?"_noValue":rI.undefined,sourceObject:i}),a}(a,e,t.getGroupingMetadata):M2(a,e,t.getGroupingMetadata,t.getAllGroupMetadata,zo)},zu=(e,t)=>r=>t.getGroupingMetadata(e,r),zc=(0,H.createContext)(null),zm=(0,H.memo)(function({isFieldVisible:e,children:t}){let{allColumns:r}=df(),{memex_group_by_multi_value_changes:a}=n9(),{getWidth:n}=kQ(),i=(0,H.useMemo)(()=>r.map(e=>(function(e,t={memex_group_by_multi_value_changes:!1},r){let a=function(e,{useDistinctAssigneesGrouping:t}){return t?zs[e.dataType]:zl[e.dataType]}(e,{useDistinctAssigneesGrouping:t.memex_group_by_multi_value_changes});return function(e,t,r){let{groupingConfiguration:a,...n}=t,i=_U(e),l=a?{canGroupBy:LA(e),getGroupedRows:zd(e,a),getGroupValue:zu(e,a)}:{canGroupBy:!1};return{canSort:!0,sortType:(e,t,r,a)=>e.isGrouped&&t.isGrouped?0:i(e.original,t.original,a,!0),Header:e.name,id:e.id.toString(),minWidth:75,width:r,columnModel:e,...l,...n}}(e,a,r)})(e,{memex_group_by_multi_value_changes:a},n(e.id))),[r,a,n]),l=(0,H.useMemo)(()=>r.filter(t=>!e(t)).map(e=>`${e.id}`),[r,e]),s=(0,H.useMemo)(()=>({columnDefinitions:i,hiddenColumns:l}),[i,l]);return(0,O.jsx)(zc.Provider,{value:s,children:t})});try{zc.displayName||(zc.displayName="TableColumnsContext")}catch{}try{zm.displayName||(zm.displayName="TableColumnsProvider")}catch{}let zp=()=>{let e=(0,H.useContext)(zc);if(null===e)throw Error("useTableColumns must be accessed from within a TableColumnsContext.Provider");return e},zf={SET_DRAGGING_COLUMN:"useColumnReordering.SET_DRAGGING_COLUMN",SET_DRAG_TARGET:"useColumnReordering.SET_DRAG_TARGET",RESET:"useColumnReordering.RESET"};function zh(){return{type:zf.RESET}}function zg(e){let{visibleFields:t}=Sb(),r=(0,H.useMemo)(()=>t.map(e=>e.id.toString()),[t]);e.useOptions.push(e=>({...e,initialState:{...e.initialState,columnOrder:r}})),e.getHeaderProps.push(zy),e.stateReducers.push(zx)}function zy(e,t){let{hasWritePermissions:r}=i4(),a=!r||!1===t.column.canReorder,n={column:t.column,columnOrder:t.instance.state.columnOrder,overColumn:t.instance.state.overColumn},i=(0,IZ.nB)({disabled:a,id:t.column.id,data:n});return Av("is-dragging",i.isDragging),[e,{dragProps:i}]}function zx(e,t){if(!zv.includes(t.type))return e;switch(t.type){case zf.RESET:{let t={...e,draggingColumnId:null,overColumn:null};if(rt(e,t))return e;return t}case zf.SET_DRAGGING_COLUMN:{let r={...e,draggingColumnId:t.columnId};if(rt(e,r))return e;return r}case zf.SET_DRAG_TARGET:{let r={...e,overColumn:t.overColumn};if(rt(e.overColumn??{},r.overColumn??{}))return e;return r}}}function zb(e,t,r){if(!1===t.canBeShifted)return Im(t)?"right":"left";{let t=e.over?.rect;return t&&e.activatorEvent instanceof PointerEvent?r>t.left+t.width/2?"right":"left":"right"}}let zv=Object.values(zf),zw="useCustomGroupBy",zj="useRanking",zC="useSortedByGroupOrdering",zI=[Bz.useColumnOrder.pluginName,Bz.useSortBy.pluginName,zw,zC,zj];function zS(e,t){let r=[],a=zI.indexOf(t);return a>-1&&(r=zI.slice(0,a)),(0,Bz.ensurePluginOrder)(e,r,t)}let zk={RESET_GROUP_BY:"useCustomGroupBy.RESET_GROUP_BY",SET_GROUP_BY:"useCustomGroupBy.SET_GROUP_BY",TOGGLE_GROUP_BY:"useCustomGroupBy.TOGGLE_GROUP_BY"},zT=e=>{e.stateReducers.push(zN),e.visibleColumnsDeps.push((e,{instance:t})=>[...e,t.state.groupByColumnIds]),e.visibleColumns.push(z_),e.useInstance.push(zR)};function zN(e,t,r,a){if(!zP.includes(t.type))return e;switch(t.type){case zk.RESET_GROUP_BY:{let t=a&&a.initialState&&a.initialState.groupByColumnIds||[],r={...e,groupByColumnIds:t};if(rt(e,r))return e;return r}case zk.SET_GROUP_BY:{let r={...e,groupByColumnIds:t.groupedColumnIds};if(rt(e,r))return e;return r}case zk.TOGGLE_GROUP_BY:{let{columnId:r,value:a}=t;if(void 0!==a?a:!e.groupByColumnIds.includes(r))return{...e,groupByColumnIds:[...e.groupByColumnIds,r]};return{...e,groupByColumnIds:e.groupByColumnIds.filter(e=>e!==r)}}}}function z_(e,t){let r=t.instance.state.groupByColumnIds||[];for(let t of e)t.isGrouped=r.includes(t.id);return e}function zR(e){let{allColumns:t,plugins:r,state:{groupByColumnIds:a},dispatch:n}=e;for(let a of(zS(r,zT.pluginName),t))a.canGroupBy&&(a.toggleGroupBy=()=>e.toggleGroupBy(a.id));let i=(0,H.useCallback)((e,t)=>{n({type:zk.TOGGLE_GROUP_BY,columnId:e,value:t})},[n]),l=(0,H.useCallback)(e=>{n({type:zk.SET_GROUP_BY,value:e})},[n]),{groupedRowsList:s,flatRowsList:o,rowsByIdHash:d}=function(e){let{memex_table_without_limits:t}=n9();return t?function(e){let{rows:t,flatRows:r,rowsById:a,state:{groupByColumnIds:n,collapsedGroups:i},allColumns:l}=e,{data:s,itemQueriesByGroup:o}=dR();return(0,H.useMemo)(()=>{if(!n.length||!s)return{groupedRowsList:t,flatRowsList:r,rowsByIdHash:a};let e=n.find(e=>l.find(t=>t.id===e)),d=l.find(t=>t.id===e);if(!d)throw Error(`Column with id ${e} is used for grouping but could not be found`);let u=d.columnModel;if(!u)throw Error(`Column with id ${e} is used for grouping but does not have a valid model`);let c={},m={};return{groupedRowsList:Object.values(o).map(t=>{let{groupId:r,groupValue:n,groupMetadata:l,totalCount:s}=t,o=t.queries.reduce((e,t)=>(e.push(...t?.data?.nodes||[]),e),[]),d=`${e}:${r}`,p=o.map(e=>{let t=zo(a[e.id],d);return c[t.id]=t,m[e.id]=t,t});return{id:d,isGrouped:!0,groupedColumnId:e,groupedValue:r,groupedSourceObject:m8(u,n,l),subRows:p,totalCount:s?.value||0,isCollapsed:i.indexOf(r)>-1}}),flatRowsList:r.map(e=>m[e.id]).filter(e=>!!e),rowsByIdHash:c}},[n,s,l,o,r,t,a,i])}(e):function(e){let{rows:t,flatRows:r,rowsById:a,allColumns:n,state:{groupByColumnIds:i,collapsedGroups:l}}=e;return(0,H.useMemo)(()=>{if(!i.length)return{groupedRowsList:t,flatRowsList:r,rowsByIdHash:a};let e=i.filter(e=>n.find(t=>t.id===e)),s=[],o={};return{groupedRowsList:function e(t,r,a,n,i,l,s=0,o){if(s===t.length){for(let e of l)r.push(e),a[e.id]=e;return l}let d=t[s],u=n.find(e=>e.id===d);if(!u)throw Error(`Column with id ${d} is used for grouping but could not be found`);if(!u.getGroupedRows)throw Error(`Column with id ${d} is used for grouping but does not have a valid grouping function`);if(!u.columnModel)throw Error(`Column with id ${d} is used for grouping but does not have a valid model`);return u.getGroupedRows(l).map(({value:l,sourceObject:u,rows:c})=>{let m=`${d}:${l}`,p=e(t,r,a,n,i,c,s+1,m=o?`${o}>${m}`:m);return{id:m,isGrouped:!0,groupedColumnId:d,groupedValue:l,groupedSourceObject:u,subRows:p,totalCount:p.length,isCollapsed:i.indexOf(l)>-1}})}(e,s,o,n,l,t),flatRowsList:s,rowsByIdHash:o}},[i,t,r,a,n,l])}(e)}(e);Object.assign(e,{groupedRows:a.length>0?s:void 0,rows:o,flatRows:o,rowsById:d,toggleGroupBy:i,setGroupBy:l})}zT.pluginName=zw;let zP=Object.values(zk);function zD(e){e.useInstance.push(zE)}function zE(e){let t=(0,H.useRef)(e.state.columnResizing.isResizingColumn),{updateWidth:r}=kQ();(0,H.useEffect)(()=>{if(null!=t.current&&!e.state.columnResizing.isResizingColumn){let a=e.columns.find(e=>e.id===t.current);a&&null!==a.width&&r(t.current,Number(a.width))}t.current=e.state.columnResizing.isResizingColumn},[e.columns,e.state.columnResizing,r])}function zA(e){e.useInstance.push(zM)}function zM(e){Object.assign(e,{autoResetResize:!e.state.columnResizing.isResizingColumn})}let zL=e=>{e.useInstance.push(zF)};function zF(e){let{rows:t,plugins:r}=e;zS(r,zL.pluginName),(0,H.useMemo)(()=>{let e=0;for(let r of t)if(r.isGrouped)for(let t of r.subRows)t.index=e++;else r.index=e++;return t},[t])}function zZ(e){e.useInstance.push(zO)}function zO(e){let{rows:t,flatRows:r,groupedRows:a,state:{sortBy:n,groupByColumnIds:i},plugins:l}=e;zS(l,zZ.pluginName);let[s,o]=(0,H.useMemo)(()=>{if(!a)return[t,r];let e=n[0]&&n[0].id,l=n[0]&&n[0].desc?"desc":"asc",s=i[0],o=e&&s&&e===s&&"desc"===l,d=o?a.slice().reverse():a,u=o?d.map(e=>[...e.subRows]).flat():r;return[d,u]},[r,i,a,t,n]);Object.assign(e,{rows:o,flatRows:o,groupedRows:a?s:void 0})}function zV({fields:e,plugins:t}){let{sorts:r}=dN(),{groupedByColumnId:a,collapsedGroups:n}=dI(),{columnDefinitions:i,hiddenColumns:l}=zp(),s=(0,H.useMemo)(()=>r.map(e=>({id:e.column.id.toString(),desc:"desc"===e.direction})),[r]),o=(0,H.useMemo)(()=>a?[`${a}`]:[],[a]),d=(0,H.useMemo)(()=>[Iu,...e.map(e=>e.id.toString())],[e]),u=[Bz.useBlockLayout,Bz.useColumnOrder,Bz.useSortBy,zT,zZ,zL,zg,kF,kq,zA,Bz.useResizeColumns,zD,Bz.useRowSelect,I3,...t],{query:c}=dv(),m=function(){let{memex_table_without_limits:e}=n9();return e?function(){let{items:e}=dP();return(0,H.useMemo)(()=>e,[e])}():function(){let{filteredItems:e}=M1(),{sortUngroupedItems:t}=ZL();return(0,H.useMemo)(()=>t(e),[e,t])}()}();return(0,Bz.useTable)({columns:i,data:m,orderByFn:BG,getRowId:BW,initialState:{hiddenColumns:l,sortBy:s,groupByColumnIds:o,collapsedGroups:n,columnOrder:d},manualSortBy:!0,autoResetHiddenColumns:!1,autoResetSelectedRows:!1,autoResetResize:!0,useControlledState:e=>(0,H.useMemo)(()=>({...e,sortBy:s,groupByColumnIds:o,collapsedGroups:n,hiddenColumns:l,columnOrder:d}),[e,d,s,c,o,l,n])},...u)}function zB(e,t,r){let a=(0,H.useRef)(),n=(0,H.useRef)(t.length);return(0,uG.b)(()=>{if(a.current&&t.length!==n.current){let n=t.findIndex(e=>e.original.id===a.current),i=r?.rowHeight??37;e.current?.scrollTo({left:r?.left,top:n*i,behavior:"smooth"}),a.current=void 0}n.current=t.length}),{onNewItem:(0,H.useCallback)(e=>{a.current=e.id},[])}}zL.pluginName=zj,zZ.pluginName=zC;var z$=r(23282);let zz=(0,H.memo)(e=>{let t=(0,H.useContext)(Iw),r=t?.column,a=e.visibleColumns.at(-1)===r,n=t?.side;if(r){let t=r.totalLeft;return("right"===n&&(t+=r.totalWidth),a&&"right"===n?t-=3:t-=Math.ceil(1.5),e.sticky&&e.height)?(0,O.jsx)(eO.Z,{sx:{bg:"accent.emphasis",top:0,ml:t,mt:-e.height,height:e.height,width:3,zIndex:5,pointerEvents:"none",position:"sticky"}}):(0,O.jsx)(eO.Z,{sx:{bg:"accent.emphasis",left:t,top:0,bottom:0,width:3,height:"100%",position:"absolute"}})}return null});zz.displayName="ColumnDropZoneSash";let zW=(e,t)=>e?t===b8.BEFORE?e.rect.top:e.rect.bottom:null,zG=({rows:e,isGrouped:t,scrollRef:r,headerHeight:a,tableWidth:n})=>{let{active:i,over:l}=(0,IZ.Cj)(),{ctrlKey:s}=Z6(),o=(0,H.useMemo)(()=>{let r=[];if(t)for(let t of e){let e=t.subRows[t.subRows.length-1]?.original?.id;void 0!==e&&r.push(e)}else{let t=e[e.length-1]?.original?.id;void 0!==t&&r.push(t)}return r},[e,t]),d=(0,H.useCallback)(e=>o.includes(e),[o]),u=i?b6(i,l):null,c=u?zW(l,u):null,m=l?.data.current,p=IB.is(m)?m.originalItemId:null,f=!!p&&d(p),h=u===b8.AFTER&&f?-2:0,g=(0,H.useMemo)(()=>{if(r?.current&&null!==c){let e=r.current.getBoundingClientRect(),t=a??0,i=n?`${n}px`:"100%";return{top:r.current.scrollTop-e.top-t+h+c-1,left:r.current.scrollLeft,width:i}}return{}},[r,n,a,c,h]);return(0,O.jsx)(O.Fragment,{children:i&&l&&null!==c&&p&&u&&i.id!==l.id&&(0,O.jsx)(eO.Z,{sx:{bg:"accent.emphasis",height:3,pointerEvents:"none",display:"flex",position:"absolute",zIndex:3},style:g,children:t&&s?(0,O.jsx)(eZ.Z,{icon:eF.PlusIcon,sx:{bg:"accent.emphasis",borderRadius:"100%",color:"fg.onEmphasis",position:"relative",left:52,top:"-7px",padding:"2px",zIndex:3},size:16}):null})})};try{zG.displayName||(zG.displayName="RowReorderSash")}catch{}function zU(){let{navigationDispatch:e}=i$();return(0,H.useCallback)(()=>{e(iV())},[e])}let zH=e=>{let t=e;if(Z9(t)){let{activeItemGroup:e,overItemGroup:r,...a}=t;e.value===r.value&&(t=Oe(a)?a:void 0)}if(t&&Oe(t)){let{overItem:e,side:r,...a}=t;t.activeItem.id===e.id&&(t=Z9(a)?a:void 0)}return t},zq=()=>{let{updateAndReorderItem:e}=vr(),{addToast:t}=e9(),{sorts:r,clearSortedBy:a}=dN(),n=ID(),{navigationDispatch:i}=i$(),{getUpdateForGroupDropEvent:l,handleGroupDropRequestError:s}=Or(),{toggleGroupCollapsed:o}=dI(),d=(0,H.useCallback)(()=>n.flatRows.filter(e=>!e.isGrouped).map(e=>({id:e.original.id})),[n]),u=(0,H.useCallback)(e=>{let t=n.groupedRows?.find(t=>t.subRows.some(t=>t.original.id===e));if(t?.isCollapsed)return o(t.groupedValue),!0},[n,o]),c=(0,H.useCallback)(e=>{let t=n.flatRows.find(t=>t.original.id===e);t?.toggleRowSelected?.(!0);let r=t?.cells[1]?.column.id;r&&i(iO(t.id,r,!1,!1))},[n,i]),m=(0,H.useCallback)(async(t,r)=>{try{await e(t,r,{visibleItems:d()}),u(t),setTimeout(()=>c(t))}catch(e){return s(e)}},[d,u,c,e,s]),p=(0,H.useCallback)(e=>{if(!Oe(e)){let t=n.groupedRows?.find(t=>t.groupedValue===e.overItemGroup.value)?.subRows.at(-1);return t?{overItemId:t.original.id,side:b8.AFTER}:void 0}for(let n of r)if(0!==_U(n.column)(e.activeItem,e.overItem,void 0,!0)){if(!Z9(e)){let e={text:rI.cannotReorderForSortAction,handleClick:()=>a()};t({message:rI.cannotReorderForSortMessage,type:e$.warning,action:e})}return}return{overItemId:e.overItem.id,side:e.side}},[t,a,r,n.groupedRows]);return(0,H.useCallback)(async e=>{let t=zH(e);if(!t)return;let r=await l(t);if(Z9(t)&&!r)return;let a=p(t);(a||r)&&await m(t.activeItem.id,{reorderData:a,updateColumnActions:r?[r]:[]})},[l,p,m])},zK=[IZ.DL,IZ.lv],zQ={threshold:{x:0,y:.2}},zX=(0,H.memo)(function({children:e}){let t=zU(),r=ID(),a=kx(),[n,i]=(0,H.useState)(!1),[l,s]=(0,H.useState)(null),o=(0,H.useCallback)(e=>r.flatRows.find(t=>t.original.id===e)?.original,[r]),d=(0,H.useCallback)(e=>{let t=r.groupedRows?.find(t=>t.groupedValue===e);return t&&{sourceObject:t.groupedSourceObject,value:t.groupedValue}},[r]);Av("is-dragging",n);let u=zq(),c=(0,H.useCallback)(()=>{i(!0),a(),t()},[a,t]),m=(0,H.useCallback)(()=>i(!1),[]),p=(0,H.useCallback)(async({over:e,active:t})=>{i(!1);let r=t.data.current;if(!IB.is(r))return;s(r.originalItemId);let a=o(r.originalItemId),n=d(r.sortable.containerId);if(!a)return;let l=e?.data.current;if(IB.is(l)){let r=o(l.originalItemId),i=b6(t,e),s=d(l.sortable.containerId);if(!r||!i)return;await u({activeItem:a,activeItemGroup:n,overItemGroup:s,overItem:r,side:i})}else if(Bd.is(l)){let e=d(l.groupedValue);if(!e||!n)return;await u({activeItem:a,activeItemGroup:n,overItemGroup:e})}s(null)},[o,d,u]),f=(0,IZ.Dy)((0,IZ.VT)(IZ.we,{activationConstraint:{distance:4}})),h=gY();return(0,O.jsx)(IZ.LB,{collisionDetection:Aw,modifiers:zK,onDragStart:c,onDragEnd:p,onDragCancel:m,autoScroll:zQ,sensors:f,accessibility:(0,H.useMemo)(()=>({container:h}),[h]),children:(0,O.jsx)(IV.Provider,{value:l,children:e})})});try{zX.displayName||(zX.displayName="RowReorderingProvider")}catch{}function zY(e){let{state:{focus:t},navigationDispatch:r}=iB(),a=(0,H.useRef)(null),n=(0,H.useCallback)(()=>!!(e&&t&&iA(t,e))||!!(t&&iP(t)),[t,e]),i=(0,H.useCallback)(()=>{e?r(iZ(e)):r(iL())},[r,e]);(0,H.useEffect)(()=>{n()&&a.current?.focus()},[n]);let l=(0,H.useCallback)(()=>{i()},[i]),s=(0,H.useCallback)(e=>{let t=kg(r,e);t.action?kh(e,t.keyAsShortcut):t.keyAsShortcut===mV.ESCAPE&&(r(ir({focusType:is.Focus,details:{previousFocus:!0}})),kf(e))},[r]);return(0,H.useMemo)(()=>({onKeyDown:s,onFocus:l,omnibarRef:a}),[l,s,a])}let zJ=({groupId:e})=>{let{ref:t,hasNextPage:r}=VN({groupId:e}),{visibleColumns:a}=ID();return(0,O.jsx)("div",{ref:t,...(0,ef.f)(`table-pagination${e?`-${e}`:""}`),children:r?[...[,,,,,].keys()].map(e=>(0,O.jsx)(z1,{columns:a},e)):null})},z0=({columns:e})=>(0,O.jsx)(k_,{role:"row",style:{...kP},...(0,ef.f)("placeholder-row"),children:e.map(e=>(0,O.jsx)(kT,{role:"gridcell",style:{whiteSpace:"nowrap",width:e.width},children:e.Placeholder},e.id))}),z1=(0,H.memo)(z0);try{zJ.displayName||(zJ.displayName="TablePagination")}catch{}try{z0.displayName||(z0.displayName="PlaceholderRowUnmemoized")}catch{}try{z1.displayName||(z1.displayName="PlaceholderRow")}catch{}let z2=e=>{let t=IZ.Cj().active?.data.current;return IB.is(t)&&e.some(e=>e.original.id===t.originalItemId)},z5=(0,H.memo)(function(e){let t=(0,H.useRef)(null),{isVisible:r,size:a}=uK({ref:t,defaultHeight:37*e.rows.length}),{state:{focus:n}}=iB(),i=!!n&&"coordinate"===n.type&&e.rows.some(e=>e.id===n.details.y),l=z2(e.rows),s=r?"unset":`${a}px`,o=(0,H.useMemo)(()=>({height:s}),[s]);return(0,O.jsx)("div",{style:o,ref:t,children:r||i||l?e.rows.map(t=>(0,O.jsx)(kD,{row:t,index:t.index,data:e.itemData},t.original.id)):null})});try{z5.displayName||(z5.displayName="TableRowChunk")}catch{}function z3({trackedBy:e}){let{tasklist_block:t}=n9(),{parentIssuesById:r}=hu();return t?0===(r.get(e.key.itemId)?.count??0)?null:(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(k_,{sx:{borderBottom:"1px solid",borderColor:"border.muted"},children:(0,O.jsx)(IM,{sx:{pl:"50px"},children:(0,O.jsx)(F2,{trackedBy:e})})})}):null}try{z3.displayName||(z3.displayName="TrackedByMissingIssuesRow")}catch{}let z4=(0,H.memo)(function({groupId:e,scrollRef:t,metadata:r,shouldDisableFooter:a,footerPlaceholder:n}){var i;let{omnibarRef:l,onFocus:s,onKeyDown:o}=zY(e),d=(0,H.useMemo)(()=>{let e=m3(r.sourceObject);if(e)return{updateColumnActions:[e],groupId:r.value}},[r.sourceObject,r.value]),u=i_(r.sourceObject),c=(i=r.sourceObject).dataType===eA.TrackedBy&&"group"===i.kind?(0,O.jsx)(z3,{trackedBy:r.sourceObject.value}):null;return(0,O.jsxs)(O.Fragment,{children:[c,(0,O.jsx)(eO.Z,{sx:(0,H.useMemo)(()=>({alignItems:"center",height:"37px",width:"100%",pl:"12px",bg:a?"canvas.subtle":"canvas.default",color:a?"fg.muted":"inherit",backdropFilter:"unset",pointerEvents:"none",borderBottom:"unset",borderBottomColor:"unset",boxShadow:"unset",left:0,marginTop:"1px",position:"sticky",display:"flex",">:first-child":{pointerEvents:"all"}}),[a]),...(0,ef.f)(`table-group-footer-${u}`),children:(0,O.jsx)(MG,{ref:l,role:"row",isFixed:!1,newItemAttributes:d,defaultPlaceholder:n,groupingMetadata:r,onKeyDown:o,onInputFocus:s,disabled:a,scrollRef:t})})]})});function z8({groupId:e,firstRowIndex:t,isCollapsed:r,itemData:a,isEditable:n,metadata:i,rows:l,scrollRef:s,shouldDisableFooter:o,footerPlaceholder:d}){let{memex_table_without_limits:u}=n9();return r?null:(0,O.jsxs)(O.Fragment,{children:[(0,z$.Z)(l,5).map((e,r)=>(0,O.jsx)(z5,{rows:e,rowOffset:t+5*r,chunkIndex:r,chunkSize:5,itemData:a},r)),u&&(0,O.jsx)(zJ,{groupId:i.value}),n&&(0,O.jsx)(z4,{groupId:e,scrollRef:s,metadata:i,shouldDisableFooter:o,footerPlaceholder:d})]})}try{z4.displayName||(z4.displayName="TableGroupFooter")}catch{}try{z8.displayName||(z8.displayName="TableGroupContents")}catch{}let z6={backgroundColor:"canvas.inset",zIndex:-1,padding:0,height:`${IF}px`,display:"flex","&:last-child":{flexGrow:1}},z7=(0,H.memo)(function(){return(0,O.jsx)(eO.Z,{sx:z6})});try{z7.displayName||(z7.displayName="TableGroupSeparator")}catch{}let z9=45+IF,We=(0,H.memo)(function({groupId:e,metadata:t,rows:r,firstRowIndex:a,itemData:n,scrollRef:i,isCollapsed:l,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d,totalCount:u}){let c=(0,H.useRef)(null),{missingRequiredColumnData:m}=oi(),p=i_(t.sourceObject),{isVisible:f,size:h}=uK({ref:c,defaultHeight:(l?0:37*r.length+39)+z9}),g=f?"unset":`${h}px`,y=(0,H.useMemo)(()=>({height:g}),[g]),{state:{focus:x}}=iB(),{hideItemsCount:b,getAggregatesForItems:v}=CV(),w=(0,H.useMemo)(()=>r.map(e=>e.original),[r]),j=(0,H.useMemo)(()=>v(w),[v,w]),C=z2(r),I=f||C||x&&(iM(x)?r.some(e=>e.id===x.details.y):iA(x,e)),{setNodeRef:S,isOver:k}=Bu({groupId:e,groupedValue:t.value,isCollapsed:l,isEmpty:0===r.length});return(0,O.jsx)(eO.Z,{sx:y,ref:c,...(0,ef.f)(`table-group-${p}`),role:"rowgroup",children:I?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{sx:{boxShadow:"shadow.medium",borderTop:"1px solid",borderBottom:"1px solid",borderColor:k?"accent.fg":"border.muted",cursor:k?"grabbing":"auto",position:"relative",zIndex:0},ref:S,children:[(0,O.jsx)(Bf,{isCollapsed:l,metadata:t,itemsInGroup:r.map(e=>e.original),children:(0,O.jsx)(BS,{sourceObject:t.sourceObject,rowCount:u,aggregates:j,hideItemsCount:b})}),m?null:(0,O.jsx)(IW,{rows:r,groupedValue:t.value,children:(0,O.jsx)(z8,{groupId:e,firstRowIndex:a,isCollapsed:l,itemData:n,metadata:t,rows:r,scrollRef:i,shouldDisableFooter:s,footerPlaceholder:o,isEditable:d})})]}),(0,O.jsx)(z7,{})]}):null})});try{We.displayName||(We.displayName="TableGroup")}catch{}let Wt=(0,H.forwardRef)((e,t)=>{let{sx:r,...a}=e,n={display:"flex",flexDirection:"row",textAlign:"center",fontWeight:"bold",fontSize:"0",whiteSpace:"nowrap",cursor:"grab",userSelect:"none",borderColor:"border.default",borderWidth:"1px",borderStyle:"solid",borderRight:"none",borderTop:"none",borderBottom:0,outline:"none","&.readonly, &.readonly:active":{cursor:"default"},"&:active":{cursor:"grabbing"},"&.inactive, &.inactive:active":{cursor:"default"},"&.hoverable:hover":{backgroundColor:"canvas.default"},"&:last-child":{borderRight:"1px solid transparent"},...r};return(0,O.jsx)(eO.Z,{ref:t,role:"columnheader","aria-colspan":1,sx:n,...a})});Wt.displayName="HeaderGridCell";let Wr=(0,H.forwardRef)((e,t)=>{let{children:r,sx:a,...n}=e;return(0,O.jsx)(eO.Z,{sx:{alignItems:"center",py:2,px:3,overflow:"hidden",display:"flex",...a},ref:t,...n,children:r})});Wr.displayName="HeaderGridCellLayout";let Wa=e=>{let{dragProps:t,...r}=e.header.getHeaderProps({style:{minWidth:e.header.width,height:e.height}});return e.header.id===Ic?(0,O.jsx)(Wt,{tabIndex:-1,...r,...t.listeners,...(0,ef.f)(kd(e.header.id)),ref:t.setNodeRef,children:(0,O.jsx)(Wr,{sx:{padding:0,flexGrow:1},children:e.header.render("Header")})}):(0,O.jsx)(eO.Z,{...r,role:"cell",...t.listeners,ref:t.setNodeRef})};try{Wa.displayName||(Wa.displayName="DummyHeaderCell")}catch{}let Wn=(0,H.memo)(e=>{let t=e.header.columnModel,{currentView:r}=oi(),{groupByColumn:a,header:n,sliceByColumn:i}=e,l=(0,H.useRef)(null),[s,o]=(0,H.useState)(!1),{sortBy:d}=I_(),{canSort:u,isSorted:c,isSortedDesc:m,sortedIndex:p}=n,{appendFilter:f,focusFilterInput:h}=dv(),{postStats:g}=os(),{hideField:y}=Sb(),{hasWritePermissions:x}=i4(),{setColumnSort:b}=dN(),v=Sl(),w=IJ(),{sliceField:j}=or(),{memex_table_without_limits:C}=n9(),I=j===t,S=t.dataType===eA.Title,k=t.dataType===eA.SingleSelect,T=t.dataType===eA.SubIssuesProgress,N=(0,H.useCallback)(()=>{r&&(y(r.number,t),g({name:a$,ui:aB,memexProjectColumnId:t.id}))},[t,y,g,r]),_=(0,H.useCallback)(e=>{if(!t)return;let r="desc"===e,a=c?p:0;b(t,r===m?null:e),o(!1),g({name:r?aV:aO,ui:aB,context:t.id,index:a})},[t,m,c,p,b,o,g]),R=(0,H.useCallback)(()=>e.header.isGrouped?(0,O.jsx)(eO.Z,{sx:{color:"fg.muted",bg:"canvas.default",p:1},...(0,ef.f)(`grouped-label-${t.name}`),children:(0,O.jsx)(eZ.Z,{icon:eF.RowsIcon})}):null,[t.name,e.header.isGrouped]),P=(0,H.useCallback)(()=>{let e=d.length>1,r=e?`${Ti(p)} `:"";return c?(0,O.jsx)(cd.r,{variant:"invisible",size:"small","aria-label":`Change ${r}sort direction to ${m?"ascending":"descending"}`,onClick:()=>_(m?"asc":"desc"),sx:{color:"fg.muted",px:1},...(0,ef.f)(`sorted-label-${t.id}`),children:(0,O.jsx)(LR,{direction:m?"desc":"asc",index:e?p:void 0})}):null},[c,m,t.id,d.length,p,_]),D=(0,H.useCallback)(()=>I?(0,O.jsx)(eO.Z,{sx:{color:"fg.muted",bg:"canvas.default",p:1},...(0,ef.f)(`sliced-label-${t.name}`),children:(0,O.jsx)(eZ.Z,{icon:Li})}):null,[t.name,I]),E=jL(t.dataType),A=jF(t.dataType),M=(0,H.useMemo)(()=>{if(!u)return[];let e=c&&!m,r=c&&m,a=C&&!k6(t.dataType);return[(0,O.jsxs)(mx.S.Item,{onSelect:()=>_("asc"),disabled:a,sx:{fontWeight:e?(0,U.U2)("fontWeights.bold"):(0,U.U2)("fontWeights.normal")},...(0,ef.f)(`sort-toggle-asc-${t.id}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.SortAscIcon,{})}),(0,O.jsx)(eB.Z,{title:E,children:e?rI.tableHeaderContextMenu.sortAscendingActive:rI.tableHeaderContextMenu.sortAscending}),(0,O.jsx)(mx.S.TrailingVisual,{children:e&&(0,O.jsx)(eF.XIcon,{})})]},`sort-ascending-${t.id}`),(0,O.jsxs)(mx.S.Item,{onSelect:()=>_("desc"),disabled:a,sx:{fontWeight:r?(0,U.U2)("fontWeights.bold"):(0,U.U2)("fontWeights.normal")},...(0,ef.f)(`sort-toggle-asc-${t.id}`),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.SortDescIcon,{})}),(0,O.jsx)(eB.Z,{title:A,children:r?rI.tableHeaderContextMenu.sortDescendingActive:rI.tableHeaderContextMenu.sortDescending}),(0,O.jsx)(mx.S.TrailingVisual,{children:r&&(0,O.jsx)(eF.XIcon,{})})]},`sort-descending-${t.id}`)]},[u,c,m,t.id,t.dataType,C,E,A,_]),L=l$(),F=ur(),{navigationDispatch:Z}=i$(),V=(0,H.useCallback)((e,t)=>{f(e),h(),Z(iF()),t.stopPropagation()},[f,h,Z]),B=(0,H.useMemo)(()=>{var e;let r=[(0,O.jsxs)(mx.S.Item,{onSelect:e=>{(0,uU.flushSync)(()=>{o(!1)}),V(t.name,e)},disabled:C&&(e=t.dataType,!k7.includes(e)),...(0,ef.f)("create-filter-trigger"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.FilterIcon,{})}),rI.tableHeaderContextMenu.filterValues]},`filter-by-values-${t.id}`)];return S&&r.push((0,O.jsxs)(mx.S.Item,{onSelect:e=>{V("is",e),o(!1)},...(0,ef.f)("create-is-filter-trigger"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.FilterIcon,{})}),rI.tableHeaderContextMenu.filterByType]},`filter-by-is-${t.id}`)),r},[t.id,t.dataType,t.name,C,S,V,o]),$=(0,H.useCallback)(()=>{a(e.header,aB),o(!1)},[a,e.header,o]),z=(0,H.useMemo)(()=>e.header.canGroupBy?[(0,O.jsxs)(mx.S.Item,{onSelect:$,sx:{fontWeight:e.header.isGrouped?(0,U.U2)("fontWeights.bold"):(0,U.U2)("fontWeights.normal")},disabled:C&&!Te(t.dataType),...(0,ef.f)("group-by-trigger"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.RowsIcon,{})}),e.header.isGrouped?rI.tableHeaderContextMenu.groupByActive:rI.tableHeaderContextMenu.groupByValues,(0,O.jsx)(mx.S.TrailingVisual,{children:e.header.isGrouped&&(0,O.jsx)(eF.XIcon,{})})]},`group-by-${t.id}`)]:[],[e.header.canGroupBy,e.header.isGrouped,t.id,t.dataType,$,C]),W=(0,H.useCallback)(()=>{i(t),o(!1)},[t,o,i]),G=(0,H.useMemo)(()=>M7(t.dataType)?[(0,O.jsxs)(mx.S.Item,{onSelect:W,sx:{fontWeight:I?(0,U.U2)("fontWeights.bold"):(0,U.U2)("fontWeights.normal")},disabled:C&&!Tr(t.dataType),...(0,ef.f)("slice-by-trigger"),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(Li,{})}),rI.tableHeaderContextMenu.sliceByValues,(0,O.jsx)(mx.S.TrailingVisual,{children:I&&(0,O.jsx)(eF.XIcon,{})})]},`slice-by-${t.id}`)]:[],[t,W,I,C]),q=e.header.getResizerProps(),K=(0,H.useCallback)(e=>{e.stopPropagation(),q.onMouseDown(e)},[q]),Q=(0,H.useCallback)(()=>e.header.canResize&&x?(0,O.jsx)(eO.Z,{sx:{pl:2,right:"-8px",top:0,bottom:0,width:"16px",zIndex:1,position:"absolute"},...q,onMouseDown:K,...(0,ef.f)(`${t.name}-column-resizer`)}):null,[K,e.header.canResize,q,t,x]),X=(0,IZ.Cj)(),Y=e.header.getHeaderProps({className:`${x?X.active?"":"hoverable":"readonly"}`,style:{minWidth:e.header.width,height:e.height}});Av("is-resizing",e.header.isResizing);let J=(0,H.useCallback)(()=>{let t=w()[0];t&&v&&setTimeout(()=>{v.selectColumn(e.header.id),Z(iO(t.id,e.header.id))})},[v,Z,e.header.id,w]);return(0,H.useMemo)(()=>{let{dragProps:r,...a}=Y,n=[...z,...G],i=null!==v;return(0,O.jsxs)(Wt,{...a,...(0,ef.f)(kd(e.header.id)),"aria-sort":function(e,t){if(e)return void 0===t?"none":t?"descending":"ascending"}(e.header.canSort,e.header.isSortedDesc),children:[(0,O.jsxs)(Wr,{sx:{boxShadow:e=>`inset 0 -2px 0 ${P()||R()||D()?e.colors.neutral.emphasis:e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`,flexGrow:1,paddingLeft:"12px",paddingRight:"12px",height:e.height},ref:r.setNodeRef,...r.listeners,children:[(0,O.jsx)(eB.Z,{sx:{color:"fg.muted",textOverflow:"ellipsis",overflow:"hidden",textAlign:"left",flexGrow:1},...(0,ef.f)(`${t.name}-column-header-name`),children:e.header.render("Header")}),(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:0,py:0},children:[(0,O.jsx)(R,{}),(0,O.jsx)(D,{}),(0,O.jsx)(P,{}),(0,O.jsxs)(fj.P,{open:s,onOpenChange:o,anchorRef:l,children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsx)(mq.h,{ref:l,icon:eF.KebabHorizontalIcon,variant:"invisible",sx:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.muted"},size:"small","aria-label":`${t.name} column options`,...(0,ef.f)(`${t.name}-column-menu-trigger`)})}),(0,O.jsx)(fj.P.Overlay,{...(0,ef.f)(`${t.name}-column-menu`),initialFocusRef:l,children:(0,O.jsxs)(mx.S,{children:[i&&(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)(mx.S.Item,{onSelect:J,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.MultiSelectIcon,{})}),rI.tableHeaderContextMenu.selectColumn]})}),M.length>0&&(0,O.jsx)(fj.P.Divider,{}),M,B.length>0&&(0,O.jsx)(fj.P.Divider,{}),B,n.length>0&&(0,O.jsx)(fj.P.Divider,{}),n,!S&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(fj.P.Divider,{}),(0,O.jsxs)(mx.S.Item,{onSelect:N,disabled:c,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.EyeClosedIcon,{})}),rI.tableHeaderContextMenu.hideField]})]}),x&&(t.userDefined||k||T)&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Item,{onSelect:()=>{L({pathname:eI.generatePath({...F,fieldId:t.id})})},disabled:!x,children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.GearIcon,{})}),rI.tableHeaderContextMenu.fieldSettings]})]})]})})]})]})]}),(0,O.jsx)(Q,{})]})},[Y,B,z,G,v,e.header,e.height,R,D,P,s,t.name,t.userDefined,t.id,J,M,S,N,c,x,k,Q,o,L,F,T])});Wn.displayName="TableHeaderCell";try{(M=GroupedLabel).displayName||(M.displayName="GroupedLabel")}catch{}try{(L=SortedLabel).displayName||(L.displayName="SortedLabel")}catch{}try{(F=SlicedLabel).displayName||(F.displayName="SlicedLabel")}catch{}try{(Z=ColumnResizeDragger).displayName||(Z.displayName="ColumnResizeDragger")}catch{}let Wi={threshold:{x:.3,y:0}},Wl=[IZ.K7],Ws=(0,H.memo)(e=>{!function(){if(!(0,H.useContext)(IS))throw Error("Must use `useTableColumnResizing` in child of `<TableProvider>")}();let{currentView:t}=oi(),{viewType:r}=hL(),{postStats:a}=os();BH("Table","TableHeader","");let{clearGroupedBy:n,setGroupedBy:i}=dI(),{groupByColumnIds:l}=I_(),{toggleGroupBy:s}=ID(),{setSliceField:o,clearSliceField:d,sliceField:u}=or(),c=(0,H.useCallback)((e,r)=>{let o=e.columnModel;if(o&&t){if(e.isGrouped?n(t.number):i(t.number,o),l.length&&!e.isGrouped)for(let e of l)s(e,!1);a({groupByEnabled:!e.isGrouped,memexProjectColumnId:o.id,key:aL,ui:r}),e.toggleGroupBy()}},[l,a,n,t,i,s]),m=(0,H.useCallback)(e=>{if(!t)return;let n=u===e;n?d(t.number):o(t.number,e),a({name:n?nn:na,ui:aB,memexProjectColumnId:e.id,context:JSON.stringify({layout:r})})},[d,t,a,o,u,r]),p=(0,IZ.Dy)((0,IZ.VT)(IZ.we,{activationConstraint:{distance:2}})),f=function(){let{moveField:e,visibleFields:t}=Sb(),{currentView:r}=oi(),a=IR(),n=(0,H.useRef)(!1),i=(0,H.useCallback)(e=>{var t;let{column:r}=e.active.data.current;n.current=!0,a((t=r.id,{type:zf.SET_DRAGGING_COLUMN,columnId:t}))},[a]),l=(0,H.useRef)(0);(0,H.useEffect)(()=>{let e=e=>l.current=e.clientX;return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e)});let s=(0,H.useCallback)(e=>{if(!e.over||!n.current){a(zh());return}let{column:t}=e.over.data.current,r=zb(e,t,l.current);a(t&&r?{type:zf.SET_DRAG_TARGET,overColumn:{column:t,side:r}}:{type:zf.SET_DRAG_TARGET,overColumn:null})},[a]),o=(0,H.useCallback)(()=>{n.current=!1,a(zh())},[a]);return{onDragStart:i,onDragMove:s,onDragEnd:(0,H.useCallback)(i=>{let s;n.current=!1;let{columnOrder:o,column:d,overColumn:u}=i.active.data.current;if(!r||!u||d.id===u.column.id){a(zh());return}let c=zb(i,u.column,l.current),m=o.indexOf(d.id),p=o.indexOf(u.column.id);s="left"===c?m<p?p-1:p:m<p?p:p+1,a(zh());let f=t.find(e=>`${e.id}`===d.id);if(!f)throw Error("No field found for dragging column");e(r.number,f,s-1)},[r,a,e,t]),onDragCancel:o}}(),h=gY();return(0,O.jsx)(IZ.LB,{modifiers:Wl,sensors:p,collisionDetection:IZ.j2,autoScroll:Wi,accessibility:(0,H.useMemo)(()=>({container:h}),[h]),...f,children:(0,O.jsx)(eO.Z,{sx:{display:"flex",flexDirection:"column",position:"sticky",top:0,zIndex:4,backgroundColor:"canvas.default",height:e.height,minWidth:e.tableWidth,boxShadow:e=>`inset 0 -2px 0 ${e.colors.border.default}, inset 0 1px 0 ${e.colors.border.default}`},children:e.headerGroups.map(t=>{let r=t.getHeaderGroupProps({style:{width:"100%"}});return(0,H.createElement)(eO.Z,{sx:{"> div:nth-child(2)":{borderLeft:"none"}},...r,key:r.key},t.headers.map(r=>r.columnModel?(0,O.jsx)(Wn,{header:r,headers:t.headers,groupByColumn:c,sliceByColumn:m,height:e.height},r.id):(0,O.jsx)(Wa,{header:r,height:e.height},r.id)))})})})});Ws.displayName="TableHeader";let Wo=(0,H.createContext)(null),Wd=e=>{let[t,r]=(0,H.useState)([]),a=(0,H.useMemo)(()=>({pages:t,setPages:r}),[t,r]);return(0,O.jsx)(Wo.Provider,{value:a,children:e.children})},Wu=()=>{let e=(0,H.useContext)(Wo);if(!e)throw Error("useActivePages can only be accessed from a ActivePagesProvider component");return e};try{Wo.displayName||(Wo.displayName="ActivePagesContext")}catch{}let Wc=({index:e,children:t})=>{let{memex_table_without_limits:r}=n9();return r?(0,O.jsx)(Wm,{index:e,children:t}):(0,O.jsx)(O.Fragment,{children:t})},Wm=({index:e,children:t})=>{let r=(0,H.useRef)(null),{isVisible:a}=uK({ref:r}),{setPages:n}=Wu();return(0,H.useEffect)(()=>{a?n(t=>{let r=[...t];return r.includes(e)||r.push(e),r}):n(t=>t.filter(t=>t!==e))},[a,e,n]),(0,O.jsx)("span",{ref:r,children:t})};try{Wc.displayName||(Wc.displayName="TablePage")}catch{}try{Wm.displayName||(Wm.displayName="TablePageInner")}catch{}let Wp={flexDirection:"column",position:"absolute",top:0,bottom:0,left:0,right:0,overflow:"auto",userSelect:"none",scrollBehavior:"smooth","@media (prefers-reduced-motion)":{scrollBehavior:"auto"},display:"flex","body.is-dragging &":{scrollBehavior:"auto"}},Wf={data:[]};function Wh({scrollRef:e,containerRef:t,table:r,isOmnibarFixed:a,loadingState:n,tableGroups:i,itemData:l,hasWritePermissions:s}){let o=void 0!==i,{memex_table_without_limits:d}=n9(),{data:u}=d?dR():Wf,c=(0,H.useMemo)(()=>{if(!d)return[r.rows];let e=[],t=0;for(let a of u){let n=a?.nodes.length||0;0!==n&&(e.push(r.rows.slice(t,t+n)),t+=n)}return e},[u,r.rows,d]);return(0,O.jsx)(uq,{rootRef:e,sizeEstimate:185,children:(0,O.jsx)(eO.Z,{sx:Wp,...(0,ef.f)("table-scroll-container"),ref:e,children:(0,O.jsxs)("div",{style:{userSelect:"none",position:"relative",width:r.totalColumnsWidth,minWidth:"100%",paddingBottom:a?"69px":"unset"},children:[(0,O.jsx)(Ws,{headerGroups:r.headerGroups,height:34,scrollRef:e,tableWidth:r.totalColumnsWidth}),(0,O.jsx)(zz,{visibleColumns:r.visibleColumns,height:34,sticky:!0}),(0,O.jsxs)("div",{ref:t,children:[(0,O.jsx)(zX,{children:(0,O.jsxs)(d7,{children:[n===VL.loading?(0,O.jsxs)(k_,{style:kP,sx:{display:"flex",alignItems:"center",pl:3,gap:1},...(0,ef.f)("view-loading-indicator"),children:[(0,O.jsx)(u$.Z,{size:"small"}),"Loading..."]}):n===VL.missing?null:i?i.map(t=>(0,O.jsx)(We,{groupId:t.id,rows:t.subRows,metadata:{value:t.groupedValue,sourceObject:t.groupedSourceObject},totalCount:d?t.totalCount:t.subRows.length,firstRowIndex:t.subRows[0]?.index??0,itemData:l,isCollapsed:t.isCollapsed,scrollRef:e,shouldDisableFooter:iS(t.groupedSourceObject),footerPlaceholder:iT(t),isEditable:s},t.id)):(0,O.jsx)(IW,{rows:r.rows,children:c.map((e,t)=>(0,O.jsx)(Wc,{index:t,...(0,ef.f)(`table-page-${t}`),children:(0,z$.Z)(e,5).map((e,t)=>(0,O.jsx)(z5,{rows:e,rowOffset:5*t,chunkIndex:t,chunkSize:5,itemData:l},t))},t))}),(0,O.jsx)(zG,{rows:o?i:r.rows,isGrouped:o,scrollRef:e})]})}),d&&(0,O.jsx)(zJ,{})]}),(0,O.jsx)(zz,{visibleColumns:r.visibleColumns})]})})})}try{Wh.displayName||(Wh.displayName="TableBodyWithObserver")}catch{}let Wg=(0,H.memo)(function({filterCount:e}){let{state:{focus:t},navigationDispatch:r}=iB(),a=(0,H.useCallback)(()=>{r(iF())},[r]),n=(0,H.useCallback)(e=>{if(mz(e)===mV.ARROW_DOWN){r(ir({x:io.First,y:io.First,focusType:is.Focus})),kf(e);return}},[r]),i=(0,H.useCallback)(e=>{if(mz(e)===mV.ARROW_DOWN){r(ir({x:io.First,y:io.First,focusType:is.Focus})),kf(e);return}},[r]);return(0,O.jsx)(FQ,{onInputKeyDown:n,onClearButtonKeyDown:i,dispatchInputFocusEvent:a,isFocused:iD(t),filterCount:e})});try{Wg.displayName||(Wg.displayName="TableFilterInput")}catch{}let Wy=(0,H.memo)(function({onAddItem:e,isFixed:t}){let{omnibarRef:r,onFocus:a,onKeyDown:n}=zY();return(0,O.jsx)(MG,{ref:r,role:"row",childElementRole:"gridcell",onAddItem:e,onKeyDown:n,onInputFocus:a,isFixed:t,defaultPlaceholder:Mj})});try{Wy.displayName||(Wy.displayName="TableOmnibar")}catch{}let Wx=(0,H.forwardRef)(({showAddFieldModal:e,columnMenuTriggerRef:t},r)=>{let[a,n]=(0,H.useState)(!1),{stateRef:i,navigationDispatch:l}=i$(),s=(0,H.useCallback)(()=>{let e=i.current&&i.current.focus;e&&iM(e)&&l(ir({focusType:is.Suspended})),n(!0)},[l,i]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mq.h,{size:"small",variant:"invisible",icon:eF.PlusIcon,"aria-label":"Add field",ref:r,onClick:s,onKeyPress:s,disabled:e||a,...(0,ef.f)("column-visibility-menu-trigger"),sx:{color:"fg.muted",width:"100%",height:32,display:"flex",alignItems:"center",justifyContent:"center"}}),(0,O.jsx)(Lk,{open:a,setOpen:n,anchorRef:t})]})});Wx.displayName="AddColumnMenu";let Wb=(0,H.memo)(()=>{let{setShowAddFieldModal:e,showAddFieldModal:t}=Mo(),r=ID(),{stateRef:a,navigationDispatch:n}=i$(),i=(0,H.useCallback)(e=>{let t=a.current&&a.current.focus||void 0;if(t&&iM(t))n(iO(t.details.y,e.id.toString()));else{let t=r.flatRows.find(e=>!e.isGrouped);t&&n(iO(t.id,e.id.toString()))}},[n,a,r.flatRows]),l=(0,H.useRef)(null);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Wx,{showAddFieldModal:t,columnMenuTriggerRef:l,ref:l}),(0,O.jsx)(Ag,{isOpen:t,setOpen:e,anchorRef:l,onSave:i})]})});Wb.displayName="AddColumnHeader";let Wv={Header:Wb,id:Ic,width:50,canSort:!1,nonNavigable:!0,canBeShifted:!1,canReorder:!1,Placeholder:"",Cell:"",CellEditor:""},Ww=e=>[...e,Wv],Wj=null;function WC(){if(null!=Wj)return Wj;let e=navigator.userAgent.toLowerCase();return Wj=e.includes("webkit")&&!e.includes("chrome")}function WI(e,t){let r=!!t?.sticky,{currentView:a}=oi(),n=a?.number,i=(0,H.useRef)(n),{firstNavigableColumnId:l,lastNavigableColumnId:s}=(0,H.useMemo)(()=>({firstNavigableColumnId:e.visibleColumns.find(e=>!e.nonNavigable)?.id,lastNavigableColumnId:e.visibleColumns.slice().reverse().find(e=>!e.nonNavigable)?.id}),[e.visibleColumns]),o=(0,H.useCallback)((e,t,{isSuspended:a})=>{let o=e===document.activeElement,d=!o&&e.contains(document.activeElement),u=t===l,c=t===s;if(d)return;let m="nearest";if(i.current!==n){if(i.current=n,!r)return}else u&&o&&!r?m="end":c&&o&&!r&&(m="start");e.focus({preventScroll:!0}),!a&&(WC()?"scrollIntoViewIfNeeded"in e&&"function"==typeof e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded(!1):e.scrollIntoView({block:"nearest",inline:m}))},[n,l,s,r]);return(0,H.useMemo)(()=>({prepareRow:e.prepareRow,focusCellElement:o}),[o,e.prepareRow])}let WS=()=>{let e=(0,H.useRef)(null),t=kx(),r=IR();return(0,H.useEffect)(()=>{function r(r){let a=r.target;e.current?.contains(a)||AG(a)||t()}return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t,r]),{containerRef:e}},Wk=()=>{let{state:{focus:e},navigationDispatch:t}=iB(),r=IR(),{clearClipboard:a}=ko(),n=kx(),i=(0,H.useCallback)(t=>{!(!e||iM(e)&&e.details.meta.editing)&&"\\"===t.key&&((0,te.eE)()?t.metaKey:t.ctrlKey)&&t.shiftKey&&iM(e)&&(t.stopPropagation(),t.preventDefault(),r(kL(e)))},[e,r]),l=(0,H.useCallback)(r=>{let a=r.relatedTarget,n=r.currentTarget.contains(a),i=AG(a),l=e?.type==="coordinate"&&e.details.meta.suspended;i||n||l||t(iV())},[t,e]);return(0,H.useEffect)(()=>{let e=e=>{let r=mz(e);r===mV.CTRL_SPACE&&(e.stopPropagation(),e.preventDefault(),t(ia({focusType:is.Focus,type:iR.GLOBAL_OMNIBAR,details:null}))),r===mV.ESCAPE&&(a(),n())};return addEventListener("keydown",e),()=>removeEventListener("keydown",e)},[r,t,a,n]),{onKeyDown:i,onBlur:l}},WT=[e=>{e.columns.push(Ww)}],WN=()=>iF().focus,W_=(0,H.memo)((0,H.forwardRef)(function(e,t){BH("Table","ReactTable","");let{visibleFields:r}=Sb(),a=zV((0,H.useMemo)(()=>({fields:r,plugins:WT}),[r])),n=(0,H.useRef)({instance:a,getHeaderFocus:WN}),{memex_table_without_limits:i}=n9(),l=i?OP():a.flatRows.length;return(0,O.jsx)(IN,{table:a,cellHeight:37,children:(0,O.jsx)(iz,{metaRef:n,children:(0,O.jsx)(Sn,{children:(0,O.jsx)(Sp,{children:(0,O.jsx)(M6,{children:(0,O.jsxs)(ks,{children:[(0,O.jsx)(Wg,{filterCount:(0,H.useDeferredValue)(l)}),(0,O.jsx)(WP,{table:a,ref:t})]})})})})})})})),WR={position:"relative",flex:"1 1 auto",width:"100%"},WP=(0,H.forwardRef)(function({table:e},t){let{onKeyDown:r,onBlur:a}=Wk(),{navigationDispatch:n}=iB(),{memex_table_without_limits:i,memex_disable_autofocus:l}=n9(),s=BV(e),o=(0,H.useCallback)(()=>{s&&n(s)},[n,s]);(0,H.useEffect)(()=>{l||o()},[o,l]),(0,H.useImperativeHandle)(t,()=>({focusIn:o}));let d=(0,H.useRef)(null),{hasWritePermissions:u}=i4(),{loadingState:c}=VF(),{openPane:m}=dK(),p=0;if(i){let{hasNextPage:e}=dR();p=e?5:0}let f=c===VL.loaded?(e.rows.length+p)*37+34:71,h=BB({table:e,totalHeight:f,scrollRef:d}),{horizontalScrollbarSize:g,verticalScrollbarSize:y}=Mi(d),{onNewItem:x}=zB(d,e.rows,{left:0,rowHeight:37}),{currentView:b}=oi(),v=b?.number,{containerRef:w}=WS(),{sliceField:j}=or(),{slicerItems:C}=M4(),I=WI(e);(0,uG.b)(()=>{g2(d.current)},[v]);let S=e?.groupedRows?ik(e.groupedRows):void 0,k=(0,H.useMemo)(()=>({flex:"1 1 auto",flexDirection:"column",width:"100%",position:"relative",backgroundImage:t=>e.groupedRows?"none":`url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='transparent' /%3E%3C/svg%3E"), url("data:image/svg+xml,%3Csvg viewBox='0 0 1 1' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='1' height='1' fill='${encodeURIComponent(t.colors.border.muted)}' /%3E%3C/svg%3E")`,backgroundSize:"1px 37px",backgroundPositionY:"15px",backgroundRepeat:"repeat-x, repeat",bg:e.groupedRows?e=>`${e.colors.canvas.inset}`:h?e=>`${e.colors.canvas.default}`:e=>`${e.colors.canvas.inset}`,display:"flex",gridArea:"2/2"}),[h,e.groupedRows]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(eO.Z,{...e.getTableProps({onKeyDown:r,onBlur:a,role:"grid"}),...(0,ef.f)("table-root"),sx:k,children:[(0,O.jsx)(eO.Z,{sx:WR,"data-hpc":!0,children:(0,O.jsx)(z.Z,{fontSize:"14px",children:(0,O.jsx)(Wh,{scrollRef:d,containerRef:w,table:e,tableGroups:S,isOmnibarFixed:h,loadingState:c,hasWritePermissions:u,itemData:I})})}),(!S||0===S.length)&&u&&(0,O.jsx)(MY,{horizontalScrollbarSize:g,verticalScrollbarSize:y,isFixed:h,effectiveTableHeight:f,children:(0,O.jsx)(Wy,{onAddItem:x,isFixed:h})})]}),j&&(0,O.jsx)(ZP,{slicerItems:C,openSidePanel:m})]})});try{W_.displayName||(W_.displayName="ReactTable")}catch{}try{W_.displayName||(W_.displayName="ReactTable")}catch{}try{WP.displayName||(WP.displayName="InnerTable")}catch{}let WD=(0,H.memo)(function({children:e}){let{isFieldVisible:t}=Sb();return(0,O.jsx)(zm,{isFieldVisible:t,children:e})});try{WD.displayName||(WD.displayName="TableColumnsProviderForTable")}catch{}var WE=r(31147);function WA(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}let WM=(0,H.forwardRef)(function({activeClassName:e,...t},r){return(0,O.jsx)(lW,{...t,ref:r})});try{WM.displayName||(WM.displayName="NavLinkWithoutActiveClassName")}catch{}var WL=r(48030),WF=r(8930);let WZ=({anchorRef:e,children:t,imageToLoad:r})=>{let[a,n]=(0,H.useState)(!1),{showTemplateDialog:i}=i5(),{isPaneOpened:l,containerRef:s}=dq(),[o,d]=(0,H.useState)(null),[u,c]=(0,H.useState)({top:0,left:0}),[m,p]=(0,H.useState)("top-left"),f=l&&s.current?.contains(e.current),h=(0,H.useCallback)(t=>{if(!e.current)return()=>void 0;let r=new MutationObserver(t);return r.observe(e.current,{attributes:!0,characterData:!1,childList:!1,subtree:!0}),()=>{r.disconnect()}},[e]),g=(0,H.useCallback)(()=>!!(e.current&&"none"!==e.current.style.display),[e]),y=(0,H.useSyncExternalStore)(h,g);(0,H.useEffect)(()=>{if(!r)return;let e=document.createElement("img");e.src=r,e.onload=function(){n(!0)}},[r,n]);let x=(0,H.useCallback)(()=>{o&&e.current&&c((0,WL.N)(o,e.current,{side:"outside-top",align:"start",alignmentOffset:-8,anchorOffset:12}))},[e,o,c]);return((0,H.useEffect)(()=>{if(!e.current)return;let{left:t}=e.current.getBoundingClientRect();p(t+-8===u.left?"top-left":"top-right")},[e,u,p]),(0,H.useLayoutEffect)(x,[x]),(0,WF.y)(x),(0,xw.v)({containerRef:e,disabled:!u,bindKeys:xv.Qw.Tab}),i||l&&!f||!y||r&&!a)?null:(0,O.jsx)(Rg.ZP,{returnFocusRef:e,ref:d,sx:{overflow:"visible"},...(0,ef.f)("user-notice-popover"),onClickOutside:fV.Z,onEscape:fV.Z,top:u.top,left:u.left,children:(0,O.jsx)(yu.Z,{caret:m,sx:{display:"flex",flexDirection:"column",fontSize:1,justifyContent:"space-between",padding:4,width:"326px"},children:t})})};try{WZ.displayName||(WZ.displayName="UserNoticePopover")}catch{}let WO={borderRadius:"6px",width:"276px",height:"183px",boxShadow:e=>R3({size:"1px",color:e.colors.border.default})},WV=({anchorRef:e})=>{let{hasAdminPermissions:t}=i4(),r=jT("issueTypes","popover"),{allColumns:a}=df(),{userNotices:n,dismissUserNotice:i,setUserNoticeVariant:l,userNoticeVariants:s}=Lw(),o=(0,H.useRef)(null),{anchorRef:d}=Mc(),u=a.find(e=>"type"===e.name.toLowerCase().trim()&&!0===e.userDefined),c=u&&DM(u),m=(0,H.useCallback)((e=!1)=>{i("memex_issue_types_rename_prompt",e),d.current?.focus()},[i,d]),p=(0,H.useCallback)(()=>{l("memex_issue_types_rename_prompt","modal")},[l]),f=(0,H.useCallback)(()=>{l("memex_issue_types_rename_prompt","unset"),setTimeout(()=>o?.current?.focus(),250)},[l]);if(!u||!t||!n.memex_issue_types_rename_prompt||"rename-custom-type-column"!==c)return null;let h="modal"===s.memex_issue_types_rename_prompt;return(0,O.jsx)(O.Fragment,{children:h?(0,O.jsx)(DQ,{column:u,onCancel:f,onConfirm:()=>m(!0)}):(0,O.jsxs)(WZ,{anchorRef:e,imageToLoad:r,children:[(0,O.jsx)(cG.Z,{as:"h2",sx:{fontSize:1,fontWeight:"bold"},children:(0,O.jsxs)(eO.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(eZ.Z,{size:14,icon:eF.InfoIcon,sx:{color:"accent.fg",mr:2}}),rY.IssueTypeRenamePopover.title]})}),(0,O.jsx)(eB.Z,{sx:{mt:2},as:"p",children:rY.IssueTypeRenamePopover.description(u.name)}),(0,O.jsx)(eO.Z,{as:"img",src:r,sx:WO,alt:rY.IssueTypeRenamePopover.altText}),(0,O.jsxs)(eO.Z,{sx:{fontSize:1,mt:3,display:"flex",justifyContent:"flex-start",gap:2},children:[(0,O.jsx)(cd.r,{ref:o,onClick:p,children:rY.IssueTypeRenamePopover.actionPrimary}),(0,O.jsx)(cd.r,{variant:"invisible",onClick:()=>m(),children:rY.IssueTypeRenamePopover.actionSecondary})]})]})})};try{WV.displayName||(WV.displayName="MemexIssueTypeRenamePopover")}catch{}let WB={...FE,backgroundColor:"canvas.subtle",borderRadius:2,borderColor:"border.subtle",borderWidth:"1px",borderStyle:"solid",visibility:"visible",opacity:1},W$={[fQ.Board]:eF.ProjectIcon,[fQ.List]:eF.ProjectIcon,[fQ.Roadmap]:eF.ProjectRoadmapIcon,[fQ.Table]:eF.TableIcon},Wz=(e,t)=>t?eF.TrashIcon:W$[e],WW=({selected:e,viewLayout:t,isDeleted:r,isViewStateDirty:a})=>{let{memex_header_redesign:n}=n9(),i=(0,O.jsx)(eZ.Z,{icon:Wz(f0(t),r),sx:{color:r?"fg.subtle":e?"fg.default":"fg.muted"}});return n?(0,O.jsx)(FM,{isViewStateDirty:a,children:i}):i},WG={display:"flex",maxWidth:"100%",width:"100%",gap:2,position:"relative","&::after, &::before":{content:'""',display:"none",position:"absolute",top:"-8px",width:"4px",bg:"accent.emphasis",height:"calc(100% + 16px)",border:0,borderRadius:"6px",zIndex:12},"body.is-dragging &.show-sash-view.show-sash-after":{"&::after":{right:"-20px",display:"block"},"&.selected::after":{right:"-20px"}},"body.is-dragging &.show-sash-view.show-sash-before":{"&::before":{left:"-18px",display:"block"},"&.selected::before":{right:"-21px"}}},WU=(0,H.forwardRef)(function({view:e,selected:t,viewOptionMenuTriggerRef:r,hideViewOptionsMenu:a,showViewOptionsMenu:n,setViewOptionsPlaceholderRef:i},l){let{memex_header_redesign:s}=n9(),o=(0,H.useRef)(null);(0,H.useImperativeHandle)(l,()=>o.current);let d=(0,H.useRef)(null),{renameView:u}=oi(),[c,m]=yh(e.name),[p,f]=(0,H.useState)(!1),{hasWritePermissions:h}=i4(),g=(0,H.useRef)(null),y=(0,H.useRef)(null),x=(0,fu.N)(n,500,{trailing:!0,leading:!1});(0,H.useEffect)(()=>{t&&y.current&&i(y.current)},[t,i]);let b=(0,H.useMemo)(()=>({id:e.id,number:e.number}),[e.id,e.number]),v=A6({dragAxis:"horizontal",dragID:`${e.number}`,dragType:"view",dragIndex:e.number,dragRef:d,disable:!h,metadata:b});(0,H.useEffect)(()=>{p&&g.current?.focus()},[p,g]);let w=(0,H.useCallback)(()=>{h&&f(!0)},[h,f]),j=(0,H.useCallback)(()=>{f(!1)},[f]),C=(0,H.useCallback)(e=>{a(),m(e.target.value),x()},[x,a,m]),I=(0,H.useCallback)(e=>{e.stopPropagation()},[]),S=(0,H.useCallback)(()=>{m(e.name)},[m,e.name]),k=(0,H.useCallback)(t=>{switch(t.key){case"Enter":p||w(),c.trim().length>0&&c!==e.name&&u(e.number,c,{ui:aM}),t.preventDefault(),(0,uU.flushSync)(()=>{j()}),r.current?.focus();break;case"Escape":S(),p&&j()}},[p,c,e.name,e.number,r,w,u,j,S]),T=(0,yc.u)(k),N=(0,H.useCallback)(()=>{document.hasFocus()&&(0===c.trim().length?S():u(e.number,c,{ui:aM}),j())},[c,S,j,u,e.number]),_=yR(),R=t&&p;return(0,O.jsxs)(eO.Z,{className:(0,IL.W)({selected:t}),ref:d,...v.props,sx:WG,...v.handle.props,children:[(0,O.jsx)(eO.Z,{children:(0,O.jsx)(WW,{selected:t,viewLayout:e.localViewState.layout,isViewStateDirty:e.isViewStateDirty,isDeleted:e.isDeleted})}),(0,O.jsx)(eO.Z,{onClick:w,sx:h&&R?{px:1,ml:-1,"&:focus-within":{boxShadow:"primer.shadow.focus",borderRadius:"2"},"&:hover:not(:focus-within)":{boxShadow:"primer.shadow.focus",borderRadius:"2"}}:{pl:1,ml:-1,overflow:"hidden"},children:R?(0,O.jsx)(yk.F,{..._,children:(0,O.jsx)(pI,{as:pT,ref:g,sx:{fontSize:1},autoComplete:"off",value:c,onChange:C,onMouseDown:I,onBlur:N,"aria-label":"Change view name",disabled:!h||e.isDeleted,...T,...(0,ef.f)("view-name-input")})}):(0,O.jsx)(eB.Z,{ref:o,sx:{display:"inline-block",color:t?"fg.default":"fg.muted","&:hover":{color:"fg.default"},whiteSpace:"nowrap",maxWidth:"100%",pr:t?"6px":0},...(0,ef.f)("view-name-static"),children:c})}),!s&&t?(0,O.jsx)(eO.Z,{ref:y,sx:WB,...(0,ef.f)("view-options-placeholder"),children:(0,O.jsx)(eF.TriangleDownIcon,{})}):null]})});try{WW.displayName||(WW.displayName="ViewTypeIcon")}catch{}try{WU.displayName||(WU.displayName="ViewTab")}catch{}let WH=e=>(0,O.jsx)(A8,{children:(0,O.jsx)(Wq,{...e})}),Wq=(0,H.memo)(function({projectViewId:e,onFocusIntoCurrentView:t}){let{views:r,viewsMap:a,currentView:n,setCurrentViewNumber:i,updateViewPriority:l}=oi(),{projectLimits:{viewsLimit:s}}=i5(),{hasWritePermissions:o}=i4(),{memex_header_redesign:d}=n9(),{userNotices:u}=Lw(),c=(0,H.useRef)(null),m=(0,H.useRef)(null),p=(0,H.useRef)(null),f=(0,H.useRef)(null),h=(0,H.useRef)(null),g=WC(),y=(0,H.useCallback)(()=>{f.current&&(f.current.style.display="none",f.current.style.left="0px"),p.current&&(p.current.style.visibility="visible",p.current.style.opacity="1")},[]),x=(0,H.useCallback)(()=>{(g?requestAnimationFrame:setTimeout)(()=>{p.current&&f.current&&h.current&&(f.current.style.display="flex",f.current.style.left=`${h.current.scrollLeft-h.current.getBoundingClientRect().left+p.current.getBoundingClientRect().left}px`,p.current.style.visibility="hidden",p.current.style.opacity="0")})},[g]);(0,H.useEffect)(()=>{y(),x()},[y,x,r]),Ry({onResize:()=>{y(),x()}});let b=A7({dropID:"views",dropType:"view",dropRef:c,onDrop:(0,H.useCallback)(async({dragMetadata:e,dropMetadata:t,side:n})=>{let i;if(!o||!t||!e)return;let s=a[e.number],d=r.findIndex(t=>t.id===e?.id),u=r.findIndex(e=>e.id===t?.id);if(!s||d===u||("before"===n?i=r[u]:"after"===n&&u!==r.length-1&&(i=r[u+1]),s.number===i?.number))return;let c=d!==r.length-1?r[d+1]:void 0;await l(s.number,i?.id||"",i?.number,c?.number),x()},[o,a,r,l,x])}),v=(0,H.useCallback)(e=>{mz(e)===mV.ARROW_DOWN&&(e.preventDefault(),t())},[t]),w=(0,H.useMemo)(()=>{var e,t;let r={};return a=>(e=r)[t=a]??(e[t]={current:null})},[]);(0,H.useEffect)(()=>{let e=n&&w(n.number).current,t=h.current;e&&t&&function(e,t,{direction:r="xy"}={}){let a=e.getBoundingClientRect(),n=t.getBoundingClientRect();r.includes("y")&&(n.top<a.top?e.scrollTop-=a.top-n.top:n.bottom>a.bottom&&(e.scrollTop+=n.bottom-a.bottom)),r.includes("x")&&(n.left<a.left?e.scrollLeft-=a.left-n.left:n.right>a.right&&(e.scrollLeft+=n.right-a.right))}(t,e,{direction:"x"})},[w,n]);let j=(0,H.useCallback)(e=>{p.current=e,x()},[x]);return(0,O.jsxs)(eO.Z,{ref:h,sx:{position:"relative",overflowX:"auto",overflowY:"hidden",backgroundColor:"canvas.inset",boxShadow:e=>`inset -1px -1px 0px 0px ${e.colors.border.default}`},children:[(0,O.jsx)(eO.Z,{...b.props,ref:c,sx:{width:"fit-content",pl:[3,4,5]},children:(0,O.jsxs)(WE.Z,{"aria-label":"Select view",sx:{isolation:"isolate",'& [role="tablist"]':{overflow:"hidden"},"> nav":{borderBottom:"none"},"& .TabNav-item:not(.selected):not(:first-child):not(.TabNav-item.selected + .TabNav-item)::before":{content:'""',position:"absolute",backgroundColor:"border.muted",width:"1.5px",height:"19px",top:"50%",right:"100%",transform:"translateY(-50%)"},"& .TabNav-item.TabNav-item-truncate:not(.selected)::after":{content:"''",position:"absolute",right:1,top:"50%",width:"30px",height:"21px",transform:"translateY(-50%)",backgroundImage:e=>`linear-gradient(to right, transparent, ${e.colors.canvas.inset} 75%, ${e.colors.canvas.inset} 50%, ${e.colors.canvas.inset} 25%)`}},...(0,ef.f)("tab-nav"),children:[r.map(t=>{let r=t.number===n?.number;return(0,O.jsx)(WY,{ref:w(t.number),selected:r,projectViewId:e,onTabChange:e=>{e.preventDefault(),r||(i(t.number,{ui:aq}),y())},view:t,onKeyDown:r?v:void 0,setViewOptionsPlaceholderRef:j,viewOptionMenuTriggerRef:m,showViewOptionsMenu:x,hideViewOptionsMenu:y},t.number)}),o&&r.length<s&&(0,O.jsx)(WQ,{})]})}),!d&&n?(0,O.jsxs)(eO.Z,{sx:{position:"absolute",top:"9px",left:0,display:"none"},ref:f,...(0,ef.f)("view-options-menu"),children:[(0,O.jsx)(Le.Provider,{value:aM,children:(0,O.jsx)(F$,{viewOptionMenuTriggerRef:m,view:n,showViewOptionsMenu:x})}),u.memex_issue_types_rename_prompt&&(0,O.jsx)(WV,{anchorRef:f})]}):null]})}),WK={"&:hover":{color:"fg.default"},overflow:"hidden",whiteSpace:"nowrap",color:"fg.muted",alignSelf:"center",mr:[3,4,5]};function WQ(){let{createNewDefaultView:e,duplicateCurrentViewState:t,currentView:r}=oi();return(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Button,{...(0,ef.f)("view-navigation-create-new-view"),role:"tab",sx:WK,variant:"invisible",leadingVisual:eF.PlusIcon,trailingAction:null,children:"New view"}),(0,O.jsx)(fj.P.Overlay,{...(0,ef.f)("view-navigation-create-new-view-overlay"),children:(0,O.jsxs)(mx.S,{children:[(0,O.jsxs)(mx.S.Group,{children:[(0,O.jsx)(mx.S.GroupHeading,{children:"Layout"}),(0,O.jsxs)(mx.S.Item,{onSelect:()=>e({layout:fW.Table},{ui:aq}),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.TableIcon,{})}),"Table"]}),(0,O.jsxs)(mx.S.Item,{onSelect:()=>e({layout:fW.Board},{ui:aq}),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ProjectIcon,{})}),"Board"]}),(0,O.jsxs)(mx.S.Item,{onSelect:()=>e({layout:fW.Roadmap},{ui:aq}),children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.ProjectRoadmapIcon,{})}),"Roadmap"]})]}),r?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(mx.S.Divider,{}),(0,O.jsxs)(mx.S.Item,{onSelect:()=>{t(r.number,void 0,{ui:aq})},children:[(0,O.jsx)(mx.S.LeadingVisual,{children:(0,O.jsx)(eF.CopyIcon,{})}),rI.duplicateView({isDirty:r.isViewStateDirty})]})]}):null]})})]})}let WX=(0,H.forwardRef)(function({sx:e,...t},r){return(0,O.jsx)(WM,{...t,ref:r})}),WY=(0,H.forwardRef)(function({selected:e,onTabChange:t,view:r,projectViewId:a,viewOptionMenuTriggerRef:n,setViewOptionsPlaceholderRef:i,hideViewOptionsMenu:l,showViewOptionsMenu:s,onKeyDown:o},d){let{memex_header_redesign:u}=n9(),{hasWritePermissions:c}=i4(),m=(0,H.useRef)(null),p=(0,H.useSyncExternalStore)(WA,()=>(function(e){if(!e)return!1;let t=e.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");let r=e.offsetWidth<e.scrollWidth;return e.style.overflow=t,r})(m.current)),f=ur();return(0,O.jsxs)(WE.Z.Link,{ref:d,className:p&&!e?"TabNav-item-truncate":"",selected:e,"aria-selected":e?"true":void 0,as:WX,"aria-controls":e?a:void 0,to:e?void 0:ev.generatePath({...f,viewNumber:r.number}),sx:{position:"relative",cursor:"pointer",display:"flex",alignItems:"center",margin:0,flexGrow:1,width:"200px",maxWidth:"max-content",minWidth:e?"min-content":p?"140px":void 0,px:3,pr:e?void 0:3},title:r.name,onMouseDown:t,onKeyDown:o,onClick:t,...(0,ef.f)("view-navigation-view-tab-link"),children:[(0,O.jsx)(WU,{ref:m,view:r,selected:e,viewOptionMenuTriggerRef:n,hideViewOptionsMenu:l,showViewOptionsMenu:s,setViewOptionsPlaceholderRef:i}),!u&&r.isViewStateDirty&&!e&&(0,O.jsx)(Pn,{isDirty:!0,hideDirtyState:!c,sx:{top:"-5px",left:"-4px",zIndex:1}},`dirty-for-${r.number}`)]})});try{WH.displayName||(WH.displayName="ViewNavigation")}catch{}try{Wq.displayName||(Wq.displayName="ViewNavigationInner")}catch{}try{WQ.displayName||(WQ.displayName="NewViewMenu")}catch{}try{WX.displayName||(WX.displayName="TabNavLink")}catch{}try{WY.displayName||(WY.displayName="ViewNavigationTab")}catch{}let WJ=e=>e.dataType!==eA.Title,W0=()=>{let{currentView:e}=oi(),{allColumns:t}=df(),{setShowAddFieldModal:r}=Mo(),{toggleField:a,visibleFields:n}=Sb(),{hasWritePermissions:i}=i4(),{isProjectViewRoute:l}=dg();ep(()=>{if(!l||!e)return null;let s=[];i&&s.push(["c","Create new field","field.create",()=>r(!0)]);let o=["m","Manage fields...",s];if(e.localViewState.layout===fW.Roadmap)return o;for(let[r,i]of Object.entries(t.filter(WJ)))n.find(e=>e.id===i.id)?s.push([r,`Hide: ${i.name}`,"column.hide",()=>a(e.number,i,void 0,az)]):s.push([r,`Show: ${i.name}`,"column.show",()=>a(e.number,i,void 0,az)]);return o},[l,e,i,t,r,a,n])},W1=()=>{let{postStats:e}=os(),{groupedByColumnId:t,setGroupedBy:r,clearGroupedBy:a}=dI(),{isProjectViewRoute:n}=dg(),{visibleFields:i}=Sb(),{currentView:l}=oi(),s=(0,H.useCallback)(t=>{l&&(a(l.number),e({groupByEnabled:!1,memexProjectColumnId:t.id,key:aL,ui:az}))},[a,l,e]),o=(0,H.useCallback)(t=>{l&&(r(l.number,t),e({groupByEnabled:!0,memexProjectColumnId:t.id,key:aL,ui:az}))},[r,l,e]);ep(()=>{if(!n)return null;let e=[],r=["g","Group by...",e];for(let[r,a]of(t&&e.push(["g","Remove group by","grouping.clear",()=>i.map(e=>s(e))]),Object.entries(i.filter(e=>LA(e)))))a.id===t?e.push([r,`Ungroup by: ${a.name}`,"column.ungroup",()=>s(a)]):e.push([r,`Group by: ${a.name}`,"column.group",()=>o(a)]);return r},[n,t,i,o,s])},W2=()=>{let{postStats:e}=os(),{viewType:t}=hL(),{sliceField:r,setSliceField:a,clearSliceField:n}=or(),{isProjectViewRoute:i}=dg(),{allColumns:l}=df(),{currentView:s}=oi(),o=(0,H.useCallback)(r=>{s&&(n(s.number),e({name:nn,memexProjectColumnId:r?.id,ui:az,context:JSON.stringify({layout:t})}))},[n,s,e,t]),d=(0,H.useCallback)(r=>{s&&(a(s.number,r),e({name:na,memexProjectColumnId:r.id,ui:az,context:JSON.stringify({layout:t})}))},[s,a,e,t]);ep(()=>{if(!i)return null;let e=[],t=["h","Slice by...",e];for(let[t,a]of(r&&e.push(["h","Remove slice by","slicing.clear",o]),Object.entries(l.filter(e=>M7(e.dataType)).sort(rh))))a.id===r?.id?e.push([t,`Unslice by: ${a.name}`,"column.unslice",()=>o(a)]):e.push([t,`Slice by: ${a.name}`,"column.slice",()=>d(a)]);return t},[i,r,l,o,d])},W5=()=>{let{currentView:e}=oi(),{allColumns:t}=df(),{visibleFields:r}=Sb(),{getColumnSort:a,isSorted:n,clearSortedBy:i,setPrimarySortPreservingSecondary:l}=dN(),{isProjectViewRoute:s}=dg(),{postStats:o}=os(),d=(0,H.useMemo)(()=>t.slice().sort((e,t)=>(function(e,t,r){let a=r.findIndex(t=>t.id===e.id),n=r.findIndex(e=>e.id===t.id);return -1===a&&-1===n?e.name.localeCompare(t.name):-1===a&&n>-1?1:-1===n&&a>-1?-1:a-n})(e,t,r)),[t,r]),u=(0,H.useCallback)((t,r)=>{e&&(l(t,r),o({name:"desc"===r?aV:aO,ui:az,context:t.id,index:0}))},[e,o,l]);ep(()=>{if(!s||!e)return null;let t=[],r=["s","Sort by...",t];for(let[e,r]of(n&&t.push(["s","Remove sort by","sorting.clear",()=>i()]),Object.entries(d))){let n=a(r),l=()=>u(r,"asc"),s=()=>u(r,"desc");n?"asc"===n.direction?t.push([e,`${rI.sortBy}: ${r.name}, desc`,"column.sort",s]):t.push([e,`${rI.unsortBy}: ${r.name}`,"column.unsort",()=>i()]):t.push([e,`${rI.sortBy}: ${r.name}, asc`,"column.sort",l])}return r},[s,e,n,i,d,a,u])},W3="roadmap-pill-area",W4={Header:"",id:W3,width:50,canSort:!1,nonNavigable:!1,canBeShifted:!1,canReorder:!1,Placeholder:"",Cell:"",CellEditor:""},W8=e=>[...e,W4];var W6=r(37406);let W7=(0,H.createContext)(null),W9=(0,H.createContext)(null),Ge=(0,H.createContext)(null),Gt=(0,H.createContext)(null),Gr=(0,H.createContext)(null),Ga=(0,H.createContext)(null),Gn={month:{columnWidth:48,timeRangeMonths:6},quarter:{columnWidth:16,timeRangeMonths:18},year:{columnWidth:4,timeRangeMonths:72}},Gi=(0,H.memo)(function({children:e}){let t=(0,H.useMemo)(()=>rv(new Date),[]),r=Ia(),a=Is(),{disableDateFieldsPopover:n}=It(),[i,l]=(0,H.useState)(a),s=(0,H.useMemo)(()=>Gn[i].columnWidth,[i]),[{timeRangeStart:o,timeRangeEnd:d},u]=(0,H.useState)({timeRangeStart:rv((0,W6.z)(t,-Gn[a].timeRangeMonths)),timeRangeEnd:rv((0,W6.z)(t,Gn[a].timeRangeMonths))}),c=(0,H.useRef)(null),m=(0,H.useRef)(null),p=(0,H.useMemo)(()=>Math.abs((0,ny.j)(d,o)),[d,o])*s,f=(0,H.useCallback)(e=>{let t=d.getTime()-o.getTime();return 0+(e.getTime()-o.getTime())/t*(p-0)},[p,0,d,o]),h=(0,H.useCallback)(e=>{if(c&&c.current){let t=c.current.getBoundingClientRect().left;return c.current.scrollLeft+e-t}return 0},[]),g=(0,H.useCallback)(e=>{let t=o.getTime();return new Date(new Date((d.getTime()-t)/p*e+t).setUTCHours(0,0,0,0))},[d,o,p]),y=(0,H.useCallback)(e=>{if(c&&c.current){let t=c.current.getBoundingClientRect().left;return g(c.current.scrollLeft+e-t)}},[g]),x=(0,H.useSyncExternalStore)((0,H.useCallback)(e=>{if(!c.current)return()=>void 0;let t=new ResizeObserver(e);return t.observe(c.current),()=>{t.disconnect()}},[]),(0,H.useCallback)(()=>c.current?.clientWidth??1,[c])),b=(0,H.useCallback)(()=>{if(c&&c.current){let e=c.current.scrollLeft+r;return{left:e,right:e+x-r}}return{left:0,right:0}},[r,x]),v=(0,fu.N)(e=>{w(e)},500),w=(0,H.useCallback)(e=>{let t=m.current;if(!t||t.completed){m.current=e;let t=e.zoomLevel||i;u({timeRangeStart:rv((0,W6.z)(e.date,-Gn[t].timeRangeMonths)),timeRangeEnd:rv((0,W6.z)(e.date,Gn[t].timeRangeMonths))})}},[i]),j=(0,H.useCallback)(()=>{v({date:d,direction:"next"})},[v,d]),C=(0,H.useCallback)(()=>{v({date:o,direction:"prev"})},[v,o]),I=(0,H.useCallback)(()=>{let e=(c.current?.clientWidth??window.innerWidth)-r;return Math.floor(r+1/3*e-s/2)},[r,s]),S=(0,H.useCallback)((e,t=!1)=>{if(c&&c.current){let r=f(e),a=I();r-a<1?w({date:e,direction:"prev"}):r+a>p-1?w({date:e,direction:"next"}):c.current?.scrollTo({left:r-a,behavior:t?"smooth":"auto"})}},[f,w,I,p]),k=(0,H.useCallback)((e=!1)=>{if(c&&c.current){let t=c.current.scrollLeft-r+c.current.offsetWidth-50;c.current?.scrollTo({left:t,behavior:e?"smooth":"auto"})}},[r]),T=(0,H.useCallback)((e=!1)=>{if(c&&c.current){let t=c.current.scrollLeft+r-c.current.offsetWidth+50;c.current?.scrollTo({left:t,behavior:e?"smooth":"auto"})}},[r]),[N,_]=(0,H.useState)(!1),R=(0,H.useCallback)(e=>{n(),_(e)},[n]),{allColumns:P}=df(),{dateFields:D}=Ie(),E=(0,H.useMemo)(()=>P.reduce((e,t)=>{if(nH(t)){let r=nR(t).map(e=>{let{startDate:t,duration:r}=e,a=nT({startDate:t,duration:r});return{...e,start:a.startDate,end:a.endDate}});e[t.id]=r}return e},{}),[P]),A=(0,H.useCallback)((e,t)=>E[e.id]?.find(e=>t>=e.start&&t<=e.end),[E]),M=(0,H.useCallback)(e=>{let t=D[0]??fH,r=D[1]??fH,a={start:e,end:e};if(t!==fH&&nH(t)){let n=A(t,e);n?(a.start=n.start,a.startIteration=n,r===fH&&(a.end=n.end,a.endIteration=n)):a.start=void 0}if(r!==fH&&nH(r)){let n=A(r,e);n?(a.end=n.end,a.endIteration=n,t===fH&&(a.start=n.start,a.startIteration=n)):a.end=void 0}return a},[D,A]);(0,uG.b)(()=>{if(a!==i&&c&&c.current){let e=g(I()+c.current.scrollLeft);l(a),w({date:e,direction:"none",zoomLevel:a})}},[a,w,i,I,s,g]),(0,uG.b)(()=>{if(m.current&&c.current){let{date:e,direction:t,completed:r}=m.current;if(!r){let r=f(e),a="next"===t?c.current.offsetWidth:"prev"===t?0:I();c.current?.scrollTo({left:r-a})}}},[s,f,d,o,I]),(0,H.useEffect)(()=>{if(m.current&&c.current){let{date:e,completed:t}=m.current;t||(S(e,!0),m.current={...m.current,completed:!0})}},[S,d,o]);let[L,F]=(0,H.useState)(!1);return(0,O.jsx)(Ge.Provider,{value:M,children:(0,O.jsx)(W9.Provider,{value:b,children:(0,O.jsx)(W7.Provider,{value:(0,H.useMemo)(()=>({columnWidth:s,getX:f,getXFromClientX:h,getDateFromClientX:y,getDateFromX:g,timeRangeEnd:d,timeRangeStart:o,totalWidth:p,today:t}),[s,f,h,y,g,d,o,p,t]),children:(0,O.jsx)(Ga.Provider,{value:F,children:(0,O.jsx)(Gr.Provider,{value:L,children:(0,O.jsx)(Gt.Provider,{value:(0,H.useMemo)(()=>({roadmapRef:c,scrollToDate:S,scrollToNextPage:k,scrollToPrevPage:T,shiftToNextRange:j,shiftToPrevRange:C}),[S,k,T,j,C]),children:(0,O.jsx)(LC.Provider,{value:(0,H.useMemo)(()=>({isDateConfigurationMenuOpen:N,setOpenDateConfigurationMenu:R}),[N,R]),children:e})})})})})})})}),Gl=()=>{let e=(0,H.useContext)(W7);if(null===e)throw Error("useRoadmapView must be used within a RoadmapViewContext");return e},Gs=()=>{let e=(0,H.useContext)(Ge);return(0,J.Z)(null!=e,"useRoadmapGetTimeSpan must be used within a RoadmapGetTimeSpanContext"),e},Go=()=>{let e=(0,H.useContext)(W9);return(0,J.Z)(null!=e,"useRoadmapGetViewport must be used within a RoadmapGetViewportContext"),e},Gd=()=>{let e=(0,H.useContext)(Gt);if(null===e)throw Error("useRoadmapNavigation must be used within a RoadmapNavigationContext");return e},Gu=()=>{let e=(0,H.useContext)(Gr);return(0,J.Z)(null!==e),e},Gc=()=>{let e=(0,H.useContext)(Ga);return(0,J.Z)(null!==e),e};try{Gi.displayName||(Gi.displayName="RoadmapViewProvider")}catch{}let Gm={CustomDate:"custom-date",Iteration:"iteration",IterationBreak:"iteration-break",Milestone:"milestone"},Gp=(0,H.createContext)(null),Gf=(0,H.createContext)(null),Gh=(0,H.createContext)(null),Gg=(0,H.memo)(function({children:e,rows:t}){let{dateFields:r,markerFields:a}=Ie(),{timeRangeStart:n,timeRangeEnd:i}=Gl(),{allColumns:l}=df(),s=(0,H.useMemo)(()=>{let e=[];for(let t of a)nK(t)&&e.push(t);return e},[a]),o=!!a.find(e=>e.id===eM.Milestone),d=(0,H.useMemo)(()=>{let e=new Map;if(!o)return e;for(let r of t)!function(t){let r=t.getMilestone();if(!r?.dueDate)return;let a=new Date(r.dueDate);if(a<n||a>i)return;let l=e.get(r.dueDate)??new Map;e.set(r.dueDate,l.set(r.id,r))}(r.original);return e},[o,t,i,n]),u=(0,H.useMemo)(()=>t.map(e=>e.original),[t]),c=(0,H.useMemo)(()=>(function(e,t,r,a){let n=new Map;function i(e){for(let i of t){let t=e.getCustomField(i.id);if(t?.value){let l=oc(t.value),s=new Date(l);if(s<r||s>a)continue;n.set(l,{id:`${e.id}:${i.id}`,type:Gm.CustomDate,title:i.name,date:l})}}}for(let t of e){if("rows"in t){for(let e of t.rows)i(e);continue}i(t)}return n})(u,s,n,i),[s,u,i,n]),m=(0,H.useMemo)(()=>(function(e,t,r,a,n){let i=new Map,l=e.reduce((e,t)=>(nH(t)&&e.push(t),e),[]),s=new Set(r.map(e=>e===fH?fH:e.databaseId)),o=new Set([...t.map(e=>e.databaseId)]);function d(e,t,r,l){let s=new Date(e);if(s>=a&&s<=n){let a=i.get(e);if(a){let t=a.options;t.push(l),i.set(e,{...a,title:`${t.length} iterations`,duration:a.duration>l.duration?a.duration:l.duration,options:t})}else i.set(e,{id:l.id,type:r,title:l.title,date:l.startDate,duration:l.duration,isDateField:t,options:[l]})}}for(let e of l)if(o.has(e.databaseId)){let t=nR(e).sort(nM);for(let[r,a]of t.entries()){let n=function(e,t){let r=nV(e,t);if(void 0!==r)return{id:`break-${e?.id}-${t?.id}`,title:"Break",titleHtml:"Break",startDate:oc(r.startDate.toString()),duration:r.duration}}(t[r-1],a);void 0!==n&&d(n.startDate,s.has(e.databaseId),Gm.IterationBreak,n),d(a.startDate,s.has(e.databaseId),Gm.Iteration,a)}}return i})(l,a,r.filter(e=>e!==fH&&nH(e)),n,i),[l,a,r,n,i]),p=(0,H.useMemo)(()=>(function(e){let t=new Map;for(let[r,a]of e.entries()){let e=[...a.values()],[n,i]=e.reduce((e,t)=>(e[0].push(t.title),e[1].push(`${t.title} (${t.repoNameWithOwner})`),e),[[],[]]);t.set(r,{id:`milestone:${r}`,type:Gm.Milestone,title:e.length>1?`${e.length} milestones`:re(n),description:re(i),date:r,options:e})}return t})(d),[d]),f=(0,H.useMemo)(()=>{let e=new Map([...c,...p]);return{markersInRange:[...m.values(),...e.values()].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),singleDayMarkerMap:e}},[c,m,p]);return(0,O.jsx)(Gp.Provider,{value:f,children:(0,O.jsx)(Gf.Provider,{value:d.size,children:(0,O.jsx)(Gh.Provider,{value:m.size,children:e})})})}),Gy=()=>{let e=(0,H.useContext)(Gp);return(0,J.Z)(null!=e,"useRoadmapMarkersInRange must be used within a RoadmapMarkersInRangeProvider"),e};function Gx(){let e=(0,H.useContext)(Gf);return(0,J.Z)(null!=e,"useRoadmapMilestoneMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}function Gb(){let e=(0,H.useContext)(Gh);return(0,J.Z)(null!=e,"useRoadmapIterationMarkersSize must be used within a RoadmapMarkersInRangeProvider"),e}let Gv=e=>{if(e.type!==Gm.Iteration||!e.isDateField)return!1;let t=new Date,r=new Date(e.date),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=(0,ta.E)(nv(e.date,e.duration||0),1);return(0,nm.A)(a,(0,np.k)(r,1))&&(0,nf.R)(a,n)};try{Gp.displayName||(Gp.displayName="RoadmapMarkersInRangeContext")}catch{}try{Gf.displayName||(Gf.displayName="RoadmapMilestoneMarkersSizeContext")}catch{}try{Gh.displayName||(Gh.displayName="RoadmapIterationMarkersSizeContext")}catch{}try{Gg.displayName||(Gg.displayName="RoadmapMarkersInRangeProvider")}catch{}let Gw=()=>{let e=Gx();return Gb()>0||e>0},Gj=()=>Gw()?88:64,GC=()=>{let e=Gj(),{groupedByColumnId:t}=dI();return(0,H.useMemo)(()=>({scrollMarginTop:`${e+1+(t?44:0)}px`,scrollMarginBottom:"64px"}),[e,t])};function GI({children:e,sx:t}){return(0,O.jsx)(eO.Z,{sx:{display:"flex",alignItems:"center",overflow:"hidden",padding:"12px",position:"relative",height:"40px",borderBottom:"1px solid",borderColor:"border.muted",...t},children:e})}let GS={cursor:"default",backgroundColor:"canvas.default",zIndex:2},Gk=(0,H.memo)((0,H.forwardRef)(function(e,t){let{children:r,sx:a,role:n="gridcell",style:i,...l}=e;return(0,O.jsx)(eO.Z,{ref:t,role:n,sx:{...GS,...a},style:i,...l,children:r})})),GT={display:"flex",height:"40px",alignItems:"center","body.roadmap-date-tooltip-visible:not(.is-dragging) &.roadmap-row:hover":{zIndex:1},"body:not(.is-dragging) &.roadmap-row:hover, &.pill-drag":{"& .roadmap-table-cell":{backgroundColor:"canvas.subtle","&:before":{backgroundColor:"canvas.subtle"}},"& .roadmap-pill:not(.is-focused)":{border:"1px solid",borderColor:"fg.muted",borderRadius:1},"& .menu-trigger":{opacity:1},"&.row-highlight":{zIndex:3}},"&.roadmap-row.row-highlight:not(.row-selected)":{"& .roadmap-table-cell, & .roadmap-table-cell:hover":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"&.roadmap-row.row-highlight, &.roadmap-row.row-selected":{zIndex:3,"& .roadmap-table-cell, & .roadmap-table-cell:hover":{backgroundColor:"canvas.default","&:before":{zIndex:-1,content:'""',position:"absolute",backgroundColor:e=>`${e.colors.accent.subtle}`},":not(.is-focused):before":{inset:0}},"&.selection-top-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 1px 0 0 ${e.colors.accent.emphasis}`},"&.selection-top-edge.selection-bottom-edge .roadmap-table-cell":{boxShadow:e=>`0 -1px 0 0 ${e.colors.accent.emphasis}, 0 1px 0 0 ${e.colors.accent.emphasis}`}},"& .roadmap-table-cell.is-focused":{zIndex:3,position:"sticky","& .roadmap-drag-sash:after":{borderColor:"transparent"}},"& .roadmap-table-cell.is-selected, .roadmap-table-cell.is-copy-source":{zIndex:3,position:"sticky"},"& .roadmap-table-cell.is-selected":{backgroundColor:"canvas.default","&:before":{backgroundColor:e=>`${e.colors.accent.subtle}`}},"& .roadmap-table-cell":{userSelect:"none"}},GN={boxShadow:"shadow.medium","&::after":{content:'""',position:"absolute",inset:0,borderBottom:"1px solid",borderBottomColor:"border.default",zIndex:-1}},G_=(0,H.forwardRef)(function({row:e,children:t,isDraggingPill:r,isHighlighted:a,...n},i){let{flatRows:l,groupedRows:s}=ID(),o=IP(),d=e?kw(e,l,s):null,u=e&&!!o?.[e.id]&&kb(e),c=Ia(),m=(0,IL.W)("roadmap-row",{"row-highlight":a,"row-selected":u,"selection-top-edge":u&&d&&(!d.beforeSelected||d.firstInGroup),"selection-bottom-edge":u&&d&&(!d.afterSelected||d.lastInGroup),"pill-drag":r}),p=GC();return(0,O.jsx)(eO.Z,{ref:i,role:"row",className:m,sx:GT,style:{...p,marginLeft:`-${c}px`},"data-test-row-is-selected":u,...n,children:t})});try{GI.displayName||(GI.displayName="RoadmapCellContent")}catch{}try{Gk.displayName||(Gk.displayName="RoadmapCell")}catch{}try{Gk.displayName||(Gk.displayName="RoadmapCell")}catch{}try{G_.displayName||(G_.displayName="RoadmapRow")}catch{}let GR=()=>null,GP=e=>iM(e)&&e.details.x===W3,GD=(e,t,r)=>{if(e.original.contentType===eL.RedactedItem)return!1;if(t)return!0;let a=r(e.original.columns);return!!(a.start||a.end)},GE=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(r,a,n,i)=>{if(!(n.y===io.Next||n.y===io.Previous))return!0;let l=GP(r),s=(iP(r)||iE(r))&&a&&GP(a);return!(l||s)||GD(i,e,t)},GA=({hasWritePermissions:e,getTimeSpanFromColumnData:t})=>(r,a,n)=>a.x!==io.Next&&a.x!==io.Previous||r!==W3||!n||GD(n,e,t),GM={color:"fg.muted",fontWeight:"normal"},GL={position:"absolute",top:"3px",right:3,zIndex:4,pr:[0,2,3],my:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"},display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:"canvas.default",listStyle:"none"},GF=(0,H.memo)(function(){let e=(0,H.useRef)(null);(0,xw.v)({containerRef:e,bindKeys:xv.Qw.ArrowHorizontal});let{memex_header_redesign:t}=n9();return(0,O.jsx)(eO.Z,{role:"menubar",ref:e,as:"ul",sx:GL,...(0,ef.f)("quick-action-toolbar"),children:(0,O.jsxs)(Le.Provider,{value:aA,children:[t?null:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(GZ,{}),(0,O.jsx)(G$,{}),(0,O.jsx)(GW,{}),(0,O.jsx)(Gz,{})]}),(0,O.jsx)(GO,{}),(0,O.jsx)(GV,{}),(0,O.jsx)(GB,{})]})})}),GZ=()=>{let e=(0,H.useId)(),t=(0,H.useRef)(null),[r,a]=(0,H.useState)(!1);return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(cd.r,{...(0,ef.f)("quick-action-toolbar-markers-menu"),ref:t,"aria-haspopup":"true","aria-expanded":r,"aria-controls":e,trailingVisual:null,variant:"invisible",size:"small",sx:GM,leadingVisual:Lq,onClick:()=>a(e=>!e),children:"Markers"}),(0,O.jsx)(fj.P,{anchorRef:t,open:r,children:(0,O.jsx)(fj.P.Overlay,{role:"dialog",onEscape:()=>a(!1),onClickOutside:()=>a(!1),"aria-label":"Configure vertical markers to display on roadmap",children:(0,O.jsx)(LK,{id:e})})})]})};function GO(){let{today:e}=Gl(),{scrollToDate:t}=Gd(),r=(0,H.useRef)(null),[a,n]=(0,mH.g)({contentRef:r,"aria-label":rO.scrollToDateText(e)});return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(cd.r,{onClick:()=>{t(e,!0)},size:"small",variant:"invisible",sx:GM,...a,ref:r,children:rO.toolbarToday}),n]})}function GV(){let{scrollToPrevPage:e}=Gd(),t=(0,H.useRef)(null),[r,a]=(0,mH.g)({contentRef:t,"aria-label":rO.scrollToPreviousPage,direction:"nw"});return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(mq.h,{onClick:()=>{e(!0)},size:"small",variant:"invisible","aria-label":rO.scrollToPreviousPage,icon:eF.ChevronLeftIcon,sx:GM,ref:t,...r}),a]})}function GB(){let{scrollToNextPage:e}=Gd(),t=(0,H.useRef)(null),[r,a]=(0,mH.g)({contentRef:t,"aria-label":rO.scrollToNextPage,direction:"nw"});return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(mq.h,{onClick:()=>{e(!0)},size:"small",variant:"invisible","aria-label":rO.scrollToNextPage,icon:eF.ChevronRightIcon,sx:GM,ref:t,...r}),a]})}function G$(){let{isSorted:e,sorts:t}=dN(),r=(0,H.useRef)(null),[a,n]=(0,H.useState)(!1),{sortLabel:i,sortText:l}=(0,H.useMemo)(()=>e?{sortLabel:`Sorted by: ${t.map(e=>`${e.column.name} ${"asc"===e.direction?"ascending":"descending"}`).join(", ")}`,sortText:t.map(e=>e.column.name).join(", ")}:{sortLabel:"No sort applied",sortText:"Sort"},[e,t]),s=mb("quick-action-toolbar-sort-by-menu");return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(cd.r,{ref:r,"aria-haspopup":"true","aria-expanded":a,onClick:()=>{n(!a)},variant:"invisible",size:"small",sx:GM,"aria-controls":s,...(0,ef.f)("quick-action-toolbar-sort-by-menu"),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex"},"aria-label":i,children:[(0,O.jsx)(L7,{}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:l})]})}),(0,O.jsx)(L1,{id:s,anchorRef:r,open:a,setOpen:n})]})}function Gz(){let{hasWritePermissions:e}=i4(),t=Is(),{isRoadmapZoomLevelDirty:r}=Ie(),a=(0,H.useRef)(null),[n,i]=(0,H.useState)(!1),l=mb("roadmap-zoom-level-menu");return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(cd.r,{ref:a,"aria-haspopup":"true","aria-expanded":n,onClick:()=>{i(!n)},variant:"invisible",size:"small","aria-label":rO.toolbarZoomAriaLabel(t),sx:GM,"aria-controls":l,...(0,ef.f)("quick-action-toolbar-zoom-level"),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(Pn,{isDirty:r,hideDirtyState:!e,...(0,ef.f)("roadmap-zoom-level-dirty"),children:(0,O.jsx)(eF.ZoomInIcon,{})}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:rO.zoomLevelOptions[t]})]})}),(0,O.jsx)(LX,{id:l,anchorRef:a,open:n,setOpen:i})]})}function GW(){let{dateFields:e,areDateFieldsDefault:t}=Ie(),{isDateFieldsPopoverDisabled:r}=It(),a=new Set(e.filter(C1).map(e=>e.name)),{isDateConfigurationMenuOpen:n,setOpenDateConfigurationMenu:i}=LI(),{currentView:l}=oi(),{postStats:s}=os(),o=0===a.size,d=l?.serverViewState.layout!==fW.Roadmap&&l?.localViewState.layout===fW.Roadmap,u=!o&&t&&d,c=e.some(e=>C1(e)&&"iteration"===e.dataType)?"iteration":"date",m=(0,H.useRef)(null),p=!r&&(o||u),f=mb("roadmap-date-fields-menu");return(0,O.jsxs)(eO.Z,{as:"li",sx:{position:"relative"},role:"menuitem",children:[(0,O.jsx)(cd.r,{ref:m,"aria-haspopup":"true","aria-expanded":n,onClick:()=>{i(!n)},variant:"invisible",size:"small","aria-label":rO.toolbarDateFieldsAriaLabel,sx:GM,"aria-controls":f,...(0,ef.f)("quick-action-toolbar-date-fields-menu"),children:(0,O.jsxs)(eO.Z,{sx:{display:"flex"},children:[(0,O.jsx)(Fe,{}),(0,O.jsx)(eB.Z,{sx:{ml:2},children:rO.toolbarDateFields})]})}),p&&(0,O.jsx)(gM.Z,{relative:!1,open:p,caret:"top",sx:{top:"24px",left:"-54px"},children:(0,O.jsxs)(gM.Z.Content,{sx:{mt:2},children:[(0,O.jsx)(eO.Z,{sx:{fontSize:2,fontWeight:"bold"},children:rO.gettingStarted.popoverTitle}),(0,O.jsx)(eO.Z,{sx:{marginTop:2,marginBottom:3},children:u?rO.gettingStarted.fieldsSelectedByDefault(c):rO.gettingStarted.projectNeedsField}),(0,O.jsx)(cd.r,{onClick:()=>{i(!0),s({name:aZ,ui:aF,context:JSON.stringify(Lj(a.size,c))})},children:rO.gettingStarted.popoverDismissButton})]})}),(0,O.jsx)(LO,{id:f,anchorRef:m,open:n,setOpen:i})]})}try{GF.displayName||(GF.displayName="RoadmapControls")}catch{}try{GZ.displayName||(GZ.displayName="RoadmapMarkerButton")}catch{}try{GO.displayName||(GO.displayName="TodayButton")}catch{}try{GV.displayName||(GV.displayName="PrevPageButton")}catch{}try{GB.displayName||(GB.displayName="NextPageButton")}catch{}try{G$.displayName||(G$.displayName="RoadmapSortByMenu")}catch{}try{Gz.displayName||(Gz.displayName="ZoomLevelMenu")}catch{}try{GW.displayName||(GW.displayName="DateConfigurationMenu")}catch{}function GG(e,t){let{start:r,end:a,startIteration:n,endIteration:i}=e;if(n&&r)return a?i?n===i?`${rw(r,a)} [${n.title}]`:`${rw(r,a)} [${n.title} start - ${i.title} end]`:r.getTime()===a.getTime()?`${rb(r)} [${n.title} start]`:`${rw(r,a)} [${n.title} start - ${rb(a,"MMM d")}]`:`${rb(r)} [${n.title} start]`;return i&&a?r?r.getTime()===a.getTime()?`${rb(a)} [${i.title} end]`:`${rw(r,a)} [${rb(r,"MMM d")} - ${i.title} end]`:`${rb(a)} [${i.title} end]`:r&&a&&r.getTime()!==a.getTime()?rw(r,a):r?rb(r):a?rb(a):t&&!GU(t)?rO.noDateFieldsConfiguredTooltip:void 0}function GU(e){return e.filter(C1).length>0}let GH={PillLink:"pill_link",ArrowButton:"arrow_button",AddDateButton:"add_dates_button"},Gq=(0,H.createContext)(null),GK=(0,H.memo)(function({children:e,cell:t,rowRef:r}){let{state:{focus:a},navigationDispatch:n}=iB(),[i,l]=(0,H.useState)(null),s=(0,H.useMemo)(()=>!!(a&&iM(a)&&a.details.y===t.row.id&&a.details.x===t.column.id),[t,a]),o=(0,H.useRef)(null),d=(0,H.useRef)(null),u=(0,H.useRef)(null),c=(0,H.useRef)(null),m=(0,H.useCallback)(()=>u.current?{type:GH.ArrowButton,element:u.current}:c.current?{type:GH.AddDateButton,element:c.current}:d.current?{type:GH.PillLink,element:d.current}:null,[]),p=(0,H.useCallback)(e=>e?o.current!==e:!!o.current,[]),f=(0,H.useCallback)(e=>{let t=m();if(p(t?.element)&&(l(t),o.current=t?.element??null),t?.element){if(t.element.focus({preventScroll:!0}),!e.scrollIntoView)return;r.current&&(WC()?"scrollIntoViewIfNeeded"in r.current&&"function"==typeof r.current.scrollIntoViewIfNeeded&&r.current.scrollIntoViewIfNeeded(!1):r.current.scrollIntoView({block:"nearest",inline:"nearest"}))}},[m,p,r]),h=(0,H.useCallback)(()=>{s&&f({scrollIntoView:!1})},[s,f]);(0,uG.b)(()=>{s?f({scrollIntoView:!0}):(l(null),o.current=null)},[s,f,l]);let{openProjectItemInPane:g}=dq(),y=(0,H.useRef)(!1),x=(0,H.useCallback)((e=200)=>{y.current=!0,window.setTimeout(()=>{y.current=!1},e)},[]),b=t.row.original,v=b.contentType===eL.DraftIssue||b.contentType===eL.Issue,w=(0,H.useCallback)(e=>{if(y.current){e.preventDefault();return}!v||(e.metaKey||e.ctrlKey)&&b.contentType!==eL.DraftIssue||(g(b,()=>{d.current?.focus()}),e.preventDefault())},[g,b,d,v]),j=i?.type,C=(0,H.useCallback)(e=>{let t=mz(e);kg(n,e).action?kf(e):j===GH.PillLink&&t===mV.SPACE&&v&&(g(b,()=>{d.current?.focus()}),kf(e))},[n,v,g,b,j]),I=(0,H.useCallback)(()=>{s||n(iO(t.row.id,t.column.id,!1))},[s,n,t]),S=(0,H.useCallback)(()=>{s||n(iO(t.row.id,t.column.id,!1))},[s,n,t]);return(0,O.jsx)(Gq.Provider,{value:(0,H.useMemo)(()=>({wrapperProps:{onKeyDown:C,onPointerDown:I,tabIndex:-1},onFocusInternalElement:S,linkRef:d,onClickPillLink:w,temporarilyIgnorePillLinkClick:x,arrowButtonRef:u,addDateButtonRef:c,refocusPillArea:h,focusType:j}),[C,I,S,w,x,h,j]),children:e})}),GQ=()=>{let e=(0,H.useContext)(Gq);if(!e)throw Error("useRoadmapPillAreaFocus must be used within a RoadmapPillAreaFocusContext");return e};try{GK.displayName||(GK.displayName="RoadmapPillAreaFocusProvider")}catch{}let GX=(e,t,r)=>{if("none"!==t&&"number"==typeof t.id){let a=t.id,n=e.id,i=t.dataType;if(i===eA.Iteration){let t=e.getCustomField(a),l=t?a0:a1;if(!t||t.id!==r?.id)return{memexProjectColumnId:a,action:{dataType:i,memexProjectColumnId:a,value:r},stats:{payload:{name:l,memexProjectColumnId:a,memexProjectItemId:n}}}}else if(i===eA.Date){let t={value:r},l=e.getCustomField(a),s=l?.value?new Date(l.value):void 0,o=s?a0:a1;if(!s||s.getTime()!==t.value?.getTime())return{memexProjectColumnId:a,action:{dataType:i,memexProjectColumnId:a,value:t},stats:{payload:{name:o,memexProjectColumnId:a,memexProjectItemId:n}}}}}};function GY(){let{updateMultipleSequentially:e}=ha(),{postStats:t}=os(),{dateFields:[r=fH,a=fH]}=Ie(),n=(0,H.useCallback)((n,i)=>{let l=new Map,s=GX(n,r,i.startIteration||i.start),o=GX(n,a,i.endIteration||i.end);s&&l.set(s.memexProjectColumnId,s),o&&l.set(o.memexProjectColumnId,o);let d=Array.from(l.values()).map(e=>e.action),u=Array.from(l.values()).map(e=>e.stats),c=d.length>0?e(n,d):Promise.resolve();for(let e of u)t(e.payload);return c},[r,a,t,e]);return(0,H.useMemo)(()=>({updateItemDates:n}),[n])}let GJ={borderRadius:"5px",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.muted",padding:"0",color:"fg.muted",width:22,position:"relative","&.is-focused":{outline:"none"},"&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 2px)",height:"calc(100% - 2px)",border:"2px solid",borderColor:"accent.emphasis",inset:-1,borderRadius:"5px"}},G0={...GJ,backgroundColor:"unset",border:"none","&.roadmap-add-date-button:hover":{backgroundColor:"unset",border:"none"}},G1={position:"absolute",height:28,backgroundColor:"canvas.default",borderStyle:"dotted",borderWidth:"1px",borderColor:"fg.muted",borderRadius:"5px",opacity:.7},G2=(0,H.memo)(function({isBefore:e,startDate:t,endDate:r,role:a,wrapperProps:n,onFocusInternalElement:i,arrowButtonRef:l,className:s}){let{scrollToDate:o}=Gd(),d=Go(),u=Ia(),c=d(),m=(0,H.useCallback)(()=>{t&&o(t,!0)},[o,t]),p=t?rO.scrollToDateText(t):r?rO.scrollToDateText(r):"";return(0,O.jsx)(eO.Z,{role:a,sx:{position:"sticky",zIndex:1},style:{left:e?u+8:u+(c.right-c.left)-30},...n||{},children:(0,O.jsx)(fC.Z,{"aria-label":p,direction:e?"e":"w",children:(0,O.jsx)(mq.h,{onClick:m,variant:"invisible",icon:e?eF.ArrowLeftIcon:eF.ArrowRightIcon,...(0,ef.f)("roadmap-navigation-button"),sx:GJ,"aria-label":p,ref:l??null,className:(0,IL.W)(s),...i?{onFocus:i}:{}})})})}),G5=(0,H.memo)(function(e){let{wrapperProps:t,onFocusInternalElement:r,arrowButtonRef:a,focusType:n}=GQ();return(0,O.jsx)(G2,{wrapperProps:t,onFocusInternalElement:r,arrowButtonRef:a,className:n===GH.ArrowButton?"is-focused":void 0,...e})}),G3=(0,H.memo)(function({item:e,date:t,offsetX:r,isDefaultAddButton:a,hideTooltip:n,hidePlaceholder:i}){let l;let s=Gs(),{today:o}=Gl(),{updateItemDates:d}=GY(),{dateFields:u}=Ie(),c=Ia(),{setOpenDateConfigurationMenu:m}=LI(),p=l$(),{wrapperProps:f,onFocusInternalElement:h,addDateButtonRef:g,focusType:y}=GQ(),x=ur(),b=GU(u),v=a||!t,w=v?o:t,j=s(w),C=!j.start||!j.end;C?l=rO.noIterationConfiguredTooltip(rb(w)):b?(l=GG(j),l=v?`Add to today at ${l}`:`Add to ${l}`):l=rO.noDateFieldsConfiguredTooltip;let I=(0,H.useCallback)(()=>{if(b){if(C){let e=function(e){if(e&&"none"!==e&&nH(e))return e}(j.start?u[1]:u[0]);e&&p({pathname:eI.generatePath({...x,fieldId:e.id})})}else w&&d(e,j)}else m(!0)},[u,b,C,e,p,m,w,j,d,x]),[S,k]=(0,H.useState)(!1),T=(0,H.useCallback)(e=>{k(!0),h&&h(e)},[h]),N=(0,H.useCallback)(()=>k(!1),[]),_=!i&&!(a&&!S)&&!C,R=(!a||S)&&C?eF.IterationsIcon:eF.PlusIcon,P=v||C?GJ:G0,{sx:D,style:E}=a?{sx:{position:"sticky",zIndex:1},style:{left:c+8}}:{sx:{position:"absolute",zIndex:1},style:{left:r-11}},A=(0,H.useRef)(null),[M,L]=(0,mH.g)({"aria-label":l,...!b||C||v?{direction:"e",anchorSide:"outside-right"}:{direction:"n",anchorSide:"outside-top"},contentRef:A});return(0,O.jsxs)(O.Fragment,{children:[_&&(0,O.jsx)(G4,{timeSpan:j}),(0,O.jsx)(eO.Z,{sx:D,style:E,role:"gridcell",ref:A,...f,...M,children:(0,O.jsx)(mq.h,{onClick:I,onFocus:T,onBlur:N,variant:"invisible",icon:R,sx:P,...(0,ef.f)("roadmap-add-date-button"),className:(0,IL.W)("roadmap-add-date-button",{"is-focused":y===GH.AddDateButton}),"aria-label":l,ref:g})}),n?null:L]})}),G4=({timeSpan:e})=>{let{getX:t,columnWidth:r}=Gl(),a=e.start?t(e.start):0,n=e.end?t(e.end):0;return(0,O.jsx)(eO.Z,{role:"gridcell",sx:G1,style:{width:n-a+r,left:a},children:"\xa0"})};try{G2.displayName||(G2.displayName="NavigationArrow")}catch{}try{G5.displayName||(G5.displayName="NavigationArrowWithFocusContext")}catch{}try{G3.displayName||(G3.displayName="AddDateButton")}catch{}try{G4.displayName||(G4.displayName="PillPlaceholder")}catch{}let G8={backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},G6={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"canvas.default",padding:"0 16px",borderColor:"border.default",borderRadius:"14px",borderWidth:"2px"},G7=(0,H.memo)(function({startDate:e,endDate:t,pillOffsetLeft:r,pillWidth:a}){let n=Go(),i=Ia(),l=(0,H.useRef)(null),{isVisible:s}=uK({ref:l}),o=(0,H.useRef)(null),{isVisible:d}=uK({ref:o}),u=n(),c=!s&&r+a<=u.left+1,m=!s&&r>=u.right-1,p=GG({start:e,end:t}),f=(0,O.jsx)(y8.Z,{sx:G6,style:{width:a},className:"roadmap-pill",...(0,ef.f)("roadmap-view-group-header-item")}),h=(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(eO.Z,{sx:{display:"flex",flexShrink:0,color:"fg.muted",alignItems:"center",whiteSpace:"nowrap",textAlign:"left",width:"min-content"},children:p})});return(0,O.jsxs)(Gk,{role:"gridcell","data-date-start":e?tY(e):void 0,"data-date-end":t?tY(t):void 0,sx:G8,children:[(0,O.jsx)(eO.Z,{ref:o,role:"presentation",sx:{position:"absolute",width:8},style:{left:r}}),(0,O.jsx)(eO.Z,{ref:l,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:r},children:f}),s?(0,O.jsx)(eO.Z,{sx:{position:d?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:d?r+16:i+8},children:h}):c||m?(0,O.jsx)(G2,{isBefore:c,startDate:e,endDate:t}):null]})});try{G7.displayName||(G7.displayName="RoadmapGroupPill")}catch{}let G9=(0,H.memo)(function({rows:e}){let t,r;let{getTimeSpanFromColumnData:a}=Ie(),{getX:n,totalWidth:i}=Gl();for(let n of e){let e=a(n.original.columns),[i,l]=rj([e.start,e.end]);i&&(!t||i<t)&&(t=i),l&&(!r||l>r)&&(r=l)}let l={start:t,end:r},s=l.start?n(l.start):0,o=l.end?n((0,ta.E)(l.end,1))-s:0,d=s+o<=0,u=s>=i,c=!d&&!u,m=l.start||l.end;return m?c?(0,O.jsx)(G7,{startDate:l.start,endDate:l.end,pillOffsetLeft:s,pillWidth:o}):m?(0,O.jsx)(G2,{role:"gridcell",isBefore:d,startDate:l.start,endDate:l.end}):null:null});try{G9.displayName||(G9.displayName="RoadmapGroupPillArea")}catch{}let Ue=(e,t,{leading:r=!0,trailing:a=!0,onChangeBehavior:n="flush"}={})=>{let i=(0,e5.Z)(e),l=(0,H.useMemo)(()=>(0,Mt.Z)((...e)=>i.current(...e),t,{leading:r,trailing:a}),[i,t,r,a]);return(0,H.useEffect)(()=>()=>{l?.[n]()},[l,n]),l},Ut=()=>{let[e,t]=(0,H.useState)({isHovered:!1,mouseX:null,mouseY:null,buttonPressedOnEntry:!1}),r=(0,H.useCallback)(e=>t(t=>({...t,isHovered:!0,buttonPressedOnEntry:!!e.buttons})),[]),a=Ue(e=>{t(t=>({...t,mouseX:e.clientX,mouseY:e.clientY}))},16),n=(0,H.useCallback)(()=>t(e=>({...e,isHovered:!1,buttonPressedOnEntry:!1})),[]);return(0,H.useMemo)(()=>({mouseState:e,onMouseEnter:r,onMouseMove:a,onMouseLeave:n}),[e,r,a,n])};var Ur=r(94701);function Ua(){let{hasWritePermissions:e}=i4(),t=(0,H.useCallback)(t=>e&&t.contentType!==eL.RedactedItem,[e]);return(0,H.useMemo)(()=>({canUpdate:e,canUpdateItem:t}),[t,e])}let Un=(e,t)=>(0,ng.T)(e,24*t),Ui=e=>e!==fH&&nH(e),Ul=e=>e!==fH&&nK(e),Us=new Set(["move","expand-leading","expand-trailing"]),Uo={display:"block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle",whiteSpace:"nowrap"},Ud={color:"fg.muted",textAlign:"left",whiteSpace:"nowrap",textDecoration:"none"},Uu={flexShrink:0,left:0,height:28,backgroundColor:"canvas.default",boxShadow:"shadow.medium",borderColor:"border.default",padding:"0 8px",borderRadius:"5px"},Uc={position:"absolute",right:"0",width:"1px",height:"16px",backgroundColor:"canvas.subtle"},Um={display:"flex",flexShrink:0,alignItems:"center",lineHeight:1.5,left:0,height:28,fontSize:"14px",fontWeight:"normal",backgroundColor:"transparent",padding:"0 8px",borderColor:"transparent",borderRadius:1,cursor:"default"},Up={...Um,cursor:"grab"},Uf={position:"absolute",height:28,backgroundColor:"accent.muted",borderStyle:"dotted",borderWidth:"1px",borderColor:"accent.muted",borderRadius:1,opacity:.5},Uh={position:"absolute",left:0,right:0,height:"100%","body.is-dragging &:hover":{" &:not(.active)":{backgroundColor:"transparent","&::after, &::before":{opacity:0,display:"none"}}}},Ug={...Uh,display:"none"},Uy={width:21,height:21,cursor:"col-resize",position:"absolute",zIndex:1,"& .roadmap-item-drag-handle":{content:'""',width:"3px",height:21,backgroundColor:"transparent",boxShadow:"none",borderRadius:"2px",position:"absolute",top:"50%",transform:"translateY(-50%)",bottom:0,"&.active":{backgroundColor:"fg.default",borderColor:"black",borderWidth:1,borderStyle:"solid",boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)"}},"&.expand-trailing":{left:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&.expand-leading":{right:"100%","& .roadmap-item-drag-handle":{left:"50%",transform:"translate(-50%, -50%)"}},"&:hover":{"& .roadmap-item-drag-handle":{backgroundColor:"fg.subtle","&.active":{backgroundColor:"fg.default",borderColor:"black"}}},"body.is-dragging &:hover":{"& .roadmap-item-drag-handle:not(.active)":{backgroundColor:"transparent"}}},Ux=(0,H.memo)((0,H.forwardRef)(function({tooltip:e,operation:t,active:r,containerRef:a,...n},i){let[l,s]=(0,mH.g)({contentRef:a,"aria-label":e,className:"roadmap-item-drag-handle-tooltip",direction:"n",alignmentOffset:-10.5,anchorOffset:-10.5,anchorSide:"expand-leading"===t?"inside-left":"inside-right",open:!!r||void 0});return(0,O.jsxs)(eO.Z,{...(0,ef.f)(`roadmap-view-item-${t}-handle`),className:t,"data-dnd-operation":t,sx:Uy,...n,ref:i,...l,children:[(0,O.jsx)(eO.Z,{className:(0,IL.W)("roadmap-item-drag-handle",{active:r})}),s]})})),Ub=[],Uv=(0,H.memo)(function({titleHtml:e,renderLink:t,titleColumnValue:r,timeSpan:a,pendingTimeSpan:n,url:i,number:l,assignees:s=Ub,allowedOperations:o,dragProps:d,dragDetails:u,index:c}){let m=Go(),{getX:p}=Gl(),f=Ia(),{isVisible:h}=uK({ref:d.node}),g=null!==n,{wrapperProps:y,focusType:x,refocusPillArea:b,onFocusInternalElement:v,linkRef:w,onClickPillLink:j}=GQ(),C=(0,H.useRef)(null),{isVisible:I}=uK({ref:C}),[S,k]=n?rj([n.start,n.end]):rj([a.start,a.end]),T=S?p(S):0,N=k?p((0,ta.E)(k,1))-T:0,_=m(),R=!h&&T+N<=_.left+1,P=!h&&T>=_.right-1,D=zU(),[E,A]=(0,H.useState)(void 0);Av("roadmap-date-tooltip-visible",void 0!==E),(0,uG.b)(()=>{d.isDragging,b()},[h,d.isDragging,b]);let{roadmapTruncateTitles:M}=k5(),L=(0,O.jsx)(u5,{sx:Uo,children:e}),F=o.has("allowed-drag-update"),Z=d.isDragging&&!!u,V=Z&&!g?u.dragGhostSpan.endX-u.dragGhostSpan.startX:0,{theme:B}=(0,$.Fg)(),z=B?.shadows.shadow.medium;"string"==typeof z&&(z.startsWith("0 3px 6px rgb")||z.startsWith("0 3px 6px #"))&&(z=z.replace("0 3px 6px","-3px 6px 6px -3px"));let W=z?{...Uu,boxShadow:z}:Uu,G=(0,O.jsx)(y8.Z,{sx:W,style:{width:N}}),U=(0,O.jsx)(y8.Z,{ref:w,as:"a",href:i,target:"_blank",rel:"noreferrer",onClick:j,onFocus:v,sx:{...F?Up:Um,pointerEvents:Z?"none":"auto",outline:"none","&.is-focused::before":{content:'""',position:"absolute",width:"calc(100% - 4px)",height:"calc(100% - 4px)",border:"2px solid",borderColor:"accent.emphasis",borderRadius:"5px",inset:0}},style:{width:Z?V:N},...d.attributes,...d.listeners,onMouseOver:e=>{if(Z)return;let t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientX-t.left>t.width/2;A({left:a?0:2*r-t.width,right:a?t.width-2*r:0})},onMouseOut:()=>{Z||A(void 0)},className:(0,IL.W)("roadmap-pill",{"is-focused":x===GH.PillLink}),...(0,ef.f)("roadmap-view-item-pill"),children:(0,O.jsx)(fC.Z,{"aria-label":GG(Z?u.adjustedTimeSpan:a),className:(0,IL.W)("roadmap-pill-tooltip",{active:u?.operation==="move"}),sx:Z&&"move"!==u.operation?Ug:Uh,style:E,direction:0===c?"s":"n"})}),q=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(eO.Z,{sx:{flexShrink:0,mr:2,display:"flex",pointerEvents:"none"},children:(0,O.jsx)(Nh,{titleColumn:r})}),t?(0,O.jsx)(uB.Z,{href:i,target:"_blank",rel:"noreferrer",onClick:j,sx:{...Ud,pointerEvents:Z?"none":"auto"},hoverColor:"accent.fg",draggable:!1,tabIndex:-1,...(0,ef.f)("roadmap-item-link"),children:L}):L,l&&(0,O.jsx)(eB.Z,{sx:{ml:1,color:"fg.muted"},children:`#${l}`}),(0,O.jsx)(Vi,{assignees:s,sx:{ml:2},wrapperSx:{zIndex:1},avatarProps:{onFocus:D},...(0,ef.f)("roadmap-item-assignees")})]}),K=u?.operation==="expand-leading"&&!u?.swapHandles||u?.operation==="expand-trailing"&&u?.swapHandles,Q=u?.operation==="expand-trailing"&&!u?.swapHandles||u?.operation==="expand-leading"&&u?.swapHandles;return(0,O.jsxs)(Gk,{role:"gridcell",...(0,ef.f)("roadmap-pill"),"data-date-start":S?tY(S):void 0,"data-date-end":k?tY(k):void 0,sx:{backgroundColor:"initial",zIndex:0,display:"flex",alignItems:"center",width:"100%"},children:[(0,O.jsx)(eO.Z,{ref:C,role:"presentation",sx:{position:"absolute",width:0},style:{left:T}}),(0,O.jsxs)(eO.Z,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center"},style:{left:T},...(0,ef.f)("roadmap-view-pill-background"),children:[G,!M.enabled&&(0,O.jsx)(eO.Z,{sx:Uc})]}),Z&&!g&&(0,O.jsx)(Uw,{timeSpan:u.adjustedTimeSpan}),(0,O.jsxs)(eO.Z,{ref:d.setNodeRef,sx:{position:"absolute",display:"flex",alignItems:"center",zIndex:1},style:{left:T,transform:`translateX(${Z&&u.dragGhostSpan.startX?u.dragGhostSpan.startX-T:0}px) translateZ(0)`},...y,...(0,ef.f)("roadmap-view-pill-foreground"),children:[U,o.has("allowed-drag-expand")&&S&&k?(0,O.jsxs)(O.Fragment,{children:[Q?null:(0,O.jsx)(Ux,{tooltip:GG({start:Z?u.adjustedTimeSpan.start:a.start,startIteration:Z?u.adjustedTimeSpan.startIteration:a.startIteration,end:void 0})||rO.noDateSet,operation:"expand-leading",active:K,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the earlier date"}),K?null:(0,O.jsx)(Ux,{tooltip:GG({start:void 0,end:Z?u.adjustedTimeSpan.end:a.end,endIteration:Z?u.adjustedTimeSpan.endIteration:a.endIteration})||rO.noDateSet,operation:"expand-trailing",active:Q,ref:d.setActivatorNodeRef,containerRef:d.node,...d.attributes,...d.listeners,tabIndex:-1,"aria-label":"Resize the item by dragging the later date"})]}):null]}),h||Z?(0,O.jsx)(eO.Z,{sx:{position:I||Z||g||M.enabled?"absolute":"sticky",display:"flex",alignItems:"center"},style:{left:I||Z||g||M.enabled?T+8:f+8,opacity:Z||g?.3:void 0},...(0,ef.f)("roadmap-view-item-pill-content"),children:M.enabled?(0,O.jsx)(md.Z,{title:e,expandable:!0,sx:{maxWidth:N-16,display:"flex",alignItems:"center"},children:q}):q}):R||P?(0,O.jsx)(G5,{isBefore:R,startDate:S,endDate:k}):null]})}),Uw=({timeSpan:e})=>{let{getX:t}=Gl(),[r,a]=rj([e.start,e.end]),n=r?t(r):0,i=a?t((0,ta.E)(a,1))-n:0;return(0,O.jsx)(eO.Z,{sx:Uf,style:{width:i,left:n},...(0,ef.f)("roadmap-view-pill-drag-target"),children:"\xa0"})};try{Ux.displayName||(Ux.displayName="RoadmapPillDragHandle")}catch{}try{Ux.displayName||(Ux.displayName="RoadmapPillDragHandle")}catch{}try{Uv.displayName||(Uv.displayName="RoadmapPill")}catch{}try{Uw.displayName||(Uw.displayName="TargetPill")}catch{}let Uj=(0,H.memo)(function({item:e,mouseState:t,setIsDragging:r,...a}){let n=Gs(),i=Go(),{getX:l,getDateFromClientX:s,totalWidth:o}=Gl(),{canUpdateItem:d}=Ua(),{dateFields:u,getTimeSpanFromColumnData:c}=Ie(),m=Ia(),{updateItemDates:p}=GY(),{roadmapRef:f}=Gd(),{temporarilyIgnorePillLinkClick:h}=GQ(),[g,y]=(0,H.useState)(null),[x,b]=(0,H.useState)(void 0),v=(0,H.useMemo)(()=>c(e.columns),[e.columns,c]),w=f.current?.getBoundingClientRect().left??0,j=(0,H.useCallback)(e=>v.startIteration&&!e.startIteration&&u[0]?UC(u[0]):v.endIteration&&!e.endIteration&&u[1]?UC(u[1]):void 0,[u,v]),C=(0,H.useCallback)(t=>{let r=j(t);return r?(b(r.id),Promise.resolve()):(y(t),h(),p(e,t).finally(()=>{y(null)}))},[j,e,p,h]),I=(0,H.useCallback)(()=>{h(2e3)},[h]),{allowedOperations:S,dragProps:k,dragDetails:T}=function({timeSpan:e,onSaveDate:t,onCancel:r,disabled:a}){let{getDateFromClientX:n,getXFromClientX:i,getDateFromX:l}=Gl(),s=Go(),{dateFields:o}=Ie(),{getNextTimeSpanWithDates:d,getNextTimeSpanWithIterations:u,getGhostSpan:c}=function(){let e=Gs(),{getX:t}=Gl(),{dateFields:r}=Ie(),a=r[0]??fH,n=r[1]??fH,i=(0,H.useCallback)((e,r,a,n=!1)=>{let[i,l]=rj([e.start,e.end]);if(!(i&&l))return{startX:0,endX:0};let s={startX:t(i),endX:t(Un(l,1))};switch(r){case"move":s.startX+=a,s.endX+=a;break;case"expand-leading":n?(s.startX=t(l),s.endX=t(i),s.endX+=a):s.startX+=a;break;case"expand-trailing":n?(s.startX=t(Un(l,1)),s.endX=t(Un(i,1)),s.startX+=a):s.endX+=a}return s},[t]),l=(0,H.useCallback)((t,r,i)=>{let l=e(i);if(Ui(a)&&Ui(n)&&t.startIteration===t.endIteration||Ui(a)&&n===fH||a===fH&&Ui(n));else if(Ui(a)&&Ul(n))switch(r){case"move":if(t.start&&t.end){let e=(0,Ur.w)(t.end,t.start);l.end=l.start&&Un(l.start,e)}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:ij(r)}else if(Ul(a)&&Ui(n))switch(r){case"move":if(t.start&&t.end){let e=(0,Ur.w)(t.end,t.start);l.start=l.end&&Un(l.end,-e)}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:ij(r)}else switch(r){case"move":if(t.startIteration&&t.endIteration&&t.start&&t.end){let r=(0,Ur.w)(t.end,t.start),a=l.start&&e(Un(l.start,r));l.end=a?.end,l.endIteration=a?.endIteration}else t.start?(l.end=void 0,l.endIteration=void 0):(l.start=void 0,l.startIteration=void 0);break;case"expand-leading":t.end&&(l.end=t.end,l.endIteration=t.endIteration);break;case"expand-trailing":t.start&&(l.start=t.start,l.startIteration=t.startIteration);break;default:ij(r)}if(!(l.start&&l.end&&(0,nm.A)(l.start,l.end)))return l},[n,e,a]),s=(0,H.useCallback)((e,t,r)=>{let{start:a,end:n}=e,i=a,l=n;switch(t){case"move":i=a?Un(a,r):void 0,l=n?Un(n,r):void 0;break;case"expand-leading":a?(i=Un(a,r),n||(l=a)):n&&(i=Un(n,r));break;case"expand-trailing":n?(l=Un(n,r),a||(i=n)):a&&(l=Un(a,r))}let s=!!(i&&l&&(0,nm.A)(i,l));return s&&("expand-leading"===t&&i&&(i=Un(i,-1)),"expand-trailing"===t&&l&&(l=Un(l,1)),[i,l]=[l,i]),{swapHandles:s,nextTimeSpan:{start:i,end:l}}},[]);return(0,H.useMemo)(()=>({getNextTimeSpanWithDates:s,getNextTimeSpanWithIterations:l,getGhostSpan:i}),[s,l,i])}(),m=(0,H.useRef)(null),p=o[0]??fH,f=o[1]??fH,h=Ui(p)||Ui(f),g=e.start&&e.end&&(0,nm.A)(e.start,e.end),y=Ua().canUpdate&&!a,x=y&&!o.some(e=>e===fH)&&!(h&&p===f)&&!(h&&g),b=(0,IZ.O1)({id:"pill",disabled:!y}),{isDragging:v,activatorEvent:w,transform:j}=b;Av("is-dragging",v),(0,H.useEffect)(()=>{!v&&m.current&&(m.current=null)},[v]);let C=(0,H.useMemo)(()=>{let e=new Set;return y&&e.add("allowed-drag-update"),x&&e.add("allowed-drag-expand"),e},[x,y]),I=(0,H.useMemo)(()=>{if(w&&w.target instanceof HTMLElement){let e=w.target.closest("[data-dnd-operation]");if(e&&e instanceof HTMLElement){let t=e.getAttribute("data-dnd-operation");if(t&&Us.has(t))return t}}return"move"},[w]),S=(()=>{let t;let r=w&&"clientX"in w?w.clientX:null;if(!I||!r)return null;if(!m.current){let e=i(r),t=n(r);if(!t)return null;m.current={x:e,date:t}}let a=s(),o=Math.min(a.right-m.current.x,Math.max(a.left-m.current.x,j?.x??0)),p=m.current.date,f=l(m.current.x+o);if(!f||!p)return null;let y={...e};g&&(y.start=e.end,y.startIteration=e.endIteration,y.end=e.start,y.endIteration=e.startIteration);let x=(0,Ur.w)(f,p),b=!1;if(h){let e;switch(I){case"move":e=f;break;case"expand-leading":e=y.start?Un(y.start,x):f;break;case"expand-trailing":e=y.end?Un(y.end,x):f;break;default:ij(I)}if(!(t=u(y,I,e)))return null}else{let{nextTimeSpan:e,swapHandles:r}=d(y,I,x);t=e,b=r}let v=c(y,I,o,b);return{operation:I,adjustedTimeSpan:t,dragGhostSpan:v,swapHandles:b}})(),k=(0,H.useCallback)(async()=>{S?.adjustedTimeSpan&&C.has("allowed-drag-update")&&await t(S.adjustedTimeSpan)},[C,S?.adjustedTimeSpan,t]);return(0,IZ.IJ)({onDragEnd:k,onDragCancel:r}),{dragProps:b,allowedOperations:C,dragDetails:S}}({timeSpan:v,disabled:e.contentType===eL.RedactedItem||!!g,onSaveDate:C,onCancel:I});Mr({active:k.isDragging,axis:"x",scrollRef:f,strength:20,bufferX:[m,50],bufferY:[20,20],ease:e=>Math.pow(e,5)}),(0,uG.b)(()=>{if(x){if(t&&t.isHovered&&t.mouseX){let e=t.mouseX>w+m+8?s(t.mouseX):void 0,r=e&&n(e);(!r||r.start&&r.end)&&b(void 0)}else b(void 0)}},[t?.isHovered,x,t,w,m,s,n]),(0,H.useEffect)(()=>{r(k.isDragging)},[k.isDragging,r]);let[N,_]=rj([v.start,v.end]),R=N?l(N):0,P=_?l((0,ta.E)(_,1))-R:0,D=R+P<=0,E=!D&&!(R>=o),A=N||_,M=!!(k.isDragging&&T&&j(T.adjustedTimeSpan)),L=!A&&d(e),F=A&&x||M;if((L||F)&&t&&t.isHovered&&t.mouseX){let r=t.mouseX>w+m+8?s(t.mouseX):void 0;if(r){let a;let n=i().left,l=t.mouseX<w+m+30,s=t.buttonPressedOnEntry&&!k.isDragging;return l&&!x||s?(a=n+8+11,r=void 0):a=n-w-m+t.mouseX,(0,O.jsx)(G3,{item:e,date:r,offsetX:a,hideTooltip:k.isDragging,hidePlaceholder:s})}}return M?null:E?(0,O.jsx)(Uv,{item:e,timeSpan:v,allowedOperations:S,dragProps:k,dragDetails:T,pendingTimeSpan:g,...a}):A?(0,O.jsx)(G5,{role:"gridcell",isBefore:D,startDate:N,endDate:_}):d(e)&&!x?(0,O.jsx)(G3,{isDefaultAddButton:!0,item:e,date:void 0,offsetX:0}):null});function UC(e){if(e&&e!==fH&&nH(e))return e}try{Uj.displayName||(Uj.displayName="RoadmapPillArea")}catch{}let UI="is-roadmap-table-expanding-dragging",US=[IZ.K7],Uk={start:["Space","Enter"],cancel:["Escape"],end:["Space","Enter","Tab"]},UT=(0,H.memo)(function({children:e,focusable:t}){let{columnWidth:r}=Gl(),{roadmapRef:a}=Gd(),n=Gc(),[i,l]=(0,H.useState)(!1),s=(0,H.useCallback)(()=>{l(!0),n(!0)},[n]),o=(0,H.useCallback)(()=>{l(!1),n(!1)},[n]),{updateTitleColumnWidth:d,updateLocalTitleColumnWidth:u}=Ie(),c=Ii();Av("is-dragging",i),Av("is-roadmap-table-expanding-dragging",i);let m=kx(),p=zU(),f=(0,H.useCallback)(e=>{let t=e.active.rect.current.initial;if(!t)return;let r=e.delta.x;return Math.min(Math.max(Math.round(Math.floor((t.left+t.width/2)??0)+r-c-(a.current?.getBoundingClientRect().left??0)),75),1e3)},[c,a]),h=(0,H.useCallback)(e=>{s();let t=f(e);t&&(u(t),m(),p())},[p,m,f,s,u]),g=(0,H.useCallback)(async e=>{o();let t=f(e);if(t)try{await d(t)}finally{u(null)}},[o,f,d,u]),y=(0,H.useCallback)(async e=>{o(),u(null)},[u,o]),x=(0,H.useCallback)((e,t)=>{let{currentCoordinates:a}=t;switch(mz(e)){case mV.ARROW_RIGHT:return{...a,x:a.x+r};case mV.ARROW_LEFT:return{...a,x:a.x-r}}},[r]),b=(0,IZ.VT)(IZ.we),v=(0,IZ.VT)(IZ.Lg,{coordinateGetter:x,keyboardCodes:Uk}),w=(0,IZ.Dy)(b,t?v:null),j=gY();return(0,O.jsx)(IZ.LB,{autoScroll:!1,onDragStart:s,onDragMove:h,onDragEnd:g,onDragCancel:y,modifiers:US,sensors:w,accessibility:(0,H.useMemo)(()=>({container:j}),[j]),children:e})});try{UT.displayName||(UT.displayName="RoadmapTableColumnResizeProvider")}catch{}let UN={cursor:"col-resize",paddingLeft:"8px",position:"absolute",top:0,right:"-8px",width:"16px",height:"100%",zIndex:3,"&::after":{content:'""',position:"absolute",top:"-1px",right:"8px",bottom:"-1px",borderRight:"1px solid",borderColor:"border.muted"},[`body.${UI} &`]:{"&::after":{borderRightColor:"accent.fg"}}},U_=e=>{e.stopPropagation(),e.preventDefault()},UR=e=>{e.stopPropagation(),e.preventDefault()},UP=e=>{e.stopPropagation(),e.preventDefault()},UD=(0,H.memo)(function({id:e}){let t=Ia(),r=Ii(),{attributes:a,listeners:n,setNodeRef:i}=(0,IZ.O1)({id:e,attributes:{role:"separator",tabIndex:-1}});return(0,O.jsx)(eO.Z,{sx:UN,className:"roadmap-drag-sash",ref:i,"aria-label":rO.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+r,"aria-valuemax":1060+r,"aria-orientation":"vertical",...n,onClick:U_,onFocus:UP,onMouseDown:UR,...a,...(0,ef.f)("roadmap-table-drag-sash")})}),UE={cursor:"col-resize",display:"flex",position:"sticky",width:"18px",height:"32px",zIndex:3,alignItems:"center",top:"-32px",justifyContent:"center","& > svg":{backgroundColor:"canvas.default",transform:"rotate(90deg)"},[`&:hover, &:focus-visible, .${UI} &`]:{"& > svg":{color:"accent.fg"}}},UA=(0,H.memo)(function({id:e}){let t=Ia(),r=Ii(),a=zU(),{attributes:n,listeners:i,setNodeRef:l}=(0,IZ.O1)({id:e,attributes:{role:"separator"}}),s=(0,H.useRef)(null),[o,d]=(0,mH.g)({contentRef:s,"aria-label":rO.dragSashAriaLabel});return(0,O.jsxs)(eO.Z,{sx:UE,ref:e=>{s.current=e,l(e)},style:{left:t-8-1},"aria-label":rO.dragSashAriaLabel,"aria-valuenow":t+60,"aria-valuemin":135+r,"aria-valuemax":1060+r,"aria-orientation":"vertical",...i,...n,...o,...(0,ef.f)("roadmap-table-drag-sash"),onFocus:(0,H.useCallback)(()=>{o.onFocus(),a()},[a,o]),children:[(0,O.jsx)(eF.UnfoldIcon,{}),d]})});try{UD.displayName||(UD.displayName="RoadmapTableDragSash")}catch{}try{UA.displayName||(UA.displayName="RoadmapTableHeaderDragSash")}catch{}let UM={...GS,height:40,position:"sticky",flexGrow:1,left:60},UL=(0,H.memo)(function({number:e,cell:t,focusCellElement:r,isLastCell:a}){let{titleColumnWidth:n}=Ie(),{hasWritePermissions:i}=i4(),l=GC();return(0,O.jsx)(kS,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:r,sx:UM,styles:{...l,maxWidth:n,minWidth:n},className:"roadmap-table-cell",children:i&&a&&(0,O.jsx)(UT,{children:(0,O.jsx)(UD,{id:`RoadmapTableDragSash-${e}`})})})}),UF={...GS,height:40,position:"sticky",left:"0px",flexShrink:0,width:60,minWidth:60},UZ=(0,H.memo)(function({cell:e,focusCellElement:t,isDragging:r}){return(0,O.jsx)(kS,{row:e.row,column:e.column,render:e.render,getCellProps:e.getCellProps,isDragging:r,focusCellElement:t,sx:UF,className:"roadmap-table-cell"})}),UO={...GS,height:40,position:"sticky",flexGrow:1,maxWidth:120,minWidth:120},UV=(0,H.memo)(function({number:e,startCell:t,endCell:r,focusCellElement:a}){let{hasWritePermissions:n}=i4(),{titleColumnWidth:i}=Ie(),l=r&&t!==r,s=t?120:0,{state:{focus:o}}=iB(),{isFocused:d}=t?Sy(t,o):{isFocused:!1},{isFocused:u}=r?Sy(r,o):{isFocused:!1},c=Ss(t),m=Ss(r);return(0,O.jsxs)(O.Fragment,{children:[t&&(0,O.jsx)(kS,{row:t.row,column:t.column,render:t.render,getCellProps:t.getCellProps,isDragging:!1,focusCellElement:a,sx:UO,styles:{maxWidth:120,minWidth:120,left:60+i},className:"roadmap-table-cell",children:!l&&n&&(0,O.jsx)(UT,{children:!c&&!d&&(0,O.jsx)(UD,{id:`RoadmapTableDragSash-${e}`})})}),l&&(0,O.jsx)(kS,{row:r.row,column:r.column,render:r.render,getCellProps:r.getCellProps,isDragging:!1,focusCellElement:a,sx:UO,styles:{maxWidth:120,minWidth:120,left:60+i+s},className:"roadmap-table-cell",children:n&&(0,O.jsx)(UT,{children:!m&&!u&&(0,O.jsx)(UD,{id:`RoadmapTableDragSash-${e}`})})})]})});try{UL.displayName||(UL.displayName="RoadmapTitleCell")}catch{}try{UZ.displayName||(UZ.displayName="RoadmapNumberCell")}catch{}try{UV.displayName||(UV.displayName="RoadmapTimeSpanCells")}catch{}let UB=(0,H.memo)(function({row:e,itemData:t}){let r=(0,H.useRef)(null),{isVisible:a}=uK({ref:r}),[n,i]=(0,H.useState)(!1),{showDateFields:l}=Ie(),{dateFields:s}=Ie(),{mouseState:o,...d}=Ut(),u=(0,IZ.Dy)((0,IZ.VT)(IZ.we,{activationConstraint:{distance:2}})),c=[IZ.K7],m=e.original,p=m.getHtmlTitle(),f=m.getUrl(),h=m.columns,g=h[eM.Title],y=(0,H.useMemo)(()=>g?Nd(g):Nc,[g]),x=h[eM.Assignees],b=t1(g),v=gY(),{roadmapShowDateFields:w}=k5();t.prepareRow(e);let j=e.cells.find(e=>e.column.id===Iu),C=e.cells.find(e=>e.column.columnModel?.id===eM.Title),I=l?e.cells.find(e=>s[0]!==fH&&e.column.columnModel?.id===s[0]?.id):void 0,S=l?e.cells.find(e=>s[1]!==fH&&e.column.columnModel?.id===s[1]?.id):void 0,k=e.cells.find(e=>e.column.id===W3),T=(0,H.useMemo)(()=>({container:v,screenReaderInstructions:{draggable:w.enabled?"To update the start and target dates, drag item or edit date fields":'To update the start and target dates, drag item or enable the user setting "Show date fields" in the views options menu to edit date fields'}}),[v,w.enabled]),{setNodeRef:N,setActivatorNodeRef:_,listeners:R,isSorting:P,isDragging:D,isDropped:E}=Iz(e),A=(0,H.useMemo)(()=>({rowNumber:e.index+1,setSortActivatorNodeRef:_,sortListeners:R}),[e.index,_,R]);return((0,my.z)(N,r),a&&C&&k&&j)?(0,O.jsxs)(G_,{ref:r,row:e,...(0,ef.f)(ku(e.index)),isDraggingPill:n,isHighlighted:D||E,...P?{}:d,children:[(0,O.jsxs)(kR.Provider,{value:A,children:[(0,O.jsx)(UZ,{cell:j,focusCellElement:t.focusCellElement,isDragging:P}),(0,O.jsx)(UL,{cell:C,focusCellElement:t.focusCellElement,number:b,isLastCell:!l||!I&&!S}),l&&(0,O.jsx)(UV,{startCell:I,endCell:S,focusCellElement:t.focusCellElement,number:b})]}),(0,O.jsx)(IZ.LB,{sensors:u,autoScroll:!1,modifiers:c,accessibility:T,children:(0,O.jsx)(GK,{cell:k,rowRef:r,children:(0,O.jsx)(Uj,{titleHtml:p,renderLink:m.contentType!==eL.RedactedItem,url:f,titleColumnValue:y,number:b,assignees:x,index:e.index,item:m,mouseState:o,setIsDragging:i})})})]}):(0,O.jsx)(G_,{"aria-hidden":"true",ref:r})});try{UB.displayName||(UB.displayName="RoadmapItem")}catch{}let U$=e=>e&&iS(e.sourceObject)&&e.sourceObject.dataType===eA.Milestone?rI.cannotAddItemsWhenGroupByMilestone:rI.addItem,Uz={position:"sticky",left:0},UW=(0,H.memo)(function({groupId:e,groupRows:t,groupMetadata:r,...a}){let n=(0,H.useRef)(null),{omnibarRef:i,onFocus:l,onKeyDown:s}=zY(e),{isVisible:o}=uK({ref:n}),d=(0,H.useRef)(!1),u=!!r&&iS(r.sourceObject),c=U$(r),m=Ia(),p=(0,H.useMemo)(()=>{if(!r||!t)return null;let e=m3(r.sourceObject);return{updateColumnActions:e?[e]:void 0,previousItemId:t[t.length-1]?.original?.id}},[r,t]);(0,uG.b)(()=>{d.current&&(d.current=!1,n?.current&&("scrollIntoViewIfNeeded"in n.current&&"function"==typeof n.current.scrollIntoViewIfNeeded?n.current.scrollIntoViewIfNeeded(!1):n.current.scrollIntoView({block:"nearest"})))});let f=(0,H.useCallback)(()=>{d.current=o},[o]);return(0,O.jsx)(G_,{ref:n,...(0,ef.f)("roadmap-omnibar-item"),children:(0,O.jsx)(Gk,{sx:Uz,style:{width:m},...a,children:(0,O.jsxs)(GI,{sx:{padding:"0 0 0 12px",bg:u?"canvas.subtle":"canvas.default",color:u?"fg.muted":"inherit"},children:[(0,O.jsx)(MG,{ref:i,newItemAttributes:p??void 0,defaultPlaceholder:c,onFocus:l,onKeyDown:s,onAddItem:f,groupingMetadata:r,disabled:u}),(0,O.jsx)(UT,{children:(0,O.jsx)(UD,{id:"RoadmapTableDragSash-omnibar"})})]})})})});try{UW.displayName||(UW.displayName="RoadmapOmnibarItem")}catch{}let UG=({groupId:e})=>{let{ref:t,hasNextPage:r}=VN({groupId:e});return(0,O.jsx)("div",{ref:t,...(0,ef.f)(`roadmap-pagination${e?`-${e}`:""}`),children:r?[...[,,,,,].keys()].map(e=>(0,O.jsx)(UH,{},e)):null})},UU=()=>{let e=Ia();return(0,O.jsx)(eO.Z,{className:"roadmap-row",role:"row",sx:GT,...(0,ef.f)("placeholder-row"),children:(0,O.jsx)(kT,{className:"roadmap-table-cell",sx:GS,style:{height:"100%",position:"sticky",left:0,width:e,paddingLeft:"60px"},children:(0,O.jsx)(O6,{minWidth:80,maxWidth:200,...(0,ef.f)("placeholder")})})})},UH=(0,H.memo)(UU);try{UG.displayName||(UG.displayName="RoadmapPagination")}catch{}try{UU.displayName||(UU.displayName="PlaceholderRowUnmemoized")}catch{}try{UH.displayName||(UH.displayName="PlaceholderRow")}catch{}let Uq=(0,H.memo)(function({groupMetadata:e,groupId:t,rows:r,isOmnibarFixed:a,itemData:n}){let{hasWritePermissions:i}=i4(),{memex_table_without_limits:l}=n9();return(0,O.jsxs)(H.Fragment,{children:[r.map(e=>(0,O.jsx)(UB,{row:e,itemData:n},e.original.id)),l&&(0,O.jsx)(UG,{groupId:e?.value}),i&&!a&&(0,O.jsx)(UW,{groupMetadata:e,groupRows:r,groupId:t})]})});try{Uq.displayName||(Uq.displayName="RoadmapItems")}catch{}function UK({collapsedGroupIds:e,tableGroups:t,itemData:r}){let{memex_table_without_limits:a}=n9();return(0,O.jsxs)(H.Fragment,{children:[t.map((t,n)=>{let i=e.includes(t.groupedValue);return(0,O.jsxs)(H.Fragment,{children:[(0,O.jsx)(UX,{metadata:{value:t.groupedValue,sourceObject:t.groupedSourceObject},totalCount:a?t.totalCount:t.subRows.length,index:n,collapsed:i,rows:t.subRows,itemData:r,groupId:t.id}),(0,O.jsx)(z7,{})]},t.id)}),a&&(0,O.jsx)(UG,{})]})}let UQ={position:"sticky",left:0,overflow:"hidden",zIndex:2,pl:2,gap:2},UX=(0,H.memo)(function({collapsed:e,metadata:t,rows:r,itemData:a,groupId:n,totalCount:i}){let{hideItemsCount:l,getAggregatesForItems:s}=CV(),o=(0,H.useMemo)(()=>r.map(e=>e.original),[r]),d=(0,H.useMemo)(()=>s(o),[s,o]),u=iN(t.sourceObject),{hasWritePermissions:c}=i4(),{setNodeRef:m,isOver:p}=Bu({groupId:n,groupedValue:t.value,isCollapsed:e,isEmpty:0===r.length}),f=Ia();return(0,O.jsxs)(eO.Z,{...(0,ef.f)(`roadmap-group-${u}`),role:"rowgroup",sx:{...e?UJ:UY,borderColor:p?"accent.fg":"border.muted"},ref:m,children:[(0,O.jsxs)(U0,{children:[(0,O.jsxs)(Bf,{isCollapsed:e,metadata:t,itemsInGroup:r.map(e=>e.original),sx:UQ,style:{minWidth:f,width:f},children:[(0,O.jsx)(BS,{sourceObject:t.sourceObject,aggregates:d,hideItemsCount:l,rowCount:i,titleSx:{flexShrink:1},showTrackedByOwnerOnFocus:!0}),c&&(0,O.jsx)(UT,{children:(0,O.jsx)(UD,{id:`RoadmapTableDragSash-${t.value}`})})]}),(0,O.jsx)(G9,{rows:r})]}),!e&&(0,O.jsx)(IW,{rows:r,groupedValue:t.value,children:(0,O.jsx)(Uq,{groupMetadata:t,rows:r,isOmnibarFixed:!1,itemData:a,groupId:n})})]})}),UY={position:"relative",display:"flex",flexDirection:"column",borderTop:"1px solid",borderTopColor:"border.default","&:first-child":{borderTop:"none"},...GN},UJ={...UY,borderBottom:"1px solid",borderBottomColor:"border.default","&::after":{borderBottom:"none"}},U0=({children:e})=>(0,O.jsx)(eO.Z,{sx:U1,role:"row",...(0,ef.f)("roadmap-group-header-row"),children:e}),U1={display:"flex",position:"relative",alignItems:"center",height:"44px"};try{UK.displayName||(UK.displayName="GroupedRoadmapItems")}catch{}try{UX.displayName||(UX.displayName="RoadmapGroup")}catch{}try{U0.displayName||(U0.displayName="RoadmapGroupHeaderRow")}catch{}var U2=r(43073),U5=r(56667),U3=r(77035),U4=r(99010),U8=r(58439);let U6={today:{nub:"danger.fg",marker:"danger.muted"},customDate:{nub:"fg.subtle",marker:"fg.muted"},iteration:{nub:"fg.subtle",marker:"fg.muted"},currentIteration:{nub:"accent.fg",marker:"accent.muted"},iterationBreak:{nub:"canvas.default"},milestone:{nub:"success.fg",marker:"success.muted"},divider:{marker:"border.default"}},U7={position:"absolute",width:"1px",borderLeftWidth:1,borderLeftStyle:"solid",top:"1px",bottom:0,zIndex:-1},U9={...U7,borderLeftColor:U6.today.marker,borderLeftWidth:2},He={...U7,borderLeftColor:U6.iteration.marker,opacity:.33},Ht={...U7,borderLeftColor:U6.milestone.marker},Hr={...U7,borderLeftColor:U6.customDate.marker,opacity:.33},Ha={...U7,borderLeftColor:U6.currentIteration.marker},Hn={...U7,borderLeftColor:U6.divider.marker},Hi={display:"inline-block",position:"absolute",height:"7px",width:"7px",borderRadius:0,zIndex:2,top:"-4.5px"},Hl={...Hi,borderRadius:"100%",backgroundColor:U6.today.nub,width:"8px",height:"8px",top:"-5px"},Hs={...Hi,backgroundColor:"transparent"},Ho={...Hi,backgroundColor:"transparent",borderColor:U6.iteration.nub,borderStyle:"solid",borderWidth:2,borderRadius:"100%"},Hd={...Hi,borderRadius:"2px",backgroundColor:U6.milestone.nub,transform:"rotate(45deg)"},Hu={...Hi,height:"4px",width:"4px",borderRadius:0,backgroundColor:U6.customDate.nub,top:"-4.5px",borderTopRightRadius:"50%",transform:"translate(1.5px, 2px) rotate(120deg) skewX(-30deg) scale(1,.866)","&::before":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(-135deg) skewX(-45deg) scale(1.414,.707) translate(0,-50%)"},"&::after":{content:'""',position:"absolute",height:"4px",width:"4px",backgroundColor:"inherit",borderTopRightRadius:"50%",transform:"rotate(135deg) skewY(-45deg) scale(.707,1.414) translate(50%)"}},Hc={...Ho,backgroundColor:U6.iterationBreak.nub},Hm={...Ho,borderColor:U6.currentIteration.nub};function Hp(){return(0,O.jsxs)(eO.Z,{role:"row",sx:{position:"relative"},children:[(0,O.jsx)(Hh,{}),(0,O.jsx)(Hy,{})]})}function Hf(){return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(HC,{}),(0,O.jsx)(Hg,{}),(0,O.jsx)(Hv,{})]})}function Hh(){let{getX:e,today:t}=Gl(),{singleDayMarkerMap:r}=Gy(),a=e((0,H.useMemo)(()=>(0,ng.T)(t,12),[t]))-3.5,n=(0,H.useRef)(null),{isVisible:i}=uK({ref:n}),[l,s]=(0,mH.g)({contentRef:n,"aria-label":`Today: ${GG({start:t,end:t})}`}),o=oc(t.toISOString()),d=r.has(o);return(0,O.jsx)(eO.Z,{as:"time",role:"gridcell",dateTime:o,ref:n,sx:i&&!d?Hl:Hs,style:{left:`${a}px`},...l,...(0,ef.f)("roadmap-today-marker-nub"),children:s})}function Hg(){let{getX:e,today:t,totalWidth:r}=Gl(),{singleDayMarkerMap:a}=Gy(),n=e((0,H.useMemo)(()=>(0,ng.T)(t,12),[t]));if(!(n>0&&n<r))return null;let i=oc(t.toISOString());return a.has(i)?null:(0,O.jsx)(eO.Z,{sx:U9,style:{left:`${n-.5}px`,height:"100%"},...(0,ef.f)("roadmap-today-marker")})}function Hy(){let{markersInRange:e}=Gy();return(0,O.jsx)(O.Fragment,{children:e.map(e=>(0,O.jsx)(Hb,{marker:e,isCurrent:Gv(e)},e.id))})}let Hx={[Gm.CustomDate]:Hu,[Gm.Iteration]:Ho,[Gm.IterationBreak]:Hc,[Gm.Milestone]:Hd};function Hb({isCurrent:e=!1,marker:t}){let{getX:r,today:a}=Gl(),{startDate:n,endDate:i}=(0,H.useMemo)(()=>{let e="duration"in t?new Date(t.date):(0,ng.T)(new Date(t.date),12),r="duration"in t?(0,ta.E)(e,t.duration):new Date(t.date);return{startDate:e,endDate:r}},[t]),l=r(new Date(n))-3,s=(0,H.useRef)(null),{isVisible:o}=uK({ref:s}),d=oc(a.toISOString()),u=t.date===d&&!("duration"in t),{startDate:c,endDate:m}="duration"in t?nk({startDate:t.date,duration:t.duration}):{startDate:n,endDate:i},p="duration"in t&&t.options.length>1?C6(t.options):`${t.title}: ${GG({start:c,end:m})}`,[f,h]=(0,mH.g)({contentRef:s,"aria-label":p}),g=e?Hm:Hx[t.type];return(0,O.jsx)(eO.Z,{as:"time",role:"gridcell",dateTime:t.date,ref:s,sx:u?{...g,backgroundColor:U6.today.nub}:g,style:{left:`${l}px`,...o?{}:{backgroundColor:"transparent",borderColor:"transparent"}},...f,...(0,ef.f)(`${t.type}-marker-nub-${t.id}`),children:h})}let Hv=(0,H.memo)(function(){let{markersInRange:e}=Gy();return(0,O.jsx)(O.Fragment,{children:e.map(e=>(0,O.jsx)(Hj,{marker:e,isCurrent:Gv(e)},e.id))})}),Hw={[Gm.CustomDate]:Hr,[Gm.Iteration]:He,[Gm.IterationBreak]:He,[Gm.Milestone]:Ht};function Hj({marker:e,isCurrent:t=!1}){let{getX:r,today:a}=Gl(),n=r(new Date((0,H.useMemo)(()=>"duration"in e?new Date(e.date):(0,ng.T)(new Date(e.date),12),[e]))),i=oc(a.toISOString()),l=e.date===i&&!("duration"in e),s=t?Ha:Hw[e.type],o=l?{...s,borderLeftColor:U6.today.marker,opacity:1}:s;return(0,O.jsx)(eO.Z,{...(0,ef.f)(`${e.type}-marker-line`),sx:o,style:{left:`${n}px`,height:"100%"}})}function HC(){let{getX:e,timeRangeEnd:t,timeRangeStart:r}=Gl(),a=Is(),n=Array.from({length:a===fq.Month?Math.abs((0,U3.p)(t,r))+1:Math.abs((0,U5.d)(t,r))+1},(e,t)=>a===fq.Month?rv((0,U4.j)((0,U8.z)(r,{weekStartsOn:1}),t)):rv((0,W6.z)((0,U2.N)(r),t)));return(0,O.jsx)(O.Fragment,{children:n.map(t=>{let r=e(t);return(0,O.jsx)(eO.Z,{sx:Hn,style:{left:`${r}px`,height:"100%"}},r)})})}try{Hp.displayName||(Hp.displayName="RoadmapMarkerHeaderNubs")}catch{}try{Hf.displayName||(Hf.displayName="RoadmapMarkers")}catch{}try{Hh.displayName||(Hh.displayName="TodayMarkerNub")}catch{}try{Hg.displayName||(Hg.displayName="TodayMarkerLine")}catch{}try{Hy.displayName||(Hy.displayName="MarkerNubs")}catch{}try{Hb.displayName||(Hb.displayName="MarkerNub")}catch{}try{Hv.displayName||(Hv.displayName="MarkerLines")}catch{}try{Hj.displayName||(Hj.displayName="MarkerLine")}catch{}try{HC.displayName||(HC.displayName="DividerMarkersLines")}catch{}let HI={position:"sticky",left:"4px",paddingLeft:"12px",paddingTop:"8px",fontSize:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)"}},HS={position:"absolute",paddingTop:"6px",display:"flex",justifyContent:"center",fontSize:"12px"},Hk={...HS,color:U6.today.nub,fontWeight:"bold"},HT={position:"relative",width:"100%",top:"-32px"},HN=(0,H.memo)(function(){let{totalWidth:e}=Gl(),t=Gw(),r=Gj(),{hasWritePermissions:a}=i4();return(0,O.jsxs)(eO.Z,{role:"rowgroup",sx:{height:r,borderBottomStyle:"solid",borderBottomWidth:2,borderBottomColor:"border.default",position:"sticky",top:0,zIndex:3,backgroundColor:"canvas.default",width:`${e}px`,color:"fg.muted",contain:"layout"},...(0,ef.f)("roadmap-header"),children:[(0,O.jsx)(HP,{}),t&&(0,O.jsx)(HE,{}),(0,O.jsx)(HR,{}),(0,O.jsx)(Hp,{}),a?(0,O.jsx)(eO.Z,{role:"row",sx:HT,children:(0,O.jsx)("div",{role:"gridcell",children:(0,O.jsx)(UT,{focusable:!0,children:(0,O.jsx)(UA,{id:"RoadmapTableHeaderDragSash"})})})}):null]})}),H_={[fq.Month]:1,[fq.Quarter]:7,[fq.Year]:14},HR=(0,H.memo)(function(){let{columnWidth:e,getX:t,timeRangeEnd:r,timeRangeStart:a,today:n}=Gl(),i=Is(),l=(0,H.useMemo)(()=>{let l=a.getUTCDay(),s=H_[i],o=(0,ta.E)(a,(s-l+1)%s),d=Math.floor((0,ny.j)(r,o)/s),u=o.getTime();return Array.from({length:d},(r,a)=>{let i=new Date(u+a*s*864e5),l=i.getTime()===n.getTime(),o=`${i.getUTCFullYear()}-${(i.getUTCMonth()+1).toString().padStart(2,"0")}-${i.getUTCDate().toString().padStart(2,"0")}`;return(0,O.jsx)(eO.Z,{sx:l?Hk:HS,role:"columnheader",style:{left:t(i),width:e},as:"time","data-index":a,dateTime:o,"aria-current":l?"date":void 0,children:i.getUTCDate()},o)})},[e,t,r,a,n,i]);return(0,O.jsx)(eO.Z,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:l})}),HP=(0,H.memo)(function(){let{timeRangeEnd:e,timeRangeStart:t,getX:r}=Gl(),a=Is(),n=(0,U2.N)(t),i=r(rv((0,W6.z)(n,1)))-12,l=(0,H.useMemo)(()=>(0,U5.d)(e,t)+1,[e,t]),s=a===fq.Year,o=(0,H.useMemo)(()=>Array.from({length:l},(a,o)=>{let d=s?"MMM yyyy":"MMMM yyyy",u=(0,W6.z)(n,o),c=rv(u),m=rv((0,W6.z)(u,1)),p=0,f=4,h=12;if(0===o)f=0,i<=0?(h=0,p=0):(h=i<16?i:16,p=i);else if(1===o&&i<0){if(c.getTime()===t.getTime())p=r(m)-r(c)-12;else{let e=12+i;h=e,f=-e,p=r(m)-r(c)-12+e}}else if(o===l-1){let t=r(e)-r(c)+12-32;t<=0?(h=0,p=0):(t<12&&(h=t),p=t)}else p=r(m)-r(c);return(0,O.jsx)(eO.Z,{role:"columnheader",sx:HI,style:{width:`${p}px`,left:`${f}px`,paddingLeft:`${h}px`},children:(0,yW.formatDate)(u,d)},u.getTime())}),[l,s,n,i,t,r,e]);return(0,O.jsxs)(eO.Z,{role:"row",sx:{position:"relative",display:"flex",height:"32px"},children:[o,(0,O.jsx)(HD,{})]})}),HD=()=>(0,O.jsx)(eO.Z,{sx:{position:"sticky",width:"32px}",right:0,backgroundColor:"canvas.default"}}),HE=(0,H.memo)(function(){let{getX:e}=Gl(),{markersInRange:t}=Gy(),r=Gb(),a=Gx(),{milestoneMarkers:n,iterationMarkers:i}=(0,H.useMemo)(()=>t.reduce((e,t)=>(t.type===Gm.Iteration||t.type===Gm.IterationBreak?e.iterationMarkers.push(t):t.type===Gm.Milestone&&e.milestoneMarkers.push(t),e),{iterationMarkers:[],milestoneMarkers:[]}),[t]),l=i[0],s=l?e(new Date(l.date)):0;return t.length>0||a>0?(0,O.jsxs)(eO.Z,{role:"row",sx:{position:"relative",display:"flex",height:"24px"},children:[(0,O.jsx)(eO.Z,{role:"presentation",sx:HA,style:{width:`${s-12}px`},...(0,ef.f)("roadmap-iteration-marker-header-spacer")}),i.map((e,t)=>(0,O.jsx)(HZ,{marker:e,nextMarker:i[t+1]},e.id)),r>0&&(0,O.jsx)(eO.Z,{role:"presentation",sx:{...HA,width:"200px"},...(0,ef.f)("roadmap-iteration-marker-header-fill")}),n.map(e=>(0,O.jsx)(HF,{marker:e},e.id))]}):null}),HA={position:"sticky",color:U6.iteration.nub,fontWeight:600,left:"4px",paddingLeft:"12px",paddingTop:"6px",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",whiteSpace:"nowrap",flexShrink:0,flexGrow:0,"&:before":{content:'""',position:"absolute",top:0,left:"-20px",width:"20px",height:"100%",backgroundColor:"canvas.default",maskImage:"linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)",pointerEvents:"none"}},HM={...HA,color:U6.milestone.nub,position:"absolute",pl:0,boxShadow:e=>`0px 0px 11px 1px ${e.colors.canvas.default}`,"&:hover":{boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`,zIndex:1}},HL={...HA,color:U6.currentIteration.nub};function HF({marker:e}){let{getX:t}=Gl(),r=(0,H.useMemo)(()=>(0,ng.T)(new Date(e.date),12),[e.date]),a=t(r),n=(0,H.useRef)(null),[i,l]=(0,mH.g)({contentRef:n,"aria-label":GG({start:r,end:r})});return(0,O.jsxs)(eO.Z,{ref:n,role:"columnheader",sx:HM,style:{left:a},...i,...(0,ef.f)("roadmap-milestone-marker-header"),children:[(e.options.length||0)>1?(0,O.jsx)(HV,{marker:e}):(0,O.jsx)(HO,{marker:e}),l]})}function HZ({marker:e,nextMarker:t}){let{getX:r,timeRangeEnd:a}=Gl(),n=Gv(e),i=new Date(e.date),l=t?new Date(t.date):(0,ta.E)(i,e.duration||0),s=r(i),o=r(a<l?a:l),d=(0,H.useRef)(null),[u,c]=(0,mH.g)({contentRef:d,"aria-label":C6(e.options),anchorOffset:6});return(0,O.jsxs)(eO.Z,{ref:d,role:"columnheader",sx:n?HL:HA,style:{width:`${o-s}px`},...(0,ef.f)(`roadmap-iteration-marker-header-${e.id}`),children:[(0,O.jsx)(HB,{ref:d,sx:n?HL:HA,...u,children:1===e.options.length?(0,O.jsx)(O.Fragment,{children:e.title}):(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsxs)(cd.r,{title:e.title,"aria-label":e.title,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.title,e.date&&(0,O.jsxs)(mg.T,{children:["(Starting on ",(0,O.jsx)("time",{dateTime:e.date,children:rb(new Date(e.date))}),")"]})]})}),(0,O.jsx)(fj.P.Overlay,{sx:{marginTop:"7px"},children:(0,O.jsx)(mx.S,{...(0,ef.f)("roadmap-iteration-marker-selector"),children:e.options.map(e=>{let{startDate:t,endDate:r}=nk({startDate:e.startDate,duration:e.duration});return(0,O.jsxs)(mx.S.Item,{active:!1,selected:!1,sx:{cursor:"default",pointerEvents:"none","&:hover":{backgroundColor:"unset",color:"unset"}},children:[e.title,(0,O.jsx)(mx.S.Description,{children:GG({start:t,end:r})})]},e.id)})})})]})}),c]})}function HO({marker:e}){let t=e.options[0],r=t?.url;return(0,O.jsxs)(uB.Z,{sx:{all:"unset",cursor:"pointer",display:"inline-block"},target:"_blank",rel:"noopener noreferrer",href:r,title:e.description,children:[e.title,e.date&&(0,O.jsxs)(mg.T,{children:["(Due on ",(0,O.jsx)("time",{dateTime:e.date,children:rb(new Date(e.date))}),")"]})]})}function HV({marker:e}){return(0,O.jsxs)(fj.P,{children:[(0,O.jsx)(fj.P.Anchor,{children:(0,O.jsxs)(cd.r,{as:"button",title:e.description,"aria-label":e.description,sx:{all:"unset",cursor:"pointer","&:hover":{backgroundColor:"inherit",textDecoration:"underline"}},children:[e.options.length," milestones",e.date&&(0,O.jsxs)(mg.T,{children:["(Due on ",(0,O.jsx)("time",{dateTime:e.date,children:rb(new Date(e.date))}),")"]})]})}),(0,O.jsx)(fj.P.Overlay,{sx:{marginTop:"7px"},children:(0,O.jsx)(mx.S,{...(0,ef.f)("roadmap-milestone-marker-selector"),children:e.options.map(e=>(0,O.jsxs)(mx.S.LinkItem,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:[e.title,(0,O.jsx)(mx.S.Description,{children:e.repoNameWithOwner})]},e.id))})})]})}let HB=(0,H.forwardRef)(function({children:e,sx:t,...r},a){let n=(0,H.useRef)(null);(0,H.useImperativeHandle)(a,()=>n.current);let[i,l]=(0,H.useState)(!1);return(0,O.jsxs)(eO.Z,{ref:n,...r,sx:{display:"inline-block"},onPointerEnter:e=>{l(!0),r.onPointerEnter?.(e)},onPointerLeave:e=>{l(!1),r.onPointerLeave?.(e)},children:[e,i?(0,O.jsx)(H$,{sx:t,contentRef:n,children:e}):null]})});function H$({contentRef:e,children:t,sx:r}){let a=(0,H.useRef)(null),{left:n,top:i}=Hz(a,e);return(0,O.jsx)(Co.h,{children:(0,O.jsx)(eO.Z,{role:"presentation","aria-hidden":!0,sx:{...r,position:"absolute",fontSize:"12px",lineHeight:"12px",backgroundColor:"canvas.default",pointerEvents:"none",padding:0,boxShadow:e=>`10px 0 11px 1px ${e.colors.canvas.default}, -10px 0 11px 1px ${e.colors.canvas.default}`},style:{left:n,top:i},ref:a,children:t})})}let Hz=(e,t)=>{let{roadmapRef:r}=Gd(),a=(0,H.useRef)({top:0,left:0});return(0,H.useSyncExternalStore)((0,H.useCallback)(e=>(r.current?.addEventListener("scroll",e),()=>{r.current?.removeEventListener("scroll",e)}),[r]),(0,H.useCallback)(()=>{if(!e.current||!t.current)return a.current;let{left:r,top:n}=(0,WL.N)(e.current,t.current,{side:"inside-top",align:"start",alignmentOffset:0,anchorOffset:0});return(a.current.left!==r||a.current.top!==n)&&(a.current={left:r,top:n}),a.current},[t,e]))};try{HN.displayName||(HN.displayName="RoadmapHeader")}catch{}try{HR.displayName||(HR.displayName="RoadmapDays")}catch{}try{HP.displayName||(HP.displayName="RoadmapMonths")}catch{}try{HD.displayName||(HD.displayName="RoadmapControlsCaulk")}catch{}try{HE.displayName||(HE.displayName="RoadmapMarkerHeaders")}catch{}try{HF.displayName||(HF.displayName="RoadmapMilestoneHeader")}catch{}try{HZ.displayName||(HZ.displayName="RoadmapIterationHeader")}catch{}try{HO.displayName||(HO.displayName="RoadmapMilestoneMarkerHeaderLink")}catch{}try{HV.displayName||(HV.displayName="RoadmapMilestoneMarkerActionMenu")}catch{}try{HB.displayName||(HB.displayName="HoverOverPortalContent")}catch{}try{H$.displayName||(H$.displayName="OverlayingContent")}catch{}let HW=(0,H.memo)(function({rows:e}){let{omnibarRef:t,onFocus:r,onKeyDown:a}=zY(),{roadmapRef:n}=Gd(),{horizontalScrollbarSize:i,verticalScrollbarSize:l}=Mi(n),{onNewItem:s}=zB(n,e,{rowHeight:40,left:void 0});return(0,O.jsx)(MY,{horizontalScrollbarSize:i,verticalScrollbarSize:l,isFixed:!0,children:(0,O.jsx)(MG,{ref:t,onKeyDown:a,onInputFocus:r,role:"row",childElementRole:"gridcell",onAddItem:s,defaultPlaceholder:Mj,isFixed:!0})})});try{HW.displayName||(HW.displayName="RoadmapFixedOmnibar")}catch{}let HG=[e=>{e.columns.push(W8)}],HU=(0,H.memo)((0,H.forwardRef)(function(e,t){let{addPotentiallyMissingFieldIds:r}=Th(),{hasWritePermissions:a}=i4(),{dateFields:n,markerFields:i,getTimeSpanFromColumnData:l}=Ie(),{allColumns:s}=df(),o=zV((0,H.useMemo)(()=>({fields:s.filter(e=>e.id===eM.Title),plugins:HG}),[s])),d=(0,H.useRef)({instance:o,getHeaderFocus:GR,focusableRowFilter:GE({hasWritePermissions:a,getTimeSpanFromColumnData:l}),focusableColumnFilter:GA({hasWritePermissions:a,getTimeSpanFromColumnData:l})});(0,H.useEffect)(()=>{d.current.focusableRowFilter=GE({hasWritePermissions:a,getTimeSpanFromColumnData:l}),d.current.focusableColumnFilter=GA({hasWritePermissions:a,getTimeSpanFromColumnData:l})},[a,l]),(0,H.useEffect)(()=>{r([...new Set([...n.filter(C1).map(e=>e.id),...i.map(e=>e.id)])])},[n,i,r]);let{memex_table_without_limits:u}=n9(),c=u?OP():o.flatRows.length;return(0,O.jsx)(Gi,{children:(0,O.jsx)(IN,{table:o,cellHeight:40,children:(0,O.jsx)(iz,{metaRef:d,children:(0,O.jsx)(Sn,{children:(0,O.jsx)(Sp,{children:(0,O.jsx)(M6,{children:(0,O.jsxs)(ks,{children:[(0,O.jsx)(FQ,{filterCount:(0,H.useDeferredValue)(c)}),(0,O.jsx)(Gg,{rows:o.flatRows,children:(0,O.jsx)(HQ,{table:o,ref:t})})]})})})})})})})})),HH={flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",gridArea:"2/2",overflow:"hidden"},Hq={...HH},HK={flex:"1 1 auto",display:"flex",flexDirection:"column",position:"absolute",inset:0,backgroundColor:"canvas.subtle",overflow:"auto",scrollbarGutter:"stable","&.is-scrolling-locked":{overflow:"hidden"},"&.is-omnibar-fixed":{paddingBottom:"57px"},"&.horizontal-scrollbar-hidden":{paddingBottom:"69px"},"&.is-grouped":{paddingBottom:0}},HQ=(0,H.forwardRef)(function({table:e},t){let r=Gu(),{onKeyDown:a,onBlur:n}=Wk(),{collapsedGroups:i}=dI(),{today:l}=Gl(),s=Ia(),o=Gj(),{roadmapRef:d,scrollToDate:u,shiftToNextRange:c,shiftToPrevRange:m}=Gd(),{horizontalScrollbarSize:p}=Mi(d),{rows:f,groupedRows:h}=e,g=(0,H.useRef)(null),{loadingState:y}=VF(),{hasWritePermissions:x}=i4(),{setShowAddFieldModal:b,showAddFieldModal:v}=Mo(),{anchorRef:w}=Mc(),{navigationDispatch:j}=iB(),{memex_disable_autofocus:C}=n9(),I=BV(e),S=(0,H.useCallback)(()=>{I&&j(I)},[j,I]);(0,H.useEffect)(()=>{C||S()},[S,C]),(0,H.useImperativeHandle)(t,()=>({focusIn:S}));let k=BB({table:e,totalHeight:y===VL.loaded?40*f.length+o:40+o,scrollRef:g}),{sliceField:T}=or(),{slicerItems:N}=M4(),{openProjectItemInPane:_}=dq(),R=(0,H.useRef)(!0);(0,H.useEffect)(()=>{R.current&&(R.current=!1,u(l))},[l,u]);let P=(0,H.useCallback)(()=>{if(d?.current){let{scrollLeft:e,scrollWidth:t,clientWidth:r}=d.current;e+r+1>t?c():e<=0&&m()}},[c,m,d]),D=(0,H.useSyncExternalStore)(H2,()=>window.innerWidth),E=(0,H.useMemo)(()=>s<D?`400px 0px 400px -${s}px`:"400px 0px 400px 0px",[s,D]),A=h?ik(h):void 0,M=void 0!==A,L=WI(e,{sticky:!0});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(uq,{rootRef:d,rootMargin:E,sizeEstimate:40,children:(0,O.jsxs)(eO.Z,{sx:HH,children:[(0,O.jsx)(GF,{}),(0,O.jsxs)(eO.Z,{ref:g,role:"grid",sx:Hq,"data-hpc":!0,onKeyDown:a,onBlur:n,...(0,ef.f)("roadmap-view"),children:[(0,O.jsxs)(eO.Z,{ref:d,onScroll:P,className:(0,IL.W)({"is-scrolling-locked":r,"is-grouped":M,"is-omnibar-fixed":k,"horizontal-scrollbar-hidden":0===p}),sx:HK,...(0,ef.f)("roadmap-scroll-container"),children:[(0,O.jsx)(HN,{}),(0,O.jsx)(zX,{children:(0,O.jsxs)(H1,{isGrouped:M,children:[(0,O.jsx)(Hf,{}),M&&f.length?(0,O.jsx)(UK,{collapsedGroupIds:i,tableGroups:A,itemData:L}):(0,O.jsx)(IW,{rows:f,children:(0,O.jsx)(Uq,{rows:f,isOmnibarFixed:k,itemData:L})}),(0,O.jsx)(zG,{rows:M?A:f,isGrouped:M,scrollRef:d,headerHeight:o,tableWidth:s})]})})]}),k&&x&&(0,O.jsx)(HW,{rows:f})]})]})}),T&&(0,O.jsx)(ZP,{slicerItems:N,openSidePanel:_}),v&&(0,O.jsx)(Ag,{isOpen:v,setOpen:b,anchorRef:w,onSave:fV.Z})]})}),HX={position:"relative",flex:"1 1 auto",display:"flex",flexDirection:"column",contain:"content"},HY={...HX,boxShadow:"shadow.medium"},HJ={position:"relative",display:"flex",flexDirection:"column"},H0={...HJ,boxShadow:"shadow.medium",...GN},H1=(0,H.memo)(function({isGrouped:e,children:t}){let{totalWidth:r}=Gl(),{containerRef:a}=WS();return(0,O.jsx)(z.Z,{fontSize:"14px",children:(0,O.jsx)(eO.Z,{sx:e?HX:HY,style:{width:r},ref:a,...(0,ef.f)("roadmap-items"),children:(0,O.jsx)(eO.Z,{sx:e?HJ:H0,children:t})})})});function H2(e){return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}try{HU.displayName||(HU.displayName="RoadmapView")}catch{}try{HU.displayName||(HU.displayName="RoadmapView")}catch{}try{HQ.displayName||(HQ.displayName="RoadmapContent")}catch{}try{H1.displayName||(H1.displayName="RoadmapItemsArea")}catch{}let H5=({children:e})=>{let{roadmapShowDateFields:t}=k5(),{dateFields:r}=Ie(),a=(0,H.useMemo)(()=>t.enabled?r.filter(C1).map(e=>e.id):[],[t,r]),n=(0,H.useCallback)(e=>e.id===eM.Title||a.includes(e.id),[a]);return(0,O.jsx)(zm,{isFieldVisible:n,children:e})};try{H5.displayName||(H5.displayName="TableColumnsProviderForRoadmap")}catch{}function H3(){dX();let{memex_disable_autofocus:e}=n9(),{data:t}=go(),r=t?.betaSignupBanner,[a,n]=(0,H.useState)("visible"===r||"staffship"===r),i=t?.killSwitchEnabled,l=t?.killSwitchRecentlyDisabled,s=(0,H.useRef)(null),o=(0,H.useCallback)(()=>s.current?.focusIn(),[]);(0,H.useEffect)(()=>{if(!e)return;let t=e=>{mz(e)===mV.ARROW_DOWN&&document.activeElement===document.body&&(e.preventDefault(),s.current?.focusIn())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);let d=mb("project-view");return(0,O.jsxs)(eO.Z,{id:"memex-project-view-root",...(0,ef.f)("app-root"),sx:{flexDirection:"column",flex:"auto",position:"relative",zIndex:1,display:"flex",height:"100%"},children:[(0,O.jsx)(WH,{projectViewId:d,onFocusIntoCurrentView:o}),(0,O.jsxs)(eO.Z,{id:d,role:"tabpanel",sx:{flexDirection:"column",flex:"auto",position:"relative",zIndex:1,display:"flex"},children:[a&&(0,O.jsx)(H6,{bannerType:r,setBetaBannerVisibility:n}),i&&(0,O.jsx)(H4,{}),l&&(0,O.jsx)(H8,{}),(0,O.jsx)(H9,{ref:s})]})]})}function H4(){return(0,O.jsx)(ut.Z,{variant:"warning",sx:{mx:1,mt:1},...(0,ef.f)("mwl-disabled-banner"),children:rI.killSwitchEnabledBanner})}function H8(){return(0,O.jsx)(ut.Z,{variant:"default",sx:{mx:1,mt:1},...(0,ef.f)("mwl-re-enabled-banner"),children:rI.mwlReEnabledBanner})}function H6({setBetaBannerVisibility:e,bannerType:t}){let{addToast:r}=e9(),a=(0,e5.Z)(r),n=(0,H.useCallback)(async()=>{(await AB()).success&&(e(!1),a.current({message:rI.betaSignupSuccessMessage,type:e$.success}))},[a,e]),i=(0,H.useCallback)(async()=>{(await A$({notice:"memex_without_limits_beta"})).success?e(!1):a.current({message:rI.dismissNoticeError,type:e$.error})},[a,e]),{perform:l}=d1({request:n}),{perform:s}=d1({request:i}),o=(0,H.useCallback)(()=>l(),[l]),d=(0,H.useCallback)(()=>s(),[s]),u="no-project-limits-waitlist-banner",c=rI.joinWaitlist,m=rI.noProjectLimitWaitlistBanner,p=i5().pwlBetaFeedbackLink;return"staffship"===t&&(u="no-project-limits-waitlist-staffship-banner",c=rI.joinBeta,m=rI.noProjectLimitWaitlistStaffshipBanner),(0,O.jsxs)(ut.Z,{...(0,ef.f)(u),sx:{display:"grid",gridTemplateColumns:"min-content 1fr minmax(0, auto)",gridTemplateRows:"min-content",gridTemplateAreas:"'visual message actions close'","@media screen and (max-width: 543.98px)":{gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content min-content",gridTemplateAreas:`
        'visual message close'
        '.      actions actions'
      `}},full:!0,children:[(0,O.jsx)(eO.Z,{sx:{display:"grid",paddingBlock:"var(--base-size-8)",alignSelf:"start",gridArea:"visual"},children:(0,O.jsx)(eZ.Z,{icon:eF.InfoIcon})}),(0,O.jsxs)(eO.Z,{sx:{fontSize:1,lineHeight:"1.5",padding:"0.375rem var(--base-size-8)",alignSelf:"center",gridArea:"message"},children:[m," ",(0,O.jsx)(uB.Z,{href:p,children:" Learn more"})]}),(0,O.jsx)(eO.Z,{sx:{gridArea:"actions","@media screen and (max-width: 543.98px)":{alignSelf:"start",margin:"var(--base-size-8) 0 0 var(--base-size-8)"}},children:(0,O.jsx)(cd.r,{tabIndex:0,onClick:o,children:c})}),(0,O.jsx)(mq.h,{icon:eF.XIcon,"aria-label":"Dismiss alert",variant:"invisible",sx:{gridArea:"close",float:"right",marginLeft:"calc(var(--base-size-4))",textAlign:"center",cursor:"pointer",background:"none",border:0,appearance:"none","&:hover":{opacity:.7},"&:active":{opacity:.5},"& .octicon":{marginRight:0}},onClick:d})]})}let H7=(0,H.forwardRef)(function({type:e},t){switch(e){case fQ.Table:return(0,O.jsx)(Z8,{children:(0,O.jsx)(WD,{children:(0,O.jsx)(W_,{ref:t})})});case fQ.Roadmap:return(0,O.jsx)(Z8,{children:(0,O.jsx)(H5,{children:(0,O.jsx)(HU,{ref:t})})});case fQ.List:default:return(0,O.jsx)(Z8,{children:(0,O.jsx)(BN,{ref:t})})}}),H9=(0,H.memo)((0,H.forwardRef)(function(e,t){let{currentView:r,views:a,duplicateCurrentViewState:n}=oi(),{partialFailures:i,projectLimits:{viewsLimit:l}}=i5(),{viewType:s}=hL(),{addToast:o}=e9(),d=(0,e5.Z)(o),{sliceField:u}=or();return((0,H.useEffect)(()=>{let e=i?.[0];e&&d.current({message:e.message,type:e$.warning,keepAlive:!0})},[i,d]),W5(),W1(),W0(),W2(),r)?(0,O.jsxs)(O.Fragment,{children:[u?(0,O.jsx)(eO.Z,{sx:{flexDirection:"row",flex:"auto",display:"flex"},children:(0,O.jsx)(eO.Z,{sx:{flexDirection:"column",flex:"auto",display:"grid",overflow:"auto",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},children:(0,O.jsx)(H7,{type:s,ref:t})})}):(0,O.jsx)(H7,{type:s,ref:t}),r.isDeleted?(0,O.jsxs)(e0,{role:"status",...(0,ef.f)("deleted-view-toast"),children:[(0,O.jsx)(eJ,{sx:{bg:eG[e$.warning]},children:eq}),(0,O.jsxs)(eO.Z,{sx:{py:1},children:[(0,O.jsx)(eB.Z,{sx:{fontSize:1,mx:2,color:"fg.onEmphasis"},children:"This view has been deleted."}),a.length<l?(0,O.jsx)(e1,{...(0,ef.f)("deleted-view-toast-action"),sx:{mt:0,mb:0},onClick:()=>{n(r.number,void 0,{ui:"deleted view toast"})},children:r.isViewStateDirty?"Save a copy to make changes.":"Duplicate it to make changes."}):null]})]}):null]}):(0,O.jsx)(qe,{})})),qe=(0,H.memo)(function(){return(0,O.jsxs)(uW,{sx:{backgroundColor:e=>`${e.colors.canvas.default}`,display:"flex",flexGrow:1},"data-hpc":!0,children:[(0,O.jsx)(eZ.Z,{icon:eF.StopIcon,size:30,sx:{color:"danger.fg"}}),(0,O.jsx)(eB.Z,{as:"h2",children:"This view no longer exists"}),(0,O.jsx)(eB.Z,{as:"p",sx:{color:"fg.muted"},children:"Select another view to use this project."})]})});try{H3.displayName||(H3.displayName="ProjectView")}catch{}try{H4.displayName||(H4.displayName="ProjectViewWithoutLimitsDisabledBanner")}catch{}try{H8.displayName||(H8.displayName="ProjectViewWithoutLimitsReEnabledBanner")}catch{}try{H6.displayName||(H6.displayName="ProjectViewWithoutLimitsWaitlistBanner")}catch{}try{H7.displayName||(H7.displayName="ProjectViewInner")}catch{}try{H9.displayName||(H9.displayName="MainView")}catch{}try{H9.displayName||(H9.displayName="MainView")}catch{}try{qe.displayName||(qe.displayName="NoViewFound")}catch{}async function qt(e){let t=aa("memex-chart-create-api-data"),{data:r}=await ac(t.url,{method:"POST",body:e});return r}async function qr(e){let t=aa("memex-chart-delete-api-data");await ac(t.url,{method:"DELETE",body:e})}async function qa(e){let t=aa("memex-chart-update-api-data"),{data:r}=await ac(t.url,{method:"PUT",body:e});return r}function qn(e,t){let{configuration:{description:r,...a}}=e,{time:n,xAxis:i}=a;return n||"time"!==i.dataSource.column||(a.time={period:"2W"}),{number:e.number,name:e.name,description:r,localVersion:{configuration:{...a,...t}},serverVersion:{configuration:a}}}function qi(){let{hasUnlimitedSavedCharts:e}=Cu();return{getOverrides:(0,H.useCallback)(t=>{let r={};if(e){let e=t.get(lr);null!=e&&e in N9&&(r.type=e);let a=t.get(lf),n=t.get(lp);null!=a&&null!=n&&(r.xAxis={dataSource:"time"===a?{column:"time"}:{column:parseInt(a,10)},groupBy:n?{column:parseInt(n,10)}:void 0});let i=t.get(lg),l=t.get(lh);null!=i&&null!=l&&i in _e&&(r.yAxis={aggregate:{operation:i,columns:l?[parseInt(l,10)]:void 0}})}let a=t.get(lt);return null!=a&&(r.filter=a),r},[e])}}let ql=(0,H.memo)(function({children:e}){let{isInsightsEnabled:t,hasUnlimitedSavedCharts:r,savedChartsLimit:a}=Cu(),{getChartLinkParameters:n}=function(){let{hasUnlimitedSavedCharts:e}=Cu();return{getChartLinkParameters:(0,H.useCallback)(t=>{let r=t.localVersion.configuration,a=t.serverVersion.configuration,n=new URLSearchParams;return e&&(_X(n,r.type,a.type),_Y(n,r.xAxis,a.xAxis),_J(n,r.yAxis,a.yAxis)),_Q(n,r.filter,a.filter),_0(n,r.time,a.time),n},[e])}}(),{getInitialChartState:i}=function(){let{getOverrides:e}=qi();return{getInitialChartState:(0,H.useCallback)(t=>{let r=eP("memex-charts-data")??[],a="time"===t.xAxis.dataSource.column,n=a?rZ.defaultLeanBurnupChartName:rZ.defaultStatusChartName,i=a?rZ.defaultLeanBurnupChartDescription:rZ.defaultStatusChartDescription,l=[{number:0,name:n,configuration:{...t,description:i}},...r],s=eT.matchFullPath(window.location.pathname),o=ek.matchFullPath(window.location.pathname),d=null;s&&s.params.insightNumber?d=parseInt(s.params.insightNumber,10):o&&(d=0);let u=new URLSearchParams(window.location.search);return Object.fromEntries(l.map(t=>{let r=qn(t,t.number===d?e(u):void 0);return[r.number,r]}))},[e])}}(),{getOverrides:l}=qi(),{findColumn:s}=gt(),{findColumnByDatabaseId:o}=cA(),{postStats:d}=os(),u=(0,xh.Z)(),c=(0,H.useRef)({}),m=(0,H.useCallback)(()=>({chart:{configuration:{filter:"is:issue",type:"stacked-area",xAxis:{dataSource:{column:"time"},groupBy:{column:s("Status").databaseId}},yAxis:{aggregate:{operation:"count"}},time:{period:"2W"}}}}),[s]),p=(0,H.useCallback)(()=>({chart:{configuration:{filter:"",type:"column",xAxis:{dataSource:{column:s("Status").databaseId}},yAxis:{aggregate:{operation:"count"}}}}}),[s]),f=(0,H.useCallback)(()=>t?m():p(),[m,p,t]),h=(0,H.useCallback)(()=>p(),[p]),[g,y]=(0,H.useState)(()=>i(f().chart.configuration)),x=(0,H.useCallback)(()=>r||Object.values(g).filter(e=>!N6(e)).length<a,[g,r,a]),b=(0,H.useCallback)(e=>g[e],[g]),v=ur(),w=(0,H.useCallback)(e=>{let t=b(e);if(!t){let e=ek.generatePath(v);return{url:e,pathname:e,search:""}}let r=N6(t)?ek.generatePath(v):eT.generatePath({...v,insightNumber:t.number}),a=n(t).toString();return{url:`${r}${a?`?${a}`:""}`,pathname:r,search:a}},[b,n,v]),j=(0,H.useCallback)((e,t,r)=>{c.current[t]&&window.clearTimeout(c.current[t]),c.current[t]=window.setTimeout(()=>{if(u()){let a={};if(e===ne||e===nt){let e=r?.xAxis?.dataSource?.column;a.dataSourceName=tW(e)?o(e)?.name:e;let t=r?.xAxis?.groupBy?.column;a.groupByName=tW(t)?o(t)?.name:t;let n=r?.yAxis?.aggregate?.columns?.[0];a.aggregateName=tW(n)?o(n)?.name:n}d({name:e,context:JSON.stringify({chartNumber:t,...a,...r})})}},250)},[o,u,d]),C=d1({request:(0,H.useCallback)(async function(e){let t=await qt(e);return y(e=>({...e,[t.chart.number]:qn(t.chart)})),j(ne,t.chart.number,t.chart.configuration),t},[j])}),I=d1({request:(0,H.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await qa(e);return y(e=>({...e,[t.chart.number]:{...e[t.chart.number],name:t.chart.name}})),j("insights_chart_rename",t.chart.number,t.chart.configuration),t},[j])}),S=d1({request:(0,H.useCallback)(async function(e){if(e.chartNumber<0)throw Error("Invalid chart number");let t=await qa(e);return y(e=>({...e,[t.chart.number]:qn(t.chart)})),j(nt,t.chart.number,t.chart.configuration),t},[j])}),k=d1({request:(0,H.useCallback)(async function(e){if(e<0)throw Error("Invalid chart number");await qr({chartNumber:e}),y(t=>{if(!t[e])return t;let{[e]:r,...a}=t;return a}),j("insights_chart_delete",e)},[j])}),T=(0,H.useCallback)((e,t)=>{y(r=>{let a=r[e];return a&&(void 0===t.filter||1!==Object.keys(t).length||t.filter!==a.localVersion.configuration.filter)?(j("insights_chart_update_local",e,t),{...r,[e]:{...a,localVersion:{configuration:{...a.localVersion.configuration,...t}}}}):r})},[j]),N=(0,H.useCallback)(e=>{y(t=>{let r=t[e];return r?{...t,[e]:{...r,localVersion:r.serverVersion}}:t}),j("insights_chart_discard_local",e)},[j]),_=(0,e5.Z)(b);(0,H.useEffect)(function(){function e(){let e;let t=eT.matchFullPath(window.location.pathname),r=ek.matchFullPath(window.location.pathname);if(t&&t.params.insightNumber)e=parseInt(t.params.insightNumber,10);else{if(!r)return;e=0}let a=_.current(e),n=new URLSearchParams(window.location.search);a&&T(a.number,{...a.serverVersion.configuration,...l(n)})}return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[_,l,T]);let R=(0,H.useCallback)(e=>{y(t=>{let r=Object.fromEntries(e.map(e=>{var r;let a=(r=t[e.number])&&N4(r).isDirty?{...r,name:e.name,serverVersion:{configuration:e.configuration}}:qn(e);return[a.number,a]}));return r[0]=t[0],r})},[]);return(0,O.jsx)(h9.Provider,{value:(0,H.useMemo)(()=>({chartConfigurations:g,getChartConfigurationByNumber:b,getChartLinkTo:w,getDefaultChart:f,getCreateChartRequest:h,canCreateChart:x,updateChartConfigurations:R}),[g,b,w,f,h,x,R]),children:(0,O.jsx)(_r.Provider,{value:(0,H.useMemo)(()=>({createChartConfiguration:C,updateChartConfiguration:S,updateChartName:I,destroyChartConfiguration:k,updateLocalChartConfiguration:T,resetLocalChangesForChartNumber:N}),[C,k,S,I,T,N]),children:e})})});try{ql.displayName||(ql.displayName="ChartStateProvider")}catch{}let qs=(0,r(38087).rB)(void 0),qo=({children:e,environment:t})=>(0,O.jsx)(uN.RelayEnvironmentProvider,{environment:t||qs,children:e});try{qo.displayName||(qo.displayName="RelayProvider")}catch{}let qd=(0,Y.vJ)(["html{color-scheme:",";}body.is-dragging{overflow-x:hidden;}body.is-dragging,body.is-dragging *,body.is-resizing,body.is-resizing *{user-select:none !important;}body.is-dragging,body.is-dragging *{cursor:grabbing !important;& a:hover{color:inherit;text-decoration:inherit;}}body.is-resizing-slicer-panel *{cursor:col-resize;& #memex-root{pointer-events:none;#slicer-panel-resizer-sash{pointer-events:auto;}}}#memex-root{background-color:",";mark.find-in-project-highlight{background-color:yellow;color:black;}}code{font-size:0.9em;background-color:",";padding:0.1em;border-radius:0.25em;}.hide-copy-project-button-in-memex{display:none;}"],e=>e.$colorScheme?.startsWith("dark")?"dark":"light",(0,U.U2)("colors.canvas.default"),(0,U.U2)("colors.neutral.muted"));function qu(){let e=(0,K.lk)();return((0,H.useEffect)(()=>{if(!(e instanceof Error))return;let t=setTimeout(()=>{throw e});return()=>{clearTimeout(t)}},[e]),e)?(0,O.jsx)(fM,{}):null}let qc=(0,H.memo)(function({children:e=null}){let{isInsightsChartViewEnabled:t}=Cu(),{isOrganization:r}=i5(),a=Pj(),n=P_(),i=(0,H.useCallback)(e=>t?e:null,[t]),l=(0,H.useMemo)(()=>{var t,l,s;let o=(0,O.jsx)(bL,{children:(0,O.jsx)(jm,{mainAppContent:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(CS,{isProjectPath:!0,children:(0,O.jsx)(CT,{})}),(0,O.jsx)(H3,{})]})})}),d=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(CS,{children:(0,O.jsx)(C_,{title:"Workflows"})}),(0,O.jsx)(fE,{})]});return(0,Q.aj)([{path:eb.path,errorElement:(0,O.jsx)(qu,{}),element:(0,O.jsxs)(qp,{children:[(0,O.jsx)(qf,{}),(0,O.jsx)(gb,{}),(0,O.jsx)(Cs,{}),(0,O.jsx)(gU,{}),(0,O.jsx)(K.j3,{}),(0,O.jsx)(CR,{}),e]}),children:rs([{path:eb.path,element:o},{path:ev.path,element:o},T1({children:rs([{path:eN.path,element:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(CS,{children:(0,O.jsx)(C_,{title:"Archive"})}),(0,O.jsx)(N3,{})]})},{path:eC.path,element:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(CS,{children:(0,O.jsx)(C_,{title:"Settings"})}),(0,O.jsx)(AV,{})]}),children:rs([(t={path:eS.path,element:(0,O.jsx)(Dx,{}),loader:async()=>(0,X.PQ)({collaborators:n(),organizationAccessRole:r?await a():null})},l=TY.ADMIN,s=t,TJ(l)?s:null),{path:eI.path,element:(0,O.jsx)(EZ,{})},{path:eC.path,element:(0,O.jsx)(Ao,{})}])},function(e){let{memex_automation_enabled:t}=n7();return t?e:null}({children:rs([{path:ew.path,element:d},{path:ej.path,element:d}])}),T1({children:rs([i({path:ek.path,element:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(CS,{children:(0,O.jsx)(C_,{title:"Insights"})}),(0,O.jsx)(Pm,{})]}),children:[{path:ek.path,element:(0,O.jsx)(R9,{})},{path:eT.path,element:(0,O.jsx)(R9,{})}]})])})])}),{path:"*",element:(0,O.jsx)(ey,{})}])}])},[e,r,n,a,i]);return(0,O.jsx)(Q.pG,{router:l})}),qm=(0,H.memo)(function({children:e=null}){return(0,O.jsx)(r4,{children:(0,O.jsx)(qc,{children:e})})}),qp=({children:e,environment:t})=>{qh();let{colorScheme:r}=(0,$.Fg)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(qd,{$colorScheme:r}),(0,O.jsx)("div",{role:"region",id:"__primerPortalRoot__",style:{zIndex:10,position:"absolute",width:"100%"}}),(0,O.jsx)(qo,{environment:t,children:(0,O.jsx)(e7,{children:(0,O.jsx)(gE,{children:(0,O.jsx)(c6,{children:(0,O.jsx)(dc,{children:(0,O.jsx)(em,{children:(0,O.jsx)(Wd,{children:(0,O.jsx)(IQ,{children:(0,O.jsx)(TX,{children:(0,O.jsx)(us,{children:(0,O.jsx)(hj,{children:(0,O.jsx)(hd,{children:(0,O.jsx)(uL,{children:(0,O.jsx)(ql,{children:(0,O.jsx)(Mu,{children:(0,O.jsx)(Ms,{children:(0,O.jsx)(gh,{children:(0,O.jsx)(Lv,{children:(0,O.jsx)(jP,{children:(0,O.jsx)(gn,{children:(0,O.jsx)(h0,{children:e})})})})})})})})})})})})})})})})})})})})})]})},qf=(0,H.memo)(function(){let e=l$(),{isReadonly:t}=i4(),{isInsightsEnabled:r}=Cu(),{returnToViewLinkTo:a}=oi(),{projectViewRoutesMatch:n}=dg(),i=(0,K.bS)(eC.pathWithChildPaths),l=(0,K.bS)(ew.pathWithChildPaths),s=(0,K.bS)(ek.pathWithChildPaths),o=(0,K.bS)(eN.pathWithChildPaths),{memex_automation_enabled:d}=n7(),{ownerIdentifier:u,ownerType:c,projectNumber:m}=ur();return ep(()=>{let p=[],f=["n","Navigate to...",p];return(n||p.push(["p","Navigate to project views","navigate",()=>e(a)]),t||i||p.push(["s","Navigate to settings","navigate",()=>e(eC.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),t||l||!d||p.push(["w","Navigate to workflows","navigate",()=>e(ew.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),t||!r||s||p.push(["i","Navigate to insights","navigate",()=>e(ek.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),t||o||p.push(["a","Navigate to archive","navigate",()=>e(eN.generatePath({ownerType:c,ownerIdentifier:u,projectNumber:m}))]),0===p.length)?null:f},[n,t,i,l,d,r,s,o,e,a,c,u,m]),null}),qh=()=>{let{resolvedColorScheme:e}=(0,$.Fg)(),t=gY();(0,H.useEffect)(()=>{t&&e&&t.setAttribute("data-current-theme-color-scheme",e)},[e,t])};try{qu.displayName||(qu.displayName="RootBoundary")}catch{}try{qc.displayName||(qc.displayName="AppRoutes")}catch{}try{qm.displayName||(qm.displayName="App")}catch{}try{qp.displayName||(qp.displayName="AppContainer")}catch{}try{qf.displayName||(qf.displayName="NavigationCommands")}catch{}var qg=r(65575);let qy={colorMode:"auto",dayScheme:"light",nightScheme:"dark"};function qx(e){let t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-color-mode","data-light-theme","data-dark-theme"]}),()=>{t.disconnect()}}function qb(){let e=function(){let{dataset:e}=document.documentElement;return{mode:e.colorMode,light:e.lightTheme,dark:e.darkTheme}}(),{themePreferences:{markdown_fixed_width_font:t,...r}}=i5();return{mode:e.mode??r?.mode,light:e.light??r.light,dark:e.dark??r?.dark}}var qv=r(80525);let qw="always",qj=new qv.S({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,networkMode:qw},mutations:{networkMode:qw}}}),qC=({children:e,rootElement:t})=>{let r=(0,O.jsx)(fM,{});return(0,O.jsx)(gX.Provider,{value:t,children:(0,O.jsxs)(W.aH,{client:qj,children:[(0,O.jsx)(qI,{children:(0,O.jsx)(ErrorBoundary,{fallback:r,children:(0,O.jsx)(qm,{children:e})})}),(0,O.jsx)(G.t,{buttonPosition:"bottom-right"})]})})},qI=({children:e})=>{let t=function(){let e=dl(qb);return(0,H.useSyncExternalStore)(qx,()=>{let t=qb();return(0,mt.Z)(e.current,t)?e.current:(e.current=t,t)})}();return(0,O.jsx)($.f6,{...function(e){let t,r;return e?(e.light&&(e.light in qg.Z.colorSchemes?t=e.light:e.light.startsWith("light")&&(t="light")),e.dark&&(e.dark in qg.Z.colorSchemes?r=e.dark:e.dark.startsWith("dark")&&(r="dark")),{colorMode:function(e){switch(e){case"light":return"day";case"dark":return"night";default:return e}}(e.mode),dayScheme:t,nightScheme:r}):qy}(t),children:(0,O.jsx)(z.Z,{display:"contents",children:e})})};try{qI.displayName||(qI.displayName="MemexThemeProvider")}catch{}async function qS(e,t,r){let a=t?.parentElement;if(!document.getElementById("portal-root")){let e=document.createElement("div");e.setAttribute("id","portal-root"),a?.appendChild(e)}r.render((0,O.jsx)(H.StrictMode,{children:e})),t.style.overflow="hidden",t.parentElement?.parentElement&&(t.parentElement.parentElement.style.overflow="hidden")}var qk=new WeakSet;let qT=class ProjectsV2 extends HTMLElement{async connectedCallback(){let e=(V.Z.isEnabled()?(await (function(e,t,r){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return r})(this,qk,qN).call(this)).createRoot:B.s)(this);this.reactRoot=e,eb.matchFullPathOrChildPaths(window.location.pathname)&&qS((0,O.jsx)(qC,{rootElement:this}),this,e)}disconnectedCallback(){this.reactRoot?.unmount()}constructor(...e){super(...e),function(e,t){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,qk)}};function qN(){return r.e("react-profiling").then(r.t.bind(r,19547,19))}"undefined"==typeof window||window.customElements.get("projects-v2")||window.customElements.define("projects-v2",qT)},80810:(e,t,r)=>{r.d(t,{N:()=>n,x:()=>i});var a=r(71207);function n(e,t){i((e.getAttribute("aria-label")||e.innerText||"").trim(),t)}function i(e,t){let{assertive:r,element:n}=t??{};!function(e,t,r){let n=r??a.n4?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");n&&(n.textContent===e?n.textContent=`${e}\u00A0`:n.textContent=e)}(e,r,n)}},10412:(e,t,r)=>{r.d(t,{BX:()=>ProviderBase,Z4:()=>StaticItemsPage,ck:()=>Item});var a=r(47142),n=r(80425);let StaticItemsPage=class StaticItemsPage{constructor(e,t,r){this.providers=[],this.scopeType="static_items_page",this.title=e,this.scopeId=t,this.providers=[new StaticItemsProvider(r)]}};let StaticItemsProvider=class StaticItemsProvider{async fetch(e){return{results:this.fuzzyFilter(this.items,e)}}enabledFor(){return!0}clearCache(){}fuzzyFilter(e,t,r=0){if(t.isBlank())return e;let a=[];for(let n of e)n.calculateScore(t.text)>r&&a.push(n);return a}constructor(e){this.hasCommands=!0,this.debounce=0;let t=e.length;this.items=e.map((e,r)=>(e.priority=t-r,e))}};let Item=class Item{get matchingFields(){return this.matchFields?this.matchFields:[this.title]}get key(){return`${this.title}-${this.group}-${this.subtitle}-${this.matchFields?.join("-")}`}get id(){return this._id||(this._id=(0,n.k)(this.key).toString()),this._id}calculateScore(e){return Math.max(...this.matchingFields.map(t=>this.calculateScoreForField({field:t,queryText:e})))}calculateScoreForField({field:e,queryText:t}){return(0,a.CD)(t,e)?(0,a.Gs)(t,e):-1/0}constructor(e){this.score=0,this.position="",this.title=e.title,this.priority=e.priority,this.group=e.group,this.subtitle=e.subtitle,this.matchFields=e.matchFields,this.typeahead=e.typeahead,this.hint=e.hint,this.icon=e.icon}};let ProviderBase=class ProviderBase{fuzzyFilter(e,t,r=0){if(t.isBlank())return e;let a=[];for(let n of e)n.calculateScore(t.text)>r&&a.push(n);return a}}},93931:(e,t,r)=>{r.d(t,{hk:()=>a,qG:()=>n,yK:()=>i});let a="copilot-chat-textarea",n="copilot-chat-topic-search",i="Review"},79600:(e,t,r)=>{r.d(t,{T:()=>i});var a=r(80810),n=r(71207);function i(e){if(!n.n4)return;let t=n.n4.querySelector("title"),r=n.n4.createElement("title");r.textContent=e,t?t.textContent!==e&&(t.replaceWith(r),(0,a.x)(e)):(n.n4.head.appendChild(r),(0,a.x)(e))}},79697:(e,t,r)=>{let a;r.d(t,{YT:()=>m,qP:()=>p,yM:()=>f});var n=r(88149),i=r(64307),l=r(56363),s=r(43786);let{getItem:o}=(0,l.Z)("localStorage"),d="dimension_",u=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,n.n)("octolytics");delete e.baseContext,a=new i.R(e)}catch(e){}function c(e){let t=(0,n.n)("octolytics").baseContext||{};if(t)for(let[e,r]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(d)&&(t[e.replace(d,"")]=r,delete t[e]);let r=document.querySelector("meta[name=visitor-payload]");for(let[e,a]of(r&&Object.assign(t,JSON.parse(atob(r.content))),new URLSearchParams(window.location.search)))u.includes(e.toLowerCase())&&(t[e]=a);return t.staff=(0,s.B)().toString(),Object.assign(t,e)}function m(e){a?.sendPageView(c(e))}function p(e,t={}){let r=document.head?.querySelector('meta[name="current-catalog-service"]')?.content,n=r?{service:r}:{};for(let[e,r]of Object.entries(t))null!=r&&(n[e]=`${r}`);a&&(c(n),a.sendEvent(e||"unknown",c(n)))}function f(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},31109:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=["issueTypes"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:r(42311),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputIssueTypeSuggestionsPaginated",selections:[{alias:"issueTypes",args:null,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"__Repository_issueTypes_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputIssueType",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();a.hash="ef89fbe97f30e2ba4545cbadf62f91e7";let n=a},42311:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:10,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputIssueTypeSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputIssueTypeSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputIssueTypeSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_issueTypes",kind:"LinkedHandle",name:"issueTypes"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"38e455016558697be1cf8632ea2adaaa",metadata:{},name:"searchInputIssueTypeSuggestionsPaginationQuery",operationKind:"query",text:null}}}();a.hash="ef89fbe97f30e2ba4545cbadf62f91e7";let n=a},39695:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],r={alias:null,args:null,kind:"ScalarField",name:"isExcludedFromIssueTypes",storageKey:null},a=[{kind:"Literal",name:"first",value:10}],n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputIssueTypeSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputIssueTypeSuggestionsPaginated"},r],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputIssueTypeSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"IssueTypeConnection",kind:"LinkedField",name:"issueTypes",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueTypeEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"node",plural:!1,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEnabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"issueTypes(first:10)"},{alias:null,args:a,filters:null,handle:"connection",key:"Repository_issueTypes",kind:"LinkedHandle",name:"issueTypes"},n,r],storageKey:null}]},params:{id:"e40b2c6e4ce24eb9f1e56de0154beb70",metadata:{},name:"searchInputIssueTypeSuggestionsQuery",operationKind:"query",text:null}}}();a.hash="b3028ec958db7bc5bfc968d82fc1b70c";let n=a},24245:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=["labels"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:r(22945),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputLabelSuggestionsPaginated",selections:[{alias:"labels",args:null,concreteType:"LabelConnection",kind:"LinkedField",name:"__Repository_labels_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputLabel",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();a.hash="7b63f86539c0fac47a54ef3bde3c41e8";let n=a},22945:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"a070d1f6d4a1baeb814107011a04e7ff",metadata:{},name:"searchInputLabelSuggestionsPaginationQuery",operationKind:"query",text:null}}}();a.hash="7b63f86539c0fac47a54ef3bde3c41e8";let n=a},14432:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],r=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputLabelSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputLabelSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"LabelEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"labels(first:100)"},{alias:null,args:r,filters:null,handle:"connection",key:"Repository_labels",kind:"LinkedHandle",name:"labels"},a],storageKey:null}]},params:{id:"0afc284c83cca58f2326e10aab586ccf",metadata:{},name:"searchInputLabelSuggestionsQuery",operationKind:"query",text:null}}}();a.hash="a97cc6ad8f70cca9b8f704109d9f0319";let n=a},59842:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=["milestones"],t={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{argumentDefinitions:[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"}],kind:"Fragment",metadata:{connection:[{count:"count",cursor:"cursor",direction:"forward",path:e}],refetch:{connection:{forward:{count:"count",cursor:"cursor"},backward:null,path:e},fragmentPathInResult:["node"],operation:r(93940),identifierInfo:{identifierField:"id",identifierQueryVariableName:"id"}}},name:"searchInputMilestoneSuggestionsPaginated",selections:[{alias:"milestones",args:null,concreteType:"MilestoneConnection",kind:"LinkedField",name:"__Repository_milestones_connection",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"searchInputMilestone",selections:[t,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null}],args:null,argumentDefinitions:[]},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},t],type:"Repository",abstractKey:null}}();a.hash="6a182a85da1b4aaa57c5958db49d2080";let n=a},93940:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:100,kind:"LocalArgument",name:"count"},{defaultValue:null,kind:"LocalArgument",name:"cursor"},{defaultValue:null,kind:"LocalArgument",name:"id"}],t=[{kind:"Variable",name:"id",variableName:"id"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n=[{kind:"Variable",name:"after",variableName:"cursor"},{kind:"Variable",name:"first",variableName:"count"}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{args:[{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"cursor",variableName:"cursor"}],kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsPaginationQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,a,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},r],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:n,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"}],type:"Repository",abstractKey:null}],storageKey:null}]},params:{id:"3c21c80d26e4d260a8591b064eebf9fe",metadata:{},name:"searchInputMilestoneSuggestionsPaginationQuery",operationKind:"query",text:null}}}();a.hash="6a182a85da1b4aaa57c5958db49d2080";let n=a},49039:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],r=[{kind:"Literal",name:"first",value:100}],a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"searchInputMilestoneSuggestionsPaginated"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"searchInputMilestoneSuggestionsQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:r,concreteType:"MilestoneConnection",kind:"LinkedField",name:"milestones",plural:!1,selections:[{alias:null,args:null,concreteType:"MilestoneEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"node",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null}]}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"pageInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"endCursor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"hasNextPage",storageKey:null}],storageKey:null}],storageKey:"milestones(first:100)"},{alias:null,args:r,filters:null,handle:"connection",key:"Repository_milestones",kind:"LinkedHandle",name:"milestones"},a],storageKey:null}]},params:{id:"2ae90bb1622608a706e5a01daaf35d30",metadata:{},name:"searchInputMilestoneSuggestionsQuery",operationKind:"query",text:null}}}();a.hash="2b30d6dbe062dd2d42ee7353b2f5ca0b";let n=a},49611:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a={kind:"InlineDataFragment",name:"searchInputIssueType"};a.hash="0e2c4c3c51227e87bbabb7dad24e212c";let n=a},54283:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a={kind:"InlineDataFragment",name:"searchInputLabel"};a.hash="52a949cfd65641f7e70925d735bf135d";let n=a},3521:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a={kind:"InlineDataFragment",name:"searchInputMilestone"};a.hash="25725c8585936addfbf60c431dd10621";let n=a},12793:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"projectId"},t={defaultValue:null,kind:"LocalArgument",name:"workflowNumber"},r=[{alias:null,args:[{fields:[{kind:"Variable",name:"number",variableName:"workflowNumber"},{kind:"Variable",name:"projectId",variableName:"projectId"}],kind:"ObjectValue",name:"input"}],concreteType:"DeleteProjectV2WorkflowByNumberPayload",kind:"LinkedField",name:"deleteProjectV2WorkflowByNumber",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedWorkflowId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"deleteProjectV2WorkflowByNumberMutation",selections:r,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"deleteProjectV2WorkflowByNumberMutation",selections:r},params:{id:"2450a4a64f1dc63de57eacac2fcd3f9f",metadata:{},name:"deleteProjectV2WorkflowByNumberMutation",operationKind:"mutation",text:null}}}();a.hash="5ccdf246729b2e483d88018a9460db8b";let n=a},48652:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});let a=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"login"},{defaultValue:null,kind:"LocalArgument",name:"number"}],t=[{kind:"Variable",name:"login",variableName:"login"}],r=[{kind:"Variable",name:"number",variableName:"number"}],a={alias:null,args:null,kind:"ScalarField",name:"suggestedIssueTypeNames",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useFetchFilterSuggestedIssueTypesQuery",selections:[{alias:null,args:t,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:r,concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useFetchFilterSuggestedIssueTypesQuery",selections:[{alias:null,args:t,concreteType:"Organization",kind:"LinkedField",name:"organization",plural:!1,selections:[{alias:null,args:r,concreteType:"ProjectV2",kind:"LinkedField",name:"projectV2",plural:!1,selections:[a,n],storageKey:null},n],storageKey:null}]},params:{id:"2ca7c54da2cefe8741d6ed91728d3931",metadata:{},name:"useFetchFilterSuggestedIssueTypesQuery",operationKind:"query",text:null}}}();a.hash="552be06f930d82c53af4c0cd3521c6f6";let n=a},49933:(e,t,r)=>{r.d(t,{BD:()=>s,E6:()=>l,Qs:()=>n,a5:()=>i,p3:()=>o,vb:()=>a});let a={open:"state:open",closed:"state:closed",default:"state:open archived:false assignee:@me sort:updated-desc",defaultRepoLevelOpen:"is:issue state:open",defaultRepoLevelClosed:"is:issue state:closed",assignedToMe:"state:open archived:false assignee:@me sort:updated-desc",pullsAssignedToMe:"state:open archived:false assignee:@me is:pr sort:updated-desc",mentioned:"state:open archived:false mentions:@me sort:updated-desc",createdByMe:"state:open archived:false author:@me sort:updated-desc",recentActivity:"involves:@me updated:>@today-1w sort:updated-desc",pullsAuthored:"state:open archived:false author:@me is:pr updated:>@today-60d sort:updated-desc",pullsReviewed:"state:open archived:false reviewed-by:@me -author:@me is:pr updated:>@today-60d sort:updated-desc",pullsReviewRequested:"state:open archived:false user-review-requested:@me is:pr updated:>@today-60d sort:updated-desc",pullsMentioned:"state:open archived:false mentions:@me is:pr updated:>@today-60d sort:updated-desc"},n={today:"@today"},i={day:"d",week:"w",month:"m",year:"y"},l=RegExp(`^(\\d+)(${Object.values(i).join("|")})`),s="@",o="sort:created-desc"},74960:(e,t,r)=>{r.d(t,{Eg:()=>u,Z6:()=>c,ey:()=>d,mB:()=>o});var a=r(11724),n=r(79535),i=r(52865);r(49933);var l=r(94437),s=r(47142);let CustomFilterProvider=class CustomFilterProvider extends EventTarget{handleEvent(e){let t=e.parsedQuery.at(-1);(""!==t.value||this.priority<=a.$G)&&t?.type!=="filter"&&!e.parsedQuery.some(e=>"filter"===e.type&&e.filter===this.value)&&((0,s.CD)(t?.value,this.name)||(0,s.CD)(t?.value,this.value))&&this.dispatchEvent(new Event("show")),t?.type==="filter"&&t.filter===this.value&&this.filterValues?.map(e=>{let{name:r,priority:a,icon:n}=e,i="value"in e?e.value:e.valueFunc(),l=i.charAt(0).toUpperCase()+i.slice(1);this.emitSuggestion(this.value,i,r??l,t.value,a,n)})}emitSuggestion(e,t,r,a,n,i){(!a||(0,s.CD)(a,t))&&(a&&(n-=(0,s.Gs)(a,t)),this.dispatchEvent(new l.L2({filter:e,value:t,name:r,priority:n,icon:i})))}constructor(e,{name:t,value:r,priority:a,icon:n,valuesKey:i},l){super(),this.type="filter",this.name=t,this.value=r,this.singularItemName=t,this.priority=a,this.icon=n,this.valuesKey=i,this.filterValues=l,e.addEventListener("query",this),e.attachProvider(this)}};function o(e){let t=new Map;for(let r of(t.set("searchTerms",[]),e.trim().split(/((?:[^\s"]+|"[^"]*")+)/g).filter(e=>""!==e.trim()))){let[e,a]=r.split(":");if(e&&a){if(!t.has(e)){t.set(e,[a]);continue}t.set(e,[...t.get(e),a]);continue}t.set("searchTerms",[...t.get("searchTerms"),r])}return t}function d(e){if(!e)return!1;let t=o(e).get("sort");return t&&1===t.length&&t[0].startsWith("reactions")||!1}function u(e,t,r){if(e.value in a.G$){let i=e.value;new CustomFilterProvider(t,{...e,name:a.G$[i],icon:n.Octicon.Not,value:`-${e.value}`,valuesKey:e.value,priority:a.C0},r)}new CustomFilterProvider(t,e,r)}function c(e,t,r,n,l){if(e.value in a.G$){let s=e.value;new i.r(t,{...e,name:a.G$[s],value:`-${e.value}`,priority:a.C0},r,n,l)}new i.r(t,e,r,n,l)}},12008:(e,t,r)=>{r.d(t,{E:()=>n,M:()=>i});var a=r(58081);let n=(0,a.createContext)(void 0);function i(){return(0,a.useContext)(n)}},82914:(e,t,r)=>{r.d(t,{Z:()=>s});let{getItem:a,setItem:n,removeItem:i}=(0,r(56363).Z)("localStorage"),l="REACT_PROFILING_ENABLED",s={enable:()=>n(l,"true"),disable:()=>i(l),isEnabled:()=>!!a(l)}},65706:(e,t,r)=>{r.d(t,{LS:()=>n,cl:()=>i,rV:()=>a});let{getItem:a,setItem:n,removeItem:i}=(0,r(56363).Z)("sessionStorage")},58374:(e,t,r)=>{r.d(t,{Ak:()=>x,CI:()=>j,Gj:()=>h,J$:()=>w,Nb:()=>C,Nt:()=>b,OE:()=>g,U6:()=>m,Wl:()=>y,XL:()=>c,jN:()=>n,pS:()=>p,sj:()=>f,vu:()=>I,wG:()=>S,wP:()=>v});var a=r(65706);let n="reload",i="soft-nav:fail",l="soft-nav:fail-referrer",s="soft-nav:referrer",o="soft-nav:marker",d="soft-nav:react-app-name",u="soft-nav:latest-mechanism";function c(){(0,a.LS)(o,"0"),(0,a.cl)(s),(0,a.cl)(i),(0,a.cl)(l),(0,a.cl)(d),(0,a.cl)(u)}function m(e){(0,a.LS)(o,e)}function p(){(0,a.LS)(o,"0")}function f(){let e=(0,a.rV)(o);return e&&"0"!==e}function h(){return(0,a.rV)(o)}function g(){return!!y()}function y(){return(0,a.rV)(i)}function x(e){(0,a.LS)(i,e||n),(0,a.LS)(l,window.location.href)}function b(){(0,a.LS)(s,window.location.href)}function v(){return(0,a.rV)(s)||document.referrer}function w(){let e=C();e?(0,a.LS)(d,e):(0,a.cl)(d)}function j(){return(0,a.rV)(d)}function C(){return document.querySelector('meta[name="ui"]')?"ui":document.querySelector("react-app")?.getAttribute("app-name")}function I(e){(0,a.LS)(u,e)}function S(){return(0,a.rV)(u)}},10818:(e,t,r)=>{r.d(t,{I:()=>s,t:()=>o});let a="\\s*(\\[[xX]\\]|\\[[\\s]\\])(?=\\s)",n="^(?:\\s*[-+*]|(?:\\s*\\d+\\.))",i="\\s*(.*?)\\s*$",l=`${n}${a}${i}`;function s(e){return RegExp("#{1,6}\\s+.*").test(e)}function o(e){let t=new RegExp(l);return e.split("\n").map(e=>e.trim()).map(e=>{if(s(e)||t.test(e))return e;let r=new RegExp(n).test(e),l=new RegExp(a).test(e),o=e&&new RegExp(i).test(e);if(!r&&!l&&!o||!o)return e;let d=e;return r||(d=`- ${e}`),l||(d=`${d.slice(0,2)}[ ] ${d.slice(2)}`),d}).join("\n")}},63451:(e,t,r)=>{r.d(t,{b:()=>i});var a=r(71207),n=r(58081);let i=void 0!==a.iG?.document?.createElement?n.useLayoutEffect:n.useEffect},72725:(e,t,r)=>{r.d(t,{g:()=>i});var a=r(58081);function n(e){return e.target instanceof HTMLElement?e.target.closest(".js-hovercard-content"):null}let i=e=>{(0,a.useEffect)(()=>{let t=e=>{n(e)&&e.stopPropagation()},r=t=>{let r=n(t);if(!r)return;let a=r.getAttribute("data-hovercard-target-url");a&&e(a,t)};return window.addEventListener("focus",t,!0),window.addEventListener("click",r),()=>{window.removeEventListener("focus",t,!0),window.removeEventListener("click",r)}})}},38081:(e,t,r)=>{r.d(t,{t:()=>$});var a=r(48055),n=r(42483),i=r(35732),l=r(50919),s=r(52972),o=r(59148),d=r(69889),u=r(48363),c=r(45433),m=r(85529),p=r(95346),f=r(58081);let h=(0,f.createContext)({});function g({children:e}){let{size:t}=(0,f.useContext)(h);return"sparkline"!==t?(0,a.jsx)(a.Fragment,{children:e}):null}g.displayName="ChartCard.LeadingVisual";var y=r(59979),x=r(75308);function b(e){switch(typeof e){case"string":case"number":return e.toString();case"object":if(Array.isArray(e))return e.map(b).join("");if(null!==e&&"props"in e)return b(e.props.children);return"";default:return""}}function v({as:e="h3",sx:t={},children:r}){let{setTitle:n,size:i}=(0,f.useContext)(h);return(0,f.useEffect)(()=>{n(b(r))},[n,r]),"sparkline"!==i?(0,a.jsx)(x.Z,{sx:{fontSize:2,fontWeight:600,...t},as:e,children:r}):null}v.displayName="ChartCard.Title";var w=r(97011);function j({sx:e={},children:t}){let{setDescription:r,size:n}=(0,f.useContext)(h);return(0,f.useEffect)(()=>{r(b(t))},[r,t]),"sparkline"!==n?(0,a.jsx)(w.Z,{sx:{color:"fg.muted",fontSize:1,...e},children:t}):null}function C({children:e}){let{size:t}=(0,f.useContext)(h);return"sparkline"!==t?(0,a.jsx)(a.Fragment,{children:e}):null}j.displayName="ChartCard.Description",C.displayName="ChartCard.TrailingVisual";var I=r(78840),S=r.n(I),k=r(2929),T=r.n(k),N=r(9662),_=r.n(N),R=r(18393),P=r.n(R),D=r(74625),E=r.n(D),A=r(75708),M=r.n(A);let L={tickWidth:0,lineWidth:1,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",labels:{style:{color:"var(--fgColor-default)"}},title:{style:{color:"var(--fgColor-default)"}}},F={accessibility:{keyboardNavigation:{order:["legend","series"]}},colors:["var(--data-blue-color)","var(--data-green-color)","var(--data-orange-color)","var(--data-pink-color)","var(--data-yellow-color)","var(--data-red-color)","var(--data-purple-color)","var(--data-auburn-color)","var(--data-teal-color)","var(--data-gray-color)"],caption:{align:"left",style:{color:"var(--fgColor-muted)"},verticalAlign:"top"},title:{align:"left",style:{color:"var(--fgColor-default)"},text:void 0},tooltip:{backgroundColor:"var(--bgColor-default)",borderRadius:6,borderColor:"var(--borderColor-muted)",borderWidth:1,shape:"rect",padding:10,shadow:{offsetX:2,offsetY:2,opacity:.02,width:4,color:"var(--shadowColor-default)"},style:{color:"var(--fgColor-default)",fontFamily:"var(--fontStack-sansSerif)",fontSize:"var(--text-body-size-small)"},useHTML:!0,headerFormat:'<table style="min-width: 120px;"><tr><th colspan="3" style="color:var(--fgColor-muted, var(--color-fg-muted)); font-weight:var(--base-text-weight-semibold); padding-bottom:2px;">{point.key}</th></tr>',pointFormat:'<tr><td style="padding-top:var(--base-size-4)"><span style="color:{point.color}">\u25CF</span> {series.name}</td><td style="text-align: right; padding-top:var(--base-size-4);"><strong>{point.y}</strong></td></tr>',footerFormat:"</table>"},credits:{enabled:!1},chart:{animation:!1,spacing:[4,0,4,0],backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",style:{fontFamily:"var(--fontStack-sansSerif)",fontSize:"12px",color:"var(--fgColor-default)"}},legend:{itemStyle:{fontSize:"var(--base-size-12)",font:"var(--fontStack-sansSerif)",color:"var(--fgColor-default)"},align:"left",verticalAlign:"top",x:-8,y:-12,itemHoverStyle:{color:"var(--fgColor-default)"},title:{style:{color:"var(--fgColor-default)"}}},navigation:{buttonOptions:{enabled:!1}},exporting:{fallbackToExportServer:!1},plotOptions:{series:{animation:!1},spline:{animation:!1,marker:{enabled:!1}},bar:{borderColor:"var(--bgColor-default)"},column:{borderColor:"var(--bgColor-default)"}},xAxis:{tickWidth:0,lineWidth:1,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",labels:{style:{color:"var(--fgColor-default)"}},title:{style:{color:"var(--fgColor-default)"}}},yAxis:[L]};T()(S()),_()(S()),P()(S()),E()(S()),S().setOptions({lang:{decimalPoint:".",thousandsSep:","}});let Z={xl:"432px",large:"320px",medium:"256px",small:"128px",sparkline:"128px"};function O({colors:e,overrideOptionsNotRecommended:t,plotOptions:r,series:n,type:i="line",xAxisTitle:l,xAxisOptions:s,yAxisTitle:o,yAxisOptions:d={}}){let{title:u,description:c,size:m,chartRef:p}=(0,f.useContext)(h),g=n.length>1&&"sparkline"!==m,x=n.length>3,b=Array.isArray(d)?d:[d],v=r&&function e(t,r,a){if("object"!=typeof t||null===t)return!1;if(t[r]===a)return!0;for(let n in t)if(void 0!==t[n])return e(t[n],r,a);return!1}(r,"stacking","normal"),w=(0,y.Z)({},F,{...x?{accessibility:{keyboardNavigation:{order:["series","legend"]}}}:{},chart:{type:i,height:"number"==typeof m?m:Z[m]},colors:e,exporting:{chartOptions:{title:{text:u},caption:{text:c}},filename:u},lang:{accessibility:{chartContainerLabel:`${u}. Interactive chart.`,navigator:{groupLabel:`${u} Axis zoom`}}},legend:{enabled:g,...x?{align:"right",layout:"vertical",verticalAlign:"middle"}:{}},plotOptions:(0,y.Z)({},F.plotOptions,{series:{marker:{enabled:"sparkline"!==m},enableMouseTracking:"sparkline"!==m}},r),series:n,tooltip:{enabled:"sparkline"!==m,shared:v},xAxis:(0,y.Z)({},{visible:"sparkline"!==m,gridLineWidth:"sparkline"!==m?1:0,title:{text:"sparkline"!==m?l:void 0}},s),yAxis:b.map(e=>{if(e)return(0,y.Z)({},L,{visible:"sparkline"!==m,gridLineWidth:"sparkline"!==m?1:0,title:{text:"sparkline"!==m?o:void 0}},e)})},t);if(w.series&&w.colors){let e=0,t=[];for(let r of w.series)if("areaspline"===r.type){let a;r.color?a=r.color:(a=w.colors[e],e++),r.fillColor={linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`color-mix(in srgb, ${a} 25%, transparent)`],[1,`color-mix(in srgb, ${a} 1%, transparent)`]]},t.push(r),e>w.colors.length-1&&(e=0)}else t.push(r);w.series=t}return(0,a.jsx)(M(),{ref:p,highcharts:S(),options:w})}function V({children:e}){return(0,a.jsx)(o.V.Body,{sx:{padding:0},children:e})}function B({size:e="medium",border:t,padding:r="normal",visibleControls:x,children:b}){let w=x??"sparkline"!==e,I=t??"sparkline"!==e,[S]=(0,d.R)(b,{leadingVisual:g,title:v,description:j,trailingVisual:C,chart:O}),[k,T]=(0,f.useState)(""),[N,_]=(0,f.useState)(""),R=(0,f.useRef)(null),P=(0,f.useMemo)(()=>({title:k,setTitle:T,description:N,setDescription:_,size:e,chartRef:R}),[k,T,N,_,e,R]),D=(0,f.useRef)(null),[E,A]=(0,f.useState)(),M=(0,f.useCallback)(()=>A(!0),[]),L=(0,f.useCallback)(()=>A(!1),[]);(0,f.useEffect)(()=>{!1===E&&D.current?.focus()},[E]);let F=(0,f.useCallback)(()=>{if(!R.current?.chart)return[];let[e,...t]=R.current.chart.getDataRows();return t.map((t,r)=>t.reduce((t,a,n)=>({...t,id:r,[e[n]]:a}),{}))},[R]),Z=(0,f.useCallback)(()=>R.current?.chart?(R.current?.chart?.getDataRows())[0].map((e,t)=>({header:e,field:e,rowHeader:0===t})):[],[R]),B=(0,f.useCallback)(()=>R.current?.chart?.downloadCSV(),[R]),$=(0,f.useCallback)(()=>{let e=JSON.stringify(R.current?.chart?.userOptions,(e,t)=>"string"==typeof t?t.replace(/var\(--([^,)]+)[,)]+/g,(e,t)=>getComputedStyle(R.current?.container.current??document.body).getPropertyValue(`--${t}`).trim()):t);R.current?.chart?.exportChartLocal({type:"image/png"},JSON.parse(e))},[R]),z=null;if(S.chart){let e=(0,y.Z)({},S.chart.props.overrideOptionsNotRecommended||{},{accessibility:{screenReaderSection:{onViewDataTableClick:M}}});z=(0,f.cloneElement)(S.chart,{overrideOptionsNotRecommended:e})}return(0,a.jsxs)(h.Provider,{value:P,children:[(0,a.jsxs)(n.Z,{sx:{...I?{borderWidth:"1px",borderStyle:"solid",borderColor:"border.default",borderRadius:2}:{},p:"none"===r?0:`var(--stack-padding-${r})`},...(0,p.f)("chart-card"),children:[(0,a.jsxs)(n.Z,{sx:{display:"flex",justifyContent:"space-between",alignContent:"flex-start",mb:"sparkline"!==e?3:0},children:[(0,a.jsxs)(n.Z,{sx:{display:"flex"},children:[(0,a.jsx)(n.Z,{sx:{mr:S.leadingVisual?2:0,alignContent:"center"},children:S.leadingVisual}),(0,a.jsxs)(n.Z,{children:[S.title,S.description]})]}),(0,a.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",alignSelf:"flex-start"},children:[(0,a.jsx)(n.Z,{sx:{mr:S.leadingVisual?2:0},children:S.trailingVisual}),w&&(0,a.jsxs)(i.P,{anchorRef:D,children:[(0,a.jsx)(i.P.Anchor,{children:(0,a.jsx)(l.h,{"aria-label":"Chart options",icon:m.KebabHorizontalIcon,variant:"invisible",size:"small"})}),(0,a.jsx)(i.P.Overlay,{width:"auto",children:(0,a.jsxs)(s.S,{children:[(0,a.jsx)(s.S.Item,{onSelect:M,children:"View as table"}),(0,a.jsx)(s.S.Item,{onSelect:B,children:"Download CSV"}),(0,a.jsx)(s.S.Item,{onSelect:$,children:"Download PNG"})]})})]})]})]}),z]}),E&&(0,a.jsx)(o.V,{title:k,onClose:L,footerButtons:[{buttonType:"default",content:"Download CSV",onClick:B}],renderBody:V,children:(0,a.jsx)(u.i.Container,{sx:{".Table":{"--table-border-radius":0},".TableHeader:first-child,.TableCell:first-child":{borderLeft:0},".TableHeader:last-child,.TableCell:last-child":{borderRight:0}},children:(0,a.jsx)(c.w,{data:F(),columns:Z()})})})]})}O.displayName="ChartCard.Chart",B.displayName="ChartCard";let $=Object.assign(B,{LeadingVisual:g,Title:v,Description:j,TrailingVisual:C,Chart:O,Context:h});try{V.displayName||(V.displayName="DialogBodyWithoutPadding")}catch{}try{$.displayName||($.displayName="ChartCard")}catch{}},16937:(e,t,r)=>{r.d(t,{z:()=>p});var a=r(48055),n=r(70296),i=r(85529),l=r(42483),s=r(97011),o=r(5359),d=r(95346),u=r(58081),c=r(51081);let m=(0,u.forwardRef)(({children:e,"aria-describedby":t,"aria-labelledby":r,...n},i)=>(0,a.jsx)(l.Z,{ref:i,...n,children:e}));m.displayName="BoxWithoutAriaLabel";let p=({value:e,onChange:t,label:r})=>{let i=(0,u.useId)(),o=e=>{let r=e.target.value;(0,n.Ho)(r)&&t(r)};return(0,a.jsxs)(l.Z,{as:"fieldset",sx:{border:0,padding:0,margin:0},children:[(0,a.jsx)(s.Z,{as:"legend",sx:{fontWeight:"bold",mb:2},children:r}),(0,a.jsx)(l.Z,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:n.Yf.map(t=>(0,a.jsx)(f,{name:i,color:t,onChange:o,selected:e===t},t))})]})},f=({color:e,onChange:t,selected:r,name:l})=>{let{fg:s,bg:p}=(0,n.L7)(e),f=(e[0]??"")+e.slice(1).toLowerCase(),h=(0,u.useId)();return(0,a.jsx)(c.u,{text:f,direction:"s",id:h,children:(0,a.jsxs)(m,{as:"label",sx:{p:2,background:r?s:p,color:r?"canvas.default":s,borderRadius:2,lineHeight:0,":has(:focus-visible)":{outlineWidth:"2px",outlineStyle:"solid",outlineColor:"accent.fg",outlineOffset:"1px"}},...(0,d.f)(`color-picker-option-${f}`),children:[(0,a.jsx)(o.Z,{"aria-labelledby":h,name:l,value:e,checked:r,onChange:t,sx:{clipPath:"circle(0)",position:"absolute",outline:"none !important"}}),r?(0,a.jsx)(i.CheckCircleFillIcon,{}):(0,a.jsx)(i.CircleIcon,{})]})})};try{p.displayName||(p.displayName="ColorPicker")}catch{}try{f.displayName||(f.displayName="ColorOption")}catch{}},23535:(e,t,r)=>{r.d(t,{J:()=>s,N:()=>o});var a=r(48055),n=r(58081),i=r(91614);let l=(0,n.createContext)(null),s=({children:e})=>{let[t,r]=(0,n.useState)(""),s=(0,n.useMemo)(()=>({issueCommentHighlightId:t,setIssueCommentHighlightId:r}),[t]);return(0,a.jsx)(i.T,{children:(0,a.jsx)(l.Provider,{value:s,children:e})})},o=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useIssueViewerCommentsContext must be used within a IssueViewerCommentsContextProvider.");return e};try{l.displayName||(l.displayName="IssueViewerCommentsContext")}catch{}try{s.displayName||(s.displayName="IssueViewerCommentsContextProvider")}catch{}},87251:(e,t,r)=>{r.d(t,{q:()=>o});var a=r(48055),n=r(9501),i=r(87598),l=r(23535),s=r(87392);function o({children:e}){return(0,a.jsx)(l.J,{children:(0,a.jsx)(n.B,{children:(0,a.jsx)(i.D,{children:(0,a.jsx)(s.qX,{children:e})})})})}try{o.displayName||(o.displayName="IssueViewerContextProvider")}catch{}},20088:(e,t,r)=>{r.d(t,{z:()=>m});var a=r(48055),n=r(79535),i=r(95346),l=r(85529),s=r(42483),o=r(98833),d=r(50919),u=r(58081),c=r(40461);function m({id:e,inputRef:t,placeholder:r,inputValue:c,label:m,visuallyHideLabel:p,clearIconInitiallyVisible:h=!1,onKeyPress:g,onKeyDown:y,onChange:x,onRequestProvider:b,renderSingularItemNames:v,sxString:w,"data-testid":j,sx:C}){let I=(0,u.useRef)(null);e=`query-builder-${e}`;let S=`${e}-label`,k=`${e}-input`;(0,u.useEffect)(()=>{if(!(I.current instanceof n.QueryBuilderElement))return;let t=I.current;return t&&(t.addEventListener("query-builder:request-provider",b),t.readyForRequestProviders(),t.id=`query-builder-${e}`,t.setAttribute("data-filter-key",":"),t.className="QueryBuilder",t.renderSingularItemNames=v||!0,null!=w&&t.setAttribute("style",w)),()=>{t?.removeEventListener("query-builder:request-provider",b)}},[e,b,w,v]);let T=(0,a.jsx)(s.Z,{sx:{width:"100%",textAlign:"center",display:"flex",flexDirection:"row",justifyItems:"flex-start"},children:(0,a.jsx)(o.Z,{icon:l.SearchIcon,"aria-label":"Search",sx:{ml:"12px",mr:1,color:"fg.muted"}})}),N=e=>{e.preventDefault();let t=I.current;t?.inputSubmit()},[_,R]=(0,u.useState)(c),P=(0,u.useCallback)(e=>{R(t?.current?.value),x(e)},[t,x]);return(0,u.useEffect)(()=>{async function e(){R(c),await I?.current?.parseQuery(void 0,!1)}c!==_&&e()},[_,c,I]),(0,a.jsx)("form",{acceptCharset:"UTF-8",action:"/search",method:"get",style:{flex:1,minWidth:0,...C},onSubmit:e=>N(e),...(0,i.f)("query-builder-form"),children:(0,a.jsxs)("query-builder",{ref:I,"defer-request-providers":!0,"data-catalyst":"true","data-filter-key":":",children:[(0,a.jsxs)("div",{className:"FormControl FormControl--fullWidth",style:{gap:0},children:[(0,a.jsx)("label",{id:S,htmlFor:k,className:`FormControl-label ${void 0===p||!0===p?"sr-only":""}`,children:m}),(0,a.jsxs)("div",{className:"QueryBuilder-StyledInput width-fit","data-target":"query-builder.styledInput",style:{minHeight:"30px"},children:[T?(0,a.jsx)("span",{id:`${e}-leadingvisual-wrap`,children:T}):(0,a.jsx)("div",{className:"QueryBuilder-spacer"}),(0,a.jsxs)("div",{"data-target":"query-builder.styledInputContainer",className:"QueryBuilder-StyledInputContainer",tabIndex:-1,...(0,i.f)("filter-styled-input"),children:[(0,a.jsx)("div",{"aria-hidden":"true",className:"QueryBuilder-StyledInputContent","data-target":"query-builder.styledInputContent"}),(0,a.jsxs)("div",{className:"QueryBuilder-InputWrapper",style:{height:"30px"},children:[(0,a.jsx)("div",{"aria-hidden":"true",className:"QueryBuilder-Sizer","data-target":"query-builder.sizer"}),(0,a.jsx)("input",{id:k,"data-testid":j,placeholder:r,ref:t,value:c,onKeyPress:g,onKeyDown:y,onChange:P,name:`${e}-inputname`,autoComplete:"off",spellCheck:"false",className:"FormControl-input QueryBuilder-Input FormControl-medium","data-target":"query-builder.input","data-action":"input:query-builder#inputChange blur:query-builder#inputBlur keydown:query-builder#inputKeydown focus:query-builder#inputFocus",style:{height:"30px"},"aria-labelledby":S})]})]}),(0,a.jsx)("span",{className:"sr-only",id:`${e}-clear`,children:"Clear"}),(0,a.jsx)(d.h,{type:"button",id:`${e}-clear-button`,"aria-labelledby":`${e}-clear ${S}`,"data-target":"query-builder.clearButton","data-action":"click:query-builder#clear focus:query-builder#clearButtonFocus blur:query-builder#clearButtonBlur","align-items":"center","border-radius":1,size:"small",sx:{mr:"1px",px:2,py:0,display:"flex",color:"muted",borderRadius:"0 4px 4px 0"},hidden:h,variant:"invisible",...(0,i.f)("clear-filters-query-builder"),icon:l.XCircleFillIcon})]}),f,(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsx)("div",{className:"Overlay-backdrop--anchor right-0 left-0",style:{marginTop:"4px"},children:(0,a.jsx)("div",{className:"Overlay Overlay-whenNarrow Overlay--height-auto",hidden:!0,"data-target":"query-builder.overlay",children:(0,a.jsx)("div",{className:"Overlay-body Overlay-body--paddingNone",children:(0,a.jsx)("ul",{role:"listbox",className:"ActionListWrap QueryBuilder-ListWrap","aria-label":"Suggestions","data-action":"combobox-commit:query-builder#comboboxCommit mousedown:query-builder#resultsMousedown","data-target":"query-builder.resultsList","data-persist-list":!1,id:`${e}-results`,...(0,i.f)("query-builder-results")})})})})})]}),(0,a.jsx)("div",{"data-target":"query-builder.screenReaderFeedback","aria-live":"polite","aria-atomic":"true",className:"sr-only"})]})})}let p={apps:l.AppsIcon,archived:l.ArchiveIcon,bookmark:l.BookmarkIcon,branch:l.GitBranchIcon,calendar:l.CalendarIcon,circle:l.DotFillIcon,code:l.CodeIcon,comment:l.CommentIcon,default:l.FilterIcon,discussion:l.CommentDiscussionIcon,draft:l.IssueDraftIcon,"file-code":l.FileIcon,filter:l.FilterIcon,forbidden:l.NoEntryIcon,history:l.HistoryIcon,issue:l.IssueOpenedIcon,issueClosed:l.IssueClosedIcon,iterations:l.IterationsIcon,mention:l.MentionIcon,merged:l.GitMergeIcon,milestone:l.MilestoneIcon,no:l.CircleSlashIcon,not:l.NoEntryIcon,organization:l.OrganizationIcon,pencil:l.PencilIcon,person:l.PersonIcon,"plus-circle":l.PlusCircleIcon,project:l.TableIcon,pullRequest:l.GitPullRequestIcon,question:l.QuestionIcon,reaction:l.SmileyIcon,repo:l.RepoIcon,search:l.SearchIcon,"single-select":l.SingleSelectIcon,sort:l.SortDescIcon,tag:l.TagIcon,team:l.PeopleIcon,trash:l.TrashIcon},f=(0,a.jsx)(a.Fragment,{children:Object.entries(p).map(([e,t])=>{let r=`${e}-icon`,n=(0,c.Dq)((0,a.jsx)(o.Z,{icon:t,"aria-hidden":!1}));return(0,a.jsx)("template",{id:r,dangerouslySetInnerHTML:{__html:n}},r)})});try{m.displayName||(m.displayName="QueryBuilder")}catch{}},96463:(e,t,r)=>{r.d(t,{S:()=>ErrorBoundary});var a=r(48055),n=r(90320),i=r(58081);let ErrorBoundary=class ErrorBoundary extends i.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e){"function"==typeof this.props.onError?this.props.onError(e):setTimeout(()=>{throw e})}render(){return this.state.error?void 0===this.props.fallback?(0,a.jsx)(n.m,{type:"httpError"}):this.props.fallback:this.props.children}constructor(e){super(e),this.state={error:null}}}},90320:(e,t,r)=>{r.d(t,{m:()=>s});var a=r(48055),n=r(75308),i=r(42483);let l={404:"Didn\u2019t find anything here!",500:"Looks like something went wrong!"};function s({httpStatus:e,type:t}){let r="fetchError"===t?"Looks like network is down!":l[e||500];return(0,a.jsxs)(n.Z,{as:"h1",tabIndex:-1,sx:{display:"flex",flexDirection:"column",minWidth:"100%",minHeight:"100%",alignItems:"center",justifyContent:"center"},children:["Error",e?(0,a.jsx)(i.Z,{sx:{fontSize:"144px",fontWeight:"bold",lineHeight:1},children:e}):null,(0,a.jsx)(i.Z,{sx:{fontSize:4,pt:2},children:r})]})}try{s.displayName||(s.displayName="ErrorPage")}catch{}},20171:(e,t,r)=>{r.d(t,{O:()=>l});var a=r(48055),n=r(58081),i=r(12008);let l=({children:e,features:t})=>{let r=(0,n.useMemo)(()=>({enabled_features:t}),[t]);return(0,a.jsx)(i.E.Provider,{value:r,children:e})};try{l.displayName||(l.displayName="FeatureFlagProvider")}catch{}},31511:(e,t,r)=>{r.d(t,{h:()=>f});var a=r(48055),n=r(58081),i=r(16545),l=r(8677),s=r(42483),o=r(50919),d=r(85529),u=r(93931),c=r(69889);let m=(0,n.memo)(({children:e,initialFocusRef:t,returnFocusRef:r,open:m,onClose:f,onKeyDown:h,topOffset:g=0,width:y,"aria-label":x,"aria-labelledby":b,defaultCloseElement:v="button"})=>{let w=(0,n.useMemo)(()=>Array.isArray(y)?y:"string"==typeof y?["100%","",y]:["100%"],[y]),j=(0,n.useRef)(null),[C,I]=(0,n.useState)(null===j.current||!m),{initialFocusRef:S}=(0,i.P)({initialFocusRef:t,containerRef:j,disabled:C}),k=window.matchMedia("(prefers-reduced-motion: reduce)").matches,[T,N]=(0,n.useState)(m),[_,R]=(0,n.useState)(m),[P,D]=(0,c.R)(e,{heading:p});(0,n.useEffect)(()=>{let e;return m?(N(!0),e=setTimeout(()=>R(!0))):(R(!1),e=setTimeout(()=>N(!1),200)),()=>clearTimeout(e)},[m]);let E=(0,n.useCallback)(e=>{let t=e.target;(t.id===u.hk||t.id===u.qG)&&(I(!0),window.setTimeout(()=>t.focus()))},[]),A=(0,n.useCallback)(e=>{let t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&e.shiftKey&&"C"===e.key){let e=document.querySelector(`#${u.hk}, #${u.qG}`);e&&(I(!0),window.setTimeout(()=>e.focus()))}h&&h(e)},[h]);(0,n.useEffect)(()=>(window.addEventListener("click",E),()=>{window.removeEventListener("click",E)}),[E]),(0,n.useEffect)(()=>{let e=document.body.style.overflow||"";if("hidden"!==e)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[]);let M=(0,n.useCallback)(()=>{C&&I(!m)},[C,m]);return T?(0,a.jsxs)(l.ZP,{initialFocusRef:S,returnFocusRef:r,onKeyDown:A,onEscape:f,onClickOutside:()=>{},ref:j,role:"dialog","aria-modal":!0,"aria-label":x,"aria-labelledby":b,sx:{zIndex:2,height:"1px",bg:"none"},onFocus:M,children:[(0,a.jsx)(s.Z,{sx:{backgroundColor:"var(--overlay-backdrop-bgColor, var(--color-overlay-backdrop))",top:g,right:0,bottom:0,left:0,borderRadius:0,position:"fixed",border:"none",transitionDuration:"200ms",transitionProperty:"opacity",transitionTimingFunction:"animation.easeOutCubic",opacity:_?1:0,cursor:"default",width:"100%"},onClick:f,as:"overlay"===v?"button":void 0,"aria-label":"overlay"===v?"Close":void 0}),(0,a.jsxs)(s.Z,{sx:{borderRadius:"12px 0 0 12px",position:"fixed",top:g,right:0,bottom:0,width:w,minWidth:"300px",maxWidth:"unset",overflow:"auto",bg:"canvas.default",boxShadow:"shadow.large",transitionDuration:"200ms",transitionProperty:"opacity, transform",transitionTimingFunction:"animation.easeOutCubic",transform:_||k?"translateX(0%)":"translateX(35%)",opacity:_?1:0},children:[(0,a.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,a.jsx)(s.Z,{children:P.heading}),(0,a.jsx)(s.Z,{children:"button"===v&&(0,a.jsx)(o.h,{variant:"invisible",icon:d.XIcon,"aria-label":"Close",onClick:f,sx:{float:"right",m:3}})})]}),D]})]}):null});m.displayName="SidePanel";let p=({children:e})=>(0,a.jsx)(s.Z,{children:e}),f=Object.assign(m,{Heading:p});try{p.displayName||(p.displayName="Heading")}catch{}try{f.displayName||(f.displayName="SidePanel")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_primer_octicons-react_dist_index_esm_js-node_modules_primer_react_lib-es-541a38","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_TextInput_TextInput_js","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js-node_modules_primer_react_-5b2420","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_react_lib-esm_SelectPanel_SelectPanel_js","vendors-node_modules_primer_react_lib-esm_Link_Link_js-node_modules_primer_react_lib-esm_Rela-a903d7","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_react-relay_index_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-fd5530","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_primer_react_lib-esm_Heading_Heading_js-node_modules_primer_react_lib-es-d8d6f0","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-864296","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_primer_react_lib-esm_Popover_Popover_js-node_modules_date-fns_difference-a582b2","vendors-node_modules_chartjs-adapter-date-fns_dist_chartjs-adapter-date-fns_esm_js","vendors-node_modules_primer_react_lib-esm_Overlay_Overlay_js-node_modules_primer_react_lib-es-e94f82","vendors-node_modules_github_combobox-nav_dist_index_js-node_modules_github_markdown-toolbar-e-820fc0","vendors-node_modules_primer_react_lib-esm_Button_LinkButton_js-node_modules_primer_react_lib--a52ff3","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js-node_modules_tanstack_re-ee19e4","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-8b7697","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_primer_react_lib-esm_A-94d06d","vendors-node_modules_highcharts-react-official_dist_highcharts-react_min_js-node_modules_high-d2543a","vendors-node_modules_primer_react_lib-esm_PageHeader_PageHeader_js-node_modules_primer_react_-a29f12","vendors-node_modules_primer_react_lib-esm_ProgressBar_index_js-node_modules_primer_react_lib--8fc191","vendors-node_modules_allex_crc32_lib_crc32_esm_js-node_modules_primer_react_lib-esm_Breadcrum-13caef","ui_packages_list-view_src_ListItem_ListItem_tsx-ui_packages_list-view_src_ListItem_Title_tsx--68e5b9","ui_packages_relay-environment_relay-environment_ts","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_date-picker_date-picker_ts","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_filter_providers_index_ts","ui_packages_insights-charts_src_index_ts","ui_packages_drag-and-drop_drag-and-drop_ts","ui_packages_analytics-provider_analytics-provider_ts-ui_packages_commenting_hooks_use-markdow-bb8558","ui_packages_query-builder-element_query-builder-element_ts","ui_packages_commenting_hooks_use-markdown-styles_ts-ui_packages_commenting_hooks_use-meta-and-58b89c","ui_packages_use-client-value_use-client-value_ts-ui_packages_nested-list-view_src_CompletionP-734263","ui_packages_issue-viewer_components_IssueViewerLoader_ts-ui_packages_query-builder_constants_-235af9"],()=>t(12104)),e.O()}]);
//# sourceMappingURL=memex-50a354c46e85.js.map